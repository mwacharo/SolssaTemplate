import{E as F,r as x,j as A,X as L,s as U,k as $,c as q,o as T,w as R,a as e,d as D,e as B,t as d,u as m,A as c,U as E,B as b,C as V,F as z,g as J,n as I,y as K}from"./app-BemHuoOP.js";import{_ as H}from"./AppLayout-DSPTznFl.js";import{n as C}from"./toast-qsvDr6ZA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./webrtc-BelH13jI.js";import"./africastalking-BiZ7jcWi.js";import"./IncomingCallDialog-DSGClez-.js";/* empty css                                                                           */const O=F("tickets",()=>{const n=x([{id:1,ticketNumber:"TK-2025-001",clientName:"John Doe",clientPhone:"+1234567890",clientEmail:"john@example.com",subject:"Payment Processing Issue",description:"Unable to process payment through the online portal",priority:"high",status:"open",category:"billing",assignedTo:"Agent Smith",createdAt:new Date("2025-07-19T10:30:00"),updatedAt:new Date("2025-07-19T10:30:00"),callDuration:"5:32",resolution:null,notes:[]},{id:2,ticketNumber:"TK-2025-002",clientName:"Jane Smith",clientPhone:"+1234567891",clientEmail:"jane@example.com",subject:"Technical Support Request",description:"Website not loading properly on mobile device",priority:"medium",status:"in-progress",category:"technical",assignedTo:"Agent Jones",createdAt:new Date("2025-07-19T09:15:00"),updatedAt:new Date("2025-07-19T14:20:00"),callDuration:"8:45",resolution:null,notes:[{id:1,content:"Initial troubleshooting completed",createdBy:"Agent Jones",createdAt:new Date("2025-07-19T14:20:00")}]}]),p=x("all"),u=x(""),f=A(()=>{let o=n.value;if(p.value!=="all"&&(o=o.filter(r=>r.status===p.value)),u.value){const r=u.value.toLowerCase();o=o.filter(a=>a.clientName.toLowerCase().includes(r)||a.subject.toLowerCase().includes(r)||a.ticketNumber.toLowerCase().includes(r)||a.clientPhone.includes(r))}return o.sort((r,a)=>new Date(a.createdAt)-new Date(r.createdAt))}),h=A(()=>({total:n.value.length,open:n.value.filter(o=>o.status==="open").length,inProgress:n.value.filter(o=>o.status==="in-progress").length,resolved:n.value.filter(o=>o.status==="resolved").length,closed:n.value.filter(o=>o.status==="closed").length})),l=A(()=>({high:n.value.filter(o=>o.priority==="high").length,medium:n.value.filter(o=>o.priority==="medium").length,low:n.value.filter(o=>o.priority==="low").length})),_=o=>{const r={id:Date.now(),ticketNumber:N(),...o,status:"open",createdAt:new Date,updatedAt:new Date,notes:[]};return n.value.unshift(r),r},y=(o,r)=>{const a=n.value.findIndex(g=>g.id===o);a!==-1&&(n.value[a]={...n.value[a],...r,updatedAt:new Date})},v=(o,r,a)=>{const g=n.value.find(k=>k.id===o);if(g){const k={id:Date.now(),content:r,createdBy:a,createdAt:new Date};g.notes.push(k),g.updatedAt=new Date}},w=o=>{const r=n.value.findIndex(a=>a.id===o);r!==-1&&n.value.splice(r,1)},j=o=>{p.value=o},S=o=>{u.value=o},N=()=>{const o=new Date().getFullYear(),r=n.value.length+1;return`TK-${o}-${r.toString().padStart(3,"0")}`};return{tickets:n,currentFilter:p,searchQuery:u,filteredTickets:f,ticketStats:h,priorityStats:l,addTicket:_,updateTicket:y,addNote:v,deleteTicket:w,setFilter:j,setSearch:S,getTicketById:o=>n.value.find(r=>r.id===parseInt(o))}}),Q={class:"p-6 space-y-6"},G={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},W={class:"bg-white rounded-lg shadow p-6 border-l-4 border-blue-500"},X={class:"flex items-center justify-between"},Y={class:"text-2xl font-bold text-gray-900"},Z={class:"bg-white rounded-lg shadow p-6 border-l-4 border-yellow-500"},ee={class:"flex items-center justify-between"},te={class:"text-2xl font-bold text-gray-900"},se={class:"bg-white rounded-lg shadow p-6 border-l-4 border-orange-500"},oe={class:"flex items-center justify-between"},le={class:"text-2xl font-bold text-gray-900"},re={class:"bg-white rounded-lg shadow p-6 border-l-4 border-green-500"},ne={class:"flex items-center justify-between"},ie={class:"text-2xl font-bold text-gray-900"},ae={class:"bg-white rounded-lg shadow p-6"},de={class:"flex flex-col md:flex-row gap-4 items-center justify-between"},ue={class:"flex flex-1 gap-4"},ce={class:"flex-1"},pe={class:"bg-white rounded-lg shadow overflow-hidden"},ge={class:"overflow-x-auto"},me={class:"min-w-full divide-y divide-gray-200"},be={class:"bg-white divide-y divide-gray-200"},xe={class:"px-6 py-4 whitespace-nowrap"},fe={class:"text-sm font-medium text-gray-900"},ye={class:"text-sm text-gray-500"},ve={class:"px-6 py-4 whitespace-nowrap"},we={class:"text-sm font-medium text-gray-900"},he={class:"text-sm text-gray-500"},ke={class:"text-sm text-gray-500"},Te={class:"px-6 py-4"},_e={class:"text-sm text-gray-900"},De={class:"text-sm text-gray-500 truncate max-w-xs"},Ce={class:"px-6 py-4 whitespace-nowrap"},je={class:"px-6 py-4 whitespace-nowrap"},Se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ne={class:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"},Ae=["onClick"],Ve=["onClick"],Pe={key:0},Ue={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Be={class:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Ee={class:"px-6 py-4 border-b border-gray-200"},Ie={class:"text-lg font-semibold text-gray-900"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Fe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Le={class:"flex justify-end space-x-3 pt-4"},$e={type:"submit",class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},Ge={__name:"Tickets",setup(n){const p=O(),u=x(!1),f=x(!1),h=x(null),l=x({clientName:"",clientPhone:"",clientEmail:"",subject:"",description:"",priority:"medium",category:"general",assignedTo:"",callDuration:""}),{filteredTickets:_,ticketStats:y,currentFilter:v,searchQuery:w}=L(p),j=i=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(i)),S=i=>i.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),N=i=>({high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"})[i]||"bg-gray-100 text-gray-800",P=i=>({open:"bg-yellow-100 text-yellow-800","in-progress":"bg-orange-100 text-orange-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"})[i]||"bg-gray-100 text-gray-800",o=i=>{console.log("Viewing ticket:",i.id),C(`Viewing ticket: ${i.ticketNumber}`,"info")},r=i=>{h.value=i.id,l.value={...i},f.value=!0},a=()=>{try{u.value?(p.addTicket(l.value),C("Ticket created successfully!","success")):f.value&&(p.updateTicket(h.value,l.value),C("Ticket updated successfully!","success")),g()}catch(i){C("Error processing ticket","error"),console.error(i)}},g=()=>{u.value=!1,f.value=!1,h.value=null,k()},k=()=>{l.value={clientName:"",clientPhone:"",clientEmail:"",subject:"",description:"",priority:"medium",category:"general",assignedTo:"",callDuration:""}};return U(w,i=>{p.setSearch(i)}),U(v,i=>{p.setFilter(i)}),$(()=>{console.log("Dashboard mounted")}),(i,t)=>(T(),q(H,{title:"Ticket Management Dashboard"},{default:R(()=>[e("div",Q,[e("div",G,[e("div",W,[e("div",X,[e("div",null,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Tickets",-1)),e("p",Y,d(m(y).total),1)]),t[13]||(t[13]=e("div",{class:"p-3 rounded-full bg-blue-100"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))])]),e("div",Z,[e("div",ee,[e("div",null,[t[14]||(t[14]=e("p",{class:"text-sm font-medium text-gray-600"},"Open Tickets",-1)),e("p",te,d(m(y).open),1)]),t[15]||(t[15]=e("div",{class:"p-3 rounded-full bg-yellow-100"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),e("div",se,[e("div",oe,[e("div",null,[t[16]||(t[16]=e("p",{class:"text-sm font-medium text-gray-600"},"In Progress",-1)),e("p",le,d(m(y).inProgress),1)]),t[17]||(t[17]=e("div",{class:"p-3 rounded-full bg-orange-100"},[e("svg",{class:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1))])]),e("div",re,[e("div",ne,[e("div",null,[t[18]||(t[18]=e("p",{class:"text-sm font-medium text-gray-600"},"Resolved",-1)),e("p",ie,d(m(y).resolved),1)]),t[19]||(t[19]=e("div",{class:"p-3 rounded-full bg-green-100"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1))])])]),e("div",ae,[e("div",de,[e("div",ue,[e("div",ce,[c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>E(w)?w.value=s:null),type:"text",placeholder:"Search tickets by name, number, or phone...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,m(w)]])]),c(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>E(v)?v.value=s:null),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[20]||(t[20]=[e("option",{value:"all"},"All Status",-1),e("option",{value:"open"},"Open",-1),e("option",{value:"in-progress"},"In Progress",-1),e("option",{value:"resolved"},"Resolved",-1),e("option",{value:"closed"},"Closed",-1)]),512),[[V,m(v)]])]),e("button",{onClick:t[2]||(t[2]=s=>u.value=!0),class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors"}," New Ticket ")])]),e("div",pe,[t[23]||(t[23]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-semibold text-gray-900"},"Recent Tickets")],-1)),e("div",ge,[e("table",me,[t[22]||(t[22]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ticket "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Client Info "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Subject "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Priority "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Assigned To "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",be,[(T(!0),D(z,null,J(m(_),s=>(T(),D("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",xe,[e("div",null,[e("div",fe,d(s.ticketNumber),1),e("div",ye,d(j(s.createdAt)),1)])]),e("td",ve,[e("div",null,[e("div",we,d(s.clientName),1),e("div",he,d(s.clientPhone),1),e("div",ke,"Call: "+d(s.callDuration),1)])]),e("td",Te,[e("div",_e,d(s.subject),1),e("div",De,d(s.description),1)]),e("td",Ce,[e("span",{class:I([N(s.priority),"px-2 py-1 text-xs font-medium rounded-full"])},d(s.priority.toUpperCase()),3)]),e("td",je,[e("span",{class:I([P(s.status),"px-2 py-1 text-xs font-medium rounded-full"])},d(S(s.status)),3)]),e("td",Se,d(s.assignedTo),1),e("td",Ne,[e("button",{onClick:M=>o(s),class:"text-blue-600 hover:text-blue-900"}," View ",8,Ae),e("button",{onClick:M=>r(s),class:"text-green-600 hover:text-green-900"}," Edit ",8,Ve)])]))),128)),m(_).length===0?(T(),D("tr",Pe,t[21]||(t[21]=[e("td",{colspan:"7",class:"px-6 py-8 text-center text-gray-500"}," No tickets found matching your criteria ",-1)]))):B("",!0)])])])]),u.value||f.value?(T(),D("div",Ue,[e("div",Be,[e("div",Ee,[e("h3",Ie,d(u.value?"Create New Ticket":"Edit Ticket"),1)]),e("form",{onSubmit:K(a,["prevent"]),class:"p-6 space-y-4"},[e("div",Me,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Client Name *",-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.clientName=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,l.value.clientName]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Phone Number *",-1)),c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.clientPhone=s),type:"tel",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,l.value.clientPhone]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.clientEmail=s),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,l.value.clientEmail]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Call Duration",-1)),c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.callDuration=s),type:"text",placeholder:"e.g., 5:30",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,l.value.callDuration]])])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Subject *",-1)),c(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.value.subject=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,l.value.subject]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description *",-1)),c(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.value.description=s),rows:"4",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,l.value.description]])]),e("div",Fe,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Priority",-1)),c(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.value.priority=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[30]||(t[30]=[e("option",{value:"low"},"Low",-1),e("option",{value:"medium"},"Medium",-1),e("option",{value:"high"},"High",-1)]),512),[[V,l.value.priority]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),c(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>l.value.category=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[32]||(t[32]=[e("option",{value:"technical"},"Technical",-1),e("option",{value:"billing"},"Billing",-1),e("option",{value:"support"},"Support",-1),e("option",{value:"general"},"General",-1)]),512),[[V,l.value.category]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned To",-1)),c(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>l.value.assignedTo=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,l.value.assignedTo]])])]),e("div",Le,[e("button",{type:"button",onClick:g,class:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors"}," Cancel "),e("button",$e,d(u.value?"Create Ticket":"Update Ticket"),1)])],32)])])):B("",!0)])]),_:1}))}};export{Ge as default};
