import{i as R,r as p,j as Ae,k as Ue,c as Te,o as i,w as De,a as e,b as qe,d as u,e as S,f as E,A as m,B as x,F as _,g as h,t as n,C as F,n as Le,y as le}from"./app-BvUOPlBA.js";import{_ as Ne}from"./AppLayout-Cf9rNO6I.js";import{u as Re}from"./categoryStore-BH-fOUtt.js";import{u as Fe}from"./clientStore-DCnOzjRd.js";import Oe from"./StockEditDialog-BOUY4DM3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./webrtc-C0Ed2ATS.js";import"./africastalking-BXekZu0r.js";import"./IncomingCallDialog-CJ8ZqoED.js";/* empty css                                                                           */const Be={class:"container mx-auto p-6 bg-gray-50 min-h-screen"},Ie={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},$e={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-6"},He={class:"lg:col-span-1"},ze=["value"],Ke=["value"],Qe={class:"bg-white rounded-lg shadow-sm overflow-hidden"},Xe={class:"p-4 border-b border-gray-200"},Ye={class:"flex justify-between items-center"},Ge={class:"text-sm text-gray-600"},We={class:"overflow-x-auto"},Je={class:"w-full"},Ze={class:"bg-white divide-y divide-gray-200"},et={class:"px-4 py-4"},tt={class:"flex flex-col"},st={class:"bg-red-500 text-white px-2 py-1 rounded text-xs font-medium mb-1 inline-block w-fit"},ot={class:"text-sm text-gray-600"},lt={class:"px-4 py-4 text-sm text-gray-900"},rt={class:"px-4 py-4"},at={class:"flex items-center gap-3"},nt=["src","alt"],it={class:"font-medium text-gray-900"},dt={class:"text-sm text-gray-500"},ut={class:"px-4 py-4"},ct={class:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm"},pt={class:"px-4 py-4 text-sm text-gray-900"},mt={class:"px-4 py-4 text-center"},vt={class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm font-medium"},gt={class:"text-xs text-gray-500 mt-1 flex items-center justify-center gap-1"},ft={class:"px-4 py-4 text-center"},xt={class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm font-medium"},yt={class:"text-xs text-gray-500 mt-1 flex items-center justify-center gap-1"},bt={class:"px-4 py-4 text-center"},_t={class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm font-medium"},ht={class:"text-xs text-gray-500 mt-1 flex items-center justify-center gap-1"},kt={class:"px-4 py-4 text-center text-sm font-medium"},wt={class:"px-4 py-4 text-sm font-medium"},Ct={class:"px-4 py-4"},St=["onClick"],Et={class:"px-4 py-4"},Pt={class:"flex items-center gap-2"},jt=["onClick"],Mt=["onClick"],Vt=["onClick"],At=["onClick"],Ut=["onClick"],Tt={key:0},Dt={class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},qt={class:"flex-1 flex justify-between sm:hidden"},Lt=["disabled"],Nt=["disabled"],Rt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ft={class:"text-sm text-gray-700"},Ot={class:"font-medium"},Bt={class:"font-medium"},It={class:"font-medium"},$t={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Ht=["disabled"],zt=["onClick"],Kt=["disabled"],Qt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Xt={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white"},Yt={class:"mt-3"},Gt={class:"flex justify-between items-center mb-4"},Wt={class:"text-lg font-medium text-gray-900"},Jt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Zt=["value"],es=["value"],ts={class:"md:col-span-2"},ss={class:"md:col-span-2"},os={class:"md:col-span-2"},ls={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},rs={class:"flex flex-wrap gap-2 mt-2"},as=["src"],ns={key:0,class:"text-red-600 text-xs mt-1"},is={class:"flex flex-wrap gap-2 mt-2"},ds=["src"],us={key:0,class:"text-red-600 text-xs mt-1"},cs={class:"mt-4"},ps={class:"grid grid-cols-1 md:grid-cols-3 gap-2"},ms=["onUpdate:modelValue"],vs={key:0,class:"text-red-600 text-xs mt-1"},gs=["onUpdate:modelValue"],fs={key:0,class:"text-red-600 text-xs mt-1"},xs=["onUpdate:modelValue"],ys=["onClick"],bs={key:0,class:"mt-4"},_s={class:"min-w-full divide-y divide-gray-200 border rounded"},hs={class:"bg-white divide-y divide-gray-200"},ks={class:"px-4 py-2 text-sm text-gray-900"},ws={class:"px-4 py-2 text-sm text-gray-900"},Cs={class:"px-4 py-2 text-sm text-gray-900"},Ss={class:"flex justify-end space-x-3 mt-6"},Es=["disabled"],Ps={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},js={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-md shadow-lg rounded-md bg-white"},Ms={class:"mt-3"},Vs={class:"text-sm text-gray-900"},As={class:"text-sm text-gray-900"},Us={class:"flex justify-end space-x-3 mt-6"},Ts=["disabled"],zs={__name:"Index",setup(Ds,{expose:re}){R.defaults.withCredentials=!0,R.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const Y=window.location.origin,C=R.create({baseURL:`${Y}/api/v1`,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});C.interceptors.request.use(o=>{var r;const t=(r=document.head.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content");return t&&(o.headers["X-CSRF-TOKEN"]=t),o}),C.interceptors.response.use(o=>o,o=>{var t;return((t=o.response)==null?void 0:t.status)===419&&window.location.reload(),Promise.reject(o)});const M=p([]),q=p([]),V=p([]),A=p(""),U=p(!1),O=p(!1),B=p(!1),G=p(null),P=Re(),j=Fe(),L=p(!1),W=p(!1),k=p(!1),I=p(null),N=p(!1),w=p({}),ae=p([]),ne=o=>{var t,r,s,l;w.value={id:o.id,name:o.product_name,warehouse_id:((r=(t=o.stocks)==null?void 0:t[0])==null?void 0:r.warehouse_id)||null,current_stock:D(o),committed_stock:$(o),defected_stock:H(o),historical_stock:((l=(s=o.stocks)==null?void 0:s[0])==null?void 0:l.historical_stock)||[]},N.value=!0},g=p({date:"",vendor:"",category:""}),ie=o=>{const t=o.target.files;a.value.images=[];for(let r of t){const s=new FileReader;s.onload=l=>{a.value.images.push({file:r,preview:l.target.result})},s.readAsDataURL(r)}},de=o=>{const t=o.target.files;a.value.videos=[];for(let r of t){const s=new FileReader;s.onload=l=>{a.value.videos.push({file:r,preview:l.target.result})},s.readAsDataURL(r)}},d=p({current_page:1,per_page:15,total:0,last_page:1,from:1,to:15,prev_page_url:null,next_page_url:null}),a=p({sku:"",product_name:"",description:"",category_id:"",vendor_id:"",initial_quantity:0,stock_threshold:0,base_price:0}),v=p({}),b=p({product:null,quantity:0,reason:""}),T=p({}),ue=Ae(()=>{const o=d.value.current_page,t=d.value.last_page,r=[];for(let s=Math.max(1,o-2);s<=Math.min(t,o+2);s++)r.push(s);return r}),ce=o=>{var r,s;const t=((r=o.media)==null?void 0:r.find(l=>l.media_type==="image"&&l.is_primary))||((s=o.media)==null?void 0:s.find(l=>l.media_type==="image"));return(t==null?void 0:t.url)||"/api/placeholder/50/50"},pe=o=>{const t=V.value.find(r=>r.id===o);return(t==null?void 0:t.name)||"Uncategorized"},D=o=>{var t,r;return((r=(t=o.stocks)==null?void 0:t[0])==null?void 0:r.current_stock)||0},$=o=>{var t,r;return((r=(t=o.stocks)==null?void 0:t[0])==null?void 0:r.committed_stock)||0},H=o=>{var t,r;return((r=(t=o.stocks)==null?void 0:t[0])==null?void 0:r.defected_stock)||0},J=o=>{var t,r;return((r=(t=o.stocks)==null?void 0:t[0])==null?void 0:r.stock_threshold)||0},Z=o=>{if(o.prices&&o.prices.length>0){const t=o.prices.find(r=>r.is_active);return Number(((t==null?void 0:t.base_price)??o.prices[0].base_price)||0)}return Number(o.base_price||0)};let ee=null;const me=()=>{clearTimeout(ee),ee=setTimeout(()=>{y(1)},500)},ve=()=>{N.value=!1,w.value={}},ge=o=>{N.value=!1,y(d.value.current_page)},y=async(o=1)=>{var t;try{U.value=!0;const r={page:o,per_page:d.value.per_page};A.value&&(r.search=A.value),g.value.vendor&&(r.vendor_id=g.value.vendor),g.value.category&&(r.category_id=g.value.category),g.value.date&&(r.created_date=g.value.date);const l=(await C.get("/products",{params:r})).data;l.data&&Array.isArray(l.data)?(M.value=l.data,d.value={current_page:l.current_page||1,per_page:l.per_page||15,total:l.total||l.data.length,last_page:l.last_page||1,from:l.from||1,to:l.to||l.data.length,prev_page_url:l.prev_page_url,next_page_url:l.next_page_url}):Array.isArray(l)&&(M.value=l,d.value={current_page:1,per_page:l.length,total:l.length,last_page:1,from:1,to:l.length,prev_page_url:null,next_page_url:null})}catch(r){if(console.error("Error fetching products:",r),r.response){const s=r.response.status,l=((t=r.response.data)==null?void 0:t.message)||"Failed to load products";s===401?alert("Please log in to continue"):s===403?alert("You do not have permission to view products"):s>=500?alert("Server error. Please try again later."):alert(l)}else r.request?alert("Network error. Please check your connection and try again."):alert("An unexpected error occurred")}finally{U.value=!1}},fe=async()=>{var o;try{(!j.vendors||j.vendors.length===0)&&await((o=j.fetchVendors)==null?void 0:o.call(j)),q.value=j.vendors||[]}catch(t){console.error("Error fetching vendors:",t);try{const r=await C.get("/vendors");q.value=r.data.data||r.data||[]}catch(r){console.error("Error fetching vendors from API:",r)}}},xe=async()=>{var o;try{(!P.categories||P.categories.length===0)&&await((o=P.fetchCategories)==null?void 0:o.call(P)),V.value=P.categories||[]}catch(t){console.error("Error fetching categories:",t);try{const r=await C.get("/categories");V.value=r.data.data||r.data||[]}catch(r){console.error("Error fetching categories from API:",r)}}},ye=()=>{y(1)},te=()=>{g.value={date:"",vendor:"",category:""},A.value="",y(1)},be=()=>{k.value=!1,v.value={},a.value={sku:"",product_name:"",description:"",category_id:"",vendor_id:"",initial_quantity:0,stock_threshold:0,base_price:0},L.value=!0},_e=o=>{var t;k.value=!0,I.value=o,v.value={},a.value={sku:o.sku,product_name:o.product_name,description:o.description,category_id:o.category_id,vendor_id:o.vendor_id||((t=o.vendor)==null?void 0:t.id),initial_quantity:D(o),stock_threshold:J(o),base_price:Z(o)},L.value=!0},he=o=>{console.log("Viewing product:",o)},z=()=>{L.value=!1,k.value=!1,I.value=null,v.value={},a.value={sku:"",product_name:"",description:"",category_id:"",vendor_id:"",initial_quantity:0,stock_threshold:0,base_price:0,images:[]}},ke=async()=>{var o,t,r,s;try{O.value=!0,v.value={};const l=new FormData;l.append("sku",a.value.sku),l.append("product_name",a.value.product_name),l.append("description",a.value.description),l.append("category_id",a.value.category_id),l.append("vendor_id",a.value.vendor_id),l.append("initial_quantity",a.value.initial_quantity),l.append("stock_threshold",a.value.stock_threshold),l.append("base_price",a.value.base_price),a.value.images&&a.value.images.length&&a.value.images.forEach(f=>{f!=null&&f.file?l.append("images[]",f.file):f!=null&&f.id&&l.append("existing_images[]",f.id)}),a.value.videos&&a.value.videos.length&&a.value.videos.forEach(f=>{f!=null&&f.file&&l.append("videos[]",f.file)}),a.value.price_offers&&a.value.price_offers.length&&l.append("price_offers",JSON.stringify(a.value.price_offers));const c=k.value?`/products/${I.value.id}`:"/products",Q=(k.value,"post");k.value&&l.append("_method","PUT");const X=await C.post(c,l,{headers:{"Content-Type":"multipart/form-data"}});alert(k.value?"Product updated successfully":"Product created successfully"),z(),y(d.value.current_page)}catch(l){if(console.error("Error saving product:",l),((o=l.response)==null?void 0:o.status)===422){v.value=l.response.data.errors||{};const c=(t=Object.values(v.value)[0])==null?void 0:t[0];c&&alert("Validation error: "+c)}else{const c=((s=(r=l.response)==null?void 0:r.data)==null?void 0:s.message)||"Error saving product";alert(c)}}finally{O.value=!1}},we=async o=>{var t,r;if(confirm(`Are you sure you want to delete "${o.product_name}"?`))try{G.value=o.id,await C.delete(`/products/${o.id}`),alert("Product deleted successfully"),y(d.value.current_page)}catch(s){console.error("Error deleting product:",s);const l=((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Error deleting product";alert(l)}finally{G.value=null}},Ce=o=>{console.log("Move stock for product:",o),alert("Stock movement feature will be implemented here")},K=()=>{W.value=!1,T.value={},b.value={product:null,quantity:0,reason:""}},Se=async()=>{var o,t,r,s;try{B.value=!0,T.value={},await C.put(`/products/${b.value.product.id}`,{current_stock:b.value.quantity,reason:b.value.reason,warehouse_id:1}),alert("Stock adjusted successfully"),K(),y(d.value.current_page)}catch(l){if(console.error("Error adjusting stock:",l),((o=l.response)==null?void 0:o.status)===422){T.value=l.response.data.errors||{};const c=(t=Object.values(T.value)[0])==null?void 0:t[0];c&&alert("Validation error: "+c)}else{const c=((s=(r=l.response)==null?void 0:r.data)==null?void 0:s.message)||"Error adjusting stock";alert(c)}}finally{B.value=!1}},se=()=>{d.value.prev_page_url&&d.value.current_page>1&&y(d.value.current_page-1)},oe=()=>{d.value.next_page_url&&d.value.current_page<d.value.last_page&&y(d.value.current_page+1)},Ee=o=>{o!==d.value.current_page&&y(o)},Pe=o=>{window.open(o,"_blank")},je=o=>o?new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",Me=o=>new Intl.NumberFormat("en-KE",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o||0),Ve=async()=>{try{await R.get(`${Y}/sanctum/csrf-cookie`)}catch(o){console.warn("Could not initialize CSRF token:",o)}};return Ue(async()=>{await Ve(),await Promise.all([xe(),fe(),y()])}),re({fetchProducts:y,resetFilters:te,formErrors:v,stockFormErrors:T,isLoading:U,isModalLoading:O,isStockLoading:B}),(o,t)=>(i(),Te(Ne,null,{default:De(()=>{var r;return[e("div",Be,[e("div",Ie,[e("div",{class:"flex justify-between items-center mb-6"},[t[16]||(t[16]=e("h1",{class:"text-2xl font-bold text-gray-800"},"Products Management",-1)),e("button",{onClick:be,class:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors flex items-center gap-2"},t[15]||(t[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),E(" Add a product ")]))]),e("div",$e,[e("div",He,[m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>A.value=s),type:"text",placeholder:"Search for a product (id, name, sku)",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:me},null,544),[[x,A.value]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"DATE",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>g.value.date=s),type:"date",placeholder:"Filter by date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[x,g.value.date]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"SELLER",-1)),m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>g.value.vendor=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[18]||(t[18]=e("option",{value:""},"Filter by seller",-1)),(i(!0),u(_,null,h(q.value,s=>(i(),u("option",{key:s.id,value:s.id},n(s.name),9,ze))),128))],512),[[F,g.value.vendor]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"CATEGORY",-1)),m(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>g.value.category=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[20]||(t[20]=e("option",{value:""},"Category",-1)),(i(!0),u(_,null,h(V.value,s=>(i(),u("option",{key:s.id,value:s.id},n(s.name),9,Ke))),128))],512),[[F,g.value.category]])])]),e("div",{class:"flex gap-4"},[e("button",{onClick:te,class:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center gap-2"},t[22]||(t[22]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),E(" Reset ")])),e("button",{onClick:ye,class:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors flex items-center gap-2"},t[23]||(t[23]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})],-1),E(" Filter ")]))])]),e("div",Qe,[e("div",Xe,[e("div",Ye,[t[24]||(t[24]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Products",-1)),e("span",Ge,n(d.value.from)+"-"+n(d.value.to)+" / "+n(d.value.total),1)])]),e("div",We,[e("table",Je,[t[39]||(t[39]=e("thead",{class:"bg-blue-600 text-white"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"ID/SKU"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"SELLER"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"PRODUCT"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"CATEGORY"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"DATE"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"CURRENT QUANTITY"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"COMMITTED STOCK"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"DEFECTED QUANTITY"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"STOCK THRESHOLD"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"PRICE"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"PRODUCT PAGE"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"ACTIONS")])],-1)),e("tbody",Ze,[(i(!0),u(_,null,h(M.value,s=>{var l;return i(),u("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",et,[e("div",tt,[e("span",st," pdt-"+n(s.id),1),e("span",ot,n(s.sku),1)])]),e("td",lt,n(((l=s.vendor)==null?void 0:l.name)||"N/A"),1),e("td",rt,[e("div",at,[e("img",{src:ce(s),alt:s.product_name,class:"w-12 h-12 rounded-lg object-cover"},null,8,nt),e("div",null,[e("div",it,n(s.product_name),1),e("div",dt,n(s.description),1)])])]),e("td",ut,[e("span",ct,n(pe(s.category_id)),1)]),e("td",pt,n(je(s.created_at)),1),e("td",mt,[e("span",vt," Total "+n(D(s)),1),e("div",gt,[t[25]||(t[25]=e("img",{src:"/api/placeholder/16/16",alt:"Flag",class:"w-4 h-4"},null,-1)),e("span",null,n(D(s)),1),t[26]||(t[26]=e("span",{class:"bg-red-500 text-white px-1 rounded text-xs"},"Nairobi",-1))])]),e("td",ft,[e("span",xt," Total "+n($(s)),1),e("div",yt,[t[27]||(t[27]=e("img",{src:"/api/placeholder/16/16",alt:"Flag",class:"w-4 h-4"},null,-1)),e("span",null,n($(s)),1),t[28]||(t[28]=e("span",{class:"bg-red-500 text-white px-1 rounded text-xs"},"Nairobi",-1))])]),e("td",bt,[e("span",_t," Total "+n(H(s)),1),e("div",ht,[t[29]||(t[29]=e("img",{src:"/api/placeholder/16/16",alt:"Flag",class:"w-4 h-4"},null,-1)),e("span",null,n(H(s)),1),t[30]||(t[30]=e("span",{class:"bg-red-500 text-white px-1 rounded text-xs"},"Nairobi",-1))])]),e("td",kt,n(J(s)),1),e("td",wt,[E(n(Me(Z(s)))+" ",1),t[31]||(t[31]=e("span",{class:"text-xs text-gray-500"},"KES",-1))]),e("td",Ct,[e("button",{onClick:c=>{var Q,X;return Pe(((X=(Q=s.images)==null?void 0:Q[0])==null?void 0:X.image_path)||"/storage/products/default.png")},class:"text-blue-600 hover:text-blue-800"},t[32]||(t[32]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)]),8,St)]),e("td",Et,[e("div",Pt,[e("button",{onClick:c=>_e(s),class:"text-blue-600 hover:text-blue-800 p-1",title:"Edit"},t[33]||(t[33]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,jt),e("button",{onClick:c=>he(s),class:"text-gray-600 hover:text-gray-800 p-1",title:"View"},t[34]||(t[34]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,Mt),e("button",{onClick:c=>we(s),class:"text-red-600 hover:text-red-800 p-1",title:"Delete"},t[35]||(t[35]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Vt),e("button",{onClick:c=>ne(s),class:"text-indigo-600 hover:text-indigo-800 p-1",title:"Edit Stock"},t[36]||(t[36]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v8m4-4H8"})],-1)]),8,At),e("button",{onClick:c=>Ce(s),class:"text-yellow-600 hover:text-yellow-800 p-1",title:"Move Stock"},t[37]||(t[37]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)]),8,Ut)])])])}),128)),!M.value||M.value.length===0?(i(),u("tr",Tt,t[38]||(t[38]=[e("td",{colspan:"12",class:"px-4 py-8 text-center text-gray-500"},[e("div",{class:"flex flex-col items-center gap-2"},[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2 2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-4.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 009.586 13H7"})]),e("span",null,"No products found")])],-1)]))):S("",!0)])])]),e("div",Dt,[e("div",qt,[e("button",{onClick:se,disabled:!d.value.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Lt),e("button",{onClick:oe,disabled:!d.value.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Nt)]),e("div",Rt,[e("div",null,[e("p",Ft,[t[40]||(t[40]=E(" Showing ")),e("span",Ot,n(d.value.from),1),t[41]||(t[41]=E(" to ")),e("span",Bt,n(d.value.to),1),t[42]||(t[42]=E(" of ")),e("span",It,n(d.value.total),1),t[43]||(t[43]=E(" results "))])]),e("div",null,[e("nav",$t,[e("button",{onClick:se,disabled:!d.value.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[44]||(t[44]=[e("span",{class:"sr-only"},"Previous",-1),e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]),8,Ht),(i(!0),u(_,null,h(ue.value,s=>(i(),u("button",{key:s,onClick:l=>Ee(s),class:Le(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s===d.value.current_page?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},n(s),11,zt))),128)),e("button",{onClick:oe,disabled:!d.value.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[45]||(t[45]=[e("span",{class:"sr-only"},"Next",-1),e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]),8,Kt)])])])])]),L.value?(i(),u("div",Qt,[e("div",Xt,[e("div",Yt,[e("div",Gt,[e("h3",Wt,n(k.value?"Edit Product":"Create New Product"),1),e("button",{onClick:z,class:"text-gray-400 hover:text-gray-600"},t[46]||(t[46]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:le(ke,["prevent"]),class:"space-y-4"},[e("div",Jt,[e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"SKU *",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.sku=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",placeholder:"Enter SKU"},null,512),[[x,a.value.sku]])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Name *",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.product_name=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",placeholder:"Enter product name"},null,512),[[x,a.value.product_name]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category *",-1)),m(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>a.value.category_id=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},[t[49]||(t[49]=e("option",{value:""},"Select Category",-1)),(i(!0),u(_,null,h(V.value,s=>(i(),u("option",{key:s.id,value:s.id},n(s.name),9,Zt))),128))],512),[[F,a.value.category_id]])]),e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Vendor *",-1)),m(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>a.value.vendor_id=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},[t[51]||(t[51]=e("option",{value:""},"Select Vendor",-1)),(i(!0),u(_,null,h(q.value,s=>(i(),u("option",{key:s.id,value:s.id},n(s.name),9,es))),128))],512),[[F,a.value.vendor_id]])]),e("div",ts,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Initial Stock Quantity",-1)),m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>a.value.initial_quantity=s),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter initial stock quantity"},null,512),[[x,a.value.initial_quantity]])]),e("div",ss,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Stock Threshold",-1)),m(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>a.value.stock_threshold=s),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter minimum stock threshold"},null,512),[[x,a.value.stock_threshold]])]),e("div",os,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price (KES)",-1)),m(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>a.value.base_price=s),type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter product price"},null,512),[[x,a.value.base_price]])])]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=s=>a.value.description=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter product description (optional)"},null,512),[[x,a.value.description]])]),e("div",ls,[e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Images",-1)),e("input",{type:"file",accept:"image/*",multiple:"",onChange:ie,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,32),e("div",rs,[(i(!0),u(_,null,h(a.value.images,(s,l)=>(i(),u("img",{key:l,src:s.preview,class:"w-16 h-16 object-cover rounded"},null,8,as))),128))]),v.value.images?(i(),u("div",ns,n(v.value.images[0]),1)):S("",!0)]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Videos",-1)),e("input",{type:"file",accept:"video/*",multiple:"",onChange:de,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,32),e("div",is,[(i(!0),u(_,null,h(a.value.videos,(s,l)=>(i(),u("video",{key:l,src:s.preview,controls:"",class:"w-24 h-16 rounded"},null,8,ds))),128))]),v.value.videos?(i(),u("div",us,n(v.value.videos[0]),1)):S("",!0)])]),e("div",cs,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price Offers",-1)),(i(!0),u(_,null,h(a.value.price_offers,(s,l)=>(i(),u("div",{key:l,class:"border rounded p-3 mb-2"},[e("div",ps,[e("div",null,[m(e("input",{"onUpdate:modelValue":c=>s.amount=c,type:"number",min:"0",step:"0.01",placeholder:"Amount",class:"w-full px-2 py-1 border rounded"},null,8,ms),[[x,s.amount]]),v.value[`price_offers.${l}.amount`]?(i(),u("div",vs,n(v.value[`price_offers.${l}.amount`][0]),1)):S("",!0)]),e("div",null,[m(e("input",{"onUpdate:modelValue":c=>s.currency=c,type:"text",placeholder:"Currency (e.g. KES)",class:"w-full px-2 py-1 border rounded"},null,8,gs),[[x,s.currency]]),v.value[`price_offers.${l}.currency`]?(i(),u("div",fs,n(v.value[`price_offers.${l}.currency`][0]),1)):S("",!0)]),e("div",null,[m(e("input",{"onUpdate:modelValue":c=>s.label=c,type:"text",placeholder:"Offer Label (e.g. Discount, Promo)",class:"w-full px-2 py-1 border rounded"},null,8,xs),[[x,s.label]])])]),e("button",{type:"button",onClick:c=>o.removePriceOffer(l),class:"text-red-600 text-xs mt-2"},"Remove Offer",8,ys)]))),128)),e("button",{type:"button",onClick:t[12]||(t[12]=(...s)=>o.addPriceOffer&&o.addPriceOffer(...s)),class:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs mt-2"}," Add Price Offer "),a.value.price_offers&&a.value.price_offers.length?(i(),u("div",bs,[e("table",_s,[t[59]||(t[59]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Amount"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Currency"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Label")])],-1)),e("tbody",hs,[(i(!0),u(_,null,h(a.value.price_offers,(s,l)=>(i(),u("tr",{key:l},[e("td",ks,n(s.amount),1),e("td",ws,n(s.currency),1),e("td",Cs,n(s.label),1)]))),128))])])])):S("",!0)]),e("div",Ss,[e("button",{type:"button",onClick:z,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:U.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"},n(k.value?"Update":"Create"),9,Es)])],32)])])])):S("",!0),W.value?(i(),u("div",Ps,[e("div",js,[e("div",Ms,[e("div",{class:"flex justify-between items-center mb-4"},[t[62]||(t[62]=e("h3",{class:"text-lg font-medium text-gray-900"},"Adjust Stock",-1)),e("button",{onClick:K,class:"text-gray-400 hover:text-gray-600"},t[61]||(t[61]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:le(Se,["prevent"]),class:"space-y-4"},[e("div",null,[t[63]||(t[63]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product",-1)),e("p",Vs,n((r=b.value.product)==null?void 0:r.product_name),1)]),e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Current Stock",-1)),e("p",As,n(D(b.value.product)),1)]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Adjustment Quantity *",-1)),m(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>b.value.quantity=s),type:"number",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",placeholder:"Enter quantity (positive to add, negative to subtract)"},null,512),[[x,b.value.quantity]])]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reason",-1)),m(e("textarea",{"onUpdate:modelValue":t[14]||(t[14]=s=>b.value.reason=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter reason for stock adjustment (optional)"},null,512),[[x,b.value.reason]])]),e("div",Us,[e("button",{type:"button",onClick:K,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:U.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"}," Adjust Stock ",8,Ts)])],32)])])])):S("",!0)]),qe(Oe,{isOpen:N.value,productId:w.value.id,productName:w.value.name,warehouseId:w.value.warehouse_id,currentStock:w.value.current_stock,committedStock:w.value.committed_stock,defectedStock:w.value.defected_stock,historicalStock:w.value.historical_stock,warehouses:ae.value,onClose:ve,onSave:ge},null,8,["isOpen","productId","productName","warehouseId","currentStock","committedStock","defectedStock","historicalStock","warehouses"])]}),_:1}))}};export{zs as default};
