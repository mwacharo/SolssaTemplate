import{E as Ke,r as u,j as T,i as B,s as Xe,k as Ye,l as i,d as L,o as k,b as l,w as a,a as c,f as s,y as Ze,e as ze,p as $e,q as Ne,t as f,F as re,g as de,c as ce,n as Ue}from"./app-xFXW2RJu.js";import{u as Qe}from"./webrtc-Bq-uw9MA.js";import{n as p}from"./toast-ChvTciTp.js";import{u as el}from"./contact-CBCHFHdZ.js";import{_ as ll}from"./_plugin-vue_export-helper-DlAUqK2U.js";const al=Ke("callCenter",()=>{const q=Qe(),Y=u(!1),Z=u(null),C=u(null),w=u(null),Q=u([]),y=u(!1),I=u(null),$=u(0),V=u(!1),b=u(!1),_=u(80),m=u(!1),N=u(null),P=u(""),D=u(null),h=u(null),M=u(!1),A=u({name:"",phone:"",email:"",company:""}),z=u({totalWaiting:0,averageWaitTime:0,agentsAvailable:0,agentsOnCall:0}),ee=u("available"),le=u([]),r=T(()=>q.afClient),te=T(()=>q.incomingCall),ve=T(()=>q.incomingCallDialog),G=T(()=>q.connection_active),me=T(()=>D.value!==null),fe=T(()=>{const n=Math.floor($.value/60),d=$.value%60;return`${n.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`});function U(n){console.log(`[Call Center]: ${n}`)}function pe(n){q.initializeAfClient(n)}function ne(n){try{if(console.log(`Calling ${n} from System...`),!r.value){console.log("ðŸ“¡ AfricasTalking unavailable â€” using API provider"),B.post("/api/v1/makecall",{phoneNumber:n}).then(d=>{p.success("Call started via API"),m.value=!0,w.value={id:d.data.callId||Date.now(),phoneNumber:n,direction:"outbound",status:"connecting",startTime:new Date}}).catch(d=>{console.error("âŒ API call failed:",d),p.error("Failed to start call")});return}r.value.call(n),console.log("Call initiated successfully."),p.success("Call started."),m.value=!0,w.value={id:Date.now(),phoneNumber:n,direction:"outbound",status:"connecting",startTime:new Date},r.value.on("afClienting",()=>{U("afClient is in progress (calling)...")}),r.value.on("callaccepted",()=>{console.log("callaccepted"),p.success("Call accepted!"),U("Call accepted (bridged between caller and callee)."),y.value=!0,I.value=Date.now(),ae()}),r.value.on("hangup",d=>{U(`Call hung up (${d.code} - ${d.reason}).`),p.error(`Call ended: ${d.reason}`),m.value=!1,E()}),r.value.on("mute",()=>{U("Call muted."),p.info("Call muted."),b.value=!0}),r.value.on("unmute",()=>{U("Call unmuted."),p.info("Call unmuted."),b.value=!1}),r.value.on("hold",()=>{U("Call on hold."),p.info("Call on hold."),V.value=!0}),r.value.on("unhold",()=>{U("Call resumed from hold."),p.info("Call resumed from hold."),V.value=!1})}catch(d){console.error("Call initiation error:",d),p.error("Call failed: "+d.message)}}function _e(){te.value&&r.value&&(r.value.answer(),y.value=!0,I.value=Date.now(),ae())}function ge(n){if(m.value=!0,N.value=n,console.log("Selected agent:",n),P.value=n.phone_number,console.log("Agent phone number:",P.value),!r.value){console.error("AfricasTalking client is not initialized."),p.error("AfricasTalking client is not initialized.");return}try{console.log("Attempting to call agent..."),r.value.call(P.value),console.log("Call initiated successfully."),p.success("Call initiated successfully."),w.value={id:Date.now(),phoneNumber:P.value,direction:"outbound",status:"connecting",startTime:new Date,agent:n}}catch(d){console.error("Error while calling agent:",d),p.error("Failed to call agent: "+d.message)}}function x(){r.value&&(q.hangupCall(),console.log("call ended"),p.error("Call ended."),q.setIncomingCallDialog(!1),m.value=!1,E())}function oe(){m.value&&r.value&&(b.value=!b.value,b.value?r.value.muteAudio():r.value.unmuteAudio(),console.log("Client mute property:",r.value.isAudioMuted),console.log("Our internal state:",b.value))}async function Ce(n,d={}){var W,O;try{return Y.value=!0,C.value=null,Z.value=n,r.value?(ne(n),{success:!0,callId:Date.now()}):(w.value={id:response.data.callId||Date.now(),phoneNumber:n,direction:"outbound",status:"connecting",startTime:new Date},y.value=!0,I.value=Date.now(),ae(),response.data)}catch(j){throw C.value=((O=(W=j==null?void 0:j.response)==null?void 0:W.data)==null?void 0:O.message)||"Failed to initiate call",j}finally{Y.value=!1}}async function we(){try{if(r.value&&m.value){x();return}w.value&&(await B.post(`/api/v1/call-center/end/${w.value.id}`),Q.value.unshift({...w.value,endTime:new Date,duration:$.value,status:"completed"})),E()}catch{C.value="Failed to end call",E()}}async function se(n){try{if(r.value){x();return}await B.post(`/api/v1/call-center/reject/${n.id}`),q.setIncomingCall(null)}catch{C.value="Failed to reject call"}}async function be(){var n,d,W,O;try{if(r.value&&m.value){V.value?(d=(n=r.value).unhold)==null||d.call(n):(O=(W=r.value).hold)==null||O.call(W);return}V.value=!V.value,await B.post(`/api/v1/call-center/hold/${w.value.id}`,{hold:V.value})}catch{V.value=!V.value,C.value="Failed to toggle hold"}}async function ye(){try{if(r.value&&m.value){oe();return}b.value=!b.value,await B.post(`/api/v1/call-center/mute/${w.value.id}`,{mute:b.value})}catch{b.value=!b.value,C.value="Failed to toggle mute"}}async function he(n){try{await B.post(`/api/v1/call-center/transfer/${w.value.id}`,{targetNumber:n}),Q.value.unshift({...w.value,endTime:new Date,duration:$.value,status:"transferred",transferredTo:n}),E()}catch(d){throw C.value="Failed to transfer call",d}}function ae(){const n=setInterval(()=>{if(!y.value){clearInterval(n);return}$.value=Math.floor((Date.now()-I.value)/1e3)},1e3)}function E(){w.value=null,y.value=!1,I.value=null,$.value=0,V.value=!1,b.value=!1,m.value=!1,N.value=null}function xe(){D.value="newCall",h.value=null}function K(){D.value="callAgent",h.value=null}function X(){D.value="queue",h.value=null}function Ve(){D.value="transfer"}function De(n=null){D.value="contact",h.value=n,n&&(A.value.phone=n.phoneNumber||n.callerNumber||"")}function o(n=null){D.value="sms",M.value=!0,h.value=n}function e(){D.value=null,M.value=!1,h.value=null,A.value={name:"",phone:"",email:"",company:""}}async function v(n){try{await B.post("/api/v1/call-center/agent/status",{status:n}),ee.value=n}catch{C.value="Failed to update status"}}async function F(){try{const n=await B.get("/api/v1/call-center/queue/status");z.value=n.data}catch(n){console.error("Failed to fetch queue status:",n)}}async function g(){try{const n=await B.get("/api/v1/call-center/agents");le.value=n.data}catch(n){console.error("Failed to fetch agent list:",n)}}function R(){const n={id:Date.now(),phoneNumber:"+1234567890",callerName:"John Doe",direction:"inbound",startTime:new Date};q.setIncomingCall(n)}return{makingCall:Y,lastCallNumber:Z,callError:C,activeCall:w,callHistory:Q,isCallActive:y,callStartTime:I,callDuration:$,isOnHold:V,isMuted:b,volume:_,isCalling:m,selectedAgent:N,phone_number:P,dialogType:D,callData:h,isSmsDialog:M,contactForm:A,queueStatus:z,agentStatus:ee,agentList:le,isDialogOpen:me,formattedCallDuration:fe,afClient:r,incomingCall:te,incomingCallDialog:ve,connection_active:G,initializeAfClient:pe,callClient:ne,makeCall:Ce,answerCall:_e,endCall:we,rejectCall:se,holdCall:be,muteCall:ye,transferCall:he,resetCallState:E,handleCall:ge,hangupCall:x,handleMute:oe,openNewCallDialog:xe,openCallAgentDialog:K,openQueueDialog:X,openTransferDialog:Ve,openContactDialog:De,openSmsDialog:o,closeDialog:e,updateAgentStatus:v,fetchQueueStatus:F,fetchAgentList:g,simulateIncomingCall:R,logEvent:U}}),tl={class:"mb-6"},nl={class:"mb-6"},ol={class:"text-white"},sl={key:0,class:"d-flex justify-center mb-6"},ul={class:"pt-4 space-y-4"},il={key:1,class:"dialpad-container mb-4"},rl={class:"dialpad-grid"},dl={class:"text-center"},cl={class:"text-h6 font-weight-bold"},vl={class:"text-caption"},ml={class:"mb-4"},fl={key:1,class:"text-white font-weight-bold"},pl={class:"d-flex align-center"},_l={class:"text-center"},gl={class:"text-h6 font-weight-bold"},Cl={class:"text-body-2"},wl={class:"d-flex align-center"},bl={class:"text-white text-caption"},yl={class:"flex-grow-1"},hl={class:"text-body-2 font-weight-medium"},xl={class:"text-caption text-grey"},Vl={key:0,class:"text-right"},Dl={class:"text-body-2 font-weight-bold"},Sl={class:"text-white"},kl={__name:"CallDialogs",props:{modelValue:String,callData:Object,phoneNumber:String},emits:["update:modelValue","call-made","call-transferred","agent-called"],setup(q,{emit:Y}){const Z=Qe(),C=al(),w=el(),Q=q,y=Y,I=T({get:()=>Q.modelValue==="newCall",set:o=>y("update:modelValue",o?"newCall":null)}),$=T({get:()=>Q.modelValue==="callAgent",set:o=>y("update:modelValue",o?"callAgent":null)}),V=T({get:()=>Q.modelValue==="queue",set:o=>y("update:modelValue",o?"queue":null)}),b=T({get:()=>Q.modelValue==="transfer",set:o=>y("update:modelValue",o?"transfer":null)}),_=u({phone:"",contact:null,callerId:"",recordCall:!0,autoAnswer:!1}),m=u({phone:"",agent:null,queue:null,warmTransfer:!0}),N=u(!1),P=u(!1),D=u(!1),h=u(!1),M=u(""),A=u(null),z=u("number"),ee=u(!1),le=[o=>!!o||"Phone number is required"],r=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],te=T(()=>w.contacts),ve=u(["+1 (555) 000-0001","+1 (555) 000-0002","+1 (555) 000-0003"]),G=u([{id:1,name:"Alice Johnson",extension:"101",status:"available",callsToday:12,avatar:null},{id:2,name:"Bob Smith",extension:"102",status:"busy",callsToday:8,avatar:null},{id:3,name:"Carol Davis",extension:"103",status:"available",callsToday:15,avatar:null},{id:4,name:"David Wilson",extension:"104",status:"away",callsToday:5,avatar:null}]),me=u([{id:1,name:"Sales Queue",waitingCount:3},{id:2,name:"Support Queue",waitingCount:7},{id:3,name:"Billing Queue",waitingCount:2}]),fe=u([{title:"Waiting",value:12,color:"warning",icon:"mdi-clock-outline"},{title:"In Progress",value:8,color:"info",icon:"mdi-phone-in-talk"},{title:"Completed",value:45,color:"success",icon:"mdi-check-circle"},{title:"Avg Wait",value:"2:30",color:"primary",icon:"mdi-timer-outline"}]),U=[{title:"Caller",value:"caller",sortable:!1},{title:"Phone",value:"phone",sortable:!1},{title:"Wait Time",value:"waitTime",sortable:!0},{title:"Priority",value:"priority",sortable:!0},{title:"Queue",value:"queue",sortable:!1}],pe=u([{caller:"John Doe",phone:"+1234567890",waitTime:45,priority:3,queue:"Sales"},{caller:"Jane Smith",phone:"+1234567891",waitTime:120,priority:5,queue:"Support"},{caller:"Mike Wilson",phone:"+1234567892",waitTime:30,priority:2,queue:"Billing"}]),ne=u([{id:1,name:"Alice Johnson",status:"available",currentCall:null},{id:2,name:"Bob Smith",status:"busy",currentCall:!0,callDuration:"05:23"},{id:3,name:"Carol Davis",status:"available",currentCall:null},{id:4,name:"David Wilson",status:"away",currentCall:null}]),_e=T(()=>M.value?G.value.filter(o=>o.name.toLowerCase().includes(M.value.toLowerCase())||o.extension.includes(M.value)):G.value),ge=T(()=>G.value.filter(o=>o.status==="available")),x=()=>{y("update:modelValue",null),oe()},oe=()=>{_.value={phone:"",contact:null,callerId:"",recordCall:!0,autoAnswer:!1},m.value={phone:"",agent:null,queue:null,warmTransfer:!0},A.value=null,h.value=!1,z.value="number"},Ce=o=>{_.value.phone+=o},we=o=>{o&&(_.value.phone=o)},se=async()=>{if(_.value.phone){N.value=!0;try{await C.callClient(_.value.phone),p.success(`Calling ${_.value.phone}`),ee.value=!0,y("call-made",_.value)}finally{N.value=!1}}},be=async()=>{try{await C.handleMute(),p.success("Call muted")}catch{p.error("Failed to mute call")}},ye=async()=>{try{Z.afClient&&await Z.afClient.hangup()}catch(o){console.error("Failed to hangup call:",o)}},he=o=>{A.value=o},ae=async()=>{if(A.value){N.value=!0;try{await C.makeCall(A.value.extension),p.success(`Calling ${A.value.name}`),y("agent-called",A.value),x()}catch{p.error("Failed to call agent")}finally{N.value=!1}}},E=async()=>{P.value=!0;try{let o="";if(z.value==="number")o=m.value.phone;else if(z.value==="agent"){const e=G.value.find(v=>v.id===m.value.agent);o=(e==null?void 0:e.extension)||""}else z.value==="queue"&&(o=`queue:${m.value.queue}`);await C.transferCall(o),p.success(`Call transferred to ${o}`),y("call-transferred",{target:o,warmTransfer:m.value.warmTransfer}),x()}catch{p.error("Failed to transfer call")}finally{P.value=!1}},xe=async()=>{D.value=!0;try{await C.fetchQueueStatus(),p.success("Queue data refreshed")}catch{p.error("Failed to refresh queue data")}finally{D.value=!1}},K=o=>o.split(" ").map(e=>e[0]).join("").toUpperCase(),X=o=>({available:"success",busy:"error",away:"warning",offline:"grey"})[o]||"grey",Ve=o=>o<30?"success":o<120?"warning":"error",De=o=>{const e=Math.floor(o/60),v=o%60;return`${e}:${v.toString().padStart(2,"0")}`};return Xe(()=>Q.phoneNumber,o=>{o&&I.value&&(_.value.phone=o)},{immediate:!0}),Ye(()=>{C.fetchAgentList(),C.fetchQueueStatus(),w.fetchContacts()}),(o,e)=>{const v=i("v-icon"),F=i("v-spacer"),g=i("v-btn"),R=i("v-card-title"),n=i("v-text-field"),d=i("v-avatar"),W=i("v-list-item-title"),O=i("v-list-item-subtitle"),j=i("v-list-item"),Pe=i("v-autocomplete"),Me=i("v-expansion-panel-title"),Se=i("v-select"),ke=i("v-checkbox"),We=i("v-expansion-panel-text"),Oe=i("v-expansion-panel"),je=i("v-expansion-panels"),Be=i("v-form"),J=i("v-card-text"),ue=i("v-card-actions"),H=i("v-card"),ie=i("v-dialog"),Le=i("v-img"),Te=i("v-chip"),Ee=i("v-list"),Fe=i("v-col"),Ie=i("v-row"),Re=i("v-rating"),Je=i("v-data-table"),Ae=i("v-tab"),He=i("v-tabs"),qe=i("v-window-item"),Ge=i("v-window");return k(),L("div",null,[l(ie,{modelValue:I.value,"onUpdate:modelValue":e[6]||(e[6]=t=>I.value=t),"max-width":"500",persistent:"",transition:"dialog-bottom-transition"},{default:a(()=>[l(H,{class:"modern-card"},{default:a(()=>[l(R,{class:"gradient-header"},{default:a(()=>[l(v,{left:"",color:"white",size:"24"},{default:a(()=>e[17]||(e[17]=[s("mdi-phone-plus")])),_:1,__:[17]}),e[19]||(e[19]=c("span",{class:"text-h5 font-weight-bold"},"Make New Call",-1)),l(F),l(g,{icon:"",onClick:x,color:"white"},{default:a(()=>[l(v,null,{default:a(()=>e[18]||(e[18]=[s("mdi-close")])),_:1,__:[18]})]),_:1})]),_:1,__:[19]}),l(J,{class:"pa-6"},{default:a(()=>[l(Be,{ref:"newCallFormRef",onSubmit:Ze(se,["prevent"])},{default:a(()=>[c("div",tl,[l(n,{modelValue:_.value.phone,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value.phone=t),label:"Phone Number",placeholder:"+1 (555) 123-4567",variant:"outlined","prepend-inner-icon":"mdi-phone",rules:le,class:"modern-input","hide-details":"auto"},null,8,["modelValue"])]),c("div",nl,[l(Pe,{modelValue:_.value.contact,"onUpdate:modelValue":[e[1]||(e[1]=t=>_.value.contact=t),we],items:te.value,"item-title":"name","item-value":"phone",label:"Or select from contacts",variant:"outlined","prepend-inner-icon":"mdi-account-search",clearable:"",class:"modern-input"},{item:a(({props:t,item:S})=>[l(j,$e(Ne(t)),{prepend:a(()=>[l(d,{size:"40",color:"primary"},{default:a(()=>[c("span",ol,f(K(S.raw.name)),1)]),_:2},1024)]),default:a(()=>[l(W,null,{default:a(()=>[s(f(S.raw.name),1)]),_:2},1024),l(O,null,{default:a(()=>[s(f(S.raw.phone),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),ee.value?(k(),L("div",sl,[l(g,{icon:"",color:"grey",variant:"outlined",class:"mx-2",onClick:be},{default:a(()=>[l(v,null,{default:a(()=>e[20]||(e[20]=[s("mdi-microphone-off")])),_:1,__:[20]})]),_:1}),l(g,{icon:"",color:"red",variant:"outlined",class:"mx-2",onClick:ye},{default:a(()=>[l(v,null,{default:a(()=>e[21]||(e[21]=[s("mdi-phone-hangup")])),_:1,__:[21]})]),_:1})])):ze("",!0),l(je,{class:"mb-4",variant:"accordion"},{default:a(()=>[l(Oe,null,{default:a(()=>[l(Me,null,{default:a(()=>[l(v,{left:""},{default:a(()=>e[22]||(e[22]=[s("mdi-cog")])),_:1,__:[22]}),e[23]||(e[23]=s(" Advanced Options "))]),_:1,__:[23]}),l(We,null,{default:a(()=>[c("div",ul,[l(Se,{modelValue:_.value.callerId,"onUpdate:modelValue":e[2]||(e[2]=t=>_.value.callerId=t),items:ve.value,label:"Caller ID",variant:"outlined","prepend-inner-icon":"mdi-card-account-phone"},null,8,["modelValue","items"]),l(ke,{modelValue:_.value.recordCall,"onUpdate:modelValue":e[3]||(e[3]=t=>_.value.recordCall=t),label:"Record this call",color:"primary"},null,8,["modelValue"]),l(ke,{modelValue:_.value.autoAnswer,"onUpdate:modelValue":e[4]||(e[4]=t=>_.value.autoAnswer=t),label:"Auto-answer when connected",color:"primary"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),h.value?(k(),L("div",il,[c("div",rl,[(k(),L(re,null,de(r,t=>l(g,{key:t.digit,onClick:S=>Ce(t.digit),class:"dialpad-btn",size:"large",variant:"outlined"},{default:a(()=>[c("div",dl,[c("div",cl,f(t.digit),1),c("div",vl,f(t.letters),1)])]),_:2},1032,["onClick"])),64))])])):ze("",!0),l(g,{onClick:e[5]||(e[5]=t=>h.value=!h.value),variant:"text",color:"primary",class:"mb-4"},{default:a(()=>[l(v,{left:""},{default:a(()=>[s(f(h.value?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1}),s(" "+f(h.value?"Hide":"Show")+" Dialpad ",1)]),_:1})]),_:1},512)]),_:1}),l(ue,{class:"pa-6 pt-0"},{default:a(()=>[l(g,{color:"grey",variant:"outlined",onClick:x,class:"mr-3"},{default:a(()=>e[24]||(e[24]=[s(" Cancel ")])),_:1,__:[24]}),l(F),l(g,{color:"primary",variant:"elevated",onClick:se,disabled:!_.value.phone,loading:N.value,size:"large",class:"px-8"},{default:a(()=>[l(v,{left:""},{default:a(()=>e[25]||(e[25]=[s("mdi-phone")])),_:1,__:[25]}),e[26]||(e[26]=s(" Call Now "))]),_:1,__:[26]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ie,{modelValue:$.value,"onUpdate:modelValue":e[8]||(e[8]=t=>$.value=t),"max-width":"600",transition:"dialog-bottom-transition"},{default:a(()=>[l(H,{class:"modern-card"},{default:a(()=>[l(R,{class:"gradient-header"},{default:a(()=>[l(v,{left:"",color:"white",size:"24"},{default:a(()=>e[27]||(e[27]=[s("mdi-account-voice")])),_:1,__:[27]}),e[29]||(e[29]=c("span",{class:"text-h5 font-weight-bold"},"Call Agent",-1)),l(F),l(g,{icon:"",onClick:x,color:"white"},{default:a(()=>[l(v,null,{default:a(()=>e[28]||(e[28]=[s("mdi-close")])),_:1,__:[28]})]),_:1})]),_:1,__:[29]}),l(J,{class:"pa-6"},{default:a(()=>[c("div",ml,[l(n,{modelValue:M.value,"onUpdate:modelValue":e[7]||(e[7]=t=>M.value=t),label:"Search agents...",variant:"outlined","prepend-inner-icon":"mdi-magnify",clearable:"",class:"mb-4"},null,8,["modelValue"])]),l(Ee,{class:"agent-list"},{default:a(()=>[(k(!0),L(re,null,de(_e.value,t=>{var S;return k(),ce(j,{key:t.id,onClick:Al=>he(t),class:Ue([{"selected-agent":((S=A.value)==null?void 0:S.id)===t.id},"agent-item mb-2"])},{prepend:a(()=>[l(d,{size:"48",color:X(t.status)},{default:a(()=>[t.avatar?(k(),ce(Le,{key:0,src:t.avatar},null,8,["src"])):(k(),L("span",fl,f(K(t.name)),1))]),_:2},1032,["color"])]),append:a(()=>[c("div",_l,[e[30]||(e[30]=c("div",{class:"text-caption"},"Calls Today",-1)),c("div",gl,f(t.callsToday),1)])]),default:a(()=>[l(W,{class:"font-weight-medium"},{default:a(()=>[s(f(t.name),1)]),_:2},1024),l(O,null,{default:a(()=>[c("div",pl,[l(Te,{color:X(t.status),size:"x-small",class:"mr-2"},{default:a(()=>[s(f(t.status),1)]),_:2},1032,["color"]),c("span",null,"Ext: "+f(t.extension),1)])]),_:2},1024)]),_:2},1032,["onClick","class"])}),128))]),_:1})]),_:1}),l(ue,{class:"pa-6 pt-0"},{default:a(()=>[l(g,{color:"grey",variant:"outlined",onClick:x},{default:a(()=>e[31]||(e[31]=[s(" Cancel ")])),_:1,__:[31]}),l(F),l(g,{color:"primary",variant:"elevated",onClick:ae,disabled:!A.value,loading:N.value,size:"large",class:"px-8"},{default:a(()=>[l(v,{left:""},{default:a(()=>e[32]||(e[32]=[s("mdi-phone")])),_:1,__:[32]}),e[33]||(e[33]=s(" Call Agent "))]),_:1,__:[33]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ie,{modelValue:V.value,"onUpdate:modelValue":e[9]||(e[9]=t=>V.value=t),"max-width":"800",transition:"dialog-bottom-transition"},{default:a(()=>[l(H,{class:"modern-card"},{default:a(()=>[l(R,{class:"gradient-header"},{default:a(()=>[l(v,{left:"",color:"white",size:"24"},{default:a(()=>e[34]||(e[34]=[s("mdi-account-multiple-check")])),_:1,__:[34]}),e[36]||(e[36]=c("span",{class:"text-h5 font-weight-bold"},"Queue Dashboard",-1)),l(F),l(g,{icon:"",onClick:x,color:"white"},{default:a(()=>[l(v,null,{default:a(()=>e[35]||(e[35]=[s("mdi-close")])),_:1,__:[35]})]),_:1})]),_:1,__:[36]}),l(J,{class:"pa-6"},{default:a(()=>[l(Ie,{class:"mb-6"},{default:a(()=>[(k(!0),L(re,null,de(fe.value,t=>(k(),ce(Fe,{cols:"12",md:"3",key:t.title},{default:a(()=>[l(H,{class:"stat-card",color:t.color,variant:"tonal"},{default:a(()=>[l(J,{class:"text-center pa-4"},{default:a(()=>[l(v,{color:t.color,size:"40",class:"mb-2"},{default:a(()=>[s(f(t.icon),1)]),_:2},1032,["color"]),c("div",{class:Ue(["text-h4 font-weight-bold",`${t.color}--text`])},f(t.value),3),c("div",Cl,f(t.title),1)]),_:2},1024)]),_:2},1032,["color"])]),_:2},1024))),128))]),_:1}),l(H,{class:"queue-card mb-4",variant:"outlined"},{default:a(()=>[l(R,{class:"d-flex align-center"},{default:a(()=>[l(v,{left:"",color:"primary"},{default:a(()=>e[37]||(e[37]=[s("mdi-clock-outline")])),_:1,__:[37]}),e[40]||(e[40]=s(" Current Queue ")),l(F),l(Te,{color:"primary",size:"small"},{default:a(()=>[e[39]||(e[39]=s(" Live Updates ")),l(v,{right:"",size:"16",class:"ml-1 animate-pulse"},{default:a(()=>e[38]||(e[38]=[s("mdi-circle")])),_:1,__:[38]})]),_:1,__:[39]})]),_:1,__:[40]}),l(J,null,{default:a(()=>[l(Je,{headers:U,items:pe.value,"items-per-page":5,class:"queue-table",density:"comfortable"},{"item.waitTime":a(({item:t})=>[l(Te,{color:Ve(t.waitTime),size:"small"},{default:a(()=>[s(f(De(t.waitTime)),1)]),_:2},1032,["color"])]),"item.priority":a(({item:t})=>[l(Re,{"model-value":t.priority,color:"orange",size:"small",readonly:"",density:"compact"},null,8,["model-value"])]),_:1},8,["items"])]),_:1})]),_:1}),l(H,{variant:"outlined"},{default:a(()=>[l(R,null,{default:a(()=>[l(v,{left:"",color:"success"},{default:a(()=>e[41]||(e[41]=[s("mdi-account-group")])),_:1,__:[41]}),e[42]||(e[42]=s(" Agent Status "))]),_:1,__:[42]}),l(J,null,{default:a(()=>[l(Ie,null,{default:a(()=>[(k(!0),L(re,null,de(ne.value,t=>(k(),ce(Fe,{cols:"12",sm:"6",md:"4",key:t.id},{default:a(()=>[l(H,{class:"agent-status-card",variant:"outlined"},{default:a(()=>[l(J,{class:"pa-3"},{default:a(()=>[c("div",wl,[l(d,{size:"32",color:X(t.status),class:"mr-3"},{default:a(()=>[c("span",bl,f(K(t.name)),1)]),_:2},1032,["color"]),c("div",yl,[c("div",hl,f(t.name),1),c("div",xl,f(t.status),1)]),t.currentCall?(k(),L("div",Vl,[e[43]||(e[43]=c("div",{class:"text-caption"}," On Call ",-1)),c("div",Dl,f(t.callDuration),1)])):ze("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),l(ue,{class:"pa-6 pt-0"},{default:a(()=>[l(g,{color:"primary",variant:"outlined",onClick:xe,loading:D.value},{default:a(()=>[l(v,{left:""},{default:a(()=>e[44]||(e[44]=[s("mdi-refresh")])),_:1,__:[44]}),e[45]||(e[45]=s(" Refresh "))]),_:1,__:[45]},8,["loading"]),l(F),l(g,{color:"primary",variant:"elevated",onClick:x},{default:a(()=>e[46]||(e[46]=[s(" Close ")])),_:1,__:[46]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ie,{modelValue:b.value,"onUpdate:modelValue":e[16]||(e[16]=t=>b.value=t),"max-width":"500",transition:"dialog-bottom-transition"},{default:a(()=>[l(H,{class:"modern-card"},{default:a(()=>[l(R,{class:"gradient-header"},{default:a(()=>[l(v,{left:"",color:"white",size:"24"},{default:a(()=>e[47]||(e[47]=[s("mdi-phone-forward")])),_:1,__:[47]}),e[49]||(e[49]=c("span",{class:"text-h5 font-weight-bold"},"Transfer Call",-1)),l(F),l(g,{icon:"",onClick:x,color:"white"},{default:a(()=>[l(v,null,{default:a(()=>e[48]||(e[48]=[s("mdi-close")])),_:1,__:[48]})]),_:1})]),_:1,__:[49]}),l(J,{class:"pa-6"},{default:a(()=>[l(He,{modelValue:z.value,"onUpdate:modelValue":e[10]||(e[10]=t=>z.value=t),class:"mb-4"},{default:a(()=>[l(Ae,{value:"number"},{default:a(()=>e[50]||(e[50]=[s("Phone Number")])),_:1,__:[50]}),l(Ae,{value:"agent"},{default:a(()=>e[51]||(e[51]=[s("Agent")])),_:1,__:[51]}),l(Ae,{value:"queue"},{default:a(()=>e[52]||(e[52]=[s("Queue")])),_:1,__:[52]})]),_:1},8,["modelValue"]),l(Ge,{modelValue:z.value,"onUpdate:modelValue":e[14]||(e[14]=t=>z.value=t)},{default:a(()=>[l(qe,{value:"number"},{default:a(()=>[l(n,{modelValue:m.value.phone,"onUpdate:modelValue":e[11]||(e[11]=t=>m.value.phone=t),label:"Transfer to Phone Number",variant:"outlined","prepend-inner-icon":"mdi-phone",rules:le},null,8,["modelValue"])]),_:1}),l(qe,{value:"agent"},{default:a(()=>[l(Se,{modelValue:m.value.agent,"onUpdate:modelValue":e[12]||(e[12]=t=>m.value.agent=t),items:ge.value,"item-title":"name","item-value":"id",label:"Select Agent",variant:"outlined","prepend-inner-icon":"mdi-account"},{item:a(({props:t,item:S})=>[l(j,$e(Ne(t)),{prepend:a(()=>[l(d,{size:"32",color:X(S.raw.status)},{default:a(()=>[c("span",Sl,f(K(S.raw.name)),1)]),_:2},1032,["color"])]),default:a(()=>[l(W,null,{default:a(()=>[s(f(S.raw.name),1)]),_:2},1024),l(O,null,{default:a(()=>[s(f(S.raw.status)+" - Ext: "+f(S.raw.extension),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1}),l(qe,{value:"queue"},{default:a(()=>[l(Se,{modelValue:m.value.queue,"onUpdate:modelValue":e[13]||(e[13]=t=>m.value.queue=t),items:me.value,"item-title":"name","item-value":"id",label:"Select Queue",variant:"outlined","prepend-inner-icon":"mdi-account-multiple"},null,8,["modelValue","items"])]),_:1})]),_:1},8,["modelValue"]),l(ke,{modelValue:m.value.warmTransfer,"onUpdate:modelValue":e[15]||(e[15]=t=>m.value.warmTransfer=t),label:"Warm transfer (stay on call until connected)",color:"primary",class:"mt-4"},null,8,["modelValue"])]),_:1}),l(ue,{class:"pa-6 pt-0"},{default:a(()=>[l(g,{color:"grey",variant:"outlined",onClick:x},{default:a(()=>e[53]||(e[53]=[s(" Cancel ")])),_:1,__:[53]}),l(F),l(g,{color:"primary",variant:"elevated",onClick:E,loading:P.value,size:"large",class:"px-8"},{default:a(()=>[l(v,{left:""},{default:a(()=>e[54]||(e[54]=[s("mdi-phone-forward")])),_:1,__:[54]}),e[55]||(e[55]=s(" Transfer "))]),_:1,__:[55]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Tl=ll(kl,[["__scopeId","data-v-419af39e"]]),Nl=Object.freeze(Object.defineProperty({__proto__:null,default:Tl},Symbol.toStringTag,{value:"Module"}));export{Tl as C,Nl as a,al as u};
