import{E as n,i as a}from"./app-BfTUaguK.js";import{n as s}from"./toast-RzEVnAJt.js";const y=n("expenseType",{state:()=>({types:[],categories:[],loading:!1,error:null}),getters:{getTypeById:e=>t=>e.types.find(r=>r.id===t),orderLevelTypes:e=>e.types.filter(t=>t.is_order_level),itemLevelTypes:e=>e.types.filter(t=>!t.is_order_level),getTypesByCategory:e=>t=>e.types.filter(r=>r.expense_category_id===t),hasTypes:e=>e.types.length>0},actions:{async fetchTypes(){this.loading=!0,this.error=null;try{const e=await a.get("/api/v1/expense-types");this.types=e.data.data||e.data}catch(e){this.error=e.message,s.error("Failed to fetch expense types"),console.error("Error fetching types:",e)}finally{this.loading=!1}},async fetchExpenseTypes(){return this.fetchTypes()},async fetchCategories(){try{const e=await a.get("/api/v1/expense-categories");this.categories=e.data.data||e.data}catch(e){s.error("Failed to fetch expense categories"),console.error("Error fetching categories:",e)}},async createType(e){this.loading=!0,this.error=null;try{const t=await a.post("/api/v1/expense-types",e);return this.types.push(t.data.data||t.data),s.success("Expense type created successfully"),t.data}catch(t){throw this.error=t.message,s.error("Failed to create expense type"),console.error("Error creating type:",t),t}finally{this.loading=!1}},async updateType(e,t){this.loading=!0,this.error=null;try{const r=await a.put(`/api/v1/expense-types/${e}`,t),o=this.types.findIndex(i=>i.id===e);return o!==-1&&(this.types[o]=r.data.data||r.data),s.success("Expense type updated successfully"),r.data}catch(r){throw this.error=r.message,s.error("Failed to update expense type"),console.error("Error updating type:",r),r}finally{this.loading=!1}},async deleteType(e){this.loading=!0,this.error=null;try{await a.delete(`/api/v1/expense-types/${e}`),this.types=this.types.filter(t=>t.id!==e),s.success("Expense type deleted successfully")}catch(t){throw this.error=t.message,s.error("Failed to delete expense type"),console.error("Error deleting type:",t),t}finally{this.loading=!1}},resetError(){this.error=null}}});export{y as u};
