import{X as q,r as c,k as z,c as O,o as a,w as R,a as t,d as i,e as m,f as S,u as l,t as r,F as X,g as G,n as x,y as D,A as C,B as A,D as E}from"./app-EpHsFsPD.js";import{_ as H}from"./AppLayout-wc1ktEl2.js";import{u as J}from"./servicesStore-BqKcG-DJ.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./webrtc-BF0ZdzCf.js";import"./africastalking-BagS1Xo6.js";import"./IncomingCallDialog-BdajWKyV.js";/* empty css                                                                           */const P={class:"services-container"},Q={key:0,class:"loading"},W={key:1,class:"error-message"},Y={key:2,class:"table-container"},Z={class:"services-table"},tt={class:"service-name"},et={class:"description"},ot={class:"date"},nt={class:"actions"},st=["onClick","disabled","title"],at={key:0},lt={key:1},it=["onClick","disabled"],rt=["onClick","disabled"],dt={key:0},ut={class:"modal"},ct={class:"modal-header"},mt={class:"form-group"},vt={key:0,class:"error"},bt={class:"form-group"},pt={class:"form-group checkbox-group"},_t={class:"checkbox-label"},ft={class:"form-group checkbox-group"},yt={class:"checkbox-label"},kt={class:"modal-footer"},ht=["disabled"],gt={class:"modal modal-small"},St={class:"modal-header"},Ct={class:"modal-body"},xt={class:"modal-footer"},Dt=["disabled"],wt={__name:"Services",setup(Mt){const d=J(),{services:y,loading:v,error:w}=q(d),k=c(!1),b=c(!1),p=c(!1),h=c(null),_=c(null),s=c({servServiceice_name:"",description:"",is_active:!0}),u=c({});z(async()=>{await d.fetchServices()});const M=()=>{s.value={service_name:"",description:"",is_active:!0,inbound:!1},u.value={}},I=()=>{M(),p.value=!1,h.value=null,k.value=!0},V=n=>{if(!n||!n.id){console.error("Invalid service object");return}s.value={service_name:n.service_name,description:n.description||"",is_active:n.is_active,inbound:n.inbound},p.value=!0,h.value=n.id,k.value=!0},g=()=>{k.value=!1,M()},$=()=>(u.value={},s.value.service_name.trim()?s.value.service_name.length>255?(u.value.service_name="Service name must be less than 255 characters",!1):!0:(u.value.service_name="Service name is required",!1)),T=async()=>{var n,e;if($())try{p.value&&h.value?await d.updateService(h.value,s.value):await d.createService(s.value),g()}catch(f){(e=(n=f.response)==null?void 0:n.data)!=null&&e.errors&&(u.value=f.response.data.errors)}},U=n=>{if(!n||!n.id){console.error("Invalid service object");return}_.value=n,b.value=!0},B=async()=>{var n;if((n=_.value)!=null&&n.id)try{await d.deleteService(_.value.id),b.value=!1,_.value=null}catch(e){console.error("Delete failed:",e)}},F=async n=>{if(!n||!n.id){console.error("Invalid service object");return}try{await d.toggleServiceStatus(n.id)}catch(e){console.error("Toggle status failed:",e)}},j=()=>{d.clearError()},L=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return(n,e)=>(a(),O(H,null,{default:R(()=>{var f;return[t("div",P,[t("div",{class:"header"},[e[8]||(e[8]=t("h1",{class:"title"},"Services Management",-1)),t("button",{onClick:I,class:"btn btn-primary"},e[7]||(e[7]=[t("span",{class:"icon"},"+",-1),S(" Add New Service ")]))]),l(v)&&!l(y).length?(a(),i("div",Q," Loading services... ")):m("",!0),l(w)?(a(),i("div",W,[S(r(l(w))+" ",1),t("button",{onClick:j,class:"btn-clear-error"},"Ã—")])):m("",!0),!l(v)||l(y).length?(a(),i("div",Y,[t("table",Z,[e[10]||(e[10]=t("thead",null,[t("tr",null,[t("th",null,"Service Name"),t("th",null,"Description"),t("th",null,"Status"),t("th",null,"Inbound"),t("th",null,"Created At"),t("th",null,"Actions")])],-1)),t("tbody",null,[(a(!0),i(X,null,G(l(y),o=>(a(),i("tr",{key:(o==null?void 0:o.id)||Math.random()},[t("td",tt,r((o==null?void 0:o.service_name)||"N/A"),1),t("td",et,r((o==null?void 0:o.description)||"No description"),1),t("td",null,[t("span",{class:x(["status-badge",o!=null&&o.is_active?"active":"inactive"])},r(o!=null&&o.is_active?"Active":"Inactive"),3)]),t("td",null,[t("span",{class:x(["status-badge",o!=null&&o.inbound?"active":"inactive"])},r(o!=null&&o.inbound?"Inbound":"Outbound"),3)]),t("td",ot,r(L(o==null?void 0:o.created_at)),1),t("td",nt,[t("button",{onClick:N=>F(o),class:x(["btn-action","btn-toggle"]),disabled:!o,title:o!=null&&o.is_active?"Deactivate":"Activate"},[o!=null&&o.is_active?(a(),i("span",at,"â¸")):(a(),i("span",lt,"â–¶"))],8,st),t("button",{onClick:N=>V(o),class:"btn-action btn-edit",disabled:!o,title:"Edit"}," âœï¸ ",8,it),t("button",{onClick:N=>U(o),class:"btn-action btn-delete",disabled:!o,title:"Delete"}," ðŸ—‘ï¸ ",8,rt)])]))),128)),l(y).length?m("",!0):(a(),i("tr",dt,e[9]||(e[9]=[t("td",{colspan:"5",class:"empty-state"}," No services found. Create your first service to get started. ",-1)])))])])])):m("",!0),k.value?(a(),i("div",{key:3,class:"modal-overlay",onClick:D(g,["self"])},[t("div",ut,[t("div",ct,[t("h2",null,r(p.value?"Edit Service":"Create New Service"),1),t("button",{onClick:g,class:"btn-close"},"Ã—")]),t("form",{onSubmit:D(T,["prevent"]),class:"modal-body"},[t("div",mt,[e[11]||(e[11]=t("label",{for:"service_name"},"Service Name *",-1)),C(t("input",{id:"service_name","onUpdate:modelValue":e[0]||(e[0]=o=>s.value.service_name=o),type:"text",required:"",class:"form-control",placeholder:"Enter service name"},null,512),[[A,s.value.service_name]]),u.value.service_name?(a(),i("span",vt,r(u.value.service_name),1)):m("",!0)]),t("div",bt,[e[12]||(e[12]=t("label",{for:"description"},"Description",-1)),C(t("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=o=>s.value.description=o),class:"form-control",rows:"4",placeholder:"Enter service description (optional)"},null,512),[[A,s.value.description]])]),t("div",pt,[t("label",_t,[C(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.is_active=o),type:"checkbox",class:"checkbox"},null,512),[[E,s.value.is_active]]),e[13]||(e[13]=t("span",null,"Active Service",-1))])]),e[15]||(e[15]=t("input",{type:"text"},null,-1)),t("div",ft,[t("label",yt,[C(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.inbound=o),type:"checkbox",class:"checkbox"},null,512),[[E,s.value.inbound]]),e[14]||(e[14]=t("span",null,"Inbound Service",-1))])]),t("div",kt,[t("button",{type:"button",onClick:g,class:"btn btn-secondary"}," Cancel "),t("button",{type:"submit",disabled:l(v),class:"btn btn-primary"},r(l(v)?"Saving...":p.value?"Update":"Create"),9,ht)])],32)])])):m("",!0),b.value?(a(),i("div",{key:4,class:"modal-overlay",onClick:e[6]||(e[6]=D(o=>b.value=!1,["self"]))},[t("div",gt,[t("div",St,[e[16]||(e[16]=t("h2",null,"Confirm Delete",-1)),t("button",{onClick:e[4]||(e[4]=o=>b.value=!1),class:"btn-close"}," Ã— ")]),t("div",Ct,[t("p",null,[e[17]||(e[17]=S(' Are you sure you want to delete "')),t("strong",null,r((f=_.value)==null?void 0:f.service_name),1),e[18]||(e[18]=S('"? '))]),e[19]||(e[19]=t("p",{class:"warning-text"}," This action cannot be undone. ",-1))]),t("div",xt,[t("button",{onClick:e[5]||(e[5]=o=>b.value=!1),class:"btn btn-secondary"}," Cancel "),t("button",{onClick:B,disabled:l(v),class:"btn btn-danger"},r(l(v)?"Deleting...":"Delete"),9,Dt)])])])):m("",!0)])]}),_:1}))}},Bt=K(wt,[["__scopeId","data-v-7764fc7d"]]);export{Bt as default};
