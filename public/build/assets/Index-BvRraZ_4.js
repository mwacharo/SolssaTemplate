import{i as N,r as p,j as he,s as _e,k as we,c as Ce,o as i,w as Ee,a as e,d as u,e as C,f as E,C as m,D as f,F as b,g as k,t as a,E as R,n as Pe,y as te}from"./app-UF4J_52Y.js";import{_ as je}from"./AppLayout-B5wYy7Ac.js";import{u as Se}from"./categoryStore-DBH3Prcl.js";import{u as Me}from"./clientStore-DdV9bdNv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./webrtc-CXAbwmh1.js";import"./africastalking-Boz6WrtY.js";import"./IncomingCallDialog-BKFhgtBu.js";/* empty css                                                                           */const Ve={class:"container mx-auto p-6 bg-gray-50 min-h-screen"},Ue={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},Ae={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-6"},Te={class:"lg:col-span-1"},qe=["value"],Le=["value"],De={class:"bg-white rounded-lg shadow-sm overflow-hidden"},Ne={class:"p-4 border-b border-gray-200"},Re={class:"flex justify-between items-center"},Be={class:"text-sm text-gray-600"},Oe={class:"overflow-x-auto"},$e={class:"w-full"},Fe={class:"bg-white divide-y divide-gray-200"},He={class:"px-4 py-4"},Ie={class:"flex flex-col"},ze={class:"bg-red-500 text-white px-2 py-1 rounded text-xs font-medium mb-1 inline-block w-fit"},Ke={class:"text-sm text-gray-600"},Qe={class:"px-4 py-4 text-sm text-gray-900"},Xe={class:"px-4 py-4"},Ye={class:"flex items-center gap-3"},Ge=["src","alt"],We={class:"font-medium text-gray-900"},Je={class:"text-sm text-gray-500"},Ze={class:"px-4 py-4"},et={class:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm"},tt={class:"px-4 py-4 text-sm text-gray-900"},st={class:"px-4 py-4 text-center"},ot={class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm font-medium"},rt={class:"text-xs text-gray-500 mt-1 flex items-center justify-center gap-1"},lt={class:"px-4 py-4 text-center"},at={class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm font-medium"},nt={class:"text-xs text-gray-500 mt-1 flex items-center justify-center gap-1"},it={class:"px-4 py-4 text-center"},dt={class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm font-medium"},ut={class:"text-xs text-gray-500 mt-1 flex items-center justify-center gap-1"},ct={class:"px-4 py-4 text-center text-sm font-medium"},pt={class:"px-4 py-4 text-sm font-medium"},mt={class:"px-4 py-4"},gt={class:"flex items-center gap-2"},vt=["onClick"],xt=["onClick"],ft=["onClick"],yt=["onClick"],bt=["onClick"],kt=["onClick"],ht={key:0},_t={class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},wt={class:"flex-1 flex justify-between sm:hidden"},Ct=["disabled"],Et=["disabled"],Pt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},jt={class:"text-sm text-gray-700"},St={class:"font-medium"},Mt={class:"font-medium"},Vt={class:"font-medium"},Ut={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},At=["disabled"],Tt=["onClick"],qt=["disabled"],Lt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Dt={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white"},Nt={class:"mt-3"},Rt={class:"flex justify-between items-center mb-4"},Bt={class:"text-lg font-medium text-gray-900"},Ot={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$t=["value"],Ft=["value"],Ht={class:"md:col-span-2"},It={class:"md:col-span-2"},zt={class:"md:col-span-2"},Kt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Qt={class:"flex flex-wrap gap-2 mt-2"},Xt=["src"],Yt={key:0,class:"text-red-600 text-xs mt-1"},Gt={class:"flex flex-wrap gap-2 mt-2"},Wt=["src"],Jt={key:0,class:"text-red-600 text-xs mt-1"},Zt={class:"mt-4"},es={class:"grid grid-cols-1 md:grid-cols-3 gap-2"},ts=["onUpdate:modelValue"],ss={key:0,class:"text-red-600 text-xs mt-1"},os=["onUpdate:modelValue"],rs={key:0,class:"text-red-600 text-xs mt-1"},ls=["onUpdate:modelValue"],as=["onClick"],ns={key:0,class:"mt-4"},is={class:"min-w-full divide-y divide-gray-200 border rounded"},ds={class:"bg-white divide-y divide-gray-200"},us={class:"px-4 py-2 text-sm text-gray-900"},cs={class:"px-4 py-2 text-sm text-gray-900"},ps={class:"px-4 py-2 text-sm text-gray-900"},ms={class:"flex justify-end space-x-3 mt-6"},gs=["disabled"],vs={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},xs={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-md shadow-lg rounded-md bg-white"},fs={class:"mt-3"},ys={class:"text-sm text-gray-900"},bs={class:"text-sm text-gray-900"},ks={class:"flex justify-end space-x-3 mt-6"},hs=["disabled"],Ts={__name:"Index",setup(_s,{expose:se}){N.defaults.withCredentials=!0,N.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const F=window.location.origin,h=N.create({baseURL:`${F}/api/v1`,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});h.interceptors.request.use(o=>{var r;const t=(r=document.head.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content");return t&&(o.headers["X-CSRF-TOKEN"]=t),o}),h.interceptors.response.use(o=>o,o=>{var t;return((t=o.response)==null?void 0:t.status)===419&&window.location.reload(),Promise.reject(o)});const S=p([]),T=p([]),M=p([]),V=p(""),U=p(!1),B=p(!1),A=p(!1),H=p(null),P=Se(),j=Me(),q=p(!1),I=p(!1),_=p(!1),O=p(null),v=p({date:"",vendor:"",category:""}),d=p({current_page:1,per_page:15,total:0,last_page:1,from:1,to:15,prev_page_url:null,next_page_url:null}),c=p({sku:"",product_name:"",description:"",category_id:"",vendor_id:"",initial_quantity:0,stock_threshold:0,price:0}),g=p({}),x=p({product:null,quantity:0,reason:""}),w=p({}),oe=he(()=>{const o=d.value.current_page,t=d.value.last_page,r=[];for(let s=Math.max(1,o-2);s<=Math.min(t,o+2);s++)r.push(s);return r}),re=o=>{var r,s;const t=((r=o.media)==null?void 0:r.find(l=>l.media_type==="image"&&l.is_primary))||((s=o.media)==null?void 0:s.find(l=>l.media_type==="image"));return(t==null?void 0:t.url)||"/api/placeholder/50/50"},le=o=>{const t=M.value.find(r=>r.id===o);return(t==null?void 0:t.name)||"Uncategorized"},L=o=>{var t,r;return((r=(t=o.stocks)==null?void 0:t[0])==null?void 0:r.current_stock)||0},z=o=>{var t,r;return((r=(t=o.stocks)==null?void 0:t[0])==null?void 0:r.committed_stock)||0},K=o=>{var t,r;return((r=(t=o.stocks)==null?void 0:t[0])==null?void 0:r.defected_stock)||0},Q=o=>{var t,r;return((r=(t=o.stocks)==null?void 0:t[0])==null?void 0:r.stock_threshold)||0},X=o=>{var r;const t=(r=o.prices)==null?void 0:r[0];return Number((t==null?void 0:t.base_price)||(t==null?void 0:t.discount_price)||(t==null?void 0:t.price)||0)};let Y=null;const ae=()=>{clearTimeout(Y),Y=setTimeout(()=>{y(1)},500)};_e(v,()=>{G()},{deep:!0});const y=async(o=1)=>{var t;try{U.value=!0;const r={page:o,per_page:d.value.per_page};V.value&&(r.search=V.value),v.value.vendor&&(r.vendor_id=v.value.vendor),v.value.category&&(r.category_id=v.value.category),v.value.date&&(r.created_date=v.value.date);const l=(await h.get("/products",{params:r})).data;l.data&&Array.isArray(l.data)?(S.value=l.data,d.value={current_page:l.current_page||1,per_page:l.per_page||15,total:l.total||l.data.length,last_page:l.last_page||1,from:l.from||1,to:l.to||l.data.length,prev_page_url:l.prev_page_url,next_page_url:l.next_page_url}):Array.isArray(l)&&(S.value=l,d.value={current_page:1,per_page:l.length,total:l.length,last_page:1,from:1,to:l.length,prev_page_url:null,next_page_url:null})}catch(r){if(console.error("Error fetching products:",r),r.response){const s=r.response.status,l=((t=r.response.data)==null?void 0:t.message)||"Failed to load products";s===401?alert("Please log in to continue"):s===403?alert("You do not have permission to view products"):s>=500?alert("Server error. Please try again later."):alert(l)}else r.request?alert("Network error. Please check your connection and try again."):alert("An unexpected error occurred")}finally{U.value=!1}},ne=async()=>{var o;try{(!j.vendors||j.vendors.length===0)&&await((o=j.fetchVendors)==null?void 0:o.call(j)),T.value=j.vendors||[]}catch(t){console.error("Error fetching vendors:",t);try{const r=await h.get("/vendors");T.value=r.data.data||r.data||[]}catch(r){console.error("Error fetching vendors from API:",r)}}},ie=async()=>{var o;try{(!P.categories||P.categories.length===0)&&await((o=P.fetchCategories)==null?void 0:o.call(P)),M.value=P.categories||[]}catch(t){console.error("Error fetching categories:",t);try{const r=await h.get("/categories");M.value=r.data.data||r.data||[]}catch(r){console.error("Error fetching categories from API:",r)}}},G=()=>{y(1)},W=()=>{v.value={date:"",vendor:"",category:""},V.value="",y(1)},de=()=>{_.value=!1,g.value={},c.value={sku:"",product_name:"",description:"",category_id:"",vendor_id:"",initial_quantity:0,stock_threshold:0,price:0},q.value=!0},ue=o=>{var t;_.value=!0,O.value=o,g.value={},c.value={sku:o.sku,product_name:o.product_name,description:o.description,category_id:o.category_id,vendor_id:o.vendor_id||((t=o.vendor)==null?void 0:t.id),initial_quantity:L(o),stock_threshold:Q(o),price:X(o)},q.value=!0},ce=o=>{console.log("Viewing product:",o)},$=()=>{q.value=!1,_.value=!1,O.value=null,g.value={},c.value={sku:"",product_name:"",description:"",category_id:"",vendor_id:"",initial_quantity:0,stock_threshold:0,price:0}},pe=async()=>{var o,t,r,s;try{B.value=!0,g.value={};const l=_.value?`/products/${O.value.id}`:"/products",n=_.value?"put":"post",ws=await h[n](l,c.value),ke=_.value?"Product updated successfully":"Product created successfully";alert(ke),$(),y(d.value.current_page)}catch(l){if(console.error("Error saving product:",l),((o=l.response)==null?void 0:o.status)===422){g.value=l.response.data.errors||{};const n=(t=Object.values(g.value)[0])==null?void 0:t[0];n&&alert("Validation error: "+n)}else{const n=((s=(r=l.response)==null?void 0:r.data)==null?void 0:s.message)||"Error saving product";alert(n)}}finally{B.value=!1}},me=async o=>{var t,r;if(confirm(`Are you sure you want to delete "${o.product_name}"?`))try{H.value=o.id,await h.delete(`/products/${o.id}`),alert("Product deleted successfully"),y(d.value.current_page)}catch(s){console.error("Error deleting product:",s);const l=((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Error deleting product";alert(l)}finally{H.value=null}},J=async()=>{var o,t,r,s;try{A.value=!0,w.value={},await h.put(`/products/${x.value.product.id}`,{stock:{current_quantity:x.value.quantity,track:!0},reason:x.value.reason}),alert("Stock adjusted successfully"),D(),y(d.value.current_page)}catch(l){if(console.error("Error adjusting stock:",l),((o=l.response)==null?void 0:o.status)===422){w.value=l.response.data.errors||{};const n=(t=Object.values(w.value)[0])==null?void 0:t[0];n&&alert("Validation error: "+n)}else{const n=((s=(r=l.response)==null?void 0:r.data)==null?void 0:s.message)||"Error adjusting stock";alert(n)}}finally{A.value=!1}},ge=o=>{console.log("Move stock for product:",o),alert("Stock movement feature will be implemented here")},D=()=>{I.value=!1,w.value={},x.value={product:null,quantity:0,reason:""}},ve=async()=>{var o,t,r,s;try{A.value=!0,w.value={},await h.put(`/products/${x.value.product.id}`,{current_stock:x.value.quantity,reason:x.value.reason,warehouse_id:1}),alert("Stock adjusted successfully"),D(),y(d.value.current_page)}catch(l){if(console.error("Error adjusting stock:",l),((o=l.response)==null?void 0:o.status)===422){w.value=l.response.data.errors||{};const n=(t=Object.values(w.value)[0])==null?void 0:t[0];n&&alert("Validation error: "+n)}else{const n=((s=(r=l.response)==null?void 0:r.data)==null?void 0:s.message)||"Error adjusting stock";alert(n)}}finally{A.value=!1}},Z=()=>{d.value.prev_page_url&&d.value.current_page>1&&y(d.value.current_page-1)},ee=()=>{d.value.next_page_url&&d.value.current_page<d.value.last_page&&y(d.value.current_page+1)},xe=o=>{o!==d.value.current_page&&y(o)},fe=o=>o?new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",ye=o=>new Intl.NumberFormat("en-KE",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o||0),be=async()=>{try{await N.get(`${F}/sanctum/csrf-cookie`)}catch(o){console.warn("Could not initialize CSRF token:",o)}};return we(async()=>{await be(),await Promise.all([ie(),ne(),y()])}),se({fetchProducts:y,resetFilters:W,formErrors:g,stockFormErrors:w,isLoading:U,isModalLoading:B,isStockLoading:A}),(o,t)=>(i(),Ce(je,null,{default:Ee(()=>{var r;return[e("div",Ve,[e("div",Ue,[e("div",{class:"flex justify-between items-center mb-6"},[t[18]||(t[18]=e("h1",{class:"text-2xl font-bold text-gray-800"},"Products Management",-1)),e("button",{onClick:de,class:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors flex items-center gap-2"},t[17]||(t[17]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),E(" Add a product ")]))]),e("div",Ae,[e("div",Te,[m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>V.value=s),type:"text",placeholder:"Search for a product (id, name, sku)",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:ae},null,544),[[f,V.value]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"DATE",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>v.value.date=s),type:"date",placeholder:"Filter by date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[f,v.value.date]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"SELLER",-1)),m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>v.value.vendor=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[20]||(t[20]=e("option",{value:""},"Filter by seller",-1)),(i(!0),u(b,null,k(T.value,s=>(i(),u("option",{key:s.id,value:s.id},a(s.name),9,qe))),128))],512),[[R,v.value.vendor]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"CATEGORY",-1)),m(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>v.value.category=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[22]||(t[22]=e("option",{value:""},"Category",-1)),(i(!0),u(b,null,k(M.value,s=>(i(),u("option",{key:s.id,value:s.id},a(s.name),9,Le))),128))],512),[[R,v.value.category]])])]),e("div",{class:"flex gap-4"},[e("button",{onClick:W,class:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center gap-2"},t[24]||(t[24]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),E(" Reset ")])),e("button",{onClick:G,class:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors flex items-center gap-2"},t[25]||(t[25]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})],-1),E(" Filter ")]))])]),e("div",De,[e("div",Ne,[e("div",Re,[t[26]||(t[26]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Products",-1)),e("span",Be,a(d.value.from)+"-"+a(d.value.to)+" / "+a(d.value.total),1)])]),e("div",Oe,[e("table",$e,[t[42]||(t[42]=e("thead",{class:"bg-blue-600 text-white"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"ID/SKU"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"SELLER"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"PRODUCT"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"CATEGORY"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"DATE"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"CURRENT QUANTITY"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"COMMITTED STOCK"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"DEFECTED QUANTITY"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"STOCK THRESHOLD"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"PRICE"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"PRODUCT PAGE"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"ACTIONS")])],-1)),e("tbody",Fe,[(i(!0),u(b,null,k(S.value,s=>{var l;return i(),u("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",He,[e("div",Ie,[e("span",ze," pdt-"+a(s.id),1),e("span",Ke,a(s.sku),1)])]),e("td",Qe,a(((l=s.vendor)==null?void 0:l.name)||"N/A"),1),e("td",Xe,[e("div",Ye,[e("img",{src:re(s),alt:s.product_name,class:"w-12 h-12 rounded-lg object-cover"},null,8,Ge),e("div",null,[e("div",We,a(s.product_name),1),e("div",Je,a(s.description),1)])])]),e("td",Ze,[e("span",et,a(le(s.category_id)),1)]),e("td",tt,a(fe(s.created_at)),1),e("td",st,[e("span",ot," Total "+a(L(s)),1),e("div",rt,[t[27]||(t[27]=e("img",{src:"/api/placeholder/16/16",alt:"Flag",class:"w-4 h-4"},null,-1)),e("span",null,a(L(s)),1),t[28]||(t[28]=e("span",{class:"bg-red-500 text-white px-1 rounded text-xs"},"Nairobi",-1))])]),e("td",lt,[e("span",at," Total "+a(z(s)),1),e("div",nt,[t[29]||(t[29]=e("img",{src:"/api/placeholder/16/16",alt:"Flag",class:"w-4 h-4"},null,-1)),e("span",null,a(z(s)),1),t[30]||(t[30]=e("span",{class:"bg-red-500 text-white px-1 rounded text-xs"},"Nairobi",-1))])]),e("td",it,[e("span",dt," Total "+a(K(s)),1),e("div",ut,[t[31]||(t[31]=e("img",{src:"/api/placeholder/16/16",alt:"Flag",class:"w-4 h-4"},null,-1)),e("span",null,a(K(s)),1),t[32]||(t[32]=e("span",{class:"bg-red-500 text-white px-1 rounded text-xs"},"Nairobi",-1))])]),e("td",ct,a(Q(s)),1),e("td",pt,[E(a(ye(X(s)))+" ",1),t[33]||(t[33]=e("span",{class:"text-xs text-gray-500"},"KES",-1))]),t[40]||(t[40]=e("td",{class:"px-4 py-4"},[e("button",{class:"text-blue-600 hover:text-blue-800"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})])])],-1)),e("td",mt,[e("div",gt,[e("button",{onClick:n=>ue(s),class:"text-blue-600 hover:text-blue-800 p-1",title:"Edit"},t[34]||(t[34]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,vt),e("button",{onClick:n=>ce(s),class:"text-gray-600 hover:text-gray-800 p-1",title:"View"},t[35]||(t[35]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,xt),e("button",{onClick:n=>me(s),class:"text-red-600 hover:text-red-800 p-1",title:"Delete"},t[36]||(t[36]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,ft),e("button",{onClick:n=>J(s,-1),class:"text-red-600 hover:text-red-800 p-1",title:"Remove Stock"},t[37]||(t[37]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 12H5"})],-1)]),8,yt),e("button",{onClick:n=>J(s,1),class:"text-green-600 hover:text-green-800 p-1",title:"Add Stock"},t[38]||(t[38]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)]),8,bt),e("button",{onClick:n=>ge(s),class:"text-yellow-600 hover:text-yellow-800 p-1",title:"Move Stock"},t[39]||(t[39]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)]),8,kt)])])])}),128)),!S.value||S.value.length===0?(i(),u("tr",ht,t[41]||(t[41]=[e("td",{colspan:"12",class:"px-4 py-8 text-center text-gray-500"},[e("div",{class:"flex flex-col items-center gap-2"},[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2 2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-4.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 009.586 13H7"})]),e("span",null,"No products found")])],-1)]))):C("",!0)])])]),e("div",_t,[e("div",wt,[e("button",{onClick:Z,disabled:!d.value.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Ct),e("button",{onClick:ee,disabled:!d.value.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Et)]),e("div",Pt,[e("div",null,[e("p",jt,[t[43]||(t[43]=E(" Showing ")),e("span",St,a(d.value.from),1),t[44]||(t[44]=E(" to ")),e("span",Mt,a(d.value.to),1),t[45]||(t[45]=E(" of ")),e("span",Vt,a(d.value.total),1),t[46]||(t[46]=E(" results "))])]),e("div",null,[e("nav",Ut,[e("button",{onClick:Z,disabled:!d.value.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[47]||(t[47]=[e("span",{class:"sr-only"},"Previous",-1),e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]),8,At),(i(!0),u(b,null,k(oe.value,s=>(i(),u("button",{key:s,onClick:l=>xe(s),class:Pe(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s===d.value.current_page?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},a(s),11,Tt))),128)),e("button",{onClick:ee,disabled:!d.value.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[48]||(t[48]=[e("span",{class:"sr-only"},"Next",-1),e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]),8,qt)])])])])]),q.value?(i(),u("div",Lt,[e("div",Dt,[e("div",Nt,[e("div",Rt,[e("h3",Bt,a(_.value?"Edit Product":"Create New Product"),1),e("button",{onClick:$,class:"text-gray-400 hover:text-gray-600"},t[49]||(t[49]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:te(pe,["prevent"]),class:"space-y-4"},[e("div",Ot,[e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"SKU *",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>c.value.sku=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",placeholder:"Enter SKU"},null,512),[[f,c.value.sku]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Name *",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>c.value.product_name=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",placeholder:"Enter product name"},null,512),[[f,c.value.product_name]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category *",-1)),m(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>c.value.category_id=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},[t[52]||(t[52]=e("option",{value:""},"Select Category",-1)),(i(!0),u(b,null,k(M.value,s=>(i(),u("option",{key:s.id,value:s.id},a(s.name),9,$t))),128))],512),[[R,c.value.category_id]])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Vendor *",-1)),m(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>c.value.vendor_id=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},[t[54]||(t[54]=e("option",{value:""},"Select Vendor",-1)),(i(!0),u(b,null,k(T.value,s=>(i(),u("option",{key:s.id,value:s.id},a(s.name),9,Ft))),128))],512),[[R,c.value.vendor_id]])]),e("div",Ht,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Initial Stock Quantity",-1)),m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>c.value.initial_quantity=s),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter initial stock quantity"},null,512),[[f,c.value.initial_quantity]])]),e("div",It,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Stock Threshold",-1)),m(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>c.value.stock_threshold=s),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter minimum stock threshold"},null,512),[[f,c.value.stock_threshold]])]),e("div",zt,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price (KES)",-1)),m(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>c.value.price=s),type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter product price"},null,512),[[f,c.value.price]])])]),e("div",null,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=s=>c.value.description=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter product description (optional)"},null,512),[[f,c.value.description]])]),e("div",Kt,[e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Images",-1)),e("input",{type:"file",accept:"image/*",multiple:"",onChange:t[12]||(t[12]=(...s)=>o.handleImageUpload&&o.handleImageUpload(...s)),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,32),e("div",Qt,[(i(!0),u(b,null,k(c.value.images,(s,l)=>(i(),u("img",{key:l,src:s.preview,class:"w-16 h-16 object-cover rounded"},null,8,Xt))),128))]),g.value.images?(i(),u("div",Yt,a(g.value.images[0]),1)):C("",!0)]),e("div",null,[t[61]||(t[61]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Videos",-1)),e("input",{type:"file",accept:"video/*",multiple:"",onChange:t[13]||(t[13]=(...s)=>o.handleVideoUpload&&o.handleVideoUpload(...s)),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,32),e("div",Gt,[(i(!0),u(b,null,k(c.value.videos,(s,l)=>(i(),u("video",{key:l,src:s.preview,controls:"",class:"w-24 h-16 rounded"},null,8,Wt))),128))]),g.value.videos?(i(),u("div",Jt,a(g.value.videos[0]),1)):C("",!0)])]),e("div",Zt,[t[63]||(t[63]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price Offers",-1)),(i(!0),u(b,null,k(c.value.price_offers,(s,l)=>(i(),u("div",{key:l,class:"border rounded p-3 mb-2"},[e("div",es,[e("div",null,[m(e("input",{"onUpdate:modelValue":n=>s.amount=n,type:"number",min:"0",step:"0.01",placeholder:"Amount",class:"w-full px-2 py-1 border rounded"},null,8,ts),[[f,s.amount]]),g.value[`price_offers.${l}.amount`]?(i(),u("div",ss,a(g.value[`price_offers.${l}.amount`][0]),1)):C("",!0)]),e("div",null,[m(e("input",{"onUpdate:modelValue":n=>s.currency=n,type:"text",placeholder:"Currency (e.g. KES)",class:"w-full px-2 py-1 border rounded"},null,8,os),[[f,s.currency]]),g.value[`price_offers.${l}.currency`]?(i(),u("div",rs,a(g.value[`price_offers.${l}.currency`][0]),1)):C("",!0)]),e("div",null,[m(e("input",{"onUpdate:modelValue":n=>s.label=n,type:"text",placeholder:"Offer Label (e.g. Discount, Promo)",class:"w-full px-2 py-1 border rounded"},null,8,ls),[[f,s.label]])])]),e("button",{type:"button",onClick:n=>o.removePriceOffer(l),class:"text-red-600 text-xs mt-2"},"Remove Offer",8,as)]))),128)),e("button",{type:"button",onClick:t[14]||(t[14]=(...s)=>o.addPriceOffer&&o.addPriceOffer(...s)),class:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs mt-2"}," Add Price Offer "),c.value.price_offers&&c.value.price_offers.length?(i(),u("div",ns,[e("table",is,[t[62]||(t[62]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Amount"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Currency"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Label")])],-1)),e("tbody",ds,[(i(!0),u(b,null,k(c.value.price_offers,(s,l)=>(i(),u("tr",{key:l},[e("td",us,a(s.amount),1),e("td",cs,a(s.currency),1),e("td",ps,a(s.label),1)]))),128))])])])):C("",!0)]),e("div",ms,[e("button",{type:"button",onClick:$,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:U.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"},a(_.value?"Update":"Create"),9,gs)])],32)])])])):C("",!0),I.value?(i(),u("div",vs,[e("div",xs,[e("div",fs,[e("div",{class:"flex justify-between items-center mb-4"},[t[65]||(t[65]=e("h3",{class:"text-lg font-medium text-gray-900"},"Adjust Stock",-1)),e("button",{onClick:D,class:"text-gray-400 hover:text-gray-600"},t[64]||(t[64]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:te(ve,["prevent"]),class:"space-y-4"},[e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product",-1)),e("p",ys,a((r=x.value.product)==null?void 0:r.product_name),1)]),e("div",null,[t[67]||(t[67]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Current Stock",-1)),e("p",bs,a(L(x.value.product)),1)]),e("div",null,[t[68]||(t[68]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Adjustment Quantity *",-1)),m(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>x.value.quantity=s),type:"number",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",placeholder:"Enter quantity (positive to add, negative to subtract)"},null,512),[[f,x.value.quantity]])]),e("div",null,[t[69]||(t[69]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reason",-1)),m(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=s=>x.value.reason=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter reason for stock adjustment (optional)"},null,512),[[f,x.value.reason]])]),e("div",ks,[e("button",{type:"button",onClick:D,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:U.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"}," Adjust Stock ",8,hs)])],32)])])])):C("",!0)])]}),_:1}))}};export{Ts as default};
