import{E as ue,i as pe,r as h,j as w,k as ce,l as ne,c as O,o as m,w as ve,a as t,d as f,e as S,t as i,b as E,f as I,u as y,A as V,B as H,C as K,F as oe,g as le,n as C,a3 as ae,y as xe}from"./app-xFXW2RJu.js";import{n as G}from"./toast-ChvTciTp.js";import{_ as me}from"./AppLayout-1ndrzTpZ.js";import{u as ye}from"./orderStore-B0_MUIG_.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as fe,E as be,S as _e,T as he,a as we,C as re}from"./trash-2-CofnNtGp.js";import{S as Ee,F as ke}from"./search-sQmA_RPN.js";import{c as X}from"./createLucideIcon-DEYTQFG9.js";import"./webrtc-Bq-uw9MA.js";import"./africastalking-DwPxVLWU.js";import"./IncomingCallDialog-3p236v2h.js";/* empty css                                                                           *//**
 * @license lucide-vue-next v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=X("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=X("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=X("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-vue-next v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=X("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),k=pe.create({baseURL:"/api/v1",headers:{Accept:"application/json","Content-Type":"application/json"}}),Ie=ue("vendorExpenses",()=>{const d=h([]),r=h(!1),u=h(null),P=h({currentPage:1,perPage:10,total:0,lastPage:1}),U=w(()=>n=>d.value.find(o=>o.id===n)),$=w(()=>n=>d.value.filter(o=>o.vendor_id===n)),q=w(()=>n=>d.value.filter(o=>o.status===n)),g=w(()=>n=>d.value.filter(o=>o.expense_type===n)),z=w(()=>n=>d.value.filter(o=>o.country_id===n)),A=w(()=>d.value.length),b=w(()=>d.value.reduce((n,o)=>{const a=parseFloat(o.amount)||0;return o.expense_type==="expense"?n-a:n+a},0)),p=w(()=>d.value.reduce((n,o)=>(n[o.status]=(n[o.status]||0)+1,n),{}));return{expenses:d,loading:r,error:u,pagination:P,getExpenseById:U,getExpensesBySeller:$,getExpensesByStatus:q,getExpensesByType:g,getExpensesByCountry:z,totalExpenses:A,totalAmount:b,expensesByStatus:p,fetchExpenses:async(n={})=>{var o,a;r.value=!0,u.value=null;try{const{data:s}=await k.get("/seller-expenses",{params:n});console.log("Raw API Response:",s),s.success&&s.expenses&&s.expenses.data&&Array.isArray(s.expenses.data)?(d.value=s.expenses.data,P.value={currentPage:s.expenses.current_page||1,perPage:s.expenses.per_page||20,total:s.expenses.total||s.expenses.data.length,lastPage:s.expenses.last_page||1},console.log("Parsed expenses:",d.value),console.log("Pagination:",P.value)):s.data&&Array.isArray(s.data)?(d.value=s.data,s.meta&&(P.value={currentPage:s.meta.current_page,perPage:s.meta.per_page,total:s.meta.total,lastPage:s.meta.last_page})):(d.value=Array.isArray(s)?s:[],console.warn("Unexpected API response structure")),console.log("Final expenses count:",d.value.length)}catch(s){u.value=((a=(o=s.response)==null?void 0:o.data)==null?void 0:a.message)||s.message,console.error("Error fetching expenses:",s),d.value=[]}finally{r.value=!1}},fetchExpenseById:async n=>{var o,a;r.value=!0,u.value=null;try{const{data:s}=await k.get(`/seller-expenses/${n}`);return s.data||s}catch(s){throw u.value=((a=(o=s.response)==null?void 0:o.data)==null?void 0:a.message)||s.message,console.error("Error fetching expense:",s),s}finally{r.value=!1}},createExpense:async n=>{var o,a,s;r.value=!0,u.value=null;try{if(!((o=n.description)!=null&&o.trim()))throw new Error("Description is required");if(!n.amount||parseFloat(n.amount)<=0)throw new Error("Valid amount is required");if(!n.vendor_id)throw new Error("Seller is required");if(!n.country_id)throw new Error("Country is required");const e={description:n.description.trim(),amount:parseFloat(n.amount),expense_type:n.expense_type||"expense",vendor_id:parseInt(n.vendor_id),country_id:parseInt(n.country_id),status:n.status||"not_applied",incurred_on:n.incurred_on||null,source_country_id:n.source_country_id?parseInt(n.source_country_id):null,destination_country_id:n.destination_country_id?parseInt(n.destination_country_id):null},{data:c}=await k.post("/seller-expenses",e),v=c.data||c;return d.value.unshift(v),G.success("Expense created successfully."),v}catch(e){throw u.value=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||e.message,console.error("Error creating expense:",e),e}finally{r.value=!1}},updateExpense:async(n,o)=>{var a,s,e;r.value=!0,u.value=null;try{if(!((a=o.description)!=null&&a.trim()))throw new Error("Description is required");if(!o.amount||parseFloat(o.amount)<=0)throw new Error("Valid amount is required");if(!o.vendor_id)throw new Error("Seller is required");if(!o.country_id)throw new Error("Country is required");const c={description:o.description.trim(),amount:parseFloat(o.amount),expense_type:o.expense_type||"expense",vendor_id:parseInt(o.vendor_id),country_id:parseInt(o.country_id),status:o.status||"not_applied",incurred_on:o.incurred_on||null,source_country_id:o.source_country_id?parseInt(o.source_country_id):null,destination_country_id:o.destination_country_id?parseInt(o.destination_country_id):null},{data:v}=await k.put(`/seller-expenses/${n}`,c),_=v.data||v,l=d.value.findIndex(M=>M.id===n);return l!==-1&&(d.value[l]=_),G.success("Expense updated successfully."),_}catch(c){throw u.value=((e=(s=c.response)==null?void 0:s.data)==null?void 0:e.message)||c.message,console.error("Error updating expense:",c),c}finally{r.value=!1}},deleteExpense:async n=>{var o,a;r.value=!0,u.value=null;try{await k.delete(`/seller-expenses/${n}`);const s=d.value.findIndex(e=>e.id===n);s!==-1&&d.value.splice(s,1),G.success("Expense deleted successfully.")}catch(s){throw u.value=((a=(o=s.response)==null?void 0:o.data)==null?void 0:a.message)||s.message,console.error("Error deleting expense:",s),s}finally{r.value=!1}},updateExpenseStatus:async(n,o)=>{var a,s;r.value=!0,u.value=null;try{if(!U.value(n))throw new Error("Expense not found");const{data:c}=await k.patch(`/seller-expenses/${n}/status`,{status:o}),v=c.data||c,_=d.value.findIndex(l=>l.id===n);return _!==-1&&(d.value[_]=v),v}catch(e){throw u.value=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||e.message,console.error("Error updating expense status:",e),e}finally{r.value=!1}},bulkUpdateStatus:async(n,o)=>{var a,s;r.value=!0,u.value=null;try{const{data:e}=await k.post("/seller-expenses/bulk-status",{ids:n,status:o});return n.forEach(c=>{const v=d.value.findIndex(_=>_.id===c);v!==-1&&(d.value[v].status=o,d.value[v].updated_at=new Date().toISOString())}),e}catch(e){throw u.value=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||e.message,console.error("Error bulk updating expense status:",e),e}finally{r.value=!1}},fetchExpensesByDateRange:async(n,o)=>{var a,s;r.value=!0,u.value=null;try{const{data:e}=await k.get("/seller-expenses/date-range",{params:{start_date:n,end_date:o}});return e.data||e}catch(e){throw u.value=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||e.message,console.error("Error fetching expenses by date range:",e),e}finally{r.value=!1}},getExpenseStatistics:async(n={})=>{var o,a;r.value=!0,u.value=null;try{const{data:s}=await k.get("/seller-expenses/statistics",{params:n});return s.data||s}catch(s){throw u.value=((a=(o=s.response)==null?void 0:o.data)==null?void 0:a.message)||s.message,console.error("Error fetching expense statistics:",s),s}finally{r.value=!1}},exportExpenses:async(n="csv",o={})=>{var a,s;r.value=!0,u.value=null;try{const{data:e}=await k.get("/seller-expenses/export",{params:{format:n,...o},responseType:"blob"}),c=window.URL.createObjectURL(new Blob([e])),v=document.createElement("a");v.href=c,v.setAttribute("download",`expenses_${Date.now()}.${n}`),document.body.appendChild(v),v.click(),v.remove(),window.URL.revokeObjectURL(c)}catch(e){throw u.value=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||e.message,console.error("Error exporting expenses:",e),e}finally{r.value=!1}},searchExpenses:async(n,o={})=>{var a,s;r.value=!0,u.value=null;try{const{data:e}=await k.get("/seller-expenses/search",{params:{q:n,...o}});return d.value=e.data||e,e}catch(e){throw u.value=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||e.message,console.error("Error searching expenses:",e),e}finally{r.value=!1}},resetStore:()=>{d.value=[],r.value=!1,u.value=null,P.value={currentPage:1,perPage:10,total:0,lastPage:1}}}}),Ae={class:"min-h-screen bg-gray-50 p-6"},Ve={class:"max-w-7xl mx-auto"},Pe={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},Ue={class:"flex justify-between items-center mb-6"},je={class:"text-gray-600 mt-1"},Me={class:"flex flex-col md:flex-row gap-4"},$e={class:"flex-1 relative"},qe={class:"flex items-center gap-2"},ze={class:"bg-white rounded-lg shadow-sm overflow-hidden"},Fe={key:0,class:"flex items-center justify-center py-12"},Be={key:1,class:"p-6 text-center"},Le={class:"text-red-600 mb-2"},Te={class:"text-gray-600 mb-4"},Ne={key:2,class:"overflow-x-auto"},Re={class:"w-full"},Oe={key:0},He={class:"px-4 py-3 font-medium"},Ke={class:"px-4 py-3"},Xe={class:"flex items-start gap-2"},Qe={class:"line-clamp-2"},Ze={class:"px-4 py-3"},Ge={class:"px-4 py-3"},Je={class:"px-4 py-3"},We={class:"flex items-center gap-2"},Ye={class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm"},De={class:"text-sm font-medium"},et={class:"px-4 py-3"},tt={class:"px-4 py-3 text-sm text-gray-600"},st={class:"px-4 py-3 text-sm text-gray-600"},nt={class:"px-4 py-3"},ot={class:"flex gap-2"},lt=["onClick"],at=["onClick"],rt=["onClick"],it={key:3,class:"border-t p-4 flex justify-between items-center"},dt={class:"text-sm text-gray-600"},ut={class:"flex gap-2"},pt=["disabled"],ct=["onClick"],vt=["disabled"],xt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},mt={class:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto"},yt={class:"sticky top-0 bg-white border-b p-6 flex justify-between items-center"},gt={class:"text-2xl font-bold"},ft={class:"p-6"},bt={key:0,class:"space-y-6"},_t={class:"grid grid-cols-2 gap-4"},ht={class:"font-semibold"},wt={class:"mt-1"},Et={class:"col-span-2"},kt={class:"font-semibold"},Ct={class:"font-semibold text-lg"},St={class:"mt-1"},It={class:"col-span-2"},At={class:"bg-gray-50 rounded-lg p-4"},Vt={class:"font-medium"},Pt={class:"font-semibold"},Ut={class:"font-semibold"},jt={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm"},Mt={key:0,class:"text-red-500 text-sm mt-1"},$t={class:"grid grid-cols-2 gap-4"},qt={key:0,class:"text-red-500 text-sm mt-1"},zt={key:0,class:"text-red-500 text-sm mt-1"},Ft={key:0,class:"text-red-500 text-sm mt-1"},Bt={class:"flex gap-3 justify-end pt-4 border-t"},Lt=["disabled"],Tt=["disabled"],T=10,Nt={__name:"Index",setup(d){const r=Ie(),u=ye(),P=w(()=>u.vendorOptions),U=h(""),$=h("all"),q=h("all"),g=h(1),z=h(!1),A=h("create"),b=h(null),p=h({description:"",amount:"",expense_type:"expense",vendor_id:"",country_id:"",status:"not_applied",incurred_on:""}),x=h({});ce(async()=>{await r.fetchExpenses(),await u.fetchDropdownOptions()});const j=w(()=>{let s=r.expenses;if(U.value){const e=U.value.toLowerCase();s=s.filter(c=>{var v,_,l,M,L;return((v=c.description)==null?void 0:v.toLowerCase().includes(e))||((l=(_=c.vendor)==null?void 0:_.username)==null?void 0:l.toLowerCase().includes(e))||((L=(M=c.vendor)==null?void 0:M.email)==null?void 0:L.toLowerCase().includes(e))})}return $.value!=="all"&&(s=s.filter(e=>e.status===$.value)),q.value!=="all"&&(s=s.filter(e=>e.expense_type===q.value)),s}),F=w(()=>Math.ceil(j.value.length/T)),Q=w(()=>{const s=(g.value-1)*T,e=g.value*T;return j.value.slice(s,e)}),J=w(()=>j.value.reduce((s,e)=>s+parseFloat(e.amount),0)),Z=()=>{var e;const s={};return(e=p.value.description)!=null&&e.trim()||(s.description="Description is required"),(!p.value.amount||parseFloat(p.value.amount)<=0)&&(s.amount="Valid amount is required"),p.value.vendor_id||(s.vendor_id="vendor is required"),p.value.country_id||(s.country_id="Country is required"),x.value=s,Object.keys(s).length===0},W=async()=>{if(Z())try{await r.createExpense(p.value),B()}catch(s){x.value={submit:s.message||"Failed to create expense"}}},Y=async()=>{if(Z())try{await r.updateExpense(b.value.id,p.value),B()}catch(s){x.value={submit:s.message||"Failed to update expense"}}},D=async s=>{if(window.confirm("Are you sure you want to delete this expense?"))try{await r.deleteExpense(s)}catch(e){alert(e.message||"Failed to delete expense")}},N=(s,e=null)=>{A.value=s,b.value=e,s==="create"?p.value={description:"",amount:"",expense_type:"expense",vendor_id:"",country_id:"",status:"not_applied",incurred_on:""}:e&&(p.value={description:e.description,amount:e.amount.toString(),expense_type:e.expense_type,vendor_id:e.vendor_id.toString(),country_id:e.country_id.toString(),status:e.status,incurred_on:e.incurred_on?e.incurred_on:""}),x.value={},z.value=!0},B=()=>{z.value=!1,b.value=null,x.value={}},R=s=>{x.value[s]&&delete x.value[s]},n=s=>{const e={not_applied:{bg:"bg-gray-500",icon:ie,text:"Not Applied"},applied:{bg:"bg-blue-500",icon:re,text:"Applied"},approved:{bg:"bg-green-500",icon:re,text:"Approved"},rejected:{bg:"bg-red-500",icon:we,text:"Rejected"}};return e[s]||e.not_applied},o=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),a=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"KES"}).format(s);return(s,e)=>{const c=ne("v-select"),v=ne("v-text-field");return m(),O(me,null,{default:ve(()=>{var _;return[t("div",Ae,[t("div",Ve,[t("div",Pe,[t("div",Ue,[t("div",null,[e[21]||(e[21]=t("h1",{class:"text-3xl font-bold text-gray-800"}," Vendor Expenses ",-1)),t("p",je,i(j.value.length)+" total expenses â€¢ "+i(a(J.value))+" total amount ",1)]),t("button",{onClick:e[0]||(e[0]=l=>N("create")),class:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"},[E(y(fe),{size:20}),e[22]||(e[22]=I(" Add Expense "))])]),t("div",Me,[t("div",$e,[E(y(Ee),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),V(t("input",{type:"text",placeholder:"Search by description, vendor, or email...",class:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":e[1]||(e[1]=l=>U.value=l),onInput:e[2]||(e[2]=l=>g.value=1)},null,544),[[H,U.value]])]),t("div",qe,[E(y(ke),{size:20,class:"text-gray-400"}),V(t("select",{class:"border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":e[3]||(e[3]=l=>$.value=l),onChange:e[4]||(e[4]=l=>g.value=1)},e[23]||(e[23]=[t("option",{value:"all"},"All Status",-1),t("option",{value:"not_applied"},"Not Applied",-1),t("option",{value:"applied"},"Applied",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"rejected"},"Rejected",-1)]),544),[[K,$.value]]),V(t("select",{class:"border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":e[5]||(e[5]=l=>q.value=l),onChange:e[6]||(e[6]=l=>g.value=1)},e[24]||(e[24]=[t("option",{value:"all"},"All Types",-1),t("option",{value:"expense"},"Expense",-1),t("option",{value:"income"},"Income",-1)]),544),[[K,q.value]])])])]),t("div",ze,[y(r).loading?(m(),f("div",Fe,[E(y(de),{class:"animate-spin text-blue-600 mr-2",size:24}),e[25]||(e[25]=t("span",{class:"text-gray-600"},"Loading expenses...",-1))])):y(r).error?(m(),f("div",Be,[t("div",Le,[E(y(ie),{class:"inline-block mr-2",size:20}),e[26]||(e[26]=I(" Error loading expenses "))]),t("p",Te,i(y(r).error),1),t("button",{onClick:e[7]||(e[7]=l=>y(r).fetchExpenses()),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"}," Retry ")])):(m(),f("div",Ne,[t("table",Re,[e[28]||(e[28]=t("thead",{class:"bg-blue-600 text-white"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left"},"ID"),t("th",{class:"px-4 py-3 text-left"}," Description "),t("th",{class:"px-4 py-3 text-left"},"Amount"),t("th",{class:"px-4 py-3 text-left"},"Type"),t("th",{class:"px-4 py-3 text-left"},"Vendor"),t("th",{class:"px-4 py-3 text-left"},"Status"),t("th",{class:"px-4 py-3 text-left"}," Incurred On "),t("th",{class:"px-4 py-3 text-left"}," Created Date "),t("th",{class:"px-4 py-3 text-left"},"Actions")])],-1)),t("tbody",null,[Q.value.length===0?(m(),f("tr",Oe,e[27]||(e[27]=[t("td",{colspan:"8",class:"px-4 py-8 text-center text-gray-500"}," No expenses found ",-1)]))):S("",!0),(m(!0),f(oe,null,le(Q.value,(l,M)=>{var L,ee,te;return m(),f("tr",{key:l.id,class:C(M%2===0?"bg-amber-50":"bg-white")},[t("td",He," #"+i(l.id),1),t("td",Ke,[t("div",Xe,[E(y(Ce),{size:16,class:"text-gray-400 mt-1 flex-shrink-0"}),t("span",Qe,i(l.description),1)])]),t("td",Ze,[t("span",{class:C(["font-semibold",l.expense_type==="expense"?"text-red-600":"text-green-600"])},i(l.expense_type==="expense"?"-":"+")+i(a(l.amount)),3)]),t("td",Ge,[t("span",{class:C(["px-2 py-1 rounded text-xs font-medium",l.expense_type==="expense"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},i(l.expense_type==="expense"?"Expense":"Income"),3)]),t("td",Je,[t("div",We,[t("div",Ye,i(((ee=(L=l.vendor)==null?void 0:L.first_name)==null?void 0:ee[0])||"U"),1),t("div",null,[t("p",De,i(((te=l.vendor)==null?void 0:te.username)||"N/A"),1)])])]),t("td",et,[t("span",{class:C(["inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs text-white",n(l.status).bg])},[(m(),O(ae(n(l.status).icon),{size:12})),I(" "+i(n(l.status).text),1)],2)]),t("td",tt,i(o(l.incurred_on)),1),t("td",st,i(o(l.created_at)),1),t("td",nt,[t("div",ot,[t("button",{onClick:se=>N("view",l),class:"p-2 hover:bg-gray-100 rounded-lg transition",title:"View Details"},[E(y(be),{size:18,class:"text-gray-600"})],8,lt),t("button",{onClick:se=>N("edit",l),class:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Edit"},[E(y(_e),{size:18,class:"text-blue-600"})],8,at),t("button",{onClick:se=>D(l.id),class:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Delete"},[E(y(he),{size:18,class:"text-red-600"})],8,rt)])])],2)}),128))])])])),F.value>1?(m(),f("div",it,[t("div",dt," Showing "+i((g.value-1)*T+1)+" to "+i(Math.min(g.value*T,j.value.length))+" of "+i(j.value.length)+" expenses ",1),t("div",ut,[t("button",{onClick:e[8]||(e[8]=l=>g.value=Math.max(1,g.value-1)),disabled:g.value===1,class:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition"}," Previous ",8,pt),(m(!0),f(oe,null,le(F.value,l=>(m(),f("button",{key:l,onClick:M=>g.value=l,class:C(["px-4 py-2 rounded-lg transition",g.value===l?"bg-blue-600 text-white":"border hover:bg-gray-50"])},i(l),11,ct))),128)),t("button",{onClick:e[9]||(e[9]=l=>g.value=Math.min(F.value,g.value+1)),disabled:g.value===F.value,class:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition"}," Next ",8,vt)])])):S("",!0)])]),z.value?(m(),f("div",xt,[t("div",mt,[t("div",yt,[t("h2",gt,i(A.value==="create"?"Add New Expense":A.value==="edit"?"Edit Expense":"Expense Details"),1),t("button",{onClick:B,class:"text-gray-500 hover:text-gray-700 transition"},[E(y(Se),{size:24})])]),t("div",ft,[A.value==="view"?(m(),f("div",bt,[t("div",_t,[t("div",null,[e[29]||(e[29]=t("p",{class:"text-sm text-gray-600"}," Expense ID ",-1)),t("p",ht," #"+i(b.value.id),1)]),t("div",null,[e[30]||(e[30]=t("p",{class:"text-sm text-gray-600"},"Status",-1)),t("div",wt,[t("span",{class:C(["inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs text-white",n(b.value.status).bg])},[(m(),O(ae(n(b.value.status).icon),{size:12})),I(" "+i(n(b.value.status).text),1)],2)])]),t("div",Et,[e[31]||(e[31]=t("p",{class:"text-sm text-gray-600"}," Description ",-1)),t("p",kt,i(b.value.description),1)]),t("div",null,[e[32]||(e[32]=t("p",{class:"text-sm text-gray-600"},"Amount",-1)),t("p",Ct,i(a(b.value.amount)),1)]),t("div",null,[e[33]||(e[33]=t("p",{class:"text-sm text-gray-600"},"Type",-1)),t("div",St,[t("span",{class:C(["px-2 py-1 rounded text-xs font-medium",b.value.expense_type==="expense"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},i(b.value.expense_type==="expense"?"Expense":"Income"),3)])]),t("div",It,[e[34]||(e[34]=t("p",{class:"text-sm text-gray-600 mb-2"}," Vendor Information ",-1)),t("div",At,[t("p",Vt,i(((_=b.value.vendor)==null?void 0:_.name)||"N/A"),1)])]),t("div",null,[e[35]||(e[35]=t("p",{class:"text-sm text-gray-600"}," Created Date ",-1)),t("p",Pt,i(o(b.value.created_at)),1)]),t("div",null,[e[36]||(e[36]=t("p",{class:"text-sm text-gray-600"}," Last Updated ",-1)),t("p",Ut,i(o(b.value.updated_at)),1)])])])):(m(),f("form",{key:1,onSubmit:e[20]||(e[20]=xe(l=>A.value==="create"?W():Y(),["prevent"])),class:"space-y-4"},[x.value.submit?(m(),f("div",jt,i(x.value.submit),1)):S("",!0),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium mb-2"},[I(" Description "),t("span",{class:"text-red-500"},"*")],-1)),V(t("textarea",{class:C(["w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",x.value.description?"border-red-500":""]),rows:"3","onUpdate:modelValue":e[10]||(e[10]=l=>p.value.description=l),onInput:e[11]||(e[11]=l=>R("description")),placeholder:"Enter expense description"},null,34),[[H,p.value.description]]),x.value.description?(m(),f("p",Mt,i(x.value.description),1)):S("",!0)]),t("div",$t,[t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium mb-2"},[I(" Amount (KES) "),t("span",{class:"text-red-500"},"*")],-1)),V(t("input",{type:"number",step:"0.01",min:"0",class:C(["w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",x.value.amount?"border-red-500":""]),"onUpdate:modelValue":e[12]||(e[12]=l=>p.value.amount=l),onInput:e[13]||(e[13]=l=>R("amount")),placeholder:"0.00"},null,34),[[H,p.value.amount]]),x.value.amount?(m(),f("p",qt,i(x.value.amount),1)):S("",!0)]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium mb-2"},[I(" Type "),t("span",{class:"text-red-500"},"*")],-1)),V(t("select",{class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":e[14]||(e[14]=l=>p.value.expense_type=l)},e[39]||(e[39]=[t("option",{value:"expense"},"Expense",-1),t("option",{value:"income"},"Income",-1)]),512),[[K,p.value.expense_type]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium mb-2"},"Vendor ",-1)),E(c,{modelValue:p.value.vendor_id,"onUpdate:modelValue":e[15]||(e[15]=l=>p.value.vendor_id=l),items:P.value,"item-title":"name","item-value":"id",label:"Vendor","prepend-inner-icon":"mdi-domain",variant:"outlined",density:"comfortable"},null,8,["modelValue","items"])]),t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium mb-2"},[I(" Country ID "),t("span",{class:"text-red-500"},"*")],-1)),V(t("input",{type:"number",class:C(["w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",x.value.country_id?"border-red-500":""]),"onUpdate:modelValue":e[16]||(e[16]=l=>p.value.country_id=l),onInput:e[17]||(e[17]=l=>R("country_id")),placeholder:"Enter country ID"},null,34),[[H,p.value.country_id]]),x.value.country_id?(m(),f("p",zt,i(x.value.country_id),1)):S("",!0)]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium mb-2"},"Status",-1)),V(t("select",{class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":e[18]||(e[18]=l=>p.value.status=l)},e[43]||(e[43]=[t("option",{value:"not_applied"}," Not Applied ",-1),t("option",{value:"applied"},"Applied",-1),t("option",{value:"approved"}," Approved ",-1),t("option",{value:"rejected"}," Rejected ",-1)]),512),[[K,p.value.status]])]),t("div",null,[e[45]||(e[45]=t("label",{class:"block text-sm font-medium mb-2"}," Incurred On (Optional) ",-1)),E(v,{modelValue:p.value.incurred_on,"onUpdate:modelValue":e[19]||(e[19]=l=>p.value.incurred_on=l),label:"Incurred On",type:"date","prepend-inner-icon":"mdi-calendar-clock",variant:"outlined",density:"comfortable"},null,8,["modelValue"]),x.value.incurred_on?(m(),f("p",Ft,i(x.value.incurred_on),1)):S("",!0)])]),t("div",Bt,[t("button",{type:"button",onClick:B,disabled:y(r).loading,class:"px-4 py-2 border rounded-lg hover:bg-gray-50 transition disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,Lt),t("button",{type:"submit",disabled:y(r).loading,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[y(r).loading?(m(),O(y(de),{key:0,class:"animate-spin",size:16})):S("",!0),I(" "+i(A.value==="create"?"Create Expense":"Update Expense"),1)],8,Tt)])],32))])])])):S("",!0)])]}),_:1})}}},es=ge(Nt,[["__scopeId","data-v-9efdb0cf"]]);export{es as default};
