import{A as bt,Q as Ct,r as y,j as L,s as G,l as _,c as O,o as v,w as r,b as l,a as p,t as w,e as U,f as d,d as V,F as kt,p as xt,q as St,R as Vt,u as It}from"./app--XFzZDMV.js";/* empty css                                                                     */import{_ as Et}from"./_plugin-vue_export-helper-DlAUqK2U.js";const At=bt("order",{state:()=>({orderFilterStatus:null,orderFilterProduct:null,orderFilterZone:null,orderFilterAgent:null,orderFilterRider:null,orderFilterVendor:null,orderDateRange:[],orderSearch:"",orderStatusOptions:[{title:"All Status",value:null},{title:"Active",value:"active"},{title:"Inactive",value:"inactive"},{title:"Pending",value:"pending"},{title:"Processing",value:"processing"},{title:"Completed",value:"completed"},{title:"Cancelled",value:"cancelled"},{title:"Inprogress",value:"Inprogress"}],productOptions:[],zoneOptions:[],agentOptions:[],riderOptions:[],vendorOptions:[],clientOptions:[],warehouseOptions:[],countryOptions:[],orders:[],filteredOrders:[],selectedOrders:[],dialog:!1,createDialog:!1,selectedOrderId:null,selectedOrder:null,loading:{orders:!1,refresh:!1,statusOptions:!1,productOptions:!1,zoneOptions:!1,agentOptions:!1,riderOptions:!1,vendorOptions:!1,clientOptions:!1,warehouseOptions:!1,countryOptions:!1,creating:!1,updating:!1,deleting:!1},pagination:{page:1,itemsPerPage:25,totalItems:0},vendorProductsCache:new Map,lastError:null,notifications:[],initialized:!1}),getters:{activeFilterCount:t=>{let o=0;return t.orderFilterStatus&&o++,t.orderFilterProduct&&o++,t.orderFilterZone&&o++,t.orderFilterAgent&&o++,t.orderFilterRider&&o++,t.orderFilterVendor&&o++,t.orderDateRange&&t.orderDateRange.length>0&&o++,t.orderSearch&&o++,o},currentFilters:t=>({status:t.orderFilterStatus,product:t.orderFilterProduct,zone:t.orderFilterZone,agent:t.orderFilterAgent,rider:t.orderFilterRider,vendor:t.orderFilterVendor,dateRange:t.orderDateRange,search:t.orderSearch}),isLoading:t=>Object.values(t.loading).some(o=>o),getVendorProducts:t=>o=>t.vendorProductsCache.get(o)||[],getOrderById:t=>o=>t.orders.find(i=>i.id===o)||null,tableItems:t=>{const o=t.activeFilterCount>0?t.filteredOrders:t.orders;return console.log("[OrderStore] tableItems getter called, returning:",(o==null?void 0:o.length)||0,"items"),o||[]}},actions:{async initialize(){if(this.initialized){console.log("[OrderStore] Already initialized, skipping...");return}console.log("[OrderStore] Initializing store...");try{await Promise.allSettled([this.loadOrderStatusOptions(),this.loadProductOptions(),this.loadZoneOptions(),this.loadAgentOptions(),this.loadRiderOptions(),this.loadVendorOptions(),this.loadClientOptions(),this.loadWarehouseOptions(),this.loadCountryOptions()]),await this.loadOrdersWithFilters({}),this.initialized=!0,console.log("[OrderStore] Initialization complete")}catch(t){console.error("[OrderStore] Initialization error:",t),this.setError(t)}},setError(t){this.lastError=t,console.error("Order Store Error:",t)},clearError(){this.lastError=null},addNotification(t){this.notifications.push({id:Date.now(),timestamp:new Date,...t})},removeNotification(t){this.notifications=this.notifications.filter(o=>o.id!==t)},clearAllFilters(){this.orderFilterStatus=null,this.orderFilterProduct=null,this.orderFilterZone=null,this.orderFilterAgent=null,this.orderFilterRider=null,this.orderFilterVendor=null,this.orderDateRange=[],this.orderSearch=""},async apiCall(t,o={}){try{const i={url:t,method:o.method?o.method.toLowerCase():"get",headers:{Accept:"application/json",...o.headers||{}},withCredentials:!0};return o.body&&(i.data=typeof o.body=="string"?JSON.parse(o.body):o.body),i.method==="get"&&i.data&&(i.params=i.data,delete i.data),(await axios(i)).data}catch(i){let g="Unknown error";throw i.response&&i.response.data?g=i.response.data.message||JSON.stringify(i.response.data):i.message&&(g=i.message),this.setError(new Error(g)),new Error(g)}},async loadOrderStatusOptions(){try{this.loading.statusOptions=!0;try{const t=await this.apiCall("/api/v1/order-statuses");this.orderStatusOptions=Array.isArray(t)?t:t.statuses||this.orderStatusOptions}catch{console.warn("Could not load status options from API, using defaults")}}catch(t){console.error("Error loading status options:",t)}finally{this.loading.statusOptions=!1}},async loadProductOptions(){try{this.loading.productOptions=!0;const t=await this.apiCall("/api/v1/products");this.productOptions=Array.isArray(t)?t:t.products||[]}catch(t){console.error("Error loading product options:",t),this.productOptions=[]}finally{this.loading.productOptions=!1}},async loadZoneOptions(){try{this.loading.zoneOptions=!0;const t=await this.apiCall("/api/v1/zones");this.zoneOptions=Array.isArray(t)?t:t.zones||[]}catch(t){console.error("Error loading zone options:",t),this.zoneOptions=[]}finally{this.loading.zoneOptions=!1}},async loadAgentOptions(){try{this.loading.agentOptions=!0;const t=await this.apiCall("/api/v1/agents");this.agentOptions=Array.isArray(t)?t:t.agents||[]}catch(t){console.error("Error loading agent options:",t),this.agentOptions=[]}finally{this.loading.agentOptions=!1}},async loadRiderOptions(){try{this.loading.riderOptions=!0;const t=await this.apiCall("/api/v1/riders");this.riderOptions=Array.isArray(t)?t:t.riders||[]}catch(t){console.error("Error loading rider options:",t),this.riderOptions=[]}finally{this.loading.riderOptions=!1}},async loadVendorOptions(){try{this.loading.vendorOptions=!0;const t=await this.apiCall("/api/v1/vendors");this.vendorOptions=Array.isArray(t)?t:t.vendors||[]}catch(t){console.error("Error loading vendor options:",t),this.vendorOptions=[]}finally{this.loading.vendorOptions=!1}},async loadClientOptions(t=""){try{this.loading.clientOptions=!0;const o=t?`?search=${encodeURIComponent(t)}&limit=50`:"?limit=100",i=await this.apiCall(`/api/v1/clients${o}`);this.clientOptions=Array.isArray(i)?i:i.clients||[]}catch(o){console.error("Error loading client options:",o),this.clientOptions=[]}finally{this.loading.clientOptions=!1}},async loadWarehouseOptions(){try{this.loading.warehouseOptions=!0;const t=await this.apiCall("/api/v1/warehouses");this.warehouseOptions=Array.isArray(t)?t:t.warehouses||[]}catch(t){console.error("Error loading warehouse options:",t),this.warehouseOptions=[]}finally{this.loading.warehouseOptions=!1}},async loadCountryOptions(){try{this.loading.countryOptions=!0;const t=await this.apiCall("/api/v1/countries");this.countryOptions=Array.isArray(t)?t:t.countries||[]}catch(t){console.error("Error loading country options:",t),this.countryOptions=[]}finally{this.loading.countryOptions=!1}},async loadOrdersWithFilters(t={}){try{console.log("[OrderStore] loadOrdersWithFilters called with filters:",t),this.loading.orders=!0,this.clearError();let o="/api/v1/orders";const i=new URLSearchParams;Object.entries(t).forEach(([b,f])=>{f!=null&&f!==""&&(Array.isArray(f)?f.length>0&&(console.log(`[OrderStore] Adding array filter: ${b} =`,f),i.append(b,JSON.stringify(f))):(console.log(`[OrderStore] Adding filter: ${b} =`,f),i.append(b,f)))}),i.append("page",this.pagination.page.toString()),i.append("per_page",this.pagination.itemsPerPage.toString()),i.toString()&&(o+=`?${i.toString()}`),console.log("[OrderStore] Final orders API URL:",o);const g=await this.apiCall(o);return console.log("[OrderStore] Raw API Response:",g),g&&typeof g=="object"?g.data&&Array.isArray(g.data)?(this.orders=g.data,this.filteredOrders=g.data,g.meta&&(this.pagination.totalItems=g.meta.total||0),console.log("[OrderStore] Successfully loaded orders:",this.orders.length),console.log("[OrderStore] Sample order:",this.orders[0]),this.orders.forEach(b=>{!b.orderItems&&b.order_items&&(b.orderItems=b.order_items),b.orderItems||(b.orderItems=[])})):Array.isArray(g)?(this.orders=g,this.filteredOrders=g,this.pagination.totalItems=g.length,console.log("[OrderStore] Loaded direct array orders:",this.orders.length)):(console.warn("[OrderStore] Unexpected response format:",g),this.orders=[],this.filteredOrders=[],this.pagination.totalItems=0):(console.warn("[OrderStore] Invalid response:",g),this.orders=[],this.filteredOrders=[],this.pagination.totalItems=0),this.orders}catch(o){throw console.error("[OrderStore] Error loading orders:",o),this.orders=[],this.filteredOrders=[],this.pagination.totalItems=0,o}finally{this.loading.orders=!1,console.log("[OrderStore] loadOrdersWithFilters finished. Orders count:",this.orders.length)}},async loadOrder(t){try{this.loading.orders=!0;const o=await this.apiCall(`/api/v1/orders/${t}`),i=o.data||o;return i&&(i.orderItems=i.orderItems||i.order_items||[],i.client=i.client||{},i.vendor=i.vendor||{},i.agent=i.agent||{},i.rider=i.rider||{},i.warehouse=i.warehouse||{},i.country=i.country||{}),i}catch(o){throw console.error("Error loading order:",o),o}finally{this.loading.orders=!1}},async openDialog(t){console.log("[OrderStore] openDialog called with:",t);const o=typeof t=="object"&&t!==null&&"id"in t?t.id:t;this.selectedOrderId=o,this.dialog=!0;try{const i=await this.loadOrder(o);this.selectedOrder=i,console.log("[OrderStore] Order loaded and stored:",i)}catch(i){console.error("[OrderStore] Error loading order:",i),this.selectedOrder=null,this.addNotification({type:"error",message:"Failed to load order details",details:i.message})}},openCreateDialog(){this.createDialog=!0,this.dialog=!0,this.selectedOrderId=null,this.selectedOrder=null},closeDialog(){this.dialog=!1,this.createDialog=!1,this.selectedOrderId=null,this.selectedOrder=null},async updateOrder(t,o){try{this.loading.updating=!0,this.clearError();const i=await this.apiCall(`/api/v1/orders/${t}`,{method:"PUT",body:JSON.stringify(o)}),g=i.data||i;this.selectedOrder&&this.selectedOrder.id===t&&(this.selectedOrder=g);const b=this.orders.findIndex(f=>f.id===t);return b!==-1&&(this.orders[b]=g,this.filteredOrders[b]=g),this.addNotification({type:"success",message:"Order updated successfully"}),g}catch(i){throw this.addNotification({type:"error",message:"Failed to update order",details:i.message}),i}finally{this.loading.updating=!1}},async createOrder(t){try{if(this.loading.creating=!0,this.clearError(),!t.client_id)throw new Error("Client is required");if(!t.vendor_id)throw new Error("Vendor is required");const o=await this.apiCall("/api/v1/orders",{method:"POST",body:JSON.stringify(t)}),i=o.data||o;return this.orders.unshift(i),this.filteredOrders.unshift(i),this.pagination.totalItems+=1,this.addNotification({type:"success",message:"Order created successfully",details:`Order ${i.order_no} has been created`}),i}catch(o){throw this.addNotification({type:"error",message:"Failed to create order",details:o.message}),o}finally{this.loading.creating=!1}},async deleteOrder(t){try{return this.loading.deleting=!0,this.clearError(),await this.apiCall(`/api/v1/orders/${t}`,{method:"DELETE"}),this.orders=this.orders.filter(o=>o.id!==t),this.filteredOrders=this.filteredOrders.filter(o=>o.id!==t),this.pagination.totalItems=Math.max(0,this.pagination.totalItems-1),this.selectedOrder&&this.selectedOrder.id===t&&(this.selectedOrder=null,this.selectedOrderId=null,this.dialog=!1),this.addNotification({type:"success",message:"Order deleted successfully"}),!0}catch(o){throw this.addNotification({type:"error",message:"Failed to delete order",details:o.message}),o}finally{this.loading.deleting=!1}},setPagination(t){this.pagination={...this.pagination,...t}},async refreshOrders(){try{this.loading.refresh=!0,await this.loadOrdersWithFilters(this.currentFilters),this.addNotification({type:"info",message:"Orders refreshed successfully"})}catch(t){this.addNotification({type:"error",message:"Failed to refresh orders",details:t.message})}finally{this.loading.refresh=!1}},$reset(){this.clearAllFilters(),this.orders=[],this.filteredOrders=[],this.selectedOrders=[],this.dialog=!1,this.createDialog=!1,this.selectedOrderId=null,this.selectedOrder=null,this.pagination={page:1,itemsPerPage:25,totalItems:0},Object.keys(this.loading).forEach(t=>{this.loading[t]=!1}),this.initialized=!1,this.vendorProductsCache.clear(),this.notifications=[],this.lastError=null}}}),Ft={class:"d-flex align-center w-100"},Pt={class:"d-flex align-center"},Dt={class:"text-h5 mb-1 text-white"},zt={class:"d-flex align-center gap-2"},Nt={class:"d-flex align-center gap-2"},Ut={key:0,class:"pa-8 text-center"},$t={class:"text-h6 mt-4"},Rt={key:1},qt={class:"d-flex align-center"},Jt={key:0,class:"d-flex gap-2"},Mt={key:1,class:"d-flex gap-2"},Tt={class:"info-grid"},Wt={class:"info-item"},jt={key:1,class:"value"},Lt={class:"info-item"},Bt={key:1,class:"value"},Zt={class:"info-item"},Kt={class:"info-item"},Qt={class:"info-grid"},Yt={class:"info-item"},Gt={key:1,class:"value"},Ht={class:"info-item"},Xt={key:1,class:"value"},ea={class:"info-item"},ta={key:1,class:"value"},aa={class:"info-item"},la={key:1,class:"value"},ra={class:"font-weight-bold text-primary"},ia={class:"d-flex flex-column gap-3"},oa={class:"d-flex align-center"},sa={class:"d-flex gap-2"},na={key:1,class:"d-flex gap-2"},da={key:0,class:"d-flex align-center gap-2"},ua={key:1,class:"d-flex align-center"},ca={class:"text-subtitle-2"},va={class:"text-caption text-medium-emphasis"},pa={key:1,class:"text-body-2"},fa={key:1,class:"text-body-2"},ma={class:"text-subtitle-2 font-weight-medium"},ga={key:0,class:"d-flex gap-1"},ha={class:"d-flex justify-end pa-4 bg-surface-variant"},_a={class:"text-h6 font-weight-bold"},ya={key:0,class:"d-flex w-100 gap-3"},Oa={key:1,class:"d-flex w-100 gap-3"},wa={__name:"OrderDialogs",props:{createMode:{type:Boolean,default:!1}},setup(t){const o=t,i=At(),{dialog:g}=Ct(i),b=y("overview"),f=y(!1),B=y(!1),J=y(!1),se=y(!1),ne=y(!1),H=y(!1),x=y(!1),X=y(!1),S=y(!1),M=y(!1),m=y({}),Z=y({}),C=y([]),$=y({}),u=y(o.createMode),de=y(null),he=y([]),_e=y({}),ye=y({}),ee=y([]),ue=y([]),P=y([]),Oe=y([]),we=y([]),qe=["Website","Mobile App","Phone","WhatsApp","Facebook","Instagram"],Je=["Inprogress","active","inactive","confirmed","processing","completed","cancelled"],Me=[{title:"Product",key:"product",sortable:!1,width:"250px"},{title:"Quantity",key:"quantity",align:"center",width:"100px"},{title:"Unit Price",key:"price",align:"end",width:"120px"},{title:"Discount",key:"discount",align:"end",width:"120px"},{title:"Total",key:"total_price",align:"end",width:"120px"},{title:"Actions",key:"actions",sortable:!1,align:"center",width:"100px"}],s=L(()=>i.selectedOrder),be=L(()=>i.loading.orders),D=L(()=>{var a;return u.value||x.value?m.value.vendor_id:I.value.vendor_id||((a=I.value.vendor)==null?void 0:a.id)}),I=L(()=>u.value?{...m.value,orderItems:C.value,client:ee.value.find(a=>a.id===m.value.client_id),vendor:ue.value.find(a=>a.id===m.value.vendor_id),agent:Oe.value.find(a=>a.id===m.value.agent_id),rider:we.value.find(a=>a.id===m.value.rider_id)}:s.value||{}),te=L(()=>x.value||X.value||S.value||M.value||u.value),ce=L(()=>u.value&&m.value.client_id&&m.value.vendor_id&&C.value.length>0&&C.value.every(a=>a.product_id&&a.quantity>0));G(()=>o.createMode,a=>{u.value=a,a&&Ce()},{immediate:!0}),G(D,async a=>{a?await ae(a):P.value=[]});function Ce(){m.value={order_no:"",reference:"",platform:"Website",status:"Inprogress",client_id:null,vendor_id:null,agent_id:null,rider_id:null,delivery_date:null,weight:0,customer_notes:""},C.value=[],$.value={shipping_charges:0,charges:0,discount:0,payment_method:"Cash on Delivery",amount_paid:0},Z.value={name:"",phone_number:"",email:"",address:"",city:""},ke()}async function ke(){try{await Promise.all([xe(),Te(),We(),je()])}catch(a){console.error("Error loading options:",a)}}async function xe(a=""){se.value=!0;try{await i.loadClientOptions(a),ee.value=i.clientOptions||[]}catch(e){console.error("Error loading clients:",e)}finally{se.value=!1}}async function Te(){ne.value=!0;try{await i.loadVendorOptions(),ue.value=i.vendorOptions||[]}catch(a){console.error("Error loading vendors:",a)}finally{ne.value=!1}}async function We(){try{await i.loadAgentOptions(),Oe.value=i.agentOptions||[]}catch(a){console.error("Error loading agents:",a)}}async function je(){try{await i.loadRiderOptions(),we.value=i.riderOptions||[]}catch(a){console.error("Error loading riders:",a)}}async function ae(a){if(!a){P.value=[];return}H.value=!0;try{await i.loadVendorProducts(a),P.value=i.productOptions||[]}catch(e){console.error("Error loading vendor products:",e),P.value=[]}finally{H.value=!1}}function Le(a){a&&a.length>2&&xe(a)}function Be(a){if(a&&(u.value||x.value)){const e=ee.value.find(c=>c.id===a);e&&u.value&&(Z.value={name:e.name||"",phone_number:e.phone_number||"",email:e.email||"",address:e.address||"",city:e.city||""})}}function Ze(a){var e;if(console.log("Vendor changed to:",a),(u.value||S.value)&&C.value.length>0)if(confirm("Changing vendor will clear existing items. Continue?"))C.value=[];else{(u.value||x.value)&&(m.value.vendor_id=((e=de.value)==null?void 0:e.vendor_id)||null);return}}function Ke(a){const e=P.value.find(c=>c.id===a.product_id);e&&(a.price=e.price||0,a.product=e,le(a))}function Qe(a){return a?new Date(a).toLocaleDateString():"-"}function K(a){return a==null?"KSh 0.00":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",currencyDisplay:"symbol"}).format(a)}function Se(a){const e={pending:"warning",inprogress:"info",active:"success",confirmed:"success",processing:"primary",completed:"success",cancelled:"error",inactive:"error"};return typeof a=="string"&&e[a.toLowerCase()]||"default"}function z(){var a,e,c,k,A;s.value&&!u.value&&(de.value=JSON.parse(JSON.stringify({reference:s.value.reference,platform:s.value.platform,status:s.value.status,client_id:s.value.client_id,vendor_id:s.value.vendor_id,agent_id:s.value.agent_id,rider_id:s.value.rider_id,delivery_date:s.value.delivery_date,weight:s.value.weight,customer_notes:s.value.customer_notes})),he.value=JSON.parse(JSON.stringify(s.value.orderItems||[])),_e.value=JSON.parse(JSON.stringify({shipping_charges:s.value.shipping_charges||0,charges:s.value.charges||0,discount:s.value.discount||0,payment_method:s.value.payment_method||"Cash on Delivery",amount_paid:s.value.amount_paid||0})),ye.value=JSON.parse(JSON.stringify({name:((a=s.value.client)==null?void 0:a.name)||"",phone_number:((e=s.value.client)==null?void 0:e.phone_number)||"",email:((c=s.value.client)==null?void 0:c.email)||"",address:((k=s.value.client)==null?void 0:k.address)||"",city:((A=s.value.client)==null?void 0:A.city)||""})))}function Ye(){x.value=!0,m.value={reference:s.value.reference,platform:s.value.platform,status:s.value.status,client_id:s.value.client_id,vendor_id:s.value.vendor_id,agent_id:s.value.agent_id,rider_id:s.value.rider_id,delivery_date:s.value.delivery_date,weight:s.value.weight,customer_notes:s.value.customer_notes}}function Ge(){x.value=!1,m.value={}}async function Ve(){f.value=!0;try{const a=await i.updateOrder(s.value.id,m.value);x.value=!1,m.value={},z(),console.log("Order updated successfully:",a)}catch(a){console.error("Failed to save order changes:",a)}finally{f.value=!1}}async function He(){f.value=!0;try{await i.updateClient(s.value.client.id,Z.value),X.value=!1,Z.value={},z()}catch(a){console.error("Failed to save client changes:",a)}finally{f.value=!1}}function Xe(){S.value=!0,C.value=JSON.parse(JSON.stringify(s.value.orderItems||[])),D.value&&ae(D.value)}function et(){S.value=!1,C.value=[],P.value=[]}async function Ie(){f.value=!0;try{const a=C.value.filter(e=>e.product_id&&e.quantity>0&&e.price>=0);if(a.length!==C.value.length)throw new Error("Some items have invalid data. Please check all fields.");await i.updateOrderItems(s.value.id,a),S.value=!1,C.value=[],P.value=[],z()}catch(a){console.error("Failed to save items changes:",a)}finally{f.value=!1}}function tt(){if(!D.value){alert("Please select a vendor first before adding items.");return}const a={id:`temp-${Date.now()}`,product_id:null,quantity:1,price:0,discount:0,total_price:0,product:{product_name:"",sku:""}};C.value.push(a)}function at(a){if(!a.product_id){alert("Please select a product first before duplicating.");return}const e={...JSON.parse(JSON.stringify(a)),id:`temp-${Date.now()}-${Math.random()}`},c=C.value.findIndex(k=>k.id===a.id);C.value.splice(c+1,0,e)}function lt(a){const e=C.value.findIndex(c=>c.id===a.id);e>-1&&C.value.splice(e,1)}function le(a){const e=Number(a.quantity)||0,c=Number(a.price)||0,k=Number(a.discount)||0;a.total_price=Math.max(0,e*c-k)}function ve(){return(S.value||u.value?C.value:I.value.orderItems||[]).reduce((e,c)=>e+(c.total_price||0),0)}async function rt(){f.value=!0;try{await i.updateOrder(s.value.id,$.value),M.value=!1,$.value={},z()}catch(a){console.error("Failed to save charges changes:",a)}finally{f.value=!1}}function it(){const a=ve(),e=M.value||u.value?$.value:I.value,c=Number(e.shipping_charges)||0,k=Number(e.charges)||0,A=Number(e.discount)||0;return Math.max(0,a+c+k-A)}async function pe(){if(ce.value){f.value=!0;try{const a=C.value.filter(k=>k.product_id&&k.quantity>0&&k.price>=0);if(a.length===0)throw new Error("Please add at least one valid item to the order.");const e={...m.value,...$.value,items:a.map(k=>({product_id:k.product_id,quantity:k.quantity,price:k.price,discount:k.discount||0})),sub_total:ve(),total_price:it()},c=await i.createOrder(e);u.value=!1,i.selectedOrder=c,i.selectedOrderId=c.id,z(),console.log("Order created successfully:",c)}catch(a){console.error("Failed to create order:",a),alert(a.message||"Failed to create order. Please check all required fields.")}finally{f.value=!1}}}function ot(){var e,c;const a=(c=(e=I.value)==null?void 0:e.client)==null?void 0:c.phone_number;a&&window.open(`tel:${a}`)}async function Ee(a){if(s.value){f.value=!0;try{await i.updateOrder(s.value.id,{status:a})}catch(e){console.error("Failed to update status:",e)}finally{f.value=!1}}}function Ae(){window.print()}function st(){var a;s.value&&(u.value=!0,m.value={...s.value,order_no:"",reference:`${s.value.reference||s.value.order_no}-COPY`,status:"Inprogress"},C.value=((a=s.value.orderItems)==null?void 0:a.map(e=>({...e,id:`temp-${Date.now()}-${Math.random()}`})))||[],$.value={shipping_charges:s.value.shipping_charges||0,charges:s.value.charges||0,discount:s.value.discount||0,payment_method:s.value.payment_method||"Cash on Delivery",amount_paid:0},m.value.vendor_id&&ae(m.value.vendor_id),b.value="overview")}async function Fe(){if(te.value){f.value=!0;try{const a=[];x.value&&a.push(Ve()),X.value&&a.push(He()),S.value&&a.push(Ie()),M.value&&a.push(rt()),await Promise.all(a),console.log("All changes saved successfully")}catch(a){console.error("Failed to save all changes:",a)}finally{f.value=!1}}}function Pe(){if(te.value&&!u.value){J.value=!0;return}re()}function re(){i.closeDialog(),ze()}function nt(){J.value=!1,re()}async function dt(){J.value=!1,u.value?await pe():await Fe(),re()}function De(){x.value=!1,X.value=!1,S.value=!1,M.value=!1,m.value={},Z.value={},C.value=[],$.value={},P.value=[]}function ze(){b.value="overview",u.value=!1,De(),de.value=null,he.value=[],_e.value={},ye.value={}}function ut(){u.value&&(Ce(),b.value="overview")}function ct(){var a;(a=s.value)!=null&&a.id&&i.loadOrder(s.value.id).then(()=>{z()})}function vt(){B.value=!0}async function pt(){if(s.value){f.value=!0;try{await i.deleteOrder(s.value.id),B.value=!1,re()}catch(a){console.error("Failed to delete order:",a)}finally{f.value=!1}}}return G(g,async a=>{var e;a&&!u.value?(await ke(),(e=s.value)!=null&&e.vendor_id&&await ae(s.value.vendor_id),z()):a||ze()}),G(()=>u.value,a=>{a?(S.value=!0,M.value=!0,x.value=!0):De()}),G(s,()=>{s.value&&!u.value&&z()},{deep:!0}),(a,e)=>{const c=_("v-icon"),k=_("v-avatar"),A=_("v-chip"),h=_("v-btn"),T=_("v-card-title"),Ne=_("v-divider"),ft=_("v-progress-circular"),Q=_("v-tab"),mt=_("v-tabs"),R=_("v-text-field"),Ue=_("v-select"),ie=_("v-col"),fe=_("v-autocomplete"),$e=_("v-row"),W=_("v-card-text"),j=_("v-card"),Y=_("v-tabs-window-item"),gt=_("v-alert"),Re=_("v-img"),ht=_("v-list-item-title"),_t=_("v-list-item-subtitle"),yt=_("v-list-item"),Ot=_("v-data-table"),wt=_("v-tabs-window"),oe=_("v-spacer"),me=_("v-card-actions"),ge=_("v-dialog");return v(),O(ge,{modelValue:It(g),"onUpdate:modelValue":e[16]||(e[16]=n=>Vt(g)?g.value=n:null),"max-width":"1400",persistent:"",scrollable:""},{default:r(()=>[l(j,{class:"order-details-card"},{default:r(()=>[l(T,{class:"pa-6 pb-4 gradient-header"},{default:r(()=>{var n;return[p("div",Ft,[p("div",Pt,[l(k,{size:"48",color:"primary",class:"me-4"},{default:r(()=>[l(c,{icon:u.value?"mdi-plus":"mdi-package-variant",size:"24"},null,8,["icon"])]),_:1}),p("div",null,[p("h2",Dt,w(u.value?"Create New Order":((n=s.value)==null?void 0:n.order_no)||"Loading..."),1),p("div",zt,[s.value&&!u.value?(v(),O(A,{key:0,color:Se(s.value.status),variant:"flat",size:"small",class:"font-weight-medium"},{default:r(()=>[d(w(s.value.status),1)]),_:1},8,["color"])):U("",!0),u.value?(v(),O(A,{key:1,color:"info",variant:"flat",size:"small"},{default:r(()=>e[17]||(e[17]=[d(" Draft ")])),_:1,__:[17]})):U("",!0),te.value?(v(),O(A,{key:2,color:"warning",variant:"flat",size:"small"},{default:r(()=>[l(c,{start:"",size:"14"},{default:r(()=>e[18]||(e[18]=[d("mdi-circle")])),_:1,__:[18]}),e[19]||(e[19]=d(" Unsaved Changes "))]),_:1,__:[19]})):U("",!0)])])]),p("div",Nt,[u.value?U("",!0):(v(),O(h,{key:0,icon:"mdi-refresh",variant:"text",size:"small",color:"white",onClick:ct,loading:be.value},null,8,["loading"])),l(h,{icon:"mdi-close",variant:"text",size:"small",color:"white",onClick:Pe})])])]}),_:1}),l(Ne),l(W,{class:"pa-0"},{default:r(()=>[!s.value&&!u.value||be.value?(v(),V("div",Ut,[l(ft,{indeterminate:"",color:"primary",size:"64"}),p("p",$t,w(u.value?"Preparing new order...":"Loading order details..."),1)])):(v(),V("div",Rt,[l(mt,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=n=>b.value=n),color:"primary",class:"border-b bg-surface"},{default:r(()=>[l(Q,{value:"overview","prepend-icon":"mdi-view-dashboard"},{default:r(()=>e[20]||(e[20]=[p("span",{class:"font-weight-medium"},"Overview",-1)])),_:1,__:[20]}),l(Q,{value:"items","prepend-icon":"mdi-cart"},{default:r(()=>[e[21]||(e[21]=p("span",{class:"font-weight-medium"},"Items",-1)),l(A,{size:"x-small",variant:"flat",color:"primary",class:"ml-2"},{default:r(()=>[d(w((I.value.orderItems||[]).length),1)]),_:1})]),_:1,__:[21]}),l(Q,{value:"charges","prepend-icon":"mdi-currency-usd"},{default:r(()=>e[22]||(e[22]=[p("span",{class:"font-weight-medium"},"Charges",-1)])),_:1,__:[22]}),l(Q,{value:"client","prepend-icon":"mdi-account"},{default:r(()=>e[23]||(e[23]=[p("span",{class:"font-weight-medium"},"Client",-1)])),_:1,__:[23]}),l(Q,{value:"fulfillment","prepend-icon":"mdi-truck-delivery"},{default:r(()=>e[24]||(e[24]=[p("span",{class:"font-weight-medium"},"Fulfillment",-1)])),_:1,__:[24]})]),_:1},8,["modelValue"]),l(wt,{modelValue:b.value,"onUpdate:modelValue":e[11]||(e[11]=n=>b.value=n)},{default:r(()=>[l(Y,{value:"overview",class:"pa-6"},{default:r(()=>[l($e,null,{default:r(()=>[l(ie,{cols:"12",lg:"8"},{default:r(()=>[l(j,{variant:"flat",class:"h-100 elevation-1",style:{background:"#f8fafc"}},{default:r(()=>[l(T,{class:"d-flex align-center justify-space-between pb-2",style:{"border-bottom":"1px solid #e3e8ee"}},{default:r(()=>[p("div",qt,[l(c,{icon:"mdi-clipboard-text",class:"me-2",color:"primary"}),e[25]||(e[25]=p("span",{class:"font-weight-bold text-primary"},"Order Details",-1))]),u.value?U("",!0):(v(),V("div",Jt,[x.value?(v(),V("div",Mt,[l(h,{color:"success",variant:"flat",size:"small",onClick:Ve,loading:f.value},{default:r(()=>[l(c,{start:""},{default:r(()=>e[28]||(e[28]=[d("mdi-check")])),_:1,__:[28]}),e[29]||(e[29]=d(" Save "))]),_:1,__:[29]},8,["loading"]),l(h,{variant:"tonal",size:"small",onClick:Ge},{default:r(()=>e[30]||(e[30]=[d(" Cancel ")])),_:1,__:[30]})])):(v(),O(h,{key:0,color:"primary",variant:"tonal",size:"small",onClick:Ye},{default:r(()=>[l(c,{start:""},{default:r(()=>e[26]||(e[26]=[d("mdi-pencil")])),_:1,__:[26]}),e[27]||(e[27]=d(" Edit "))]),_:1,__:[27]}))]))]),_:1}),l(W,null,{default:r(()=>[l($e,null,{default:r(()=>[l(ie,{cols:"12",md:"6"},{default:r(()=>[p("div",Tt,[p("div",Wt,[e[31]||(e[31]=p("div",{class:"label"},"Order Number",-1)),u.value||x.value?(v(),O(R,{key:0,modelValue:m.value.order_no,"onUpdate:modelValue":e[1]||(e[1]=n=>m.value.order_no=n),variant:"solo",density:"comfortable",placeholder:"AUTO-GENERATED",disabled:!u.value,"hide-details":""},null,8,["modelValue","disabled"])):(v(),V("div",jt,w(I.value.order_no),1))]),p("div",Lt,[e[32]||(e[32]=p("div",{class:"label"},"Reference",-1)),u.value||x.value?(v(),O(R,{key:0,modelValue:m.value.reference,"onUpdate:modelValue":e[2]||(e[2]=n=>m.value.reference=n),variant:"solo",density:"comfortable",placeholder:"Optional reference","hide-details":""},null,8,["modelValue"])):(v(),V("div",Bt,w(I.value.reference||"-"),1))]),p("div",Zt,[e[33]||(e[33]=p("div",{class:"label"},"Platform",-1)),u.value||x.value?(v(),O(Ue,{key:0,modelValue:m.value.platform,"onUpdate:modelValue":e[3]||(e[3]=n=>m.value.platform=n),items:qe,variant:"solo",density:"comfortable","hide-details":""},null,8,["modelValue"])):(v(),O(A,{key:1,variant:"tonal",size:"small",color:"primary"},{default:r(()=>[d(w(I.value.platform),1)]),_:1}))]),p("div",Kt,[e[34]||(e[34]=p("div",{class:"label"},"Status",-1)),u.value||x.value?(v(),O(Ue,{key:0,modelValue:m.value.status,"onUpdate:modelValue":e[4]||(e[4]=n=>m.value.status=n),items:Je,variant:"solo",density:"comfortable","hide-details":""},null,8,["modelValue"])):(v(),O(A,{key:1,color:Se(I.value.status),variant:"flat",size:"small"},{default:r(()=>[d(w(I.value.status||"Pending"),1)]),_:1},8,["color"]))])])]),_:1}),l(ie,{cols:"12",md:"6"},{default:r(()=>{var n,E;return[p("div",Qt,[p("div",Yt,[e[35]||(e[35]=p("div",{class:"label"},"Client",-1)),u.value||x.value?(v(),O(fe,{key:0,modelValue:m.value.client_id,"onUpdate:modelValue":[e[5]||(e[5]=F=>m.value.client_id=F),Be],items:ee.value,"item-title":"name","item-value":"id",variant:"solo",density:"comfortable",clearable:"",loading:se.value,"onUpdate:search":Le,"hide-details":""},null,8,["modelValue","items","loading"])):(v(),V("div",Gt,w(((n=I.value.client)==null?void 0:n.name)||"-"),1))]),p("div",Ht,[e[36]||(e[36]=p("div",{class:"label"},"Vendor",-1)),u.value||x.value?(v(),O(fe,{key:0,modelValue:m.value.vendor_id,"onUpdate:modelValue":[e[6]||(e[6]=F=>m.value.vendor_id=F),Ze],items:ue.value,"item-title":"company_name","item-value":"id",variant:"solo",density:"comfortable",clearable:"",loading:ne.value,"hide-details":""},null,8,["modelValue","items","loading"])):(v(),V("div",Xt,w(((E=I.value.vendor.name)==null?void 0:E.company_name)||"-"),1))]),p("div",ea,[e[37]||(e[37]=p("div",{class:"label"},"Delivery Date",-1)),u.value||x.value?(v(),O(R,{key:0,modelValue:m.value.delivery_date,"onUpdate:modelValue":e[7]||(e[7]=F=>m.value.delivery_date=F),type:"date",variant:"solo",density:"comfortable","hide-details":""},null,8,["modelValue"])):(v(),V("div",ta,w(Qe(I.value.delivery_date)),1))]),p("div",aa,[e[38]||(e[38]=p("div",{class:"label"},"Weight (kg)",-1)),u.value||x.value?(v(),O(R,{key:0,modelValue:m.value.weight,"onUpdate:modelValue":e[8]||(e[8]=F=>m.value.weight=F),type:"number",step:"0.1",variant:"solo",density:"comfortable","hide-details":""},null,8,["modelValue"])):(v(),V("div",la,w(I.value.weight||0)+" kg",1))])])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(ie,{cols:"12",lg:"4"},{default:r(()=>[l(j,{variant:"flat",class:"h-100 elevation-1",style:{background:"linear-gradient(135deg, #e3f2fd 0%, #f8fafc 100%)"}},{default:r(()=>[l(T,{class:"pb-2",style:{"border-bottom":"1px solid #e3e8ee"}},{default:r(()=>[l(c,{icon:"mdi-flash",class:"me-2",color:"primary"}),p("span",ra,w(u.value?"Create Actions":"Quick Actions"),1)]),_:1}),l(W,null,{default:r(()=>{var n;return[p("div",ia,[u.value?(v(),O(h,{key:0,color:"success",variant:"flat",block:"",onClick:pe,loading:f.value,disabled:!ce.value,class:"rounded-pill",style:{"font-weight":"600"}},{default:r(()=>[l(c,{start:""},{default:r(()=>e[39]||(e[39]=[d("mdi-plus")])),_:1,__:[39]}),e[40]||(e[40]=d(" Create Order "))]),_:1,__:[40]},8,["loading","disabled"])):(v(),V(kt,{key:1},[l(h,{color:"primary",variant:"flat",block:"",onClick:ot,disabled:!((n=I.value.client)!=null&&n.phone_number),class:"rounded-pill",style:{"font-weight":"600"}},{default:r(()=>[l(c,{start:""},{default:r(()=>e[41]||(e[41]=[d("mdi-phone")])),_:1,__:[41]}),e[42]||(e[42]=d(" Call Client "))]),_:1,__:[42]},8,["disabled"]),l(h,{color:"success",variant:"tonal",block:"",onClick:e[9]||(e[9]=E=>Ee("confirmed")),class:"rounded-pill",style:{"font-weight":"600"}},{default:r(()=>[l(c,{start:""},{default:r(()=>e[43]||(e[43]=[d("mdi-check-circle")])),_:1,__:[43]}),e[44]||(e[44]=d(" Confirm Order "))]),_:1,__:[44]}),l(h,{color:"info",variant:"tonal",block:"",onClick:Ae,class:"rounded-pill",style:{"font-weight":"600"}},{default:r(()=>[l(c,{start:""},{default:r(()=>e[45]||(e[45]=[d("mdi-printer")])),_:1,__:[45]}),e[46]||(e[46]=d(" Print Order "))]),_:1,__:[46]}),l(h,{color:"warning",variant:"tonal",block:"",onClick:e[10]||(e[10]=E=>Ee("cancelled")),class:"rounded-pill",style:{"font-weight":"600"}},{default:r(()=>[l(c,{start:""},{default:r(()=>e[47]||(e[47]=[d("mdi-cancel")])),_:1,__:[47]}),e[48]||(e[48]=d(" Cancel Order "))]),_:1,__:[48]})],64))])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Y,{value:"items",class:"pa-6"},{default:r(()=>[l(j,{variant:"outlined"},{default:r(()=>[l(T,{class:"d-flex align-center justify-space-between"},{default:r(()=>[p("div",oa,[l(c,{icon:"mdi-cart",class:"me-2",color:"primary"}),e[49]||(e[49]=d(" Order Items ")),l(A,{variant:"outlined",size:"small",class:"ml-3"},{default:r(()=>[d(w((I.value.orderItems||[]).length)+" items ",1)]),_:1})]),p("div",sa,[!S.value&&!u.value?(v(),O(h,{key:0,color:"primary",variant:"outlined",size:"small",onClick:Xe},{default:r(()=>[l(c,{start:""},{default:r(()=>e[50]||(e[50]=[d("mdi-pencil")])),_:1,__:[50]}),e[51]||(e[51]=d(" Edit Items "))]),_:1,__:[51]})):U("",!0),l(h,{color:"success",variant:"outlined",size:"small",onClick:tt,disabled:!S.value&&!u.value||!D.value},{default:r(()=>[l(c,{start:""},{default:r(()=>e[52]||(e[52]=[d("mdi-plus")])),_:1,__:[52]}),e[53]||(e[53]=d(" Add Item "))]),_:1,__:[53]},8,["disabled"]),S.value?(v(),V("div",na,[l(h,{color:"success",variant:"flat",size:"small",onClick:Ie,loading:f.value},{default:r(()=>[l(c,{start:""},{default:r(()=>e[54]||(e[54]=[d("mdi-check")])),_:1,__:[54]}),e[55]||(e[55]=d(" Save All "))]),_:1,__:[55]},8,["loading"]),l(h,{variant:"outlined",size:"small",onClick:et},{default:r(()=>e[56]||(e[56]=[d(" Cancel ")])),_:1,__:[56]})])):U("",!0)])]),_:1}),l(W,{class:"pa-0"},{default:r(()=>[(S.value||u.value)&&!D.value?(v(),O(gt,{key:0,type:"info",variant:"tonal",class:"ma-4"},{prepend:r(()=>[l(c,null,{default:r(()=>e[57]||(e[57]=[d("mdi-information")])),_:1,__:[57]})]),default:r(()=>[e[58]||(e[58]=d(" Please select a vendor first to add items to this order. "))]),_:1,__:[58]})):(v(),O(Ot,{key:1,headers:Me,items:S.value||u.value?C.value:I.value.orderItems||[],class:"order-items-table",loading:f.value||H.value,"loading-text":"Updating items..."},{"item.product":r(({item:n})=>{var E,F;return[S.value||u.value?(v(),V("div",da,[l(fe,{modelValue:n.product_id,"onUpdate:modelValue":[q=>n.product_id=q,q=>Ke(n)],items:P.value,"item-title":"product_name","item-value":"id",variant:"outlined",density:"compact",style:{"min-width":"200px"},loading:H.value,disabled:!D.value,placeholder:D.value?"Select product":"Select vendor first"},{item:r(({props:q,item:N})=>[l(yt,xt(St(q)),{prepend:r(()=>[l(k,{size:"32",rounded:""},{default:r(()=>[l(Re,{src:N.raw.image_url||"/api/placeholder/32/32",alt:N.raw.product_name},null,8,["src","alt"])]),_:2},1024)]),default:r(()=>[l(ht,null,{default:r(()=>[d(w(N.raw.product_name),1)]),_:2},1024),l(_t,null,{default:r(()=>[d(w(N.raw.sku)+" - "+w(K(N.raw.price)),1)]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","items","loading","disabled","placeholder"])])):(v(),V("div",ua,[l(k,{size:"40",class:"me-3",rounded:""},{default:r(()=>{var q,N;return[l(Re,{src:((q=n.product)==null?void 0:q.image_url)||"/api/placeholder/40/40",alt:(N=n.product)==null?void 0:N.product_name},null,8,["src","alt"])]}),_:2},1024),p("div",null,[p("div",ca,w(((E=n.product)==null?void 0:E.product_name)||"-"),1),p("div",va,w(((F=n.product)==null?void 0:F.sku)||"-"),1)])]))]}),"item.quantity":r(({item:n})=>[S.value||u.value?(v(),O(R,{key:0,modelValue:n.quantity,"onUpdate:modelValue":E=>n.quantity=E,modelModifiers:{number:!0},type:"number",min:"1",variant:"outlined",density:"compact",style:{width:"80px"},onInput:E=>le(n)},null,8,["modelValue","onUpdate:modelValue","onInput"])):(v(),O(A,{key:1,variant:"outlined",size:"small"},{default:r(()=>[d(w(n.quantity||0),1)]),_:2},1024))]),"item.price":r(({item:n})=>[S.value||u.value?(v(),O(R,{key:0,modelValue:n.price,"onUpdate:modelValue":E=>n.price=E,modelModifiers:{number:!0},type:"number",step:"0.01",min:"0",variant:"outlined",density:"compact",prefix:"KSh",style:{width:"120px"},onInput:E=>le(n)},null,8,["modelValue","onUpdate:modelValue","onInput"])):(v(),V("div",pa,w(K(n.price)),1))]),"item.discount":r(({item:n})=>[S.value||u.value?(v(),O(R,{key:0,modelValue:n.discount,"onUpdate:modelValue":E=>n.discount=E,modelModifiers:{number:!0},type:"number",step:"0.01",min:"0",variant:"outlined",density:"compact",prefix:"KSh",style:{width:"120px"},onInput:E=>le(n)},null,8,["modelValue","onUpdate:modelValue","onInput"])):(v(),V("div",fa,w(K(n.discount||0)),1))]),"item.total_price":r(({item:n})=>[p("div",ma,w(K(n.total_price)),1)]),"item.actions":r(({item:n})=>[S.value||u.value?(v(),V("div",ga,[l(h,{icon:"mdi-content-duplicate",variant:"text",size:"small",onClick:E=>at(n),disabled:!n.product_id},null,8,["onClick","disabled"]),l(h,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:E=>lt(n)},null,8,["onClick"])])):U("",!0)]),bottom:r(()=>[p("div",ha,[p("div",_a," Total: "+w(K(ve())),1)])]),_:1},8,["items","loading"]))]),_:1})]),_:1})]),_:1}),l(Y,{value:"charges",class:"pa-6"}),l(Y,{value:"client",class:"pa-6"}),l(Y,{value:"fulfillment",class:"pa-6"})]),_:1},8,["modelValue"])]))]),_:1}),l(Ne),l(me,{class:"pa-6"},{default:r(()=>[u.value?(v(),V("div",ya,[l(h,{variant:"outlined",onClick:ut},{default:r(()=>[l(c,{icon:"mdi-refresh",start:""}),e[59]||(e[59]=d(" Reset Form "))]),_:1,__:[59]}),l(oe),l(h,{variant:"outlined",onClick:Pe},{default:r(()=>e[60]||(e[60]=[d(" Cancel ")])),_:1,__:[60]}),l(h,{color:"success",variant:"flat",onClick:pe,loading:f.value,disabled:!ce.value},{default:r(()=>[l(c,{icon:"mdi-plus",start:""}),e[61]||(e[61]=d(" Create Order "))]),_:1,__:[61]},8,["loading","disabled"])])):(v(),V("div",Oa,[l(h,{color:"error",variant:"outlined",onClick:vt,disabled:!s.value},{default:r(()=>[l(c,{icon:"mdi-delete",start:""}),e[62]||(e[62]=d(" Delete Order "))]),_:1,__:[62]},8,["disabled"]),l(h,{color:"info",variant:"outlined",onClick:st,disabled:!s.value},{default:r(()=>[l(c,{icon:"mdi-content-duplicate",start:""}),e[63]||(e[63]=d(" Duplicate Order "))]),_:1,__:[63]},8,["disabled"]),l(oe),l(h,{variant:"outlined",onClick:Ae,disabled:!s.value,class:"me-3"},{default:r(()=>[l(c,{icon:"mdi-printer",start:""}),e[64]||(e[64]=d(" Print "))]),_:1,__:[64]},8,["disabled"]),l(h,{color:"primary",variant:"flat",onClick:Fe,disabled:!s.value||!te.value,loading:f.value},{default:r(()=>[l(c,{icon:"mdi-content-save",start:""}),e[65]||(e[65]=d(" Save All Changes "))]),_:1,__:[65]},8,["disabled","loading"])]))]),_:1})]),_:1}),l(ge,{modelValue:B.value,"onUpdate:modelValue":e[13]||(e[13]=n=>B.value=n),"max-width":"400"},{default:r(()=>[l(j,null,{default:r(()=>[l(T,{class:"text-h6"},{default:r(()=>[l(c,{icon:"mdi-alert",color:"error",class:"me-2"}),e[66]||(e[66]=d(" Confirm Delete "))]),_:1,__:[66]}),l(W,null,{default:r(()=>e[67]||(e[67]=[d(" Are you sure you want to delete this order? This action cannot be undone. ")])),_:1,__:[67]}),l(me,null,{default:r(()=>[l(oe),l(h,{variant:"text",onClick:e[12]||(e[12]=n=>B.value=!1)},{default:r(()=>e[68]||(e[68]=[d("Cancel")])),_:1,__:[68]}),l(h,{color:"error",variant:"flat",onClick:pt,loading:f.value},{default:r(()=>e[69]||(e[69]=[d(" Delete ")])),_:1,__:[69]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ge,{modelValue:J.value,"onUpdate:modelValue":e[15]||(e[15]=n=>J.value=n),"max-width":"400"},{default:r(()=>[l(j,null,{default:r(()=>[l(T,{class:"text-h6"},{default:r(()=>[l(c,{icon:"mdi-alert",color:"warning",class:"me-2"}),e[70]||(e[70]=d(" Unsaved Changes "))]),_:1,__:[70]}),l(W,null,{default:r(()=>e[71]||(e[71]=[d(" You have unsaved changes. What would you like to do? ")])),_:1,__:[71]}),l(me,null,{default:r(()=>[l(h,{variant:"text",onClick:nt},{default:r(()=>e[72]||(e[72]=[d(" Discard Changes ")])),_:1,__:[72]}),l(oe),l(h,{variant:"text",onClick:e[14]||(e[14]=n=>J.value=!1)},{default:r(()=>e[73]||(e[73]=[d(" Continue Editing ")])),_:1,__:[73]}),l(h,{color:"primary",variant:"flat",onClick:dt,loading:f.value},{default:r(()=>e[74]||(e[74]=[d(" Save & Close ")])),_:1,__:[74]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}},ba=Et(wa,[["__scopeId","data-v-adb0b470"]]),Sa=Object.freeze(Object.defineProperty({__proto__:null,default:ba},Symbol.toStringTag,{value:"Module"}));export{ba as O,Sa as a,At as u};
