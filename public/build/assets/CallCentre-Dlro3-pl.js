import{E as Me,i as Qe,G as Ee,j as oe,r as f,s as Oe,k as Fe,l as d,c as Ke,o as j,w as t,a as o,d as T,e as V,b as l,f as s,t as i,u as P,H as Ge,m as A}from"./app-BN3dAnPM.js";import{_ as We}from"./AppLayout-BV7ixEgg.js";import{u as qe,C as Je}from"./CallDialogs-DEI_atGv.js";import{n as y}from"./toast-CZcLYvSr.js";import{u as Xe}from"./webrtc-B6_49guc.js";import{_ as Ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IncomingCallDialog-BbV1RRE1.js";/* empty css                                                                           */import"./contact-BAv1E_xN.js";import"./africastalking-DeFzK7j6.js";const Ze=Me("agent",{state:()=>({callHistory:[],loading:!1,error:null}),actions:{async fetchCallHistory(b={}){this.loading=!0,this.error=null;try{let g;b.sortBy&&b.sortBy.length>0&&(g=b.sortBy.map(p=>(p.desc||p.order==="desc"?"-":"")+p.key).join(","));const h={page:b.page||1,per_page:b.itemsPerPage||15,sort_by:g||"created_at",sort_desc:g?void 0:!0,search:b.search||void 0};Object.keys(h).forEach(p=>h[p]===void 0&&delete h[p]),console.log("Fetching with params:",h);const m=(await Qe.get("/api/v1/call-history",{params:h})).data.data;return this.callHistory=m.data||[],this.totalItems=m.total||0,this.currentPage=m.current_page||1,{total:m.total,data:m.data,currentPage:m.current_page,perPage:m.per_page,lastPage:m.last_page}}catch(g){throw console.error("Fetch call history error:",g),this.error=g.message,this.callHistory=[],this.totalItems=0,g}finally{this.loading=!1}},clearCallHistory(){this.callHistory=[],this.totalItems=0,this.currentPage=1}}}),et={class:"p-4"},tt={class:"d-flex align-center"},lt={class:"white--text text-h5"},ot={class:"flex-grow-1"},nt={class:"d-flex align-center"},st={class:"text-h6 mb-0"},at={class:"text-body-2 mb-0 grey--text"},rt={class:"d-flex align-center"},it={class:"ml-2"},dt={class:"text-h6"},ut={class:"d-flex align-center"},ct={class:"ml-2"},mt={class:"text-h6"},_t={class:"d-flex align-center"},pt={class:"ml-2"},gt={class:"text-h6"},vt={class:"d-flex align-center"},ft={class:"ml-2"},yt={class:"text-h6"},bt={key:0},Ct={class:"text-right"},wt={class:"text-right"},ht={class:"text-right"},xt={class:"call-history-container"},St={class:"mt-2 text-caption text-medium-emphasis"},kt={key:0},Dt={class:"table-controls mb-4"},Pt={class:"controls-left"},Nt={class:"controls-right"},$t={class:"date-cell"},Bt={class:"date-primary"},Ut={class:"date-secondary"},jt={class:"phone-cell"},It={class:"phone-number"},Ht={class:"phone-cell"},zt={class:"phone-number"},Tt={class:"service-cell"},Vt={class:"action-buttons"},At={class:"no-data-container"},Rt={class:"loading-container"},Lt={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Mt={class:"bg-white w-full max-w-2xl rounded-lg shadow-lg overflow-hidden"},Qt={class:"p-4 space-y-3"},Et={key:0},Ot=["src"],Ft={key:1},Kt={class:"mt-2 p-2 border rounded bg-gray-50"},Gt={__name:"CallCentre",props:{search:{type:String,default:""}},emits:["refresh"],setup(b,{emit:g}){const h=Ee(),G=oe(()=>{var e,r;return(r=(e=h.props.auth)==null?void 0:e.user)==null?void 0:r.id}),m=Xe(),p=b,W=g,R=Ze(),C=qe(),_=f({summary_call_missed:0,summary_call_completed:0,summary_outbound_call_completed:0,summary_inbound_call_completed:0,summary_rejected_incoming_calls:0,summary_rejected_outgoing_calls:0,summary_user_busy_outgoing_calls:0}),x=f(1),w=f(15),N=f([]),E=f(0),I=f(""),O=f(null),ne=[10,15,25,50,100],F=f(!1),u=f({}),se=()=>{O.value&&clearTimeout(O.value),x.value=1,O.value=setTimeout(()=>{q()},500)},q=async()=>{try{await H({page:1,itemsPerPage:w.value,sortBy:N.value})}catch(n){console.error("Search failed:",n)}},ae=()=>{axios.get(`/api/v1/agent-stats/${G.value}`).then(n=>{_.value=n.data,console.log("Agent stats:",_.value)}).catch(n=>{console.error("Error fetching agent stats:",n)})},re=[{title:"Call Start",value:"callStartTime",width:"140px"},{title:"Caller",value:"callerNumber",width:"130px"},{title:"Caller Carrier",value:"callerCarrierName",width:"120px"},{title:"Caller Country",value:"callerCountryCode",width:"100px"},{title:"Client Dialed",value:"clientDialedNumber",width:"130px"},{title:"Duration",value:"durationInSeconds",width:"100px"},{title:"Currency",value:"currencyCode",width:"80px"},{title:"Amount",value:"amount",width:"90px"},{title:"Status",value:"status",width:"100px"},{title:"Bridge Hangup",value:"lastBridgeHangupCause",width:"120px"},{title:"Actions",value:"actions",sortable:!1,width:"200px"}],H=async n=>{try{const e=await R.fetchCallHistory({page:n.page,itemsPerPage:n.itemsPerPage,sortBy:n.sortBy,search:I.value});E.value=e.total}catch(e){console.error("Failed to load call history:",e)}},ie=()=>{H({page:x.value,itemsPerPage:w.value,sortBy:N.value}),W("refresh")},de=n=>new Date(n).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}),ue=n=>new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),J=n=>n?n.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"):"N/A",ce=n=>{if(!n||n===0)return"0s";const e=Math.floor(n/3600),r=Math.floor(n%3600/60),v=n%60;return e>0?`${e}h ${r}m ${v}s`:r>0?`${r}m ${v}s`:`${v}s`},me=n=>!n||n===0?"error":n<30?"warning":n<300?"success":"primary",_e=n=>({completed:"success",answered:"success",failed:"error",busy:"warning","no-answer":"warning",cancelled:"error"})[n==null?void 0:n.toLowerCase()]||"grey",pe=n=>({completed:"mdi-check-circle",answered:"mdi-phone-check",failed:"mdi-phone-cancel",busy:"mdi-phone-busy","no-answer":"mdi-phone-missed",cancelled:"mdi-phone-hangup"})[n==null?void 0:n.toLowerCase()]||"mdi-help-circle",ge=n=>({voice:"primary",sms:"success",data:"info"})[n==null?void 0:n.toLowerCase()]||"grey",ve=n=>({voice:"mdi-phone",sms:"mdi-message",data:"mdi-database"})[n==null?void 0:n.toLowerCase()]||"mdi-cog",fe=n=>({normal_clearing:"success",user_busy:"warning",no_answer:"warning",call_rejected:"error",network_out_of_order:"error"})[n==null?void 0:n.toLowerCase()]||"grey",ye=n=>({normal_clearing:"Call ended normally",user_busy:"User was busy",no_answer:"No answer from user",call_rejected:"Call was rejected",network_out_of_order:"Network error"})[n==null?void 0:n.toLowerCase()]||"Unknown cause",be=n=>({active:"success",inactive:"grey",terminated:"error"})[n==null?void 0:n.toLowerCase()]||"grey",Ce=n=>{n.recordingUrl?window.open(n.recordingUrl,"_blank"):y.error("Recording not available")},we=n=>{if(n.recordingUrl){const e=document.createElement("a");e.href=n.recordingUrl,e.download=`call-recording-${n.id}.mp3`,e.click()}else y.error("Recording not available")},he=n=>{const e=n.callerNumber||n.destinationNumber;e?(callCenterStore.makeCall(e),y.info(`Calling back ${e}`)):y.error("Phone number not available")},xe=n=>{console.log("View details for:",n),u.value=n,F.value=!0},X=()=>{F.value=!1},Se=n=>{console.log("Add to contacts:",n),y.success("Added to contacts")},ke=n=>{console.log("Send SMS to:",n),y.info("SMS composer opened")},De=()=>{console.debug("you clicked me"),typeof C.openNewCallDialog=="function"?C.openNewCallDialog():y.error("New Call dialog function not implemented in callStore")},Pe=()=>{typeof C.openCallAgentDialog=="function"?C.openCallAgentDialog():y.error("Call Agent dialog function not implemented in callStore")},Ne=()=>{typeof C.openQueueDialog=="function"?C.openQueueDialog():y.error("Queue dialog function not implemented in callStore")},$e=oe(()=>{var e,r,v;return(typeof $page<"u"&&((v=(r=(e=$page.props)==null?void 0:e.auth)==null?void 0:r.user)==null?void 0:v.name)||"").split(" ").map($=>$[0]).join("").toUpperCase()});return Oe(()=>p.search,()=>{x.value=1,H({page:x.value,itemsPerPage:w.value,sortBy:N.value,search:p.search})}),Fe(()=>{H({page:x.value,itemsPerPage:w.value,sortBy:N.value,search:p.search}),ae()}),(n,e)=>{const r=d("v-icon"),v=d("v-card-title"),$=d("v-list-item-icon"),S=d("v-list-item-title"),L=d("v-list-item-content"),M=d("v-list-item-action"),k=d("v-list-item"),Y=d("v-list"),K=d("v-card-text"),D=d("v-card"),B=d("v-col"),Be=d("v-avatar"),Ue=d("v-spacer"),z=d("v-chip"),Z=d("v-divider"),ee=d("v-row"),U=d("v-btn"),je=d("v-simple-table"),Ie=d("v-expand-transition"),He=d("v-container"),ze=d("v-text-field"),Te=d("v-select"),Q=d("v-tooltip"),Ve=d("v-badge"),Ae=d("v-menu"),Re=d("v-progress-circular"),Le=d("v-data-table-server");return j(),Ke(We,{title:"Dashboard"},{default:t(()=>{var te;return[o("div",et,[l(He,{fluid:"",class:"pa-2"},{default:t(()=>[l(ee,null,{default:t(()=>[l(B,{cols:"12",md:"6"},{default:t(()=>[l(D,{elevation:"2",class:"rounded-lg"},{default:t(()=>[l(v,{class:"primary white--text d-flex align-center py-3"},{default:t(()=>[l(r,{left:"",color:"white"},{default:t(()=>e[7]||(e[7]=[s("mdi-lightning-bolt")])),_:1,__:[7]}),e[8]||(e[8]=s(" Quick Actions "))]),_:1,__:[8]}),l(K,{class:"py-4"},{default:t(()=>[l(Y,{nav:"",dense:""},{default:t(()=>[l(k,{onClick:De,class:"rounded-lg mb-2 hover-elevation-2"},{default:t(()=>[l($,null,{default:t(()=>[l(r,{color:"success"},{default:t(()=>e[9]||(e[9]=[s("mdi-phone-plus")])),_:1,__:[9]})]),_:1}),l(L,null,{default:t(()=>[l(S,null,{default:t(()=>e[10]||(e[10]=[s("Make a new Call")])),_:1,__:[10]})]),_:1}),l(M,null,{default:t(()=>[l(r,null,{default:t(()=>e[11]||(e[11]=[s("mdi-chevron-right")])),_:1,__:[11]})]),_:1})]),_:1}),l(k,{onClick:Pe,class:"rounded-lg mb-2 hover-elevation-2"},{default:t(()=>[l($,null,{default:t(()=>[l(r,{color:"info"},{default:t(()=>e[12]||(e[12]=[s("mdi-account-voice")])),_:1,__:[12]})]),_:1}),l(L,null,{default:t(()=>[l(S,null,{default:t(()=>e[13]||(e[13]=[s("Call an agent")])),_:1,__:[13]})]),_:1}),l(M,null,{default:t(()=>[l(r,null,{default:t(()=>e[14]||(e[14]=[s("mdi-chevron-right")])),_:1,__:[14]})]),_:1})]),_:1}),l(k,{class:"rounded-lg mb-2 hover-elevation-2"},{default:t(()=>[l($,null,{default:t(()=>[l(r,{color:"error"},{default:t(()=>e[15]||(e[15]=[s("mdi-phone-missed")])),_:1,__:[15]})]),_:1}),l(L,null,{default:t(()=>[l(S,null,{default:t(()=>[s("Missed "+i(_.value.summary_call_missed),1)]),_:1})]),_:1}),l(M)]),_:1}),l(k,{onClick:Ne,class:"rounded-lg hover-elevation-2"},{default:t(()=>[l($,null,{default:t(()=>[l(r,{color:"warning"},{default:t(()=>e[16]||(e[16]=[s("mdi-account-multiple-check")])),_:1,__:[16]})]),_:1}),l(L,null,{default:t(()=>[l(S,null,{default:t(()=>e[17]||(e[17]=[s("Check Queue")])),_:1,__:[17]})]),_:1}),l(M,null,{default:t(()=>[l(r,null,{default:t(()=>e[18]||(e[18]=[s("mdi-chevron-right")])),_:1,__:[18]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,{cols:"12",md:"6"},{default:t(()=>[l(D,{elevation:"2",class:"rounded-lg"},{default:t(()=>[l(v,{class:"primary white--text d-flex align-center py-3"},{default:t(()=>[l(r,{left:"",color:"white"},{default:t(()=>e[19]||(e[19]=[s("mdi-account-details")])),_:1,__:[19]}),e[20]||(e[20]=s(" Agent Dashboard "))]),_:1,__:[20]}),l(K,{class:"py-4"},{default:t(()=>[o("div",tt,[l(Be,{size:"60",color:"primary",class:"mr-4"},{default:t(()=>[o("span",lt,i($e.value),1)]),_:1}),o("div",ot,[o("div",nt,[o("div",null,[o("p",st,i(n.$page.props.auth.user.name),1),o("p",at,[l(r,{small:"",class:"mr-1"},{default:t(()=>e[21]||(e[21]=[s("mdi-email")])),_:1,__:[21]}),s(" "+i(n.$page.props.auth.user.email),1)])]),l(Ue),l(z,{color:P(m).connectionStatusColor,small:"",class:"white--text px-2"},{default:t(()=>[l(r,{left:"",small:""},{default:t(()=>e[22]||(e[22]=[s("mdi-circle")])),_:1,__:[22]}),s(" "+i(P(m).connectionStatusText),1)]),_:1},8,["color"])])])]),l(Z,{class:"my-4"}),l(ee,{class:"mt-2"},{default:t(()=>[l(B,{cols:"12",sm:"6"},{default:t(()=>[l(D,{class:"rounded-lg pa-3 mb-3",outlined:""},{default:t(()=>[o("div",rt,[l(r,{color:"success",left:""},{default:t(()=>e[23]||(e[23]=[s("mdi-phone-check")])),_:1,__:[23]}),o("div",it,[e[24]||(e[24]=o("div",{class:"text-caption grey--text"},"Connected",-1)),o("div",dt,i(_.value.summary_call_completed),1)])])]),_:1})]),_:1}),l(B,{cols:"12",sm:"6"},{default:t(()=>[l(D,{class:"rounded-lg pa-3 mb-3",outlined:""},{default:t(()=>[o("div",ut,[l(r,{color:"primary",left:""},{default:t(()=>e[25]||(e[25]=[s("mdi-phone-outgoing")])),_:1,__:[25]}),o("div",ct,[e[26]||(e[26]=o("div",{class:"text-caption grey--text"},"Outbound",-1)),o("div",mt,i(_.value.summary_outbound_call_completed),1)])])]),_:1})]),_:1}),l(B,{cols:"12",sm:"6"},{default:t(()=>[l(D,{class:"rounded-lg pa-3 mb-3",outlined:""},{default:t(()=>[o("div",_t,[l(r,{color:"info",left:""},{default:t(()=>e[27]||(e[27]=[s("mdi-phone-incoming")])),_:1,__:[27]}),o("div",pt,[e[28]||(e[28]=o("div",{class:"text-caption grey--text"},"Incoming",-1)),o("div",gt,i(_.value.summary_inbound_call_completed),1)])])]),_:1})]),_:1}),l(B,{cols:"12",sm:"6"},{default:t(()=>[l(D,{class:"rounded-lg pa-3",outlined:""},{default:t(()=>[o("div",vt,[l(r,{color:"error",left:""},{default:t(()=>e[29]||(e[29]=[s("mdi-phone-cancel")])),_:1,__:[29]}),o("div",ft,[e[30]||(e[30]=o("div",{class:"text-caption grey--text"},"Rejected",-1)),o("div",yt,i(_.value.summary_rejected_incoming_calls+_.value.summary_rejected_outgoing_calls),1)])])]),_:1})]),_:1})]),_:1}),l(U,{color:"primary",text:"",class:"mt-2",onClick:e[0]||(e[0]=a=>n.showCallDetails=!n.showCallDetails)},{default:t(()=>[s(i(n.showCallDetails?"Hide":"Show")+" detailed stats ",1),l(r,{right:""},{default:t(()=>[s(i(n.showCallDetails?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1})]),_:1}),l(Ie,null,{default:t(()=>[n.showCallDetails?(j(),T("div",bt,[l(Z,{class:"my-3"}),l(je,{dense:""},{default:t(()=>[o("tbody",null,[o("tr",null,[e[31]||(e[31]=o("td",null,"Incoming Rejected",-1)),o("td",Ct,i(_.value.summary_rejected_incoming_calls),1)]),o("tr",null,[e[32]||(e[32]=o("td",null,"Outgoing Rejected",-1)),o("td",wt,i(_.value.summary_rejected_outgoing_calls),1)]),o("tr",null,[e[33]||(e[33]=o("td",null,"Outgoing User Busy",-1)),o("td",ht,i(_.value.summary_user_busy_outgoing_calls),1)])])]),_:1})])):V("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o("div",xt,[l(D,{class:"mb-4"},{default:t(()=>[l(K,null,{default:t(()=>[l(ze,{modelValue:I.value,"onUpdate:modelValue":e[1]||(e[1]=a=>I.value=a),label:"Search call history",placeholder:"Search by phone number, hangup cause...","prepend-icon":"mdi-magnify",clearable:"",onInput:se,onKeyup:Ge(q,["enter"]),hint:"Search: caller number, destination, dialed number, or hangup cause"},null,8,["modelValue"]),o("div",St,[I.value?(j(),T("span",kt,[e[34]||(e[34]=s(" Searching for: ")),o("strong",null,i(I.value),1)])):V("",!0)])]),_:1})]),_:1}),o("div",Dt,[o("div",Pt,[l(U,{color:"primary",variant:"outlined",onClick:ie,loading:P(R).loading,size:"small"},{default:t(()=>[l(r,{start:""},{default:t(()=>e[35]||(e[35]=[s("mdi-refresh")])),_:1,__:[35]}),e[36]||(e[36]=s(" Refresh "))]),_:1,__:[36]},8,["loading"]),l(Te,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=a=>w.value=a),items:ne,label:"Rows per page",variant:"outlined",density:"compact",style:{"max-width":"120px"},class:"ml-3"},null,8,["modelValue"])]),o("div",Nt,[l(z,{color:"info",variant:"outlined",size:"small"},{default:t(()=>[s(" Total: "+i(E.value),1)]),_:1})])]),l(Le,{"items-per-page":w.value,"onUpdate:itemsPerPage":e[3]||(e[3]=a=>w.value=a),page:x.value,"onUpdate:page":e[4]||(e[4]=a=>x.value=a),"sort-by":N.value,"onUpdate:sortBy":e[5]||(e[5]=a=>N.value=a),headers:re,items:P(R).callHistory,"items-length":E.value,loading:P(R).loading,"onUpdate:options":H},{"item.created_at":t(({item:a})=>[o("div",$t,[o("div",Bt,i(de(a.created_at)),1),o("div",Ut,i(ue(a.created_at)),1)])]),"item.callerNumber":t(({item:a})=>[o("div",jt,[l(r,{size:"16",color:"primary",class:"mr-2"},{default:t(()=>e[37]||(e[37]=[s("mdi-phone-outgoing")])),_:1,__:[37]}),o("span",It,i(J(a.callerNumber)),1)])]),"item.destinationNumber":t(({item:a})=>[o("div",Ht,[l(r,{size:"16",color:"success",class:"mr-2"},{default:t(()=>e[38]||(e[38]=[s("mdi-phone-incoming")])),_:1,__:[38]}),o("span",zt,i(J(a.destinationNumber)),1)])]),"item.durationInSeconds":t(({item:a})=>[l(z,{color:me(Number(a.durationInSeconds)),size:"small",variant:"tonal"},{default:t(()=>[s(i(ce(Number(a.durationInSeconds))),1)]),_:2},1032,["color"])]),"item.status":t(({item:a})=>[l(z,{color:_e(a.status),size:"small",variant:"flat"},{default:t(()=>[l(r,{start:"",size:"12"},{default:t(()=>[s(i(pe(a.status)),1)]),_:2},1024),s(" "+i(a.status),1)]),_:2},1032,["color"])]),"item.description":t(({item:a})=>[o("div",Tt,[l(r,{color:ge(a.description),size:"16",class:"mr-2"},{default:t(()=>[s(i(ve(a.description)),1)]),_:2},1032,["color"]),o("span",null,i(a.description),1)])]),"item.lastBridgeHangupCause":t(({item:a})=>[l(Q,{text:ye(a.lastBridgeHangupCause)},{activator:t(({props:c})=>[l(z,A(c,{color:fe(a.lastBridgeHangupCause),size:"small",variant:"outlined"}),{default:t(()=>[s(i(a.lastBridgeHangupCause),1)]),_:2},1040,["color"])]),_:2},1032,["text"])]),"item.callSessionState":t(({item:a})=>[l(Ve,{color:be(a.callSessionState),dot:"",inline:""},{default:t(()=>[o("span",null,i(a.callSessionState),1)]),_:2},1032,["color"])]),"item.actions":t(({item:a})=>[o("div",Vt,[l(Q,{text:"Play Recording"},{activator:t(({props:c})=>[l(U,A(c,{icon:"",size:"small",color:"primary",variant:"outlined",onClick:le=>Ce(a),disabled:!a.recordingUrl}),{default:t(()=>[l(r,null,{default:t(()=>e[39]||(e[39]=[s("mdi-play")])),_:1,__:[39]})]),_:2},1040,["onClick","disabled"])]),_:2},1024),l(Q,{text:"Download Recording"},{activator:t(({props:c})=>[l(U,A(c,{icon:"",size:"small",color:"success",variant:"outlined",onClick:le=>we(a),disabled:!a.recordingUrl,class:"ml-2"}),{default:t(()=>[l(r,null,{default:t(()=>e[40]||(e[40]=[s("mdi-download")])),_:1,__:[40]})]),_:2},1040,["onClick","disabled"])]),_:2},1024),l(Q,{text:"Call Back"},{activator:t(({props:c})=>[l(U,A(c,{icon:"",size:"small",color:"warning",variant:"outlined",onClick:le=>he(a),class:"ml-2"}),{default:t(()=>[l(r,null,{default:t(()=>e[41]||(e[41]=[s("mdi-phone-return")])),_:1,__:[41]})]),_:2},1040,["onClick"])]),_:2},1024),l(Ae,null,{activator:t(({props:c})=>[l(U,A(c,{icon:"",size:"small",variant:"text",class:"ml-2"}),{default:t(()=>[l(r,null,{default:t(()=>e[42]||(e[42]=[s("mdi-dots-vertical")])),_:1,__:[42]})]),_:2},1040)]),default:t(()=>[l(Y,{density:"compact"},{default:t(()=>[l(k,{onClick:c=>xe(a)},{prepend:t(()=>[l(r,null,{default:t(()=>e[43]||(e[43]=[s("mdi-eye")])),_:1,__:[43]})]),default:t(()=>[l(S,null,{default:t(()=>e[44]||(e[44]=[s("View Details")])),_:1,__:[44]})]),_:2},1032,["onClick"]),l(k,{onClick:c=>Se(a)},{prepend:t(()=>[l(r,null,{default:t(()=>e[45]||(e[45]=[s("mdi-account-plus")])),_:1,__:[45]})]),default:t(()=>[l(S,null,{default:t(()=>e[46]||(e[46]=[s("Add to Contacts")])),_:1,__:[46]})]),_:2},1032,["onClick"]),l(k,{onClick:c=>ke(a)},{prepend:t(()=>[l(r,null,{default:t(()=>e[47]||(e[47]=[s("mdi-message")])),_:1,__:[47]})]),default:t(()=>[l(S,null,{default:t(()=>e[48]||(e[48]=[s("Send SMS")])),_:1,__:[48]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]),"no-data":t(()=>[o("div",At,[l(r,{size:"64",color:"grey-lighten-1"},{default:t(()=>e[49]||(e[49]=[s("mdi-phone-off")])),_:1,__:[49]}),e[50]||(e[50]=o("h3",null,"No call history found",-1)),e[51]||(e[51]=o("p",null,"Call history will appear here once you start making calls.",-1))])]),loading:t(()=>[o("div",Rt,[l(Re,{indeterminate:"",color:"primary",size:"48"}),e[52]||(e[52]=o("p",{class:"mt-4"},"Loading call history...",-1))])]),_:1},8,["items-per-page","page","sort-by","items","items-length","loading"])])]),F.value?(j(),T("div",Lt,[o("div",Mt,[o("div",{class:"flex justify-between items-center bg-gray-100 px-4 py-2"},[e[53]||(e[53]=o("h2",{class:"text-lg font-semibold"},"Call Statistics",-1)),o("button",{onClick:X,class:"text-gray-500 hover:text-black"},"âœ–")]),o("div",Qt,[o("p",null,[e[54]||(e[54]=o("strong",null,"Direction:",-1)),s(" "+i(u.value.direction),1)]),o("p",null,[e[55]||(e[55]=o("strong",null,"Caller:",-1)),s(" "+i(u.value.callerNumber),1)]),o("p",null,[e[56]||(e[56]=o("strong",null,"Destination:",-1)),s(" "+i(u.value.destinationNumber),1)]),o("p",null,[e[57]||(e[57]=o("strong",null,"Duration:",-1)),s(" "+i(u.value.durationInSeconds)+" seconds",1)]),o("p",null,[e[58]||(e[58]=o("strong",null,"Status:",-1)),s(" "+i(u.value.status),1)]),o("p",null,[e[59]||(e[59]=o("strong",null,"Start Time:",-1)),s(" "+i(u.value.callStartTime),1)]),u.value.recordingUrl?(j(),T("div",Et,[e[60]||(e[60]=o("p",{class:"font-semibold"},"Recording:",-1)),o("audio",{controls:"",src:u.value.recordingUrl,class:"w-full"},null,8,Ot)])):V("",!0),(te=u.value.calltranscripts)!=null&&te.length?(j(),T("div",Ft,[e[66]||(e[66]=o("h3",{class:"font-semibold mt-4"},"Transcript",-1)),o("p",null,i(u.value.calltranscripts[0].transcript),1),o("div",Kt,[o("p",null,[e[61]||(e[61]=o("strong",null,"Sentiment:",-1)),s(" "+i(u.value.calltranscripts[0].sentiment),1)]),o("p",null,[e[62]||(e[62]=o("strong",null,"Fulfillment Score:",-1)),s(" "+i(u.value.calltranscripts[0].fulfillment_score)+"%",1)]),o("p",null,[e[63]||(e[63]=o("strong",null,"Customer Service Rating:",-1)),s(" "+i(u.value.calltranscripts[0].cs_rating)+"/5",1)]),o("p",null,[e[64]||(e[64]=o("strong",null,"Intent:",-1)),s(" "+i(u.value.calltranscripts[0].analysis.intent),1)]),o("p",null,[e[65]||(e[65]=o("strong",null,"Keywords:",-1)),s(" "+i(u.value.calltranscripts[0].analysis.keywords.join(", ")),1)])])])):V("",!0)]),o("div",{class:"flex justify-end bg-gray-100 px-4 py-2"},[o("button",{onClick:X,class:"bg-blue-600 text-white px-3 py-1 rounded"}," Close ")])])])):V("",!0),l(Je,{modelValue:P(C).dialogType,"onUpdate:modelValue":e[6]||(e[6]=a=>P(C).dialogType=a)},null,8,["modelValue"])]}),_:1})}}},nl=Ye(Gt,[["__scopeId","data-v-0bcba311"]]);export{nl as default};
