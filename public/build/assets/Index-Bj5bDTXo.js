import{r as c,j as U,c as q,o as r,w as Y,a as e,d as u,e as f,t as o,b as x,f as y,u as g,A as v,B as w,C as j,F as H,g as Z,n as p,a3 as K,y as ee}from"./app-zwK4OLfW.js";import{_ as te}from"./AppLayout-CLi_itcX.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as le,E as oe,S as ne,a as ae,C as X}from"./square-pen-DjPY_m6o.js";import{S as ie,F as re}from"./search-CXPwkMq6.js";import{c as $}from"./createLucideIcon-cjPlHfz9.js";import"./webrtc-LGI2K5EP.js";import"./africastalking-CqpzLgYV.js";import"./IncomingCallDialog-DnywBCnu.js";/* empty css                                                                           *//**
 * @license lucide-vue-next v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=$("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=$("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=$("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-vue-next v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=$("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ve={class:"min-h-screen bg-gray-50 p-6"},me={class:"max-w-7xl mx-auto"},xe={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},ye={class:"flex justify-between items-center mb-6"},ge={class:"text-gray-600 mt-1"},fe={class:"flex flex-col md:flex-row gap-4"},be={class:"flex-1 relative"},_e={class:"flex items-center gap-2"},he={class:"bg-white rounded-lg shadow-sm overflow-hidden"},we={class:"overflow-x-auto"},ke={class:"w-full"},Ce={key:0},Se={class:"px-4 py-3 font-medium"},Ee={class:"px-4 py-3"},De={class:"flex items-start gap-2"},Ie={class:"line-clamp-2"},Me={class:"px-4 py-3"},Ae={class:"px-4 py-3"},Ve={class:"px-4 py-3"},Ue={class:"flex items-center gap-2"},je={class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm"},$e={class:"text-sm font-medium"},Ne={class:"text-xs text-gray-500"},ze={class:"px-4 py-3"},Te={class:"px-4 py-3 text-sm text-gray-600"},Fe={class:"px-4 py-3"},qe={class:"flex gap-2"},Le=["onClick"],Pe=["onClick"],Oe=["onClick"],Be={key:0,class:"border-t p-4 flex justify-between items-center"},Re={class:"text-sm text-gray-600"},He={class:"flex gap-2"},Ze=["disabled"],Ke=["onClick"],Xe=["disabled"],Qe={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},We={class:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto"},Ge={class:"sticky top-0 bg-white border-b p-6 flex justify-between items-center"},Je={class:"text-2xl font-bold"},Ye={class:"p-6"},et={key:0,class:"space-y-6"},tt={class:"grid grid-cols-2 gap-4"},st={class:"font-semibold"},lt={class:"mt-1"},ot={class:"col-span-2"},nt={class:"font-semibold"},at={class:"font-semibold text-lg"},it={class:"mt-1"},rt={class:"col-span-2"},dt={class:"bg-gray-50 rounded-lg p-4"},ut={class:"font-medium"},pt={class:"text-sm text-gray-600"},ct={class:"text-sm text-gray-600"},vt={class:"text-sm text-gray-600"},mt={class:"font-semibold"},xt={class:"font-semibold"},yt={key:0,class:"text-red-500 text-sm mt-1"},gt={class:"grid grid-cols-2 gap-4"},ft={key:0,class:"text-red-500 text-sm mt-1"},bt={key:0,class:"text-red-500 text-sm mt-1"},_t={key:0,class:"text-red-500 text-sm mt-1"},ht={class:"flex gap-3 justify-end pt-4 border-t"},wt={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"},S=10,kt={__name:"Index",setup(Ct){const m=c([{id:1,description:"Transportation cost",amount:1e3,expense_type:"expense",invoice_id:null,seller_id:16626,country_id:15,status:"not_applied",created_at:"2025-09-11T09:58:00.000000Z",updated_at:"2025-09-22T05:09:37.000000Z",seller:{id:16626,first_name:"FOD",last_name:"VENTURES",username:"FOD_VENTURES",email:"yemight2033@gmail.com",phone:"2348089519733"}}]),E=c(""),D=c("all"),I=c("all"),d=c(1),N=c(!1),b=c("create"),a=c(null),n=c({description:"",amount:"",expense_type:"expense",seller_id:"",country_id:"",status:"not_applied",invoice_id:""}),i=c({}),_=U(()=>{let l=m.value;if(E.value){const t=E.value.toLowerCase();l=l.filter(s=>{var k,C,O,B,R;return((k=s.description)==null?void 0:k.toLowerCase().includes(t))||((O=(C=s.seller)==null?void 0:C.username)==null?void 0:O.toLowerCase().includes(t))||((R=(B=s.seller)==null?void 0:B.email)==null?void 0:R.toLowerCase().includes(t))})}return D.value!=="all"&&(l=l.filter(t=>t.status===D.value)),I.value!=="all"&&(l=l.filter(t=>t.expense_type===I.value)),l}),M=U(()=>Math.ceil(_.value.length/S)),L=U(()=>{const l=(d.value-1)*S,t=d.value*S;return _.value.slice(l,t)}),Q=U(()=>_.value.reduce((l,t)=>l+parseFloat(t.amount),0)),P=()=>{var t;const l={};return(t=n.value.description)!=null&&t.trim()||(l.description="Description is required"),(!n.value.amount||parseFloat(n.value.amount)<=0)&&(l.amount="Valid amount is required"),n.value.seller_id||(l.seller_id="Seller is required"),n.value.country_id||(l.country_id="Country is required"),i.value=l,Object.keys(l).length===0},W=()=>{if(!P())return;const l={id:Math.max(...m.value.map(t=>t.id),0)+1,...n.value,amount:parseFloat(n.value.amount),created_at:new Date().toISOString(),updated_at:new Date().toISOString(),seller:{id:parseInt(n.value.seller_id),username:"NEW_USER",first_name:"New",last_name:"User",email:"user@example.com",phone:"000000000"}};m.value=[l,...m.value],A()},G=()=>{P()&&(m.value=m.value.map(l=>l.id===a.value.id?{...l,...n.value,amount:parseFloat(n.value.amount),updated_at:new Date().toISOString()}:l),A())},J=l=>{window.confirm("Are you sure you want to delete this expense?")&&(m.value=m.value.filter(t=>t.id!==l))},z=(l,t=null)=>{var s;b.value=l,a.value=t,l==="create"?n.value={description:"",amount:"",expense_type:"expense",seller_id:"",country_id:"",status:"not_applied",invoice_id:""}:t&&(n.value={description:t.description,amount:t.amount.toString(),expense_type:t.expense_type,seller_id:t.seller_id.toString(),country_id:t.country_id.toString(),status:t.status,invoice_id:((s=t.invoice_id)==null?void 0:s.toString())||""}),i.value={},N.value=!0},A=()=>{N.value=!1,a.value=null,i.value={}},V=l=>{i.value[l]&&delete i.value[l]},h=l=>{const t={not_applied:{bg:"bg-gray-500",icon:de,text:"Not Applied"},applied:{bg:"bg-blue-500",icon:X,text:"Applied"},approved:{bg:"bg-green-500",icon:X,text:"Approved"},rejected:{bg:"bg-red-500",icon:ae,text:"Rejected"}};return t[l]||t.not_applied},T=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),F=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"KES"}).format(l);return(l,t)=>(r(),q(te,null,{default:Y(()=>[e("div",ve,[e("div",me,[e("div",xe,[e("div",ye,[e("div",null,[t[21]||(t[21]=e("h1",{class:"text-3xl font-bold text-gray-800"}," Seller Expenses ",-1)),e("p",ge,o(_.value.length)+" total expenses â€¢ "+o(F(Q.value))+" total amount ",1)]),e("button",{onClick:t[0]||(t[0]=s=>z("create")),class:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"},[x(g(le),{size:20}),t[22]||(t[22]=y(" Add Expense "))])]),e("div",fe,[e("div",be,[x(g(ie),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),v(e("input",{type:"text",placeholder:"Search by description, seller, or email...",class:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":t[1]||(t[1]=s=>E.value=s),onInput:t[2]||(t[2]=s=>d.value=1)},null,544),[[w,E.value]])]),e("div",_e,[x(g(re),{size:20,class:"text-gray-400"}),v(e("select",{class:"border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":t[3]||(t[3]=s=>D.value=s),onChange:t[4]||(t[4]=s=>d.value=1)},t[23]||(t[23]=[e("option",{value:"all"},"All Status",-1),e("option",{value:"not_applied"},"Not Applied",-1),e("option",{value:"applied"},"Applied",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)]),544),[[j,D.value]]),v(e("select",{class:"border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":t[5]||(t[5]=s=>I.value=s),onChange:t[6]||(t[6]=s=>d.value=1)},t[24]||(t[24]=[e("option",{value:"all"},"All Types",-1),e("option",{value:"expense"},"Expense",-1),e("option",{value:"income"},"Income",-1)]),544),[[j,I.value]])])])]),e("div",he,[e("div",we,[e("table",ke,[t[26]||(t[26]=e("thead",{class:"bg-blue-600 text-white"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left"},"ID"),e("th",{class:"px-4 py-3 text-left"}," Description "),e("th",{class:"px-4 py-3 text-left"},"Amount"),e("th",{class:"px-4 py-3 text-left"},"Type"),e("th",{class:"px-4 py-3 text-left"},"Seller"),e("th",{class:"px-4 py-3 text-left"},"Status"),e("th",{class:"px-4 py-3 text-left"}," Created Date "),e("th",{class:"px-4 py-3 text-left"},"Actions")])],-1)),e("tbody",null,[L.value.length===0?(r(),u("tr",Ce,t[25]||(t[25]=[e("td",{colspan:"8",class:"px-4 py-8 text-center text-gray-500"}," No expenses found ",-1)]))):f("",!0),(r(!0),u(H,null,Z(L.value,(s,k)=>(r(),u("tr",{key:s.id,class:p(k%2===0?"bg-amber-50":"bg-white")},[e("td",Se," #"+o(s.id),1),e("td",Ee,[e("div",De,[x(g(ue),{size:16,class:"text-gray-400 mt-1 flex-shrink-0"}),e("span",Ie,o(s.description),1)])]),e("td",Me,[e("span",{class:p(["font-semibold",s.expense_type==="expense"?"text-red-600":"text-green-600"])},o(s.expense_type==="expense"?"-":"+")+o(F(s.amount)),3)]),e("td",Ae,[e("span",{class:p(["px-2 py-1 rounded text-xs font-medium",s.expense_type==="expense"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},o(s.expense_type==="expense"?"Expense":"Income"),3)]),e("td",Ve,[e("div",Ue,[e("div",je,o(s.seller.first_name[0]),1),e("div",null,[e("p",$e,o(s.seller.username),1),e("p",Ne,o(s.seller.email),1)])])]),e("td",ze,[e("span",{class:p(["inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs text-white",h(s.status).bg])},[(r(),q(K(h(s.status).icon),{size:12})),y(" "+o(h(s.status).text),1)],2)]),e("td",Te,o(T(s.created_at)),1),e("td",Fe,[e("div",qe,[e("button",{onClick:C=>z("view",s),class:"p-2 hover:bg-gray-100 rounded-lg transition",title:"View Details"},[x(g(oe),{size:18,class:"text-gray-600"})],8,Le),e("button",{onClick:C=>z("edit",s),class:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Edit"},[x(g(ne),{size:18,class:"text-blue-600"})],8,Pe),e("button",{onClick:C=>J(s.id),class:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Delete"},[x(g(pe),{size:18,class:"text-red-600"})],8,Oe)])])],2))),128))])])]),M.value>1?(r(),u("div",Be,[e("div",Re," Showing "+o((d.value-1)*S+1)+" to "+o(Math.min(d.value*S,_.value.length))+" of "+o(_.value.length)+" expenses ",1),e("div",He,[e("button",{onClick:t[7]||(t[7]=s=>d.value=Math.max(1,d.value-1)),disabled:d.value===1,class:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition"}," Previous ",8,Ze),(r(!0),u(H,null,Z(M.value,s=>(r(),u("button",{key:s,onClick:k=>d.value=s,class:p(["px-4 py-2 rounded-lg transition",d.value===s?"bg-blue-600 text-white":"border hover:bg-gray-50"])},o(s),11,Ke))),128)),e("button",{onClick:t[8]||(t[8]=s=>d.value=Math.min(M.value,d.value+1)),disabled:d.value===M.value,class:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition"}," Next ",8,Xe)])])):f("",!0)])]),N.value?(r(),u("div",Qe,[e("div",We,[e("div",Ge,[e("h2",Je,o(b.value==="create"?"Add New Expense":b.value==="edit"?"Edit Expense":"Expense Details"),1),e("button",{onClick:A,class:"text-gray-500 hover:text-gray-700 transition"},[x(g(ce),{size:24})])]),e("div",Ye,[b.value==="view"?(r(),u("div",et,[e("div",tt,[e("div",null,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"}," Expense ID ",-1)),e("p",st," #"+o(a.value.id),1)]),e("div",null,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-600"},"Status",-1)),e("div",lt,[e("span",{class:p(["inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs text-white",h(a.value.status).bg])},[(r(),q(K(h(a.value.status).icon),{size:12})),y(" "+o(h(a.value.status).text),1)],2)])]),e("div",ot,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-600"}," Description ",-1)),e("p",nt,o(a.value.description),1)]),e("div",null,[t[30]||(t[30]=e("p",{class:"text-sm text-gray-600"},"Amount",-1)),e("p",at,o(F(a.value.amount)),1)]),e("div",null,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Type",-1)),e("div",it,[e("span",{class:p(["px-2 py-1 rounded text-xs font-medium",a.value.expense_type==="expense"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},o(a.value.expense_type==="expense"?"Expense":"Income"),3)])]),e("div",rt,[t[32]||(t[32]=e("p",{class:"text-sm text-gray-600 mb-2"}," Seller Information ",-1)),e("div",dt,[e("p",ut,o(a.value.seller.first_name)+" "+o(a.value.seller.last_name),1),e("p",pt," @"+o(a.value.seller.username),1),e("p",ct,o(a.value.seller.email),1),e("p",vt,o(a.value.seller.phone),1)])]),e("div",null,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600"}," Created Date ",-1)),e("p",mt,o(T(a.value.created_at)),1)]),e("div",null,[t[34]||(t[34]=e("p",{class:"text-sm text-gray-600"}," Last Updated ",-1)),e("p",xt,o(T(a.value.updated_at)),1)])])])):(r(),u("form",{key:1,onSubmit:t[20]||(t[20]=ee(s=>b.value==="create"?W():G(),["prevent"])),class:"space-y-4"},[e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium mb-2"},[y(" Description "),e("span",{class:"text-red-500"},"*")],-1)),v(e("textarea",{class:p(["w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",i.value.description?"border-red-500":""]),rows:"3","onUpdate:modelValue":t[9]||(t[9]=s=>n.value.description=s),onInput:t[10]||(t[10]=s=>V("description")),placeholder:"Enter expense description"},null,34),[[w,n.value.description]]),i.value.description?(r(),u("p",yt,o(i.value.description),1)):f("",!0)]),e("div",gt,[e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium mb-2"},[y(" Amount (KES) "),e("span",{class:"text-red-500"},"*")],-1)),v(e("input",{type:"number",step:"0.01",min:"0",class:p(["w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",i.value.amount?"border-red-500":""]),"onUpdate:modelValue":t[11]||(t[11]=s=>n.value.amount=s),onInput:t[12]||(t[12]=s=>V("amount")),placeholder:"0.00"},null,34),[[w,n.value.amount]]),i.value.amount?(r(),u("p",ft,o(i.value.amount),1)):f("",!0)]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium mb-2"},[y(" Type "),e("span",{class:"text-red-500"},"*")],-1)),v(e("select",{class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":t[13]||(t[13]=s=>n.value.expense_type=s)},t[37]||(t[37]=[e("option",{value:"expense"},"Expense",-1),e("option",{value:"income"},"Income",-1)]),512),[[j,n.value.expense_type]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium mb-2"},[y(" Seller ID "),e("span",{class:"text-red-500"},"*")],-1)),v(e("input",{type:"number",class:p(["w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",i.value.seller_id?"border-red-500":""]),"onUpdate:modelValue":t[14]||(t[14]=s=>n.value.seller_id=s),onInput:t[15]||(t[15]=s=>V("seller_id")),placeholder:"Enter seller ID"},null,34),[[w,n.value.seller_id]]),i.value.seller_id?(r(),u("p",bt,o(i.value.seller_id),1)):f("",!0)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium mb-2"},[y(" Country ID "),e("span",{class:"text-red-500"},"*")],-1)),v(e("input",{type:"number",class:p(["w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",i.value.country_id?"border-red-500":""]),"onUpdate:modelValue":t[16]||(t[16]=s=>n.value.country_id=s),onInput:t[17]||(t[17]=s=>V("country_id")),placeholder:"Enter country ID"},null,34),[[w,n.value.country_id]]),i.value.country_id?(r(),u("p",_t,o(i.value.country_id),1)):f("",!0)]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium mb-2"},"Status",-1)),v(e("select",{class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":t[18]||(t[18]=s=>n.value.status=s)},t[41]||(t[41]=[e("option",{value:"not_applied"}," Not Applied ",-1),e("option",{value:"applied"},"Applied",-1),e("option",{value:"approved"}," Approved ",-1),e("option",{value:"rejected"}," Rejected ",-1)]),512),[[j,n.value.status]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium mb-2"},"Invoice ID (Optional)",-1)),v(e("input",{type:"number",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":t[19]||(t[19]=s=>n.value.invoice_id=s),placeholder:"Enter invoice ID"},null,512),[[w,n.value.invoice_id]])])]),e("div",ht,[e("button",{type:"button",onClick:A,class:"px-4 py-2 border rounded-lg hover:bg-gray-50 transition"}," Cancel "),e("button",wt,o(b.value==="create"?"Create Expense":"Update Expense"),1)])],32))])])])):f("",!0)])]),_:1}))}},Nt=se(kt,[["__scopeId","data-v-50fe1c2e"]]);export{Nt as default};
