import{r as T,j as h,l as r,c as k,o as d,w as l,b as n,a as o,t as i,f as a,d as c,e as x,F,g as I}from"./app-Cuu9_Ou2.js";const K={class:"text-h6"},D={class:"font-weight-bold"},L={key:0},U={key:1,class:"text-grey"},M={key:0,class:"d-flex align-center"};const P={key:0},R={class:"text-subtitle-1"},G={__name:"OrderExpenses",props:{modelValue:Boolean,order:Object,expenses:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(m,{expose:b}){const C=m,E=()=>{},_=T(!1),V=s=>{_.value=!0},w=h(()=>C.expenses.reduce((s,e)=>s+Number(e.amount),0)),v=s=>Number(s).toLocaleString("en-KE",{minimumFractionDigits:2}),B=s=>s.replaceAll("_"," ").toUpperCase(),N=s=>s==="paid"?"green":s==="invoiced"?"blue":s==="pending"?"orange":"grey";return b({open:V}),(s,e)=>{const p=r("v-icon"),u=r("v-btn"),$=r("v-card-title"),f=r("v-divider"),y=r("v-chip"),z=r("v-table"),A=r("v-card-text"),S=r("v-card-actions"),j=r("v-card"),O=r("v-dialog");return d(),k(O,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=t=>_.value=t),"max-width":"900"},{default:l(()=>[n(j,{rounded:"xl"},{default:l(()=>[n($,{class:"d-flex justify-space-between align-center"},{default:l(()=>{var t;return[o("span",K," Order Expenses — #"+i((t=m.order)==null?void 0:t.order_no),1),n(u,{icon:"",onClick:e[0]||(e[0]=g=>_.value=!1)},{default:l(()=>[n(p,null,{default:l(()=>e[3]||(e[3]=[a("mdi-close")])),_:1,__:[3]})]),_:1})]}),_:1}),n(f),n(A,null,{default:l(()=>[n(z,{density:"comfortable"},{default:l(()=>[e[8]||(e[8]=o("thead",null,[o("tr",null,[o("th",null,"Expense Type"),o("th",null,"Party"),o("th",null,"Amount"),o("th",null,"Status"),o("th",null,"Invoice"),o("th",null,"Actions")])],-1)),o("tbody",null,[(d(!0),c(F,null,I(m.expenses,t=>(d(),c("tr",{key:t.id},[o("td",null,[n(y,{size:"small",variant:"tonal"},{default:l(()=>[a(i(B(t.expense_type)),1)]),_:2},1024)]),o("td",null,i(t.party_name||t.party_type),1),o("td",D," KES "+i(v(t.amount)),1),o("td",null,[n(y,{size:"small",color:N(t.status),variant:"flat"},{default:l(()=>[a(i(t.status),1)]),_:2},1032,["color"])]),o("td",null,[t.invoice_no?(d(),c("span",L,i(t.invoice_no),1)):(d(),c("span",U," — "))]),o("td",null,[(d(),c("div",M,[t.invoice_url?(d(),k(u,{key:0,href:t.invoice_url,target:"_blank",icon:"",size:"small",color:"primary"},{default:l(()=>[n(p,null,{default:l(()=>e[4]||(e[4]=[a("mdi-file-download-outline")])),_:1,__:[4]})]),_:2},1032,["href"])):x("",!0),n(u,{icon:"",size:"small",color:"primary",onClick:g=>s.$emit("edit-expense",t),title:"Edit expense"},{default:l(()=>[n(p,null,{default:l(()=>e[5]||(e[5]=[a("mdi-pencil")])),_:1,__:[5]})]),_:2},1032,["onClick"]),n(u,{icon:"",size:"small",color:"error",onClick:g=>s.$emit("remove-expense",t),title:"Remove expense"},{default:l(()=>[n(p,null,{default:l(()=>e[6]||(e[6]=[a("mdi-delete")])),_:1,__:[6]})]),_:2},1032,["onClick"])]))])]))),128)),m.expenses.length?x("",!0):(d(),c("tr",P,e[7]||(e[7]=[o("td",{colspan:"5",class:"text-center text-grey py-6"}," No expenses recorded for this order ",-1)])))])]),_:1,__:[8]}),n(u,{color:"primary",variant:"text","prepend-icon":"mdi-plus",onClick:E,class:"mt-2"},{default:l(()=>e[9]||(e[9]=[a(" Add Item ")])),_:1,__:[9]})]),_:1}),n(f),n(S,{class:"justify-space-between px-6 py-4"},{default:l(()=>[o("div",R,[e[10]||(e[10]=a(" Total Expenses: ")),o("strong",null,"KES "+i(v(w.value)),1)]),n(u,{color:"primary",variant:"flat",onClick:e[1]||(e[1]=t=>_.value=!1)},{default:l(()=>e[11]||(e[11]=[a(" Close ")])),_:1,__:[11]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};export{G as default};
