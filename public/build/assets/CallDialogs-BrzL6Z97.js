import{E as Ke,r as i,j as T,i as j,k as Xe,l as u,d as B,o as S,b as l,w as a,a as d,f as s,y as Ye,e as ze,p as Ie,q as Ue,t as f,F as re,g as de,c as ce,n as Qe}from"./app-kBYoR87N.js";import{u as Ne}from"./webrtc-CR5veS3v.js";import{n as p}from"./toast-DXbv00zs.js";import{u as Ze}from"./contact-DklbiY1d.js";import{_ as el}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ll=Ke("callCenter",()=>{const z=Ne(),Y=i(!1),Z=i(null),C=i(null),b=i(null),L=i([]),y=i(!1),N=i(null),I=i(0),V=i(!1),w=i(!1),_=i(80),m=i(!1),U=i(null),M=i(""),D=i(null),h=i(null),W=i(!1),A=i({name:"",phone:"",email:"",company:""}),F=i({totalWaiting:0,averageWaitTime:0,agentsAvailable:0,agentsOnCall:0}),ee=i("available"),le=i([]),r=T(()=>z.afClient),te=T(()=>z.incomingCall),ve=T(()=>z.incomingCallDialog),G=T(()=>z.connection_active),me=T(()=>D.value!==null),fe=T(()=>{const n=Math.floor(I.value/60),v=I.value%60;return`${n.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`});function Q(n){console.log(`[Call Center]: ${n}`)}function pe(n){z.initializeAfClient(n)}function ne(n){try{if(console.log(`Calling ${n} from System...`),!r.value){console.error("AfricasTalking client is not initialized."),p.error("AfricasTalking client is not initialized.");return}r.value.call(n),console.log("Call initiated successfully."),p.success("Call started."),m.value=!0,b.value={id:Date.now(),phoneNumber:n,direction:"outbound",status:"connecting",startTime:new Date},r.value.on("afClienting",()=>{Q("afClient is in progress (calling)...")}),r.value.on("callaccepted",()=>{console.log("callaccepted"),p.success("Call accepted!"),Q("Call accepted (bridged between caller and callee)."),y.value=!0,N.value=Date.now(),ae()}),r.value.on("hangup",v=>{Q(`Call hung up (${v.code} - ${v.reason}).`),p.error(`Call ended: ${v.reason}`),m.value=!1,E()}),r.value.on("mute",()=>{Q("Call muted."),p.info("Call muted."),w.value=!0}),r.value.on("unmute",()=>{Q("Call unmuted."),p.info("Call unmuted."),w.value=!1}),r.value.on("hold",()=>{Q("Call on hold."),p.info("Call on hold."),V.value=!0}),r.value.on("unhold",()=>{Q("Call resumed from hold."),p.info("Call resumed from hold."),V.value=!1})}catch(v){console.error("Call initiation error:",v),p.error("Call failed: "+v.message)}}function _e(){te.value&&r.value&&(r.value.answer(),y.value=!0,N.value=Date.now(),ae())}function ge(n){if(m.value=!0,U.value=n,console.log("Selected agent:",n),M.value=n.phone_number,console.log("Agent phone number:",M.value),!r.value){console.error("AfricasTalking client is not initialized."),p.error("AfricasTalking client is not initialized.");return}try{console.log("Attempting to call agent..."),r.value.call(M.value),console.log("Call initiated successfully."),p.success("Call initiated successfully."),b.value={id:Date.now(),phoneNumber:M.value,direction:"outbound",status:"connecting",startTime:new Date,agent:n}}catch(v){console.error("Error while calling agent:",v),p.error("Failed to call agent: "+v.message)}}function x(){r.value&&(z.hangupCall(),console.log("call ended"),p.error("Call ended."),z.setIncomingCallDialog(!1),m.value=!1,E())}function oe(){m.value&&r.value&&(w.value=!w.value,w.value?r.value.muteAudio():r.value.unmuteAudio(),console.log("Client mute property:",r.value.isAudioMuted),console.log("Our internal state:",w.value))}async function Ce(n,v={}){var P,O;try{if(Y.value=!0,C.value=null,Z.value=n,r.value)return ne(n),{success:!0,callId:Date.now()};const q=await j.post("/api/v1/call-center/make-call",{phoneNumber:n,...v});return b.value={id:q.data.callId||Date.now(),phoneNumber:n,direction:"outbound",status:"connecting",startTime:new Date},y.value=!0,N.value=Date.now(),ae(),q.data}catch(q){throw C.value=((O=(P=q==null?void 0:q.response)==null?void 0:P.data)==null?void 0:O.message)||"Failed to initiate call",q}finally{Y.value=!1}}async function we(){try{if(r.value&&m.value){x();return}b.value&&(await j.post(`/api/v1/call-center/end/${b.value.id}`),L.value.unshift({...b.value,endTime:new Date,duration:I.value,status:"completed"})),E()}catch{C.value="Failed to end call",E()}}async function se(n){try{if(r.value){x();return}await j.post(`/api/v1/call-center/reject/${n.id}`),z.setIncomingCall(null)}catch{C.value="Failed to reject call"}}async function be(){var n,v,P,O;try{if(r.value&&m.value){V.value?(v=(n=r.value).unhold)==null||v.call(n):(O=(P=r.value).hold)==null||O.call(P);return}V.value=!V.value,await j.post(`/api/v1/call-center/hold/${b.value.id}`,{hold:V.value})}catch{V.value=!V.value,C.value="Failed to toggle hold"}}async function ye(){try{if(r.value&&m.value){oe();return}w.value=!w.value,await j.post(`/api/v1/call-center/mute/${b.value.id}`,{mute:w.value})}catch{w.value=!w.value,C.value="Failed to toggle mute"}}async function he(n){try{await j.post(`/api/v1/call-center/transfer/${b.value.id}`,{targetNumber:n}),L.value.unshift({...b.value,endTime:new Date,duration:I.value,status:"transferred",transferredTo:n}),E()}catch(v){throw C.value="Failed to transfer call",v}}function ae(){const n=setInterval(()=>{if(!y.value){clearInterval(n);return}I.value=Math.floor((Date.now()-N.value)/1e3)},1e3)}function E(){b.value=null,y.value=!1,N.value=null,I.value=0,V.value=!1,w.value=!1,m.value=!1,U.value=null}function xe(){D.value="newCall",h.value=null}function K(){D.value="callAgent",h.value=null}function X(){D.value="queue",h.value=null}function Ve(){D.value="transfer"}function De(n=null){D.value="contact",h.value=n,n&&(A.value.phone=n.phoneNumber||n.callerNumber||"")}function o(n=null){D.value="sms",W.value=!0,h.value=n}function e(){D.value=null,W.value=!1,h.value=null,A.value={name:"",phone:"",email:"",company:""}}async function c(n){try{await j.post("/api/v1/call-center/agent/status",{status:n}),ee.value=n}catch{C.value="Failed to update status"}}async function $(){try{const n=await j.get("/api/v1/call-center/queue/status");F.value=n.data}catch(n){console.error("Failed to fetch queue status:",n)}}async function g(){try{const n=await j.get("/api/v1/call-center/agents");le.value=n.data}catch(n){console.error("Failed to fetch agent list:",n)}}function R(){const n={id:Date.now(),phoneNumber:"+1234567890",callerName:"John Doe",direction:"inbound",startTime:new Date};z.setIncomingCall(n)}return{makingCall:Y,lastCallNumber:Z,callError:C,activeCall:b,callHistory:L,isCallActive:y,callStartTime:N,callDuration:I,isOnHold:V,isMuted:w,volume:_,isCalling:m,selectedAgent:U,phone_number:M,dialogType:D,callData:h,isSmsDialog:W,contactForm:A,queueStatus:F,agentStatus:ee,agentList:le,isDialogOpen:me,formattedCallDuration:fe,afClient:r,incomingCall:te,incomingCallDialog:ve,connection_active:G,initializeAfClient:pe,callClient:ne,makeCall:Ce,answerCall:_e,endCall:we,rejectCall:se,holdCall:be,muteCall:ye,transferCall:he,resetCallState:E,handleCall:ge,hangupCall:x,handleMute:oe,openNewCallDialog:xe,openCallAgentDialog:K,openQueueDialog:X,openTransferDialog:Ve,openContactDialog:De,openSmsDialog:o,closeDialog:e,updateAgentStatus:c,fetchQueueStatus:$,fetchAgentList:g,simulateIncomingCall:R,logEvent:Q}}),al={class:"mb-6"},tl={class:"mb-6"},nl={class:"text-white"},ol={key:0,class:"d-flex justify-center mb-6"},sl={class:"pt-4 space-y-4"},il={key:1,class:"dialpad-container mb-4"},ul={class:"dialpad-grid"},rl={class:"text-center"},dl={class:"text-h6 font-weight-bold"},cl={class:"text-caption"},vl={class:"mb-4"},ml={key:1,class:"text-white font-weight-bold"},fl={class:"d-flex align-center"},pl={class:"text-center"},_l={class:"text-h6 font-weight-bold"},gl={class:"text-body-2"},Cl={class:"d-flex align-center"},wl={class:"text-white text-caption"},bl={class:"flex-grow-1"},yl={class:"text-body-2 font-weight-medium"},hl={class:"text-caption text-grey"},xl={key:0,class:"text-right"},Vl={class:"text-body-2 font-weight-bold"},Dl={class:"text-white"},kl={__name:"CallDialogs",props:{modelValue:String,callData:Object},emits:["update:modelValue","call-made","call-transferred","agent-called"],setup(z,{emit:Y}){const Z=Ne(),C=ll(),b=Ze(),L=z,y=Y,N=T({get:()=>L.modelValue==="newCall",set:o=>y("update:modelValue",o?"newCall":null)}),I=T({get:()=>L.modelValue==="callAgent",set:o=>y("update:modelValue",o?"callAgent":null)}),V=T({get:()=>L.modelValue==="queue",set:o=>y("update:modelValue",o?"queue":null)}),w=T({get:()=>L.modelValue==="transfer",set:o=>y("update:modelValue",o?"transfer":null)}),_=i({phone:"",contact:null,callerId:"",recordCall:!0,autoAnswer:!1}),m=i({phone:"",agent:null,queue:null,warmTransfer:!0}),U=i(!1),M=i(!1),D=i(!1),h=i(!1),W=i(""),A=i(null),F=i("number"),ee=i(!1),le=[o=>!!o||"Phone number is required"],r=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],te=T(()=>b.contacts),ve=i(["+1 (555) 000-0001","+1 (555) 000-0002","+1 (555) 000-0003"]),G=i([{id:1,name:"Alice Johnson",extension:"101",status:"available",callsToday:12,avatar:null},{id:2,name:"Bob Smith",extension:"102",status:"busy",callsToday:8,avatar:null},{id:3,name:"Carol Davis",extension:"103",status:"available",callsToday:15,avatar:null},{id:4,name:"David Wilson",extension:"104",status:"away",callsToday:5,avatar:null}]),me=i([{id:1,name:"Sales Queue",waitingCount:3},{id:2,name:"Support Queue",waitingCount:7},{id:3,name:"Billing Queue",waitingCount:2}]),fe=i([{title:"Waiting",value:12,color:"warning",icon:"mdi-clock-outline"},{title:"In Progress",value:8,color:"info",icon:"mdi-phone-in-talk"},{title:"Completed",value:45,color:"success",icon:"mdi-check-circle"},{title:"Avg Wait",value:"2:30",color:"primary",icon:"mdi-timer-outline"}]),Q=[{title:"Caller",value:"caller",sortable:!1},{title:"Phone",value:"phone",sortable:!1},{title:"Wait Time",value:"waitTime",sortable:!0},{title:"Priority",value:"priority",sortable:!0},{title:"Queue",value:"queue",sortable:!1}],pe=i([{caller:"John Doe",phone:"+1234567890",waitTime:45,priority:3,queue:"Sales"},{caller:"Jane Smith",phone:"+1234567891",waitTime:120,priority:5,queue:"Support"},{caller:"Mike Wilson",phone:"+1234567892",waitTime:30,priority:2,queue:"Billing"}]),ne=i([{id:1,name:"Alice Johnson",status:"available",currentCall:null},{id:2,name:"Bob Smith",status:"busy",currentCall:!0,callDuration:"05:23"},{id:3,name:"Carol Davis",status:"available",currentCall:null},{id:4,name:"David Wilson",status:"away",currentCall:null}]),_e=T(()=>W.value?G.value.filter(o=>o.name.toLowerCase().includes(W.value.toLowerCase())||o.extension.includes(W.value)):G.value),ge=T(()=>G.value.filter(o=>o.status==="available")),x=()=>{y("update:modelValue",null),oe()},oe=()=>{_.value={phone:"",contact:null,callerId:"",recordCall:!0,autoAnswer:!1},m.value={phone:"",agent:null,queue:null,warmTransfer:!0},A.value=null,h.value=!1,F.value="number"},Ce=o=>{_.value.phone+=o},we=o=>{o&&(_.value.phone=o)},se=async()=>{if(_.value.phone){U.value=!0;try{await C.callClient(_.value.phone),p.success(`Calling ${_.value.phone}`),ee.value=!0,y("call-made",_.value)}finally{U.value=!1}}},be=async()=>{try{await C.handleMute(),p.success("Call muted")}catch{p.error("Failed to mute call")}},ye=async()=>{try{Z.afClient&&await Z.afClient.hangup()}catch(o){console.error("Failed to hangup call:",o)}},he=o=>{A.value=o},ae=async()=>{if(A.value){U.value=!0;try{await C.makeCall(A.value.extension),p.success(`Calling ${A.value.name}`),y("agent-called",A.value),x()}catch{p.error("Failed to call agent")}finally{U.value=!1}}},E=async()=>{M.value=!0;try{let o="";if(F.value==="number")o=m.value.phone;else if(F.value==="agent"){const e=G.value.find(c=>c.id===m.value.agent);o=(e==null?void 0:e.extension)||""}else F.value==="queue"&&(o=`queue:${m.value.queue}`);await C.transferCall(o),p.success(`Call transferred to ${o}`),y("call-transferred",{target:o,warmTransfer:m.value.warmTransfer}),x()}catch{p.error("Failed to transfer call")}finally{M.value=!1}},xe=async()=>{D.value=!0;try{await C.fetchQueueStatus(),p.success("Queue data refreshed")}catch{p.error("Failed to refresh queue data")}finally{D.value=!1}},K=o=>o.split(" ").map(e=>e[0]).join("").toUpperCase(),X=o=>({available:"success",busy:"error",away:"warning",offline:"grey"})[o]||"grey",Ve=o=>o<30?"success":o<120?"warning":"error",De=o=>{const e=Math.floor(o/60),c=o%60;return`${e}:${c.toString().padStart(2,"0")}`};return Xe(()=>{C.fetchAgentList(),C.fetchQueueStatus(),b.fetchContacts()}),(o,e)=>{const c=u("v-icon"),$=u("v-spacer"),g=u("v-btn"),R=u("v-card-title"),n=u("v-text-field"),v=u("v-avatar"),P=u("v-list-item-title"),O=u("v-list-item-subtitle"),q=u("v-list-item"),Me=u("v-autocomplete"),We=u("v-expansion-panel-title"),ke=u("v-select"),Se=u("v-checkbox"),Pe=u("v-expansion-panel-text"),Oe=u("v-expansion-panel"),je=u("v-expansion-panels"),Be=u("v-form"),J=u("v-card-text"),ie=u("v-card-actions"),H=u("v-card"),ue=u("v-dialog"),Le=u("v-img"),Te=u("v-chip"),Ee=u("v-list"),Fe=u("v-col"),$e=u("v-row"),Re=u("v-rating"),Je=u("v-data-table"),Ae=u("v-tab"),He=u("v-tabs"),qe=u("v-window-item"),Ge=u("v-window");return S(),B("div",null,[l(ue,{modelValue:N.value,"onUpdate:modelValue":e[6]||(e[6]=t=>N.value=t),"max-width":"500",persistent:"",transition:"dialog-bottom-transition"},{default:a(()=>[l(H,{class:"modern-card"},{default:a(()=>[l(R,{class:"gradient-header"},{default:a(()=>[l(c,{left:"",color:"white",size:"24"},{default:a(()=>e[17]||(e[17]=[s("mdi-phone-plus")])),_:1,__:[17]}),e[19]||(e[19]=d("span",{class:"text-h5 font-weight-bold"},"Make New Call",-1)),l($),l(g,{icon:"",onClick:x,color:"white"},{default:a(()=>[l(c,null,{default:a(()=>e[18]||(e[18]=[s("mdi-close")])),_:1,__:[18]})]),_:1})]),_:1,__:[19]}),l(J,{class:"pa-6"},{default:a(()=>[l(Be,{ref:"newCallFormRef",onSubmit:Ye(se,["prevent"])},{default:a(()=>[d("div",al,[l(n,{modelValue:_.value.phone,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value.phone=t),label:"Phone Number",placeholder:"+1 (555) 123-4567",variant:"outlined","prepend-inner-icon":"mdi-phone",rules:le,class:"modern-input","hide-details":"auto"},null,8,["modelValue"])]),d("div",tl,[l(Me,{modelValue:_.value.contact,"onUpdate:modelValue":[e[1]||(e[1]=t=>_.value.contact=t),we],items:te.value,"item-title":"name","item-value":"phone",label:"Or select from contacts",variant:"outlined","prepend-inner-icon":"mdi-account-search",clearable:"",class:"modern-input"},{item:a(({props:t,item:k})=>[l(q,Ie(Ue(t)),{prepend:a(()=>[l(v,{size:"40",color:"primary"},{default:a(()=>[d("span",nl,f(K(k.raw.name)),1)]),_:2},1024)]),default:a(()=>[l(P,null,{default:a(()=>[s(f(k.raw.name),1)]),_:2},1024),l(O,null,{default:a(()=>[s(f(k.raw.phone),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),ee.value?(S(),B("div",ol,[l(g,{icon:"",color:"grey",variant:"outlined",class:"mx-2",onClick:be},{default:a(()=>[l(c,null,{default:a(()=>e[20]||(e[20]=[s("mdi-microphone-off")])),_:1,__:[20]})]),_:1}),l(g,{icon:"",color:"red",variant:"outlined",class:"mx-2",onClick:ye},{default:a(()=>[l(c,null,{default:a(()=>e[21]||(e[21]=[s("mdi-phone-hangup")])),_:1,__:[21]})]),_:1})])):ze("",!0),l(je,{class:"mb-4",variant:"accordion"},{default:a(()=>[l(Oe,null,{default:a(()=>[l(We,null,{default:a(()=>[l(c,{left:""},{default:a(()=>e[22]||(e[22]=[s("mdi-cog")])),_:1,__:[22]}),e[23]||(e[23]=s(" Advanced Options "))]),_:1,__:[23]}),l(Pe,null,{default:a(()=>[d("div",sl,[l(ke,{modelValue:_.value.callerId,"onUpdate:modelValue":e[2]||(e[2]=t=>_.value.callerId=t),items:ve.value,label:"Caller ID",variant:"outlined","prepend-inner-icon":"mdi-card-account-phone"},null,8,["modelValue","items"]),l(Se,{modelValue:_.value.recordCall,"onUpdate:modelValue":e[3]||(e[3]=t=>_.value.recordCall=t),label:"Record this call",color:"primary"},null,8,["modelValue"]),l(Se,{modelValue:_.value.autoAnswer,"onUpdate:modelValue":e[4]||(e[4]=t=>_.value.autoAnswer=t),label:"Auto-answer when connected",color:"primary"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),h.value?(S(),B("div",il,[d("div",ul,[(S(),B(re,null,de(r,t=>l(g,{key:t.digit,onClick:k=>Ce(t.digit),class:"dialpad-btn",size:"large",variant:"outlined"},{default:a(()=>[d("div",rl,[d("div",dl,f(t.digit),1),d("div",cl,f(t.letters),1)])]),_:2},1032,["onClick"])),64))])])):ze("",!0),l(g,{onClick:e[5]||(e[5]=t=>h.value=!h.value),variant:"text",color:"primary",class:"mb-4"},{default:a(()=>[l(c,{left:""},{default:a(()=>[s(f(h.value?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1}),s(" "+f(h.value?"Hide":"Show")+" Dialpad ",1)]),_:1})]),_:1},512)]),_:1}),l(ie,{class:"pa-6 pt-0"},{default:a(()=>[l(g,{color:"grey",variant:"outlined",onClick:x,class:"mr-3"},{default:a(()=>e[24]||(e[24]=[s(" Cancel ")])),_:1,__:[24]}),l($),l(g,{color:"primary",variant:"elevated",onClick:se,disabled:!_.value.phone,loading:U.value,size:"large",class:"px-8"},{default:a(()=>[l(c,{left:""},{default:a(()=>e[25]||(e[25]=[s("mdi-phone")])),_:1,__:[25]}),e[26]||(e[26]=s(" Call Now "))]),_:1,__:[26]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ue,{modelValue:I.value,"onUpdate:modelValue":e[8]||(e[8]=t=>I.value=t),"max-width":"600",transition:"dialog-bottom-transition"},{default:a(()=>[l(H,{class:"modern-card"},{default:a(()=>[l(R,{class:"gradient-header"},{default:a(()=>[l(c,{left:"",color:"white",size:"24"},{default:a(()=>e[27]||(e[27]=[s("mdi-account-voice")])),_:1,__:[27]}),e[29]||(e[29]=d("span",{class:"text-h5 font-weight-bold"},"Call Agent",-1)),l($),l(g,{icon:"",onClick:x,color:"white"},{default:a(()=>[l(c,null,{default:a(()=>e[28]||(e[28]=[s("mdi-close")])),_:1,__:[28]})]),_:1})]),_:1,__:[29]}),l(J,{class:"pa-6"},{default:a(()=>[d("div",vl,[l(n,{modelValue:W.value,"onUpdate:modelValue":e[7]||(e[7]=t=>W.value=t),label:"Search agents...",variant:"outlined","prepend-inner-icon":"mdi-magnify",clearable:"",class:"mb-4"},null,8,["modelValue"])]),l(Ee,{class:"agent-list"},{default:a(()=>[(S(!0),B(re,null,de(_e.value,t=>{var k;return S(),ce(q,{key:t.id,onClick:Tl=>he(t),class:Qe([{"selected-agent":((k=A.value)==null?void 0:k.id)===t.id},"agent-item mb-2"])},{prepend:a(()=>[l(v,{size:"48",color:X(t.status)},{default:a(()=>[t.avatar?(S(),ce(Le,{key:0,src:t.avatar},null,8,["src"])):(S(),B("span",ml,f(K(t.name)),1))]),_:2},1032,["color"])]),append:a(()=>[d("div",pl,[e[30]||(e[30]=d("div",{class:"text-caption"},"Calls Today",-1)),d("div",_l,f(t.callsToday),1)])]),default:a(()=>[l(P,{class:"font-weight-medium"},{default:a(()=>[s(f(t.name),1)]),_:2},1024),l(O,null,{default:a(()=>[d("div",fl,[l(Te,{color:X(t.status),size:"x-small",class:"mr-2"},{default:a(()=>[s(f(t.status),1)]),_:2},1032,["color"]),d("span",null,"Ext: "+f(t.extension),1)])]),_:2},1024)]),_:2},1032,["onClick","class"])}),128))]),_:1})]),_:1}),l(ie,{class:"pa-6 pt-0"},{default:a(()=>[l(g,{color:"grey",variant:"outlined",onClick:x},{default:a(()=>e[31]||(e[31]=[s(" Cancel ")])),_:1,__:[31]}),l($),l(g,{color:"primary",variant:"elevated",onClick:ae,disabled:!A.value,loading:U.value,size:"large",class:"px-8"},{default:a(()=>[l(c,{left:""},{default:a(()=>e[32]||(e[32]=[s("mdi-phone")])),_:1,__:[32]}),e[33]||(e[33]=s(" Call Agent "))]),_:1,__:[33]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ue,{modelValue:V.value,"onUpdate:modelValue":e[9]||(e[9]=t=>V.value=t),"max-width":"800",transition:"dialog-bottom-transition"},{default:a(()=>[l(H,{class:"modern-card"},{default:a(()=>[l(R,{class:"gradient-header"},{default:a(()=>[l(c,{left:"",color:"white",size:"24"},{default:a(()=>e[34]||(e[34]=[s("mdi-account-multiple-check")])),_:1,__:[34]}),e[36]||(e[36]=d("span",{class:"text-h5 font-weight-bold"},"Queue Dashboard",-1)),l($),l(g,{icon:"",onClick:x,color:"white"},{default:a(()=>[l(c,null,{default:a(()=>e[35]||(e[35]=[s("mdi-close")])),_:1,__:[35]})]),_:1})]),_:1,__:[36]}),l(J,{class:"pa-6"},{default:a(()=>[l($e,{class:"mb-6"},{default:a(()=>[(S(!0),B(re,null,de(fe.value,t=>(S(),ce(Fe,{cols:"12",md:"3",key:t.title},{default:a(()=>[l(H,{class:"stat-card",color:t.color,variant:"tonal"},{default:a(()=>[l(J,{class:"text-center pa-4"},{default:a(()=>[l(c,{color:t.color,size:"40",class:"mb-2"},{default:a(()=>[s(f(t.icon),1)]),_:2},1032,["color"]),d("div",{class:Qe(["text-h4 font-weight-bold",`${t.color}--text`])},f(t.value),3),d("div",gl,f(t.title),1)]),_:2},1024)]),_:2},1032,["color"])]),_:2},1024))),128))]),_:1}),l(H,{class:"queue-card mb-4",variant:"outlined"},{default:a(()=>[l(R,{class:"d-flex align-center"},{default:a(()=>[l(c,{left:"",color:"primary"},{default:a(()=>e[37]||(e[37]=[s("mdi-clock-outline")])),_:1,__:[37]}),e[40]||(e[40]=s(" Current Queue ")),l($),l(Te,{color:"primary",size:"small"},{default:a(()=>[e[39]||(e[39]=s(" Live Updates ")),l(c,{right:"",size:"16",class:"ml-1 animate-pulse"},{default:a(()=>e[38]||(e[38]=[s("mdi-circle")])),_:1,__:[38]})]),_:1,__:[39]})]),_:1,__:[40]}),l(J,null,{default:a(()=>[l(Je,{headers:Q,items:pe.value,"items-per-page":5,class:"queue-table",density:"comfortable"},{"item.waitTime":a(({item:t})=>[l(Te,{color:Ve(t.waitTime),size:"small"},{default:a(()=>[s(f(De(t.waitTime)),1)]),_:2},1032,["color"])]),"item.priority":a(({item:t})=>[l(Re,{"model-value":t.priority,color:"orange",size:"small",readonly:"",density:"compact"},null,8,["model-value"])]),_:1},8,["items"])]),_:1})]),_:1}),l(H,{variant:"outlined"},{default:a(()=>[l(R,null,{default:a(()=>[l(c,{left:"",color:"success"},{default:a(()=>e[41]||(e[41]=[s("mdi-account-group")])),_:1,__:[41]}),e[42]||(e[42]=s(" Agent Status "))]),_:1,__:[42]}),l(J,null,{default:a(()=>[l($e,null,{default:a(()=>[(S(!0),B(re,null,de(ne.value,t=>(S(),ce(Fe,{cols:"12",sm:"6",md:"4",key:t.id},{default:a(()=>[l(H,{class:"agent-status-card",variant:"outlined"},{default:a(()=>[l(J,{class:"pa-3"},{default:a(()=>[d("div",Cl,[l(v,{size:"32",color:X(t.status),class:"mr-3"},{default:a(()=>[d("span",wl,f(K(t.name)),1)]),_:2},1032,["color"]),d("div",bl,[d("div",yl,f(t.name),1),d("div",hl,f(t.status),1)]),t.currentCall?(S(),B("div",xl,[e[43]||(e[43]=d("div",{class:"text-caption"},"On Call",-1)),d("div",Vl,f(t.callDuration),1)])):ze("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),l(ie,{class:"pa-6 pt-0"},{default:a(()=>[l(g,{color:"primary",variant:"outlined",onClick:xe,loading:D.value},{default:a(()=>[l(c,{left:""},{default:a(()=>e[44]||(e[44]=[s("mdi-refresh")])),_:1,__:[44]}),e[45]||(e[45]=s(" Refresh "))]),_:1,__:[45]},8,["loading"]),l($),l(g,{color:"primary",variant:"elevated",onClick:x},{default:a(()=>e[46]||(e[46]=[s(" Close ")])),_:1,__:[46]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ue,{modelValue:w.value,"onUpdate:modelValue":e[16]||(e[16]=t=>w.value=t),"max-width":"500",transition:"dialog-bottom-transition"},{default:a(()=>[l(H,{class:"modern-card"},{default:a(()=>[l(R,{class:"gradient-header"},{default:a(()=>[l(c,{left:"",color:"white",size:"24"},{default:a(()=>e[47]||(e[47]=[s("mdi-phone-forward")])),_:1,__:[47]}),e[49]||(e[49]=d("span",{class:"text-h5 font-weight-bold"},"Transfer Call",-1)),l($),l(g,{icon:"",onClick:x,color:"white"},{default:a(()=>[l(c,null,{default:a(()=>e[48]||(e[48]=[s("mdi-close")])),_:1,__:[48]})]),_:1})]),_:1,__:[49]}),l(J,{class:"pa-6"},{default:a(()=>[l(He,{modelValue:F.value,"onUpdate:modelValue":e[10]||(e[10]=t=>F.value=t),class:"mb-4"},{default:a(()=>[l(Ae,{value:"number"},{default:a(()=>e[50]||(e[50]=[s("Phone Number")])),_:1,__:[50]}),l(Ae,{value:"agent"},{default:a(()=>e[51]||(e[51]=[s("Agent")])),_:1,__:[51]}),l(Ae,{value:"queue"},{default:a(()=>e[52]||(e[52]=[s("Queue")])),_:1,__:[52]})]),_:1},8,["modelValue"]),l(Ge,{modelValue:F.value,"onUpdate:modelValue":e[14]||(e[14]=t=>F.value=t)},{default:a(()=>[l(qe,{value:"number"},{default:a(()=>[l(n,{modelValue:m.value.phone,"onUpdate:modelValue":e[11]||(e[11]=t=>m.value.phone=t),label:"Transfer to Phone Number",variant:"outlined","prepend-inner-icon":"mdi-phone",rules:le},null,8,["modelValue"])]),_:1}),l(qe,{value:"agent"},{default:a(()=>[l(ke,{modelValue:m.value.agent,"onUpdate:modelValue":e[12]||(e[12]=t=>m.value.agent=t),items:ge.value,"item-title":"name","item-value":"id",label:"Select Agent",variant:"outlined","prepend-inner-icon":"mdi-account"},{item:a(({props:t,item:k})=>[l(q,Ie(Ue(t)),{prepend:a(()=>[l(v,{size:"32",color:X(k.raw.status)},{default:a(()=>[d("span",Dl,f(K(k.raw.name)),1)]),_:2},1032,["color"])]),default:a(()=>[l(P,null,{default:a(()=>[s(f(k.raw.name),1)]),_:2},1024),l(O,null,{default:a(()=>[s(f(k.raw.status)+" - Ext: "+f(k.raw.extension),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1}),l(qe,{value:"queue"},{default:a(()=>[l(ke,{modelValue:m.value.queue,"onUpdate:modelValue":e[13]||(e[13]=t=>m.value.queue=t),items:me.value,"item-title":"name","item-value":"id",label:"Select Queue",variant:"outlined","prepend-inner-icon":"mdi-account-multiple"},null,8,["modelValue","items"])]),_:1})]),_:1},8,["modelValue"]),l(Se,{modelValue:m.value.warmTransfer,"onUpdate:modelValue":e[15]||(e[15]=t=>m.value.warmTransfer=t),label:"Warm transfer (stay on call until connected)",color:"primary",class:"mt-4"},null,8,["modelValue"])]),_:1}),l(ie,{class:"pa-6 pt-0"},{default:a(()=>[l(g,{color:"grey",variant:"outlined",onClick:x},{default:a(()=>e[53]||(e[53]=[s(" Cancel ")])),_:1,__:[53]}),l($),l(g,{color:"primary",variant:"elevated",onClick:E,loading:M.value,size:"large",class:"px-8"},{default:a(()=>[l(c,{left:""},{default:a(()=>e[54]||(e[54]=[s("mdi-phone-forward")])),_:1,__:[54]}),e[55]||(e[55]=s(" Transfer "))]),_:1,__:[55]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Sl=el(kl,[["__scopeId","data-v-6a4318a1"]]),Il=Object.freeze(Object.defineProperty({__proto__:null,default:Sl},Symbol.toStringTag,{value:"Module"}));export{Sl as C,Il as a,ll as u};
