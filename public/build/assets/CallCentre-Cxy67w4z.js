import{_ as Ae}from"./AppLayout-BcSpAlhw.js";import{E as Re,i as Te,G as Ve,j as ee,r as S,s as Le,k as Me,l as d,c as Qe,o as I,w as t,a as o,d as L,e as M,b as l,f as n,t as i,u as k,m as z}from"./app-Dep2fYs0.js";import{u as Ee,C as Oe}from"./CallDialogs-DqFFytBA.js";import{n as f}from"./toast-B6ads83p.js";import{u as Fe}from"./webrtc-vhMLuIzp.js";import{_ as Ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IncomingCallDialog-BlZQumbI.js";/* empty css                                                                           */import"./africastalking-CS8bcHTl.js";const Ke=Re("agent",{state:()=>({callHistory:[],loading:!1,error:null}),actions:{async fetchCallHistory(y={}){this.loading=!0,this.error=null;try{let g;y.sortBy&&y.sortBy.length>0&&(g=y.sortBy.map(c=>(c.desc||c.order==="desc"?"-":"")+c.key).join(","));const w={page:y.page||1,per_page:y.itemsPerPage||15,sort_by:g||"created_at",sort_desc:g?void 0:!0,search:y.search||void 0};Object.keys(w).forEach(c=>w[c]===void 0&&delete w[c]),console.log("Fetching with params:",w);const _=(await Te.get("/api/v1/call-history",{params:w})).data.data;return this.callHistory=_.data||[],this.totalItems=_.total||0,this.currentPage=_.current_page||1,{total:_.total,data:_.data,currentPage:_.current_page,perPage:_.per_page,lastPage:_.last_page}}catch(g){throw console.error("Fetch call history error:",g),this.error=g.message,this.callHistory=[],this.totalItems=0,g}finally{this.loading=!1}},clearCallHistory(){this.callHistory=[],this.totalItems=0,this.currentPage=1}}}),We={class:"p-4"},qe={class:"d-flex align-center"},Je={class:"white--text text-h5"},Xe={class:"flex-grow-1"},Ye={class:"d-flex align-center"},Ze={class:"text-h6 mb-0"},et={class:"text-body-2 mb-0 grey--text"},tt={class:"d-flex align-center"},lt={class:"ml-2"},ot={class:"text-h6"},st={class:"d-flex align-center"},nt={class:"ml-2"},at={class:"text-h6"},rt={class:"d-flex align-center"},it={class:"ml-2"},dt={class:"text-h6"},ut={class:"d-flex align-center"},ct={class:"ml-2"},mt={class:"text-h6"},_t={key:0},pt={class:"text-right"},gt={class:"text-right"},vt={class:"text-right"},ft={class:"call-history-container"},yt={class:"table-controls mb-4"},Ct={class:"controls-left"},wt={class:"controls-right"},bt={class:"date-cell"},ht={class:"date-primary"},xt={class:"date-secondary"},St={class:"phone-cell"},kt={class:"phone-number"},Dt={class:"phone-cell"},Pt={class:"phone-number"},Nt={class:"service-cell"},$t={class:"action-buttons"},Bt={class:"no-data-container"},jt={class:"loading-container"},Ut={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},It={class:"bg-white w-full max-w-2xl rounded-lg shadow-lg overflow-hidden"},zt={class:"p-4 space-y-3"},Ht={key:0},At=["src"],Rt={key:1},Tt={class:"mt-2 p-2 border rounded bg-gray-50"},Vt={__name:"CallCentre",props:{search:{type:String,default:""}},emits:["refresh"],setup(y,{emit:g}){const w=Ve(),O=ee(()=>{var e,r;return(r=(e=w.props.auth)==null?void 0:e.user)==null?void 0:r.id}),_=Fe(),c=y,F=g,H=Ke(),C=Ee(),p=S({summary_call_missed:0,summary_call_completed:0,summary_outbound_call_completed:0,summary_inbound_call_completed:0,summary_rejected_incoming_calls:0,summary_rejected_outgoing_calls:0,summary_user_busy_outgoing_calls:0}),D=S(1),b=S(15),j=S([]),Q=S(0),te=[10,15,25,50,100],E=S(!1),u=S({}),le=()=>{axios.get(`/api/v1/agent-stats/${O.value}`).then(s=>{p.value=s.data,console.log("Agent stats:",p.value)}).catch(s=>{console.error("Error fetching agent stats:",s)})},oe=[{title:"Call Start",value:"callStartTime",width:"140px"},{title:"Caller",value:"callerNumber",width:"130px"},{title:"Caller Carrier",value:"callerCarrierName",width:"120px"},{title:"Caller Country",value:"callerCountryCode",width:"100px"},{title:"Client Dialed",value:"clientDialedNumber",width:"130px"},{title:"Duration",value:"durationInSeconds",width:"100px"},{title:"Currency",value:"currencyCode",width:"80px"},{title:"Amount",value:"amount",width:"90px"},{title:"Status",value:"status",width:"100px"},{title:"Bridge Hangup",value:"lastBridgeHangupCause",width:"120px"},{title:"Actions",value:"actions",sortable:!1,width:"200px"}],A=async s=>{try{const e=await H.fetchCallHistory({page:s.page,itemsPerPage:s.itemsPerPage,sortBy:s.sortBy,search:c.search});Q.value=e.total}catch(e){console.error("Failed to load call history:",e)}},se=()=>{A({page:D.value,itemsPerPage:b.value,sortBy:j.value,search:c.search}),F("refresh")},ne=s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}),ae=s=>new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),G=s=>s?s.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"):"N/A",re=s=>{if(!s||s===0)return"0s";const e=Math.floor(s/3600),r=Math.floor(s%3600/60),v=s%60;return e>0?`${e}h ${r}m ${v}s`:r>0?`${r}m ${v}s`:`${v}s`},ie=s=>!s||s===0?"error":s<30?"warning":s<300?"success":"primary",de=s=>({completed:"success",answered:"success",failed:"error",busy:"warning","no-answer":"warning",cancelled:"error"})[s==null?void 0:s.toLowerCase()]||"grey",ue=s=>({completed:"mdi-check-circle",answered:"mdi-phone-check",failed:"mdi-phone-cancel",busy:"mdi-phone-busy","no-answer":"mdi-phone-missed",cancelled:"mdi-phone-hangup"})[s==null?void 0:s.toLowerCase()]||"mdi-help-circle",ce=s=>({voice:"primary",sms:"success",data:"info"})[s==null?void 0:s.toLowerCase()]||"grey",me=s=>({voice:"mdi-phone",sms:"mdi-message",data:"mdi-database"})[s==null?void 0:s.toLowerCase()]||"mdi-cog",_e=s=>({normal_clearing:"success",user_busy:"warning",no_answer:"warning",call_rejected:"error",network_out_of_order:"error"})[s==null?void 0:s.toLowerCase()]||"grey",pe=s=>({normal_clearing:"Call ended normally",user_busy:"User was busy",no_answer:"No answer from user",call_rejected:"Call was rejected",network_out_of_order:"Network error"})[s==null?void 0:s.toLowerCase()]||"Unknown cause",ge=s=>({active:"success",inactive:"grey",terminated:"error"})[s==null?void 0:s.toLowerCase()]||"grey",ve=s=>{s.recordingUrl?window.open(s.recordingUrl,"_blank"):f.error("Recording not available")},fe=s=>{if(s.recordingUrl){const e=document.createElement("a");e.href=s.recordingUrl,e.download=`call-recording-${s.id}.mp3`,e.click()}else f.error("Recording not available")},ye=s=>{const e=s.callerNumber||s.destinationNumber;e?(callCenterStore.makeCall(e),f.info(`Calling back ${e}`)):f.error("Phone number not available")},Ce=s=>{console.log("View details for:",s),u.value=s,E.value=!0},K=()=>{E.value=!1},we=s=>{console.log("Add to contacts:",s),f.success("Added to contacts")},be=s=>{console.log("Send SMS to:",s),f.info("SMS composer opened")},he=()=>{console.debug("you clicked me"),typeof C.openNewCallDialog=="function"?C.openNewCallDialog():f.error("New Call dialog function not implemented in callStore")},xe=()=>{typeof C.openCallAgentDialog=="function"?C.openCallAgentDialog():f.error("Call Agent dialog function not implemented in callStore")},Se=()=>{typeof C.openQueueDialog=="function"?C.openQueueDialog():f.error("Queue dialog function not implemented in callStore")},ke=ee(()=>{var e,r,v;return(typeof $page<"u"&&((v=(r=(e=$page.props)==null?void 0:e.auth)==null?void 0:r.user)==null?void 0:v.name)||"").split(" ").map(P=>P[0]).join("").toUpperCase()});return Le(()=>c.search,()=>{D.value=1,A({page:D.value,itemsPerPage:b.value,sortBy:j.value,search:c.search})}),Me(()=>{A({page:D.value,itemsPerPage:b.value,sortBy:j.value,search:c.search}),le()}),(s,e)=>{const r=d("v-icon"),v=d("v-card-title"),P=d("v-list-item-icon"),h=d("v-list-item-title"),R=d("v-list-item-content"),T=d("v-list-item-action"),x=d("v-list-item"),W=d("v-list"),q=d("v-card-text"),N=d("v-card"),$=d("v-col"),De=d("v-avatar"),Pe=d("v-spacer"),U=d("v-chip"),J=d("v-divider"),X=d("v-row"),B=d("v-btn"),Ne=d("v-simple-table"),$e=d("v-expand-transition"),Be=d("v-container"),je=d("v-select"),V=d("v-tooltip"),Ue=d("v-badge"),Ie=d("v-menu"),ze=d("v-progress-circular"),He=d("v-data-table-server");return I(),Qe(Ae,{title:"Dashboard"},{default:t(()=>{var Y;return[o("div",We,[l(Be,{fluid:"",class:"pa-2"},{default:t(()=>[l(X,null,{default:t(()=>[l($,{cols:"12",md:"6"},{default:t(()=>[l(N,{elevation:"2",class:"rounded-lg"},{default:t(()=>[l(v,{class:"primary white--text d-flex align-center py-3"},{default:t(()=>[l(r,{left:"",color:"white"},{default:t(()=>e[6]||(e[6]=[n("mdi-lightning-bolt")])),_:1,__:[6]}),e[7]||(e[7]=n(" Quick Actions "))]),_:1,__:[7]}),l(q,{class:"py-4"},{default:t(()=>[l(W,{nav:"",dense:""},{default:t(()=>[l(x,{onClick:he,class:"rounded-lg mb-2 hover-elevation-2"},{default:t(()=>[l(P,null,{default:t(()=>[l(r,{color:"success"},{default:t(()=>e[8]||(e[8]=[n("mdi-phone-plus")])),_:1,__:[8]})]),_:1}),l(R,null,{default:t(()=>[l(h,null,{default:t(()=>e[9]||(e[9]=[n("Make a new Call")])),_:1,__:[9]})]),_:1}),l(T,null,{default:t(()=>[l(r,null,{default:t(()=>e[10]||(e[10]=[n("mdi-chevron-right")])),_:1,__:[10]})]),_:1})]),_:1}),l(x,{onClick:xe,class:"rounded-lg mb-2 hover-elevation-2"},{default:t(()=>[l(P,null,{default:t(()=>[l(r,{color:"info"},{default:t(()=>e[11]||(e[11]=[n("mdi-account-voice")])),_:1,__:[11]})]),_:1}),l(R,null,{default:t(()=>[l(h,null,{default:t(()=>e[12]||(e[12]=[n("Call an agent")])),_:1,__:[12]})]),_:1}),l(T,null,{default:t(()=>[l(r,null,{default:t(()=>e[13]||(e[13]=[n("mdi-chevron-right")])),_:1,__:[13]})]),_:1})]),_:1}),l(x,{class:"rounded-lg mb-2 hover-elevation-2"},{default:t(()=>[l(P,null,{default:t(()=>[l(r,{color:"error"},{default:t(()=>e[14]||(e[14]=[n("mdi-phone-missed")])),_:1,__:[14]})]),_:1}),l(R,null,{default:t(()=>[l(h,null,{default:t(()=>[n("Missed "+i(p.value.summary_call_missed),1)]),_:1})]),_:1}),l(T)]),_:1}),l(x,{onClick:Se,class:"rounded-lg hover-elevation-2"},{default:t(()=>[l(P,null,{default:t(()=>[l(r,{color:"warning"},{default:t(()=>e[15]||(e[15]=[n("mdi-account-multiple-check")])),_:1,__:[15]})]),_:1}),l(R,null,{default:t(()=>[l(h,null,{default:t(()=>e[16]||(e[16]=[n("Check Queue")])),_:1,__:[16]})]),_:1}),l(T,null,{default:t(()=>[l(r,null,{default:t(()=>e[17]||(e[17]=[n("mdi-chevron-right")])),_:1,__:[17]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l($,{cols:"12",md:"6"},{default:t(()=>[l(N,{elevation:"2",class:"rounded-lg"},{default:t(()=>[l(v,{class:"primary white--text d-flex align-center py-3"},{default:t(()=>[l(r,{left:"",color:"white"},{default:t(()=>e[18]||(e[18]=[n("mdi-account-details")])),_:1,__:[18]}),e[19]||(e[19]=n(" Agent Dashboard "))]),_:1,__:[19]}),l(q,{class:"py-4"},{default:t(()=>[o("div",qe,[l(De,{size:"60",color:"primary",class:"mr-4"},{default:t(()=>[o("span",Je,i(ke.value),1)]),_:1}),o("div",Xe,[o("div",Ye,[o("div",null,[o("p",Ze,i(s.$page.props.auth.user.name),1),o("p",et,[l(r,{small:"",class:"mr-1"},{default:t(()=>e[20]||(e[20]=[n("mdi-email")])),_:1,__:[20]}),n(" "+i(s.$page.props.auth.user.email),1)])]),l(Pe),l(U,{color:k(_).connectionStatusColor,small:"",class:"white--text px-2"},{default:t(()=>[l(r,{left:"",small:""},{default:t(()=>e[21]||(e[21]=[n("mdi-circle")])),_:1,__:[21]}),n(" "+i(k(_).connectionStatusText),1)]),_:1},8,["color"])])])]),l(J,{class:"my-4"}),l(X,{class:"mt-2"},{default:t(()=>[l($,{cols:"12",sm:"6"},{default:t(()=>[l(N,{class:"rounded-lg pa-3 mb-3",outlined:""},{default:t(()=>[o("div",tt,[l(r,{color:"success",left:""},{default:t(()=>e[22]||(e[22]=[n("mdi-phone-check")])),_:1,__:[22]}),o("div",lt,[e[23]||(e[23]=o("div",{class:"text-caption grey--text"},"Connected",-1)),o("div",ot,i(p.value.summary_call_completed),1)])])]),_:1})]),_:1}),l($,{cols:"12",sm:"6"},{default:t(()=>[l(N,{class:"rounded-lg pa-3 mb-3",outlined:""},{default:t(()=>[o("div",st,[l(r,{color:"primary",left:""},{default:t(()=>e[24]||(e[24]=[n("mdi-phone-outgoing")])),_:1,__:[24]}),o("div",nt,[e[25]||(e[25]=o("div",{class:"text-caption grey--text"},"Outbound",-1)),o("div",at,i(p.value.summary_outbound_call_completed),1)])])]),_:1})]),_:1}),l($,{cols:"12",sm:"6"},{default:t(()=>[l(N,{class:"rounded-lg pa-3 mb-3",outlined:""},{default:t(()=>[o("div",rt,[l(r,{color:"info",left:""},{default:t(()=>e[26]||(e[26]=[n("mdi-phone-incoming")])),_:1,__:[26]}),o("div",it,[e[27]||(e[27]=o("div",{class:"text-caption grey--text"},"Incoming",-1)),o("div",dt,i(p.value.summary_inbound_call_completed),1)])])]),_:1})]),_:1}),l($,{cols:"12",sm:"6"},{default:t(()=>[l(N,{class:"rounded-lg pa-3",outlined:""},{default:t(()=>[o("div",ut,[l(r,{color:"error",left:""},{default:t(()=>e[28]||(e[28]=[n("mdi-phone-cancel")])),_:1,__:[28]}),o("div",ct,[e[29]||(e[29]=o("div",{class:"text-caption grey--text"},"Rejected",-1)),o("div",mt,i(p.value.summary_rejected_incoming_calls+p.value.summary_rejected_outgoing_calls),1)])])]),_:1})]),_:1})]),_:1}),l(B,{color:"primary",text:"",class:"mt-2",onClick:e[0]||(e[0]=a=>s.showCallDetails=!s.showCallDetails)},{default:t(()=>[n(i(s.showCallDetails?"Hide":"Show")+" detailed stats ",1),l(r,{right:""},{default:t(()=>[n(i(s.showCallDetails?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1})]),_:1}),l($e,null,{default:t(()=>[s.showCallDetails?(I(),L("div",_t,[l(J,{class:"my-3"}),l(Ne,{dense:""},{default:t(()=>[o("tbody",null,[o("tr",null,[e[30]||(e[30]=o("td",null,"Incoming Rejected",-1)),o("td",pt,i(p.value.summary_rejected_incoming_calls),1)]),o("tr",null,[e[31]||(e[31]=o("td",null,"Outgoing Rejected",-1)),o("td",gt,i(p.value.summary_rejected_outgoing_calls),1)]),o("tr",null,[e[32]||(e[32]=o("td",null,"Outgoing User Busy",-1)),o("td",vt,i(p.value.summary_user_busy_outgoing_calls),1)])])]),_:1})])):M("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o("div",ft,[o("div",yt,[o("div",Ct,[l(B,{color:"primary",variant:"outlined",onClick:se,loading:k(H).loading,size:"small"},{default:t(()=>[l(r,{start:""},{default:t(()=>e[33]||(e[33]=[n("mdi-refresh")])),_:1,__:[33]}),e[34]||(e[34]=n(" Refresh "))]),_:1,__:[34]},8,["loading"]),l(je,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=a=>b.value=a),items:te,label:"Rows per page",variant:"outlined",density:"compact",style:{"max-width":"120px"},class:"ml-3"},null,8,["modelValue"])]),o("div",wt,[l(U,{color:"info",variant:"outlined",size:"small"},{default:t(()=>[n(" Total: "+i(Q.value),1)]),_:1})])]),l(He,{"items-per-page":b.value,"onUpdate:itemsPerPage":e[2]||(e[2]=a=>b.value=a),page:D.value,"onUpdate:page":e[3]||(e[3]=a=>D.value=a),"sort-by":j.value,"onUpdate:sortBy":e[4]||(e[4]=a=>j.value=a),headers:oe,items:k(H).callHistory,"items-length":Q.value,loading:k(H).loading,"onUpdate:options":A},{"item.created_at":t(({item:a})=>[o("div",bt,[o("div",ht,i(ne(a.created_at)),1),o("div",xt,i(ae(a.created_at)),1)])]),"item.callerNumber":t(({item:a})=>[o("div",St,[l(r,{size:"16",color:"primary",class:"mr-2"},{default:t(()=>e[35]||(e[35]=[n("mdi-phone-outgoing")])),_:1,__:[35]}),o("span",kt,i(G(a.callerNumber)),1)])]),"item.destinationNumber":t(({item:a})=>[o("div",Dt,[l(r,{size:"16",color:"success",class:"mr-2"},{default:t(()=>e[36]||(e[36]=[n("mdi-phone-incoming")])),_:1,__:[36]}),o("span",Pt,i(G(a.destinationNumber)),1)])]),"item.durationInSeconds":t(({item:a})=>[l(U,{color:ie(Number(a.durationInSeconds)),size:"small",variant:"tonal"},{default:t(()=>[n(i(re(Number(a.durationInSeconds))),1)]),_:2},1032,["color"])]),"item.status":t(({item:a})=>[l(U,{color:de(a.status),size:"small",variant:"flat"},{default:t(()=>[l(r,{start:"",size:"12"},{default:t(()=>[n(i(ue(a.status)),1)]),_:2},1024),n(" "+i(a.status),1)]),_:2},1032,["color"])]),"item.description":t(({item:a})=>[o("div",Nt,[l(r,{color:ce(a.description),size:"16",class:"mr-2"},{default:t(()=>[n(i(me(a.description)),1)]),_:2},1032,["color"]),o("span",null,i(a.description),1)])]),"item.lastBridgeHangupCause":t(({item:a})=>[l(V,{text:pe(a.lastBridgeHangupCause)},{activator:t(({props:m})=>[l(U,z(m,{color:_e(a.lastBridgeHangupCause),size:"small",variant:"outlined"}),{default:t(()=>[n(i(a.lastBridgeHangupCause),1)]),_:2},1040,["color"])]),_:2},1032,["text"])]),"item.callSessionState":t(({item:a})=>[l(Ue,{color:ge(a.callSessionState),dot:"",inline:""},{default:t(()=>[o("span",null,i(a.callSessionState),1)]),_:2},1032,["color"])]),"item.actions":t(({item:a})=>[o("div",$t,[l(V,{text:"Play Recording"},{activator:t(({props:m})=>[l(B,z(m,{icon:"",size:"small",color:"primary",variant:"outlined",onClick:Z=>ve(a),disabled:!a.recordingUrl}),{default:t(()=>[l(r,null,{default:t(()=>e[37]||(e[37]=[n("mdi-play")])),_:1,__:[37]})]),_:2},1040,["onClick","disabled"])]),_:2},1024),l(V,{text:"Download Recording"},{activator:t(({props:m})=>[l(B,z(m,{icon:"",size:"small",color:"success",variant:"outlined",onClick:Z=>fe(a),disabled:!a.recordingUrl,class:"ml-2"}),{default:t(()=>[l(r,null,{default:t(()=>e[38]||(e[38]=[n("mdi-download")])),_:1,__:[38]})]),_:2},1040,["onClick","disabled"])]),_:2},1024),l(V,{text:"Call Back"},{activator:t(({props:m})=>[l(B,z(m,{icon:"",size:"small",color:"warning",variant:"outlined",onClick:Z=>ye(a),class:"ml-2"}),{default:t(()=>[l(r,null,{default:t(()=>e[39]||(e[39]=[n("mdi-phone-return")])),_:1,__:[39]})]),_:2},1040,["onClick"])]),_:2},1024),l(Ie,null,{activator:t(({props:m})=>[l(B,z(m,{icon:"",size:"small",variant:"text",class:"ml-2"}),{default:t(()=>[l(r,null,{default:t(()=>e[40]||(e[40]=[n("mdi-dots-vertical")])),_:1,__:[40]})]),_:2},1040)]),default:t(()=>[l(W,{density:"compact"},{default:t(()=>[l(x,{onClick:m=>Ce(a)},{prepend:t(()=>[l(r,null,{default:t(()=>e[41]||(e[41]=[n("mdi-eye")])),_:1,__:[41]})]),default:t(()=>[l(h,null,{default:t(()=>e[42]||(e[42]=[n("View Details")])),_:1,__:[42]})]),_:2},1032,["onClick"]),l(x,{onClick:m=>we(a)},{prepend:t(()=>[l(r,null,{default:t(()=>e[43]||(e[43]=[n("mdi-account-plus")])),_:1,__:[43]})]),default:t(()=>[l(h,null,{default:t(()=>e[44]||(e[44]=[n("Add to Contacts")])),_:1,__:[44]})]),_:2},1032,["onClick"]),l(x,{onClick:m=>be(a)},{prepend:t(()=>[l(r,null,{default:t(()=>e[45]||(e[45]=[n("mdi-message")])),_:1,__:[45]})]),default:t(()=>[l(h,null,{default:t(()=>e[46]||(e[46]=[n("Send SMS")])),_:1,__:[46]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]),"no-data":t(()=>[o("div",Bt,[l(r,{size:"64",color:"grey-lighten-1"},{default:t(()=>e[47]||(e[47]=[n("mdi-phone-off")])),_:1,__:[47]}),e[48]||(e[48]=o("h3",null,"No call history found",-1)),e[49]||(e[49]=o("p",null,"Call history will appear here once you start making calls.",-1))])]),loading:t(()=>[o("div",jt,[l(ze,{indeterminate:"",color:"primary",size:"48"}),e[50]||(e[50]=o("p",{class:"mt-4"},"Loading call history...",-1))])]),_:1},8,["items-per-page","page","sort-by","items","items-length","loading"])])]),E.value?(I(),L("div",Ut,[o("div",It,[o("div",{class:"flex justify-between items-center bg-gray-100 px-4 py-2"},[e[51]||(e[51]=o("h2",{class:"text-lg font-semibold"},"Call Statistics",-1)),o("button",{onClick:K,class:"text-gray-500 hover:text-black"},"âœ–")]),o("div",zt,[o("p",null,[e[52]||(e[52]=o("strong",null,"Direction:",-1)),n(" "+i(u.value.direction),1)]),o("p",null,[e[53]||(e[53]=o("strong",null,"Caller:",-1)),n(" "+i(u.value.callerNumber),1)]),o("p",null,[e[54]||(e[54]=o("strong",null,"Destination:",-1)),n(" "+i(u.value.destinationNumber),1)]),o("p",null,[e[55]||(e[55]=o("strong",null,"Duration:",-1)),n(" "+i(u.value.durationInSeconds)+" seconds",1)]),o("p",null,[e[56]||(e[56]=o("strong",null,"Status:",-1)),n(" "+i(u.value.status),1)]),o("p",null,[e[57]||(e[57]=o("strong",null,"Start Time:",-1)),n(" "+i(u.value.callStartTime),1)]),u.value.recordingUrl?(I(),L("div",Ht,[e[58]||(e[58]=o("p",{class:"font-semibold"},"Recording:",-1)),o("audio",{controls:"",src:u.value.recordingUrl,class:"w-full"},null,8,At)])):M("",!0),(Y=u.value.calltranscripts)!=null&&Y.length?(I(),L("div",Rt,[e[64]||(e[64]=o("h3",{class:"font-semibold mt-4"},"Transcript",-1)),o("p",null,i(u.value.calltranscripts[0].transcript),1),o("div",Tt,[o("p",null,[e[59]||(e[59]=o("strong",null,"Sentiment:",-1)),n(" "+i(u.value.calltranscripts[0].sentiment),1)]),o("p",null,[e[60]||(e[60]=o("strong",null,"Fulfillment Score:",-1)),n(" "+i(u.value.calltranscripts[0].fulfillment_score)+"%",1)]),o("p",null,[e[61]||(e[61]=o("strong",null,"Customer Service Rating:",-1)),n(" "+i(u.value.calltranscripts[0].cs_rating)+"/5",1)]),o("p",null,[e[62]||(e[62]=o("strong",null,"Intent:",-1)),n(" "+i(u.value.calltranscripts[0].analysis.intent),1)]),o("p",null,[e[63]||(e[63]=o("strong",null,"Keywords:",-1)),n(" "+i(u.value.calltranscripts[0].analysis.keywords.join(", ")),1)])])])):M("",!0)]),o("div",{class:"flex justify-end bg-gray-100 px-4 py-2"},[o("button",{onClick:K,class:"bg-blue-600 text-white px-3 py-1 rounded"}," Close ")])])])):M("",!0),l(Oe,{modelValue:k(C).dialogType,"onUpdate:modelValue":e[5]||(e[5]=a=>k(C).dialogType=a)},null,8,["modelValue"])]}),_:1})}}},qt=Ge(Vt,[["__scopeId","data-v-c182dad4"]]);export{qt as default};
