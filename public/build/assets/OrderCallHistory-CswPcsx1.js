import{r as V,j as P,l as i,c,o as r,w as s,b as e,a as o,f as d,d as f,F as x,g as $,e as y,t as l,m as q}from"./app-nn7BeLPY.js";const G={class:"font-weight-medium"},J={class:"font-weight-medium"},Q={class:"font-weight-medium"},W={class:"font-weight-medium"},X={class:"font-weight-medium"},Y={class:"font-weight-medium"},Z={class:"font-weight-medium"},tt={key:1},et={class:"text-caption text-grey mb-2"},st=["src"],ot={class:"text-subtitle-2 font-weight-bold mb-2"},nt={class:"text-body-2 mb-3"},it={class:"font-weight-medium"},lt={class:"font-weight-medium"},at={class:"font-weight-medium"},rt={class:"font-weight-medium"},mt={__name:"OrderCallHistory",setup(dt,{expose:U}){const b=V(!1),h=V([]),w=P(()=>h.value||[]),B=(_=[])=>{h.value=_,b.value=!0},I=_=>{if(!_)return"0s";const t=Math.floor(_/60),m=_%60;return t>0?`${t}m ${m}s`:`${m}s`},L=_=>_?new Date(_).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return U({open:B}),(_,t)=>{const m=i("v-btn"),T=i("v-card-title"),v=i("v-divider"),g=i("v-icon"),F=i("v-container"),k=i("v-chip"),a=i("v-col"),N=i("v-row"),R=i("v-rating"),j=i("v-chip-group"),S=i("v-card-text"),C=i("v-card"),A=i("v-list-item"),E=i("v-list"),H=i("v-spacer"),K=i("v-card-actions"),M=i("v-dialog");return r(),c(M,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=u=>b.value=u),"max-width":"900",scrollable:""},{activator:s(({props:u})=>[e(m,q(u,{color:"purple",variant:"text",icon:"mdi-video",size:"small"}),null,16)]),default:s(({isActive:u})=>[e(C,null,{default:s(()=>[e(T,{class:"d-flex justify-space-between align-center bg-grey-lighten-3"},{default:s(()=>[t[1]||(t[1]=o("span",{class:"text-h6"},"Call Recordings",-1)),e(m,{icon:"mdi-close",variant:"text",onClick:n=>u.value=!1},null,8,["onClick"])]),_:2,__:[1]},1024),e(v),e(S,{class:"pa-0",style:{"max-height":"70vh"}},{default:s(()=>[w.value.length===0?(r(),c(F,{key:0,class:"text-center py-8"},{default:s(()=>[e(g,{size:"64",color:"grey-lighten-1"},{default:s(()=>t[2]||(t[2]=[d("mdi-phone-off")])),_:1,__:[2]}),t[3]||(t[3]=o("p",{class:"text-grey mt-4"}," No call recordings available ",-1))]),_:1,__:[3]})):(r(),c(E,{key:1,lines:"three"},{default:s(()=>[(r(!0),f(x,null,$(w.value,(n,O)=>(r(),f(x,{key:n.id},[e(A,{class:"px-4 py-3"},{default:s(()=>[e(C,{flat:"",border:""},{default:s(()=>[e(S,null,{default:s(()=>{var z;return[e(N,{dense:""},{default:s(()=>[e(a,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t[4]||(t[4]=o("div",{class:"text-caption text-grey"}," Direction ",-1)),o("div",G,[e(k,{color:n.direction==="Inbound"?"blue":"orange",size:"small",variant:"flat"},{default:s(()=>[e(g,{start:""},{default:s(()=>[d(l(n.direction==="Inbound"?"mdi-phone-incoming":"mdi-phone-outgoing"),1)]),_:2},1024),d(" "+l(n.direction),1)]),_:2},1032,["color"])])]),_:2,__:[4]},1024),e(a,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t[5]||(t[5]=o("div",{class:"text-caption text-grey"}," Status ",-1)),e(k,{color:n.status==="Success"?"success":"error",size:"small",variant:"flat"},{default:s(()=>[d(l(n.status),1)]),_:2},1032,["color"])]),_:2,__:[5]},1024),e(a,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t[6]||(t[6]=o("div",{class:"text-caption text-grey"}," Duration ",-1)),o("div",J,l(I(n.durationInSeconds)),1)]),_:2,__:[6]},1024),e(a,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t[7]||(t[7]=o("div",{class:"text-caption text-grey"}," Caller ",-1)),o("div",Q,l(n.callerNumber),1)]),_:2,__:[7]},1024),e(a,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t[8]||(t[8]=o("div",{class:"text-caption text-grey"}," Destination ",-1)),o("div",W,l(n.destinationNumber),1)]),_:2,__:[8]},1024),e(a,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t[9]||(t[9]=o("div",{class:"text-caption text-grey"}," Start Time ",-1)),o("div",X,l(L(n.callStartTime)),1)]),_:2,__:[9]},1024),e(a,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t[10]||(t[10]=o("div",{class:"text-caption text-grey"}," Amount ",-1)),o("div",Y,l(n.currencyCode)+" "+l(n.amount),1)]),_:2,__:[10]},1024),e(a,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t[11]||(t[11]=o("div",{class:"text-caption text-grey"}," Session State ",-1)),o("div",Z,l(n.callSessionState),1)]),_:2,__:[11]},1024)]),_:2},1024),n.recordingUrl?(r(),c(v,{key:0,class:"my-4"})):y("",!0),n.recordingUrl?(r(),f("div",tt,[o("div",et,[e(g,{size:"small",start:""},{default:s(()=>t[12]||(t[12]=[d("mdi-microphone")])),_:1,__:[12]}),t[13]||(t[13]=d(" Recording "))]),o("audio",{controls:"",src:n.recordingUrl,class:"w-100",preload:"metadata"},null,8,st)])):y("",!0),(z=n.calltranscripts)!=null&&z.length?(r(),f(x,{key:2},[e(v,{class:"my-4"}),o("div",null,[o("div",ot,[e(g,{start:""},{default:s(()=>t[14]||(t[14]=[d("mdi-text")])),_:1,__:[14]}),t[15]||(t[15]=d(" Transcript "))]),o("p",nt,l(n.calltranscripts[0].transcript),1),e(C,{variant:"tonal",color:"grey-lighten-4"},{default:s(()=>[e(S,null,{default:s(()=>[e(N,{dense:""},{default:s(()=>[e(a,{cols:"12",sm:"6"},{default:s(()=>[t[16]||(t[16]=o("div",{class:"text-caption text-grey"}," Sentiment ",-1)),o("div",it,l(n.calltranscripts[0].sentiment),1)]),_:2,__:[16]},1024),e(a,{cols:"12",sm:"6"},{default:s(()=>[t[17]||(t[17]=o("div",{class:"text-caption text-grey"}," Fulfillment Score ",-1)),o("div",lt,l(n.calltranscripts[0].fulfillment_score)+"% ",1)]),_:2,__:[17]},1024),e(a,{cols:"12",sm:"6"},{default:s(()=>[t[18]||(t[18]=o("div",{class:"text-caption text-grey"}," CS Rating ",-1)),o("div",at,[e(R,{"model-value":n.calltranscripts[0].cs_rating,density:"compact",size:"small",readonly:"",color:"amber"},null,8,["model-value"]),d(" "+l(n.calltranscripts[0].cs_rating)+"/5 ",1)])]),_:2,__:[18]},1024),e(a,{cols:"12",sm:"6"},{default:s(()=>{var p;return[t[19]||(t[19]=o("div",{class:"text-caption text-grey"}," Intent ",-1)),o("div",rt,l(((p=n.calltranscripts[0].analysis)==null?void 0:p.intent)||"N/A"),1)]}),_:2,__:[19]},1024),e(a,{cols:"12"},{default:s(()=>[t[20]||(t[20]=o("div",{class:"text-caption text-grey mb-2"}," Keywords ",-1)),e(j,null,{default:s(()=>{var p;return[(r(!0),f(x,null,$(((p=n.calltranscripts[0].analysis)==null?void 0:p.keywords)||[],D=>(r(),c(k,{key:D,size:"small",color:"blue",variant:"flat"},{default:s(()=>[d(l(D),1)]),_:2},1024))),128))]}),_:2},1024)]),_:2,__:[20]},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)])],64)):y("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024),O<w.value.length-1?(r(),c(v,{key:`divider-${n.id}`})):y("",!0)],64))),128))]),_:1}))]),_:1}),e(v),e(K,null,{default:s(()=>[e(H),e(m,{color:"primary",variant:"flat",onClick:n=>u.value=!1},{default:s(()=>t[21]||(t[21]=[d(" Close ")])),_:2,__:[21]},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])}}};export{mt as default};
