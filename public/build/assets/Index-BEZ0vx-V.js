import{i as _,r,j as D,k as We,l as s,c as te,o as S,w as t,b as l,a as i,f as d,t as c,d as oe,y as ke,e as Ue}from"./app-CV_qjIci.js";import{_ as De}from"./AppLayout-DlJZzV4e.js";import{n as p}from"./toast-CwTuYzEG.js";import{_ as ze}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./webrtc-BY9tqYrG.js";import"./africastalking-CxX1FhEv.js";import"./IncomingCallDialog-Ban3rY0e.js";/* empty css                                                                           */const Ne={class:"d-flex align-center"},Fe={class:"font-weight-medium"},Ee={class:"text-caption text-medium-emphasis"},Le={class:"font-weight-medium"},$e={class:"text-caption text-medium-emphasis"},Ae={key:0},Se={class:"font-weight-medium"},Ie={class:"text-caption text-medium-emphasis"},Me={key:1,class:"text-caption text-medium-emphasis"},qe={class:"d-flex gap-1"},Be={class:"text-center py-8"},Pe={class:"text-h5"},Te={class:"text-h6 mb-2"},Oe={__name:"Index",setup(je){_.defaults.withCredentials=!0,_.defaults.headers.common.Accept="application/json";const b=r([]),G=r([]),H=r([]),J=r([]),z=r(!1),x=r(!1),I=r(null),V=r(null),h=r(!1),N=r(!1),F=r(!1),u=r({name:"",location:"",country_id:null,city_id:null,zone_id:null,contact_person:"",phone:""}),M=r(!1),g=r(null),w=r(null),m=r(null),v=r({search:"",country:"",city:""}),E=r(null),ae=[{title:"Warehouse",value:"name",sortable:!0},{title:"Location",value:"location",sortable:!0},{title:"Contact",value:"contact",sortable:!1},{title:"Country",value:"country",sortable:!0},{title:"Actions",value:"actions",sortable:!1,width:"150px"}],K={required:o=>!!o||"This field is required"},Q=D(()=>G.value),R=D(()=>H.value),ne=D(()=>J.value),q=D(()=>g.value!==null),X=D(()=>{let o=b.value;if(v.value.search){const e=v.value.search.toLowerCase();o=o.filter(n=>n.name&&n.name.toLowerCase().includes(e)||n.location&&n.location.toLowerCase().includes(e)||n.contact_person&&n.contact_person.toLowerCase().includes(e))}return v.value.country&&(o=o.filter(e=>e.country_id===v.value.country)),v.value.city&&(o=o.filter(e=>e.city_id===v.value.city)),o});async function ie(){z.value=!0;try{const{data:o}=await _.get("/api/v1/warehouses");b.value=o}catch(o){p.error("Failed to load warehouses"),console.error("Error fetching warehouses:",o)}finally{z.value=!1}}async function ue(){try{const{data:o}=await _.get("/api/v1/countries");G.value=o}catch(o){p.error("Failed to load countries"),console.error("Error fetching countries:",o)}}async function Y(o=null){try{const e=o?`/api/v1/cities?country_id=${o}`:"/api/v1/cities",{data:n}=await _.get(e);H.value=Array.isArray(n)?n:[]}catch(e){p.error("Failed to load cities"),console.error("Error fetching cities:",e)}}async function se(){try{const{data:o}=await _.get("/api/v1/zones");J.value=o}catch(o){console.error("Error fetching zones:",o)}}async function re(){x.value=!0;try{const{data:o}=await _.post("/api/v1/warehouses",u.value);b.value.push(o),p.success("Warehouse created successfully"),B()}catch(o){p.error("Failed to create warehouse"),console.error("Error creating warehouse:",o)}finally{x.value=!1}}async function de(){x.value=!0,I.value=g.value;try{const{data:o}=await _.put(`/api/v1/warehouses/${g.value}`,u.value),e=b.value.findIndex(n=>n.id===g.value);e!==-1&&(b.value[e]=o),p.success("Warehouse updated successfully"),B()}catch(o){p.error("Failed to update warehouse"),console.error("Error updating warehouse:",o)}finally{x.value=!1,I.value=null}}async function ce(){V.value=w.value.id;try{await _.delete(`/api/v1/warehouses/${w.value.id}`),b.value=b.value.filter(o=>o.id!==w.value.id),p.success("Warehouse deleted successfully"),ee()}catch(o){p.error("Failed to delete warehouse"),console.error("Error deleting warehouse:",o)}finally{V.value=null}}function ve(){E.value.validate()&&(q.value?de():re())}function me(){P(),g.value=null,h.value=!0}function fe(o){P(),u.value={name:o.name||"",location:o.location||"",country_id:o.country_id,city_id:o.city_id,zone_id:o.zone_id,contact_person:o.contact_person||"",phone:o.phone||""},g.value=o.id,h.value=!0}function _e(o){m.value=o,N.value=!0}function pe(o){w.value=o,F.value=!0}function B(){h.value=!1,P(),g.value=null}function ee(){F.value=!1,w.value=null}function P(){u.value={name:"",location:"",country_id:null,city_id:null,zone_id:null,contact_person:"",phone:""},E.value&&E.value.resetValidation()}function ye(){u.value.city_id=null,u.value.country_id&&Y(u.value.country_id)}function le(o){return o?new Date(o).toLocaleDateString():"Not available"}return We(()=>{ie(),ue(),Y(),se()}),(o,e)=>{const n=s("v-col"),f=s("v-btn"),L=s("v-row"),C=s("v-icon"),W=s("v-card-title"),k=s("v-text-field"),$=s("v-autocomplete"),A=s("v-card-text"),U=s("v-card"),be=s("v-divider"),ge=s("v-chip"),xe=s("v-skeleton-loader"),we=s("v-data-table"),Ve=s("v-select"),T=s("v-container"),O=s("v-spacer"),j=s("v-card-actions"),he=s("v-form"),Z=s("v-dialog"),Ce=s("v-alert");return S(),te(De,null,{default:t(()=>[l(T,null,{default:t(()=>[l(L,{class:"mb-4 align-center"},{default:t(()=>[l(n,null,{default:t(()=>e[15]||(e[15]=[i("h2",{class:"text-h4"},"Warehouse Management",-1)])),_:1,__:[15]}),l(n,{cols:"auto"},{default:t(()=>[l(f,{color:"primary","prepend-icon":"mdi-plus",onClick:me,loading:z.value},{default:t(()=>e[16]||(e[16]=[d(" Create Warehouse ")])),_:1,__:[16]},8,["loading"])]),_:1})]),_:1}),l(U,{class:"mb-4",variant:"outlined"},{default:t(()=>[l(W,{class:"text-subtitle-1 pb-2"},{default:t(()=>[l(C,{left:""},{default:t(()=>e[17]||(e[17]=[d("mdi-filter")])),_:1,__:[17]}),e[18]||(e[18]=d(" Search & Filter "))]),_:1,__:[18]}),l(A,null,{default:t(()=>[l(L,null,{default:t(()=>[l(n,{cols:"12",md:"4"},{default:t(()=>[l(k,{modelValue:v.value.search,"onUpdate:modelValue":e[0]||(e[0]=a=>v.value.search=a),label:"Search warehouses...","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:"",hint:"Search by warehouse name or location","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"4"},{default:t(()=>[l($,{modelValue:v.value.country,"onUpdate:modelValue":e[1]||(e[1]=a=>v.value.country=a),label:"Country",items:Q.value,"item-title":"name","item-value":"id",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1}),l(n,{cols:"12",md:"4"},{default:t(()=>[l($,{modelValue:v.value.city,"onUpdate:modelValue":e[2]||(e[2]=a=>v.value.city=a),label:"City",items:R.value,"item-title":"name","item-value":"id",variant:"outlined",density:"compact",clearable:"",disabled:!v.value.country},null,8,["modelValue","items","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),l(U,null,{default:t(()=>[l(W,{class:"text-subtitle-1"},{default:t(()=>[l(C,{left:""},{default:t(()=>e[19]||(e[19]=[d("mdi-warehouse")])),_:1,__:[19]}),d(" All Warehouses ("+c(X.value.length)+") ",1)]),_:1}),l(be),l(we,{headers:ae,items:X.value,loading:z.value,"item-value":"id",class:"elevation-0","items-per-page":25},{"item.name":t(({item:a})=>[i("div",Ne,[l(C,{icon:"mdi-warehouse",color:"primary",class:"mr-2",size:"small"}),i("div",null,[i("div",Fe,c(a.name||"Unnamed Warehouse"),1),i("div",Ee,"ID: "+c(a.id),1)])])]),"item.location":t(({item:a})=>{var y;return[i("div",null,[i("div",Le,c(a.location||"No location specified"),1),i("div",$e,c(((y=a.country)==null?void 0:y.name)||"Unknown Country"),1)])]}),"item.contact":t(({item:a})=>[a.contact_person||a.phone?(S(),oe("div",Ae,[i("div",Se,c(a.contact_person||"No contact person"),1),i("div",Ie,c(a.phone||"No phone"),1)])):(S(),oe("span",Me,"No contact info"))]),"item.country":t(({item:a})=>[l(ge,{color:"info",size:"small",variant:"outlined"},{default:t(()=>{var y;return[d(c(((y=a.country)==null?void 0:y.name)||"Unknown"),1)]}),_:2},1024)]),"item.actions":t(({item:a})=>[i("div",qe,[l(f,{icon:"mdi-eye",size:"small",variant:"text",color:"info",onClick:y=>_e(a)},null,8,["onClick"]),l(f,{icon:"mdi-pencil",size:"small",variant:"text",color:"primary",onClick:y=>fe(a),loading:I.value===a.id},null,8,["onClick","loading"]),l(f,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:y=>pe(a),loading:V.value===a.id},null,8,["onClick","loading"])])]),loading:t(()=>[l(xe,{type:"table-row@10"})]),"no-data":t(()=>[i("div",Be,[l(C,{size:"64",color:"grey-lighten-1"},{default:t(()=>e[20]||(e[20]=[d("mdi-warehouse-off")])),_:1,__:[20]}),e[21]||(e[21]=i("div",{class:"text-h6 mt-4"},"No warehouses found",-1)),e[22]||(e[22]=i("div",{class:"text-caption"},"Create your first warehouse to get started",-1))])]),_:1},8,["items","loading"])]),_:1}),l(Z,{modelValue:h.value,"onUpdate:modelValue":e[11]||(e[11]=a=>h.value=a),"max-width":"800px",persistent:""},{default:t(()=>[l(U,null,{default:t(()=>[l(W,null,{default:t(()=>[i("span",Pe,c(q.value?"Edit Warehouse":"Create New Warehouse"),1)]),_:1}),l(he,{ref_key:"warehouseForm",ref:E,modelValue:M.value,"onUpdate:modelValue":e[10]||(e[10]=a=>M.value=a),onSubmit:ke(ve,["prevent"])},{default:t(()=>[l(A,null,{default:t(()=>[l(T,null,{default:t(()=>[l(L,null,{default:t(()=>[l(n,{cols:"12",md:"6"},{default:t(()=>[l(k,{modelValue:u.value.name,"onUpdate:modelValue":e[3]||(e[3]=a=>u.value.name=a),label:"Warehouse Name *",rules:[K.required],variant:"outlined",density:"comfortable",placeholder:"e.g., Main Warehouse, Storage Unit A"},null,8,["modelValue","rules"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(k,{modelValue:u.value.location,"onUpdate:modelValue":e[4]||(e[4]=a=>u.value.location=a),label:"Location",variant:"outlined",density:"comfortable",placeholder:"Street address or area"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l($,{modelValue:u.value.country_id,"onUpdate:modelValue":[e[5]||(e[5]=a=>u.value.country_id=a),ye],label:"Country *",items:Q.value,"item-title":"name","item-value":"id",rules:[K.required],variant:"outlined",density:"comfortable"},null,8,["modelValue","items","rules"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l($,{modelValue:u.value.city_id,"onUpdate:modelValue":e[6]||(e[6]=a=>u.value.city_id=a),label:"City",items:R.value,"item-title":"name","item-value":"id",variant:"outlined",density:"comfortable",disabled:!u.value.country_id},null,8,["modelValue","items","disabled"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(k,{modelValue:u.value.contact_person,"onUpdate:modelValue":e[7]||(e[7]=a=>u.value.contact_person=a),label:"Contact Person",variant:"outlined",density:"comfortable",placeholder:"Manager or responsible person"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(k,{modelValue:u.value.phone,"onUpdate:modelValue":e[8]||(e[8]=a=>u.value.phone=a),label:"Phone Number",variant:"outlined",density:"comfortable",placeholder:"+1234567890"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(Ve,{modelValue:u.value.zone_id,"onUpdate:modelValue":e[9]||(e[9]=a=>u.value.zone_id=a),label:"Zone",items:ne.value,"item-title":"name","item-value":"id",variant:"outlined",density:"comfortable",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),l(j,null,{default:t(()=>[l(O),l(f,{variant:"text",onClick:B,disabled:x.value},{default:t(()=>e[23]||(e[23]=[d(" Cancel ")])),_:1,__:[23]},8,["disabled"]),l(f,{color:"primary",variant:"flat",type:"submit",loading:x.value,disabled:!M.value},{default:t(()=>[d(c(q.value?"Update":"Create"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),l(Z,{modelValue:N.value,"onUpdate:modelValue":e[13]||(e[13]=a=>N.value=a),"max-width":"600px"},{default:t(()=>[m.value?(S(),te(U,{key:0},{default:t(()=>[l(W,null,{default:t(()=>[l(C,{left:""},{default:t(()=>e[24]||(e[24]=[d("mdi-warehouse")])),_:1,__:[24]}),e[25]||(e[25]=d(" Warehouse Details "))]),_:1,__:[25]}),l(A,null,{default:t(()=>[l(T,null,{default:t(()=>[l(L,null,{default:t(()=>[l(n,{cols:"12"},{default:t(()=>[i("div",Te,c(m.value.name||"Unnamed Warehouse"),1)]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[e[26]||(e[26]=i("div",{class:"text-subtitle-2 mb-1"},"Location",-1)),i("div",null,c(m.value.location||"Not specified"),1)]),_:1,__:[26]}),l(n,{cols:"12",md:"6"},{default:t(()=>{var a;return[e[27]||(e[27]=i("div",{class:"text-subtitle-2 mb-1"},"Country",-1)),i("div",null,c(((a=m.value.country)==null?void 0:a.name)||"Unknown"),1)]}),_:1,__:[27]}),l(n,{cols:"12",md:"6"},{default:t(()=>[e[28]||(e[28]=i("div",{class:"text-subtitle-2 mb-1"},"Contact Person",-1)),i("div",null,c(m.value.contact_person||"Not specified"),1)]),_:1,__:[28]}),l(n,{cols:"12",md:"6"},{default:t(()=>[e[29]||(e[29]=i("div",{class:"text-subtitle-2 mb-1"},"Phone",-1)),i("div",null,c(m.value.phone||"Not specified"),1)]),_:1,__:[29]}),l(n,{cols:"12",md:"6"},{default:t(()=>[e[30]||(e[30]=i("div",{class:"text-subtitle-2 mb-1"},"Created",-1)),i("div",null,c(le(m.value.created_at)),1)]),_:1,__:[30]}),l(n,{cols:"12",md:"6"},{default:t(()=>[e[31]||(e[31]=i("div",{class:"text-subtitle-2 mb-1"},"Updated",-1)),i("div",null,c(le(m.value.updated_at)),1)]),_:1,__:[31]})]),_:1})]),_:1})]),_:1}),l(j,null,{default:t(()=>[l(O),l(f,{variant:"text",onClick:e[12]||(e[12]=a=>N.value=!1)},{default:t(()=>e[32]||(e[32]=[d("Close")])),_:1,__:[32]})]),_:1})]),_:1})):Ue("",!0)]),_:1},8,["modelValue"]),l(Z,{modelValue:F.value,"onUpdate:modelValue":e[14]||(e[14]=a=>F.value=a),"max-width":"400px"},{default:t(()=>[l(U,null,{default:t(()=>[l(W,{class:"text-h5"},{default:t(()=>e[33]||(e[33]=[d(" Confirm Delete ")])),_:1,__:[33]}),l(A,null,{default:t(()=>{var a;return[e[35]||(e[35]=d(" Are you sure you want to delete the warehouse ")),i("strong",null,'"'+c(((a=w.value)==null?void 0:a.name)||"Unnamed Warehouse")+'"',1),e[36]||(e[36]=d("? ")),e[37]||(e[37]=i("br",null,null,-1)),e[38]||(e[38]=i("br",null,null,-1)),l(Ce,{color:"warning",variant:"outlined",class:"mt-3"},{default:t(()=>e[34]||(e[34]=[d(" This action cannot be undone and may affect related inventory and operations. ")])),_:1,__:[34]})]}),_:1,__:[35,36,37,38]}),l(j,null,{default:t(()=>[l(O),l(f,{variant:"text",onClick:ee,disabled:V.value},{default:t(()=>e[39]||(e[39]=[d(" Cancel ")])),_:1,__:[39]},8,["disabled"]),l(f,{color:"error",variant:"flat",onClick:ce,loading:V.value},{default:t(()=>e[40]||(e[40]=[d(" Delete ")])),_:1,__:[40]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},Ye=ze(Oe,[["__scopeId","data-v-3832501d"]]);export{Ye as default};
