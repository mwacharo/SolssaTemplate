import{r as i,j as B,s as K,k as Q,l as $,c as R,o as r,w as W,a as e,d,e as k,f as X,A as u,B as g,b as P,F as E,g as A,t as a,C as U,n as Y,y as z,D as ee,i as p}from"./app-CBv0IuCw.js";import{_ as te}from"./AppLayout-Da9RKtEk.js";import{n as c}from"./toast-z3PBESwk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./webrtc-BD9ZglgP.js";import"./africastalking-Cw3_wxI2.js";import"./IncomingCallDialog-BZb8C49a.js";/* empty css                                                                           */const oe={class:"py-12"},le={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ne={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},se={class:"p-6 bg-gray-50 border-b border-gray-200"},ie={class:"flex flex-col sm:flex-row gap-4"},ae={class:"flex-1"},re={class:"flex gap-2"},de=["value"],ue={class:"overflow-x-auto"},ce={class:"min-w-full divide-y divide-gray-200"},pe={class:"bg-white divide-y divide-gray-200"},ve={class:"px-6 py-4 whitespace-nowrap"},ge={class:"text-sm font-medium text-gray-900"},me={class:"px-6 py-4 whitespace-nowrap"},ye={class:"text-sm text-gray-900"},fe={class:"px-6 py-4 whitespace-nowrap"},xe={class:"text-sm text-gray-900"},be={class:"px-6 py-4 whitespace-nowrap"},we={class:"text-sm text-gray-900"},he={class:"px-6 py-4 whitespace-nowrap"},_e={class:"text-sm text-gray-900"},ke={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ve={class:"flex space-x-2"},Ze=["onClick"],Me=["onClick"],Ee=["onClick"],Ae={key:0,class:"text-center py-12"},Ue={key:1,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},je={class:"flex items-center justify-between"},Le={class:"text-sm text-gray-700"},Ne={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Se={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-1/2 lg:w-1/3 shadow-lg rounded-md bg-white"},Be={class:"mt-3"},$e={class:"flex justify-between items-center mb-4"},Pe={class:"text-lg font-medium text-gray-900"},De=["readonly"],Ie=["disabled"],Fe=["value"],He={class:"grid grid-cols-2 gap-4"},qe=["readonly"],Te=["readonly"],Ge=["readonly"],Oe={class:"flex items-center"},Je=["disabled"],Ke={key:0,class:"flex justify-end space-x-2 pt-4"},Qe=["disabled"],nt={__name:"Zone",setup(Re){const C=i([]),V=i([]),m=i([]),v=i(!1),s=i("create"),y=i(!1),f=i(""),x=i(""),b=i(""),w=i(""),n=i({name:"",country_id:"",city_id:"",latitude:null,longitude:null,population:null,inbound:!1}),h=i(null),_=B(()=>{let o=C.value;return f.value&&(o=o.filter(t=>t.name.toLowerCase().includes(f.value.toLowerCase()))),x.value&&(o=o.filter(t=>t.country_id==x.value)),b.value&&(o=o.filter(t=>t.city_id==b.value)),w.value!==""&&(o=o.filter(t=>t.inbound===(w.value==="true"))),o});B(()=>n.value.country_id?m.value.filter(o=>o.country_id==n.value.country_id):m.value),K(()=>n.value.country_id,()=>{n.value.city_id=""});const Z=async()=>{try{const o=await p.get("/api/v1/zones");C.value=o.data.data||o.data}catch(o){console.error("Error fetching zones:",o),c.error("Error loading zones. Please try again.")}},D=async()=>{try{const o=await p.get("/api/v1/countries");V.value=o.data.data||o.data}catch(o){console.error("Error fetching countries:",o),c.error("Error loading countries. Please try again.")}},I=async()=>{try{const o=await p.get("/api/v1/cities");m.value=o.data.data||o.data}catch(o){console.error("Error fetching cities:",o),c.error("Error loading cities. Please try again.")}},F=()=>{s.value="create",j(),v.value=!0},H=o=>{s.value="edit",h.value=o.id,n.value={name:o.name,country_id:o.country_id,city_id:o.city_id||"",latitude:o.latitude,longitude:o.longitude,population:o.population,inbound:o.inbound},v.value=!0},q=o=>{s.value="view",h.value=o.id,n.value={name:o.name,country_id:o.country_id,city_id:o.city_id||"",latitude:o.latitude,longitude:o.longitude,population:o.population,inbound:o.inbound},v.value=!0},T=async()=>{y.value=!0;try{const o={name:n.value.name,country_id:n.value.country_id,city_id:n.value.city_id||null,latitude:n.value.latitude||null,longitude:n.value.longitude||null,population:n.value.population||null,inbound:n.value.inbound};s.value==="create"?await p.post("/api/v1/zones",o):await p.put(`/api/v1/zones/${h.value}`,o),await Z(),M(),c.success(`Zone ${s.value==="create"?"created":"updated"} successfully!`)}catch(o){console.error("Error saving zone:",o),c.error("Error saving zone. Please try again.")}finally{y.value=!1}},G=async o=>{if(confirm(`Are you sure you want to delete "${o.name}"?`))try{await p.delete(`/api/v1/zones/${o.id}`),await Z(),c.success("Zone deleted successfully!")}catch(t){console.error("Error deleting zone:",t),c.error("Error deleting zone. Please try again.")}},M=()=>{v.value=!1,j(),h.value=null},j=()=>{n.value={name:"",country_id:"",city_id:"",latitude:null,longitude:null,population:null,inbound:!1}};return Q(()=>{Z(),D(),I()}),(o,t)=>{const O=$("vue-autocomplete"),J=$("v-autocomplete");return r(),R(te,null,{default:W(()=>[e("div",oe,[e("div",le,[e("div",ne,[e("div",{class:"p-6 bg-white border-b border-gray-200"},[e("div",{class:"flex justify-between items-center"},[t[12]||(t[12]=e("div",null,[e("h2",{class:"text-2xl font-semibold text-gray-900"},"Zones Management"),e("p",{class:"mt-1 text-sm text-gray-600"}," Manage zones and their information ")],-1)),e("button",{onClick:F,class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-600 transition ease-in-out duration-150"},t[11]||(t[11]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),X(" Add Zone ")]))])]),e("div",se,[e("div",ie,[e("div",ae,[u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>f.value=l),type:"text",placeholder:"Search zones...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[g,f.value]])]),e("div",re,[u(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>x.value=l),class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[t[13]||(t[13]=e("option",{value:""},"All Countries",-1)),(r(!0),d(E,null,A(V.value,l=>(r(),d("option",{key:l.id,value:l.id},a(l.name),9,de))),128))],512),[[U,x.value]]),P(O,{modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=l=>b.value=l),items:o.filteredCities,placeholder:"Search city...",class:"w-64 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500","get-label":l=>l.name,"get-value":l=>l.id,clearable:!0,required:!0},null,8,["modelValue","items","get-label","get-value"]),u(e("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>w.value=l),class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},t[14]||(t[14]=[e("option",{value:""},"All Zones",-1),e("option",{value:"true"},"Inbound Only",-1),e("option",{value:"false"},"Not Inbound",-1)]),512),[[U,w.value]])])])]),e("div",ue,[e("table",ce,[t[18]||(t[18]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Zone Name "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Country "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," City "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Population "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Coordinates "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",pe,[(r(!0),d(E,null,A(_.value,l=>{var L,N;return r(),d("tr",{key:l.id,class:"hover:bg-gray-50"},[e("td",ve,[e("div",ge,a(l.name),1)]),e("td",me,[e("div",ye,a(((L=l.country)==null?void 0:L.name)||"Unknown"),1)]),e("td",fe,[e("div",xe,a(((N=l.city)==null?void 0:N.name)||"N/A"),1)]),e("td",be,[e("div",we,a(l.population?l.population.toLocaleString():"N/A"),1)]),e("td",he,[e("div",_e,a(l.latitude&&l.longitude?`${l.latitude}, ${l.longitude}`:"N/A"),1)]),e("td",ke,[e("span",{class:Y(l.inbound?"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800":"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800")},a(l.inbound?"Inbound":"Standard"),3)]),e("td",Ce,[e("div",Ve,[e("button",{onClick:S=>q(l),class:"text-indigo-600 hover:text-indigo-900",title:"View"},t[15]||(t[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,Ze),e("button",{onClick:S=>H(l),class:"text-yellow-600 hover:text-yellow-900",title:"Edit"},t[16]||(t[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Me),e("button",{onClick:S=>G(l),class:"text-red-600 hover:text-red-900",title:"Delete"},t[17]||(t[17]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Ee)])])])}),128))])])]),_.value.length===0?(r(),d("div",Ae,t[19]||(t[19]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No zones found",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new zone.",-1)]))):k("",!0),_.value.length>0?(r(),d("div",Ue,[e("div",je,[e("div",Le," Showing "+a(_.value.length)+" of "+a(C.value.length)+" zones ",1)])])):k("",!0)])])]),v.value?(r(),d("div",Ne,[e("div",Se,[e("div",Be,[e("div",$e,[e("h3",Pe,a(s.value==="create"?"Add New Zone":s.value==="edit"?"Edit Zone":"Zone Details"),1),e("button",{onClick:M,class:"text-gray-400 hover:text-gray-600"},t[20]||(t[20]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:z(T,["prevent"]),class:"space-y-4"},[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Zone Name *",-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>n.value.name=l),type:"text",readonly:s.value==="view",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter zone name"},null,8,De),[[g,n.value.name]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Country *",-1)),u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>n.value.country_id=l),disabled:s.value==="view",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[t[22]||(t[22]=e("option",{value:""},"Select a country",-1)),(r(!0),d(E,null,A(V.value,l=>(r(),d("option",{key:l.id,value:l.id},a(l.name),9,Fe))),128))],8,Ie),[[U,n.value.country_id]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700"},"City",-1)),P(J,{modelValue:n.value.city_id,"onUpdate:modelValue":t[6]||(t[6]=l=>n.value.city_id=l),items:m.value,"item-title":"name","item-value":"id",disabled:s.value==="view",placeholder:"Select or search city...",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",clearable:!0},null,8,["modelValue","items","disabled"])]),e("div",He,[e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Latitude",-1)),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>n.value.latitude=l),type:"number",step:"0.0000001",readonly:s.value==="view",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., -1.2921"},null,8,qe),[[g,n.value.latitude]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"Longitude",-1)),u(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>n.value.longitude=l),type:"number",step:"0.0000001",readonly:s.value==="view",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., 36.8219"},null,8,Te),[[g,n.value.longitude]])])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"Population",-1)),u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>n.value.population=l),type:"number",readonly:s.value==="view",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter zone population"},null,8,Ge),[[g,n.value.population]])]),e("div",null,[e("label",Oe,[u(e("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>n.value.inbound=l),type:"checkbox",disabled:s.value==="view",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,Je),[[ee,n.value.inbound]]),t[28]||(t[28]=e("span",{class:"ml-2 text-sm text-gray-700"},"Inbound Zone",-1))])]),s.value!=="view"?(r(),d("div",Ke,[e("button",{type:"button",onClick:M,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Cancel "),e("button",{type:"submit",disabled:y.value,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"},a(y.value?"Saving...":s.value==="create"?"Create Zone":"Update Zone"),9,Qe)])):k("",!0)],32)])])])):k("",!0)]),_:1})}}};export{nt as default};
