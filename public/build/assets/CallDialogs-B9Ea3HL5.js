import{E as Je,r as s,j as S,i as W,k as Le,l as r,d as L,o as T,b as l,w as a,a as c,f as i,y as Ee,e as ze,p as $e,q as Fe,t as f,F as ve,g as me,c as fe,n as Ie}from"./app-CV_qjIci.js";import{u as Re}from"./webrtc-BY9tqYrG.js";import{n as g}from"./toast-CwTuYzEG.js";import{_ as He}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ge=Je("callCenter",()=>{const q=Re(),Y=s(!1),I=s(null),y=s(null),_=s(null),R=s([]),U=s(!1),Q=s(null),z=s(0),d=s(!1),v=s(!1),P=s(80),h=s(!1),E=s(null),D=s(""),b=s(null),w=s(null),k=s(!1),H=s({name:"",phone:"",email:"",company:""}),ie=s({totalWaiting:0,averageWaitTime:0,agentsAvailable:0,agentsOnCall:0}),se=s("available"),ue=s([]),u=S(()=>q.afClient),re=S(()=>q.incomingCall),pe=S(()=>q.incomingCallDialog),_e=S(()=>q.connection_active),ge=S(()=>b.value!==null),Ce=S(()=>{const n=Math.floor(z.value/60),p=z.value%60;return`${n.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`});function $(n){console.log(`[Call Center]: ${n}`)}function we(n){q.initializeAfClient(n)}function x(n){try{if(console.log(`Calling ${n} from System...`),!u.value){console.error("AfricasTalking client is not initialized."),g.error("AfricasTalking client is not initialized.");return}u.value.call(n),console.log("Call initiated successfully."),g.success("Call started."),h.value=!0,_.value={id:Date.now(),phoneNumber:n,direction:"outbound",status:"connecting",startTime:new Date},u.value.on("afClienting",()=>{$("afClient is in progress (calling)...")}),u.value.on("callaccepted",()=>{console.log("callaccepted"),g.success("Call accepted!"),$("Call accepted (bridged between caller and callee)."),U.value=!0,Q.value=Date.now(),le()}),u.value.on("hangup",p=>{$(`Call hung up (${p.code} - ${p.reason}).`),g.error(`Call ended: ${p.reason}`),h.value=!1,j()}),u.value.on("mute",()=>{$("Call muted."),g.info("Call muted."),v.value=!0}),u.value.on("unmute",()=>{$("Call unmuted."),g.info("Call unmuted."),v.value=!1}),u.value.on("hold",()=>{$("Call on hold."),g.info("Call on hold."),d.value=!0}),u.value.on("unhold",()=>{$("Call resumed from hold."),g.info("Call resumed from hold."),d.value=!1})}catch(p){console.error("Call initiation error:",p),g.error("Call failed: "+p.message)}}function be(){re.value&&u.value&&(u.value.answer(),U.value=!0,Q.value=Date.now(),le())}function ye(n){if(h.value=!0,E.value=n,console.log("Selected agent:",n),D.value=n.phone_number,console.log("Agent phone number:",D.value),!u.value){console.error("AfricasTalking client is not initialized."),g.error("AfricasTalking client is not initialized.");return}try{console.log("Attempting to call agent..."),u.value.call(D.value),console.log("Call initiated successfully."),g.success("Call initiated successfully."),_.value={id:Date.now(),phoneNumber:D.value,direction:"outbound",status:"connecting",startTime:new Date,agent:n}}catch(p){console.error("Error while calling agent:",p),g.error("Failed to call agent: "+p.message)}}function Z(){u.value&&(u.value.hangup(),console.log("call ended"),g.error("Call ended."),q.setIncomingCallDialog(!1),h.value=!1,j())}function ee(){h.value&&u.value&&(v.value=!v.value,v.value?u.value.muteAudio():u.value.unmuteAudio(),console.log("Client mute property:",u.value.isAudioMuted),console.log("Our internal state:",v.value))}async function he(n,p={}){var N,M;try{if(Y.value=!0,y.value=null,I.value=n,u.value)return x(n),{success:!0,callId:Date.now()};const F=await W.post("/api/v1/call-center/make-call",{phoneNumber:n,...p});return _.value={id:F.data.callId||Date.now(),phoneNumber:n,direction:"outbound",status:"connecting",startTime:new Date},U.value=!0,Q.value=Date.now(),le(),F.data}catch(F){throw y.value=((M=(N=F==null?void 0:F.response)==null?void 0:N.data)==null?void 0:M.message)||"Failed to initiate call",F}finally{Y.value=!1}}async function xe(){try{if(u.value&&h.value){Z();return}_.value&&(await W.post(`/api/v1/call-center/end/${_.value.id}`),R.value.unshift({..._.value,endTime:new Date,duration:z.value,status:"completed"})),j()}catch{y.value="Failed to end call",j()}}async function Ve(n){try{if(u.value){Z();return}await W.post(`/api/v1/call-center/reject/${n.id}`),q.setIncomingCall(null)}catch{y.value="Failed to reject call"}}async function De(){var n,p,N,M;try{if(u.value&&h.value){d.value?(p=(n=u.value).unhold)==null||p.call(n):(M=(N=u.value).hold)==null||M.call(N);return}d.value=!d.value,await W.post(`/api/v1/call-center/hold/${_.value.id}`,{hold:d.value})}catch{d.value=!d.value,y.value="Failed to toggle hold"}}async function G(){try{if(u.value&&h.value){ee();return}v.value=!v.value,await W.post(`/api/v1/call-center/mute/${_.value.id}`,{mute:v.value})}catch{v.value=!v.value,y.value="Failed to toggle mute"}}async function K(n){try{await W.post(`/api/v1/call-center/transfer/${_.value.id}`,{targetNumber:n}),R.value.unshift({..._.value,endTime:new Date,duration:z.value,status:"transferred",transferredTo:n}),j()}catch(p){throw y.value="Failed to transfer call",p}}function le(){const n=setInterval(()=>{if(!U.value){clearInterval(n);return}z.value=Math.floor((Date.now()-Q.value)/1e3)},1e3)}function j(){_.value=null,U.value=!1,Q.value=null,z.value=0,d.value=!1,v.value=!1,h.value=!1,E.value=null}function o(){b.value="newCall",w.value=null}function e(){b.value="callAgent",w.value=null}function m(){b.value="queue",w.value=null}function A(){b.value="transfer"}function C(n=null){b.value="contact",w.value=n,n&&(H.value.phone=n.phoneNumber||n.callerNumber||"")}function O(n=null){b.value="sms",k.value=!0,w.value=n}function ae(){b.value=null,k.value=!1,w.value=null,H.value={name:"",phone:"",email:"",company:""}}async function X(n){try{await W.post("/api/v1/call-center/agent/status",{status:n}),se.value=n}catch{y.value="Failed to update status"}}async function te(){try{const n=await W.get("/api/v1/call-center/queue/status");ie.value=n.data}catch(n){console.error("Failed to fetch queue status:",n)}}async function ne(){try{const n=await W.get("/api/v1/call-center/agents");ue.value=n.data}catch(n){console.error("Failed to fetch agent list:",n)}}function oe(){const n={id:Date.now(),phoneNumber:"+1234567890",callerName:"John Doe",direction:"inbound",startTime:new Date};q.setIncomingCall(n)}return{makingCall:Y,lastCallNumber:I,callError:y,activeCall:_,callHistory:R,isCallActive:U,callStartTime:Q,callDuration:z,isOnHold:d,isMuted:v,volume:P,isCalling:h,selectedAgent:E,phone_number:D,dialogType:b,callData:w,isSmsDialog:k,contactForm:H,queueStatus:ie,agentStatus:se,agentList:ue,isDialogOpen:ge,formattedCallDuration:Ce,afClient:u,incomingCall:re,incomingCallDialog:pe,connection_active:_e,initializeAfClient:we,callClient:x,makeCall:he,answerCall:be,endCall:xe,rejectCall:Ve,holdCall:De,muteCall:G,transferCall:K,resetCallState:j,handleCall:ye,hangupCall:Z,handleMute:ee,openNewCallDialog:o,openCallAgentDialog:e,openQueueDialog:m,openTransferDialog:A,openContactDialog:C,openSmsDialog:O,closeDialog:ae,updateAgentStatus:X,fetchQueueStatus:te,fetchAgentList:ne,simulateIncomingCall:oe,logEvent:$}}),Ke={class:"mb-6"},Xe={class:"mb-6"},Ye={class:"text-white"},Ze={class:"d-flex justify-center mb-6"},el={class:"pt-4 space-y-4"},ll={key:0,class:"dialpad-container mb-4"},al={class:"dialpad-grid"},tl={class:"text-center"},nl={class:"text-h6 font-weight-bold"},ol={class:"text-caption"},il={class:"mb-4"},sl={key:1,class:"text-white font-weight-bold"},ul={class:"d-flex align-center"},rl={class:"text-center"},dl={class:"text-h6 font-weight-bold"},cl={class:"text-body-2"},vl={class:"d-flex align-center"},ml={class:"text-white text-caption"},fl={class:"flex-grow-1"},pl={class:"text-body-2 font-weight-medium"},_l={class:"text-caption text-grey"},gl={key:0,class:"text-right"},Cl={class:"text-body-2 font-weight-bold"},wl={class:"text-white"},bl={__name:"CallDialogs",props:{modelValue:String,callData:Object},emits:["update:modelValue","call-made","call-transferred","agent-called"],setup(q,{emit:Y}){const I=Ge(),y=q,_=Y,R=S({get:()=>y.modelValue==="newCall",set:o=>_("update:modelValue",o?"newCall":null)}),U=S({get:()=>y.modelValue==="callAgent",set:o=>_("update:modelValue",o?"callAgent":null)}),Q=S({get:()=>y.modelValue==="queue",set:o=>_("update:modelValue",o?"queue":null)}),z=S({get:()=>y.modelValue==="transfer",set:o=>_("update:modelValue",o?"transfer":null)}),d=s({phone:"",contact:null,callerId:"",recordCall:!0,autoAnswer:!1}),v=s({phone:"",agent:null,queue:null,warmTransfer:!0}),P=s(!1),h=s(!1),E=s(!1),D=s(!1),b=s(""),w=s(null),k=s("number"),H=[o=>!!o||"Phone number is required"],ie=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],se=s([{name:"John Doe",phone:"+1234567890",email:"john@example.com"},{name:"Jane Smith",phone:"+1234567891",email:"jane@example.com"},{name:"Mike Johnson",phone:"+1234567892",email:"mike@example.com"}]),ue=s(["+1 (555) 000-0001","+1 (555) 000-0002","+1 (555) 000-0003"]),u=s([{id:1,name:"Alice Johnson",extension:"101",status:"available",callsToday:12,avatar:null},{id:2,name:"Bob Smith",extension:"102",status:"busy",callsToday:8,avatar:null},{id:3,name:"Carol Davis",extension:"103",status:"available",callsToday:15,avatar:null},{id:4,name:"David Wilson",extension:"104",status:"away",callsToday:5,avatar:null}]),re=s([{id:1,name:"Sales Queue",waitingCount:3},{id:2,name:"Support Queue",waitingCount:7},{id:3,name:"Billing Queue",waitingCount:2}]),pe=s([{title:"Waiting",value:12,color:"warning",icon:"mdi-clock-outline"},{title:"In Progress",value:8,color:"info",icon:"mdi-phone-in-talk"},{title:"Completed",value:45,color:"success",icon:"mdi-check-circle"},{title:"Avg Wait",value:"2:30",color:"primary",icon:"mdi-timer-outline"}]),_e=[{title:"Caller",value:"caller",sortable:!1},{title:"Phone",value:"phone",sortable:!1},{title:"Wait Time",value:"waitTime",sortable:!0},{title:"Priority",value:"priority",sortable:!0},{title:"Queue",value:"queue",sortable:!1}],ge=s([{caller:"John Doe",phone:"+1234567890",waitTime:45,priority:3,queue:"Sales"},{caller:"Jane Smith",phone:"+1234567891",waitTime:120,priority:5,queue:"Support"},{caller:"Mike Wilson",phone:"+1234567892",waitTime:30,priority:2,queue:"Billing"}]),Ce=s([{id:1,name:"Alice Johnson",status:"available",currentCall:null},{id:2,name:"Bob Smith",status:"busy",currentCall:!0,callDuration:"05:23"},{id:3,name:"Carol Davis",status:"available",currentCall:null},{id:4,name:"David Wilson",status:"away",currentCall:null}]),$=S(()=>b.value?u.value.filter(o=>o.name.toLowerCase().includes(b.value.toLowerCase())||o.extension.includes(b.value)):u.value),we=S(()=>u.value.filter(o=>o.status==="available")),x=()=>{_("update:modelValue",null),be()},be=()=>{d.value={phone:"0741821113",contact:null,callerId:"",recordCall:!0,autoAnswer:!1},v.value={phone:"",agent:null,queue:null,warmTransfer:!0},w.value=null,D.value=!1,k.value="number"},ye=o=>{d.value.phone+=o},Z=o=>{o&&(d.value.phone=o)},ee=async()=>{if(d.value.phone){P.value=!0;try{await I.callClient(d.value.phone),g.success(`Calling ${d.value.phone}`),_("call-made",d.value),x()}catch{g.error("Failed to make call")}finally{P.value=!1}}},he=o=>{w.value=o},xe=async()=>{if(w.value){P.value=!0;try{await I.makeCall(w.value.extension),g.success(`Calling ${w.value.name}`),_("agent-called",w.value),x()}catch{g.error("Failed to call agent")}finally{P.value=!1}}},Ve=async()=>{h.value=!0;try{let o="";if(k.value==="number")o=v.value.phone;else if(k.value==="agent"){const e=u.value.find(m=>m.id===v.value.agent);o=(e==null?void 0:e.extension)||""}else k.value==="queue"&&(o=`queue:${v.value.queue}`);await I.transferCall(o),g.success(`Call transferred to ${o}`),_("call-transferred",{target:o,warmTransfer:v.value.warmTransfer}),x()}catch{g.error("Failed to transfer call")}finally{h.value=!1}},De=async()=>{E.value=!0;try{await I.fetchQueueStatus(),g.success("Queue data refreshed")}catch{g.error("Failed to refresh queue data")}finally{E.value=!1}},G=o=>o.split(" ").map(e=>e[0]).join("").toUpperCase(),K=o=>({available:"success",busy:"error",away:"warning",offline:"grey"})[o]||"grey",le=o=>o<30?"success":o<120?"warning":"error",j=o=>{const e=Math.floor(o/60),m=o%60;return`${e}:${m.toString().padStart(2,"0")}`};return Le(()=>{I.fetchAgentList(),I.fetchQueueStatus()}),(o,e)=>{const m=r("v-icon"),A=r("v-spacer"),C=r("v-btn"),O=r("v-card-title"),ae=r("v-text-field"),X=r("v-avatar"),te=r("v-list-item-title"),ne=r("v-list-item-subtitle"),oe=r("v-list-item"),n=r("v-autocomplete"),p=r("v-expansion-panel-title"),N=r("v-select"),M=r("v-checkbox"),F=r("v-expansion-panel-text"),Ue=r("v-expansion-panel"),Qe=r("v-expansion-panels"),Ne=r("v-form"),B=r("v-card-text"),de=r("v-card-actions"),J=r("v-card"),ce=r("v-dialog"),Me=r("v-img"),ke=r("v-chip"),We=r("v-list"),Ae=r("v-col"),qe=r("v-row"),Pe=r("v-rating"),je=r("v-data-table"),Te=r("v-tab"),Oe=r("v-tabs"),Se=r("v-window-item"),Be=r("v-window");return T(),L("div",null,[l(ce,{modelValue:R.value,"onUpdate:modelValue":e[6]||(e[6]=t=>R.value=t),"max-width":"500",persistent:"",transition:"dialog-bottom-transition"},{default:a(()=>[l(J,{class:"modern-card"},{default:a(()=>[l(O,{class:"gradient-header"},{default:a(()=>[l(m,{left:"",color:"white",size:"24"},{default:a(()=>e[17]||(e[17]=[i("mdi-phone-plus")])),_:1,__:[17]}),e[19]||(e[19]=c("span",{class:"text-h5 font-weight-bold"},"Make New Call",-1)),l(A),l(C,{icon:"",onClick:x,color:"white"},{default:a(()=>[l(m,null,{default:a(()=>e[18]||(e[18]=[i("mdi-close")])),_:1,__:[18]})]),_:1})]),_:1,__:[19]}),l(B,{class:"pa-6"},{default:a(()=>[l(Ne,{ref:"newCallFormRef",onSubmit:Ee(ee,["prevent"])},{default:a(()=>[c("div",Ke,[l(ae,{modelValue:d.value.phone,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value.phone=t),label:"Phone Number",placeholder:"+1 (555) 123-4567",variant:"outlined","prepend-inner-icon":"mdi-phone",rules:H,class:"modern-input","hide-details":"auto"},null,8,["modelValue"])]),c("div",Xe,[l(n,{modelValue:d.value.contact,"onUpdate:modelValue":[e[1]||(e[1]=t=>d.value.contact=t),Z],items:se.value,"item-title":"name","item-value":"phone",label:"Or select from contacts",variant:"outlined","prepend-inner-icon":"mdi-account-search",clearable:"",class:"modern-input"},{item:a(({props:t,item:V})=>[l(oe,$e(Fe(t)),{prepend:a(()=>[l(X,{size:"40",color:"primary"},{default:a(()=>[c("span",Ye,f(G(V.raw.name)),1)]),_:2},1024)]),default:a(()=>[l(te,null,{default:a(()=>[i(f(V.raw.name),1)]),_:2},1024),l(ne,null,{default:a(()=>[i(f(V.raw.phone),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),c("div",Ze,[l(C,{icon:"",color:"grey",variant:"outlined",class:"mx-2"},{default:a(()=>[l(m,null,{default:a(()=>e[20]||(e[20]=[i("mdi-microphone-off")])),_:1,__:[20]})]),_:1}),l(C,{icon:"",color:"red",variant:"outlined",class:"mx-2"},{default:a(()=>[l(m,null,{default:a(()=>e[21]||(e[21]=[i("mdi-phone-hangup")])),_:1,__:[21]})]),_:1})]),l(Qe,{class:"mb-4",variant:"accordion"},{default:a(()=>[l(Ue,null,{default:a(()=>[l(p,null,{default:a(()=>[l(m,{left:""},{default:a(()=>e[22]||(e[22]=[i("mdi-cog")])),_:1,__:[22]}),e[23]||(e[23]=i(" Advanced Options "))]),_:1,__:[23]}),l(F,null,{default:a(()=>[c("div",el,[l(N,{modelValue:d.value.callerId,"onUpdate:modelValue":e[2]||(e[2]=t=>d.value.callerId=t),items:ue.value,label:"Caller ID",variant:"outlined","prepend-inner-icon":"mdi-card-account-phone"},null,8,["modelValue","items"]),l(M,{modelValue:d.value.recordCall,"onUpdate:modelValue":e[3]||(e[3]=t=>d.value.recordCall=t),label:"Record this call",color:"primary"},null,8,["modelValue"]),l(M,{modelValue:d.value.autoAnswer,"onUpdate:modelValue":e[4]||(e[4]=t=>d.value.autoAnswer=t),label:"Auto-answer when connected",color:"primary"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),D.value?(T(),L("div",ll,[c("div",al,[(T(),L(ve,null,me(ie,t=>l(C,{key:t.digit,onClick:V=>ye(t.digit),class:"dialpad-btn",size:"large",variant:"outlined"},{default:a(()=>[c("div",tl,[c("div",nl,f(t.digit),1),c("div",ol,f(t.letters),1)])]),_:2},1032,["onClick"])),64))])])):ze("",!0),l(C,{onClick:e[5]||(e[5]=t=>D.value=!D.value),variant:"text",color:"primary",class:"mb-4"},{default:a(()=>[l(m,{left:""},{default:a(()=>[i(f(D.value?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1}),i(" "+f(D.value?"Hide":"Show")+" Dialpad ",1)]),_:1})]),_:1},512)]),_:1}),l(de,{class:"pa-6 pt-0"},{default:a(()=>[l(C,{color:"grey",variant:"outlined",onClick:x,class:"mr-3"},{default:a(()=>e[24]||(e[24]=[i(" Cancel ")])),_:1,__:[24]}),l(A),l(C,{color:"primary",variant:"elevated",onClick:ee,disabled:!d.value.phone,loading:P.value,size:"large",class:"px-8"},{default:a(()=>[l(m,{left:""},{default:a(()=>e[25]||(e[25]=[i("mdi-phone")])),_:1,__:[25]}),e[26]||(e[26]=i(" Call Now "))]),_:1,__:[26]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ce,{modelValue:U.value,"onUpdate:modelValue":e[8]||(e[8]=t=>U.value=t),"max-width":"600",transition:"dialog-bottom-transition"},{default:a(()=>[l(J,{class:"modern-card"},{default:a(()=>[l(O,{class:"gradient-header"},{default:a(()=>[l(m,{left:"",color:"white",size:"24"},{default:a(()=>e[27]||(e[27]=[i("mdi-account-voice")])),_:1,__:[27]}),e[29]||(e[29]=c("span",{class:"text-h5 font-weight-bold"},"Call Agent",-1)),l(A),l(C,{icon:"",onClick:x,color:"white"},{default:a(()=>[l(m,null,{default:a(()=>e[28]||(e[28]=[i("mdi-close")])),_:1,__:[28]})]),_:1})]),_:1,__:[29]}),l(B,{class:"pa-6"},{default:a(()=>[c("div",il,[l(ae,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=t=>b.value=t),label:"Search agents...",variant:"outlined","prepend-inner-icon":"mdi-magnify",clearable:"",class:"mb-4"},null,8,["modelValue"])]),l(We,{class:"agent-list"},{default:a(()=>[(T(!0),L(ve,null,me($.value,t=>{var V;return T(),fe(oe,{key:t.id,onClick:hl=>he(t),class:Ie([{"selected-agent":((V=w.value)==null?void 0:V.id)===t.id},"agent-item mb-2"])},{prepend:a(()=>[l(X,{size:"48",color:K(t.status)},{default:a(()=>[t.avatar?(T(),fe(Me,{key:0,src:t.avatar},null,8,["src"])):(T(),L("span",sl,f(G(t.name)),1))]),_:2},1032,["color"])]),append:a(()=>[c("div",rl,[e[30]||(e[30]=c("div",{class:"text-caption"},"Calls Today",-1)),c("div",dl,f(t.callsToday),1)])]),default:a(()=>[l(te,{class:"font-weight-medium"},{default:a(()=>[i(f(t.name),1)]),_:2},1024),l(ne,null,{default:a(()=>[c("div",ul,[l(ke,{color:K(t.status),size:"x-small",class:"mr-2"},{default:a(()=>[i(f(t.status),1)]),_:2},1032,["color"]),c("span",null,"Ext: "+f(t.extension),1)])]),_:2},1024)]),_:2},1032,["onClick","class"])}),128))]),_:1})]),_:1}),l(de,{class:"pa-6 pt-0"},{default:a(()=>[l(C,{color:"grey",variant:"outlined",onClick:x},{default:a(()=>e[31]||(e[31]=[i(" Cancel ")])),_:1,__:[31]}),l(A),l(C,{color:"primary",variant:"elevated",onClick:xe,disabled:!w.value,loading:P.value,size:"large",class:"px-8"},{default:a(()=>[l(m,{left:""},{default:a(()=>e[32]||(e[32]=[i("mdi-phone")])),_:1,__:[32]}),e[33]||(e[33]=i(" Call Agent "))]),_:1,__:[33]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ce,{modelValue:Q.value,"onUpdate:modelValue":e[9]||(e[9]=t=>Q.value=t),"max-width":"800",transition:"dialog-bottom-transition"},{default:a(()=>[l(J,{class:"modern-card"},{default:a(()=>[l(O,{class:"gradient-header"},{default:a(()=>[l(m,{left:"",color:"white",size:"24"},{default:a(()=>e[34]||(e[34]=[i("mdi-account-multiple-check")])),_:1,__:[34]}),e[36]||(e[36]=c("span",{class:"text-h5 font-weight-bold"},"Queue Dashboard",-1)),l(A),l(C,{icon:"",onClick:x,color:"white"},{default:a(()=>[l(m,null,{default:a(()=>e[35]||(e[35]=[i("mdi-close")])),_:1,__:[35]})]),_:1})]),_:1,__:[36]}),l(B,{class:"pa-6"},{default:a(()=>[l(qe,{class:"mb-6"},{default:a(()=>[(T(!0),L(ve,null,me(pe.value,t=>(T(),fe(Ae,{cols:"12",md:"3",key:t.title},{default:a(()=>[l(J,{class:"stat-card",color:t.color,variant:"tonal"},{default:a(()=>[l(B,{class:"text-center pa-4"},{default:a(()=>[l(m,{color:t.color,size:"40",class:"mb-2"},{default:a(()=>[i(f(t.icon),1)]),_:2},1032,["color"]),c("div",{class:Ie(["text-h4 font-weight-bold",`${t.color}--text`])},f(t.value),3),c("div",cl,f(t.title),1)]),_:2},1024)]),_:2},1032,["color"])]),_:2},1024))),128))]),_:1}),l(J,{class:"queue-card mb-4",variant:"outlined"},{default:a(()=>[l(O,{class:"d-flex align-center"},{default:a(()=>[l(m,{left:"",color:"primary"},{default:a(()=>e[37]||(e[37]=[i("mdi-clock-outline")])),_:1,__:[37]}),e[40]||(e[40]=i(" Current Queue ")),l(A),l(ke,{color:"primary",size:"small"},{default:a(()=>[e[39]||(e[39]=i(" Live Updates ")),l(m,{right:"",size:"16",class:"ml-1 animate-pulse"},{default:a(()=>e[38]||(e[38]=[i("mdi-circle")])),_:1,__:[38]})]),_:1,__:[39]})]),_:1,__:[40]}),l(B,null,{default:a(()=>[l(je,{headers:_e,items:ge.value,"items-per-page":5,class:"queue-table",density:"comfortable"},{"item.waitTime":a(({item:t})=>[l(ke,{color:le(t.waitTime),size:"small"},{default:a(()=>[i(f(j(t.waitTime)),1)]),_:2},1032,["color"])]),"item.priority":a(({item:t})=>[l(Pe,{"model-value":t.priority,color:"orange",size:"small",readonly:"",density:"compact"},null,8,["model-value"])]),_:1},8,["items"])]),_:1})]),_:1}),l(J,{variant:"outlined"},{default:a(()=>[l(O,null,{default:a(()=>[l(m,{left:"",color:"success"},{default:a(()=>e[41]||(e[41]=[i("mdi-account-group")])),_:1,__:[41]}),e[42]||(e[42]=i(" Agent Status "))]),_:1,__:[42]}),l(B,null,{default:a(()=>[l(qe,null,{default:a(()=>[(T(!0),L(ve,null,me(Ce.value,t=>(T(),fe(Ae,{cols:"12",sm:"6",md:"4",key:t.id},{default:a(()=>[l(J,{class:"agent-status-card",variant:"outlined"},{default:a(()=>[l(B,{class:"pa-3"},{default:a(()=>[c("div",vl,[l(X,{size:"32",color:K(t.status),class:"mr-3"},{default:a(()=>[c("span",ml,f(G(t.name)),1)]),_:2},1032,["color"]),c("div",fl,[c("div",pl,f(t.name),1),c("div",_l,f(t.status),1)]),t.currentCall?(T(),L("div",gl,[e[43]||(e[43]=c("div",{class:"text-caption"},"On Call",-1)),c("div",Cl,f(t.callDuration),1)])):ze("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),l(de,{class:"pa-6 pt-0"},{default:a(()=>[l(C,{color:"primary",variant:"outlined",onClick:De,loading:E.value},{default:a(()=>[l(m,{left:""},{default:a(()=>e[44]||(e[44]=[i("mdi-refresh")])),_:1,__:[44]}),e[45]||(e[45]=i(" Refresh "))]),_:1,__:[45]},8,["loading"]),l(A),l(C,{color:"primary",variant:"elevated",onClick:x},{default:a(()=>e[46]||(e[46]=[i(" Close ")])),_:1,__:[46]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ce,{modelValue:z.value,"onUpdate:modelValue":e[16]||(e[16]=t=>z.value=t),"max-width":"500",transition:"dialog-bottom-transition"},{default:a(()=>[l(J,{class:"modern-card"},{default:a(()=>[l(O,{class:"gradient-header"},{default:a(()=>[l(m,{left:"",color:"white",size:"24"},{default:a(()=>e[47]||(e[47]=[i("mdi-phone-forward")])),_:1,__:[47]}),e[49]||(e[49]=c("span",{class:"text-h5 font-weight-bold"},"Transfer Call",-1)),l(A),l(C,{icon:"",onClick:x,color:"white"},{default:a(()=>[l(m,null,{default:a(()=>e[48]||(e[48]=[i("mdi-close")])),_:1,__:[48]})]),_:1})]),_:1,__:[49]}),l(B,{class:"pa-6"},{default:a(()=>[l(Oe,{modelValue:k.value,"onUpdate:modelValue":e[10]||(e[10]=t=>k.value=t),class:"mb-4"},{default:a(()=>[l(Te,{value:"number"},{default:a(()=>e[50]||(e[50]=[i("Phone Number")])),_:1,__:[50]}),l(Te,{value:"agent"},{default:a(()=>e[51]||(e[51]=[i("Agent")])),_:1,__:[51]}),l(Te,{value:"queue"},{default:a(()=>e[52]||(e[52]=[i("Queue")])),_:1,__:[52]})]),_:1},8,["modelValue"]),l(Be,{modelValue:k.value,"onUpdate:modelValue":e[14]||(e[14]=t=>k.value=t)},{default:a(()=>[l(Se,{value:"number"},{default:a(()=>[l(ae,{modelValue:v.value.phone,"onUpdate:modelValue":e[11]||(e[11]=t=>v.value.phone=t),label:"Transfer to Phone Number",variant:"outlined","prepend-inner-icon":"mdi-phone",rules:H},null,8,["modelValue"])]),_:1}),l(Se,{value:"agent"},{default:a(()=>[l(N,{modelValue:v.value.agent,"onUpdate:modelValue":e[12]||(e[12]=t=>v.value.agent=t),items:we.value,"item-title":"name","item-value":"id",label:"Select Agent",variant:"outlined","prepend-inner-icon":"mdi-account"},{item:a(({props:t,item:V})=>[l(oe,$e(Fe(t)),{prepend:a(()=>[l(X,{size:"32",color:K(V.raw.status)},{default:a(()=>[c("span",wl,f(G(V.raw.name)),1)]),_:2},1032,["color"])]),default:a(()=>[l(te,null,{default:a(()=>[i(f(V.raw.name),1)]),_:2},1024),l(ne,null,{default:a(()=>[i(f(V.raw.status)+" - Ext: "+f(V.raw.extension),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1}),l(Se,{value:"queue"},{default:a(()=>[l(N,{modelValue:v.value.queue,"onUpdate:modelValue":e[13]||(e[13]=t=>v.value.queue=t),items:re.value,"item-title":"name","item-value":"id",label:"Select Queue",variant:"outlined","prepend-inner-icon":"mdi-account-multiple"},null,8,["modelValue","items"])]),_:1})]),_:1},8,["modelValue"]),l(M,{modelValue:v.value.warmTransfer,"onUpdate:modelValue":e[15]||(e[15]=t=>v.value.warmTransfer=t),label:"Warm transfer (stay on call until connected)",color:"primary",class:"mt-4"},null,8,["modelValue"])]),_:1}),l(de,{class:"pa-6 pt-0"},{default:a(()=>[l(C,{color:"grey",variant:"outlined",onClick:x},{default:a(()=>e[53]||(e[53]=[i(" Cancel ")])),_:1,__:[53]}),l(A),l(C,{color:"primary",variant:"elevated",onClick:Ve,loading:h.value,size:"large",class:"px-8"},{default:a(()=>[l(m,{left:""},{default:a(()=>e[54]||(e[54]=[i("mdi-phone-forward")])),_:1,__:[54]}),e[55]||(e[55]=i(" Transfer "))]),_:1,__:[55]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},yl=He(bl,[["__scopeId","data-v-ff3a4111"]]),Tl=Object.freeze(Object.defineProperty({__proto__:null,default:yl},Symbol.toStringTag,{value:"Module"}));export{yl as C,Tl as a,Ge as u};
