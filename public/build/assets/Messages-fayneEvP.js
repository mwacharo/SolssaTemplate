import{E as I,r as g,j as k,k as N,s as V,c as H,o as d,w as W,a as s,d as c,e as j,f as $,A as w,B as S,C as q,F,g as U,n as E,t as m,y as P}from"./app-B4TPmpLH.js";import{_ as z}from"./AppLayout-CGonQBwQ.js";import{n as x}from"./toast-DJ-J4my4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./webrtc-V5UVbTsM.js";import"./africastalking-Cami3awU.js";import"./IncomingCallDialog-BkSGTouw.js";/* empty css                                                                           */const O=I("messages",()=>{const n=g([]),l=g(!1),u=g(null),p=[{id:1,sender:{name:"John Doe",email:"john.doe@example.com"},subject:"Project Update - Q4 Progress",preview:"Hi team, I wanted to share the latest updates on our Q4 progress...",content:`Hi team,

I wanted to share the latest updates on our Q4 progress. We've made significant strides in several key areas:

1. Development milestone reached ahead of schedule
2. User testing feedback has been overwhelmingly positive
3. Budget tracking shows we're on target

Please review the attached documents and let me know if you have any questions.

Best regards,
John`,timestamp:Date.now()-2*60*60*1e3,read:!1,favorite:!1,tags:["work","urgent"]},{id:2,sender:{name:"Sarah Wilson",email:"sarah.wilson@example.com"},subject:"Meeting Reminder: Weekly Sync",preview:"Just a friendly reminder about our weekly sync meeting scheduled for tomorrow...",content:`Hi everyone,

Just a friendly reminder about our weekly sync meeting scheduled for tomorrow at 10 AM.

Agenda:
- Review last week's deliverables
- Discuss upcoming deadlines
- Address any blockers

Please come prepared with your status updates.

Thanks,
Sarah`,timestamp:Date.now()-5*60*60*1e3,read:!0,favorite:!0,tags:["meeting"]},{id:3,sender:{name:"Marketing Team",email:"marketing@example.com"},subject:"New Campaign Launch Success",preview:"Great news! Our latest marketing campaign has exceeded expectations...",content:`Team,

Great news! Our latest marketing campaign has exceeded expectations with a 25% increase in engagement and 15% boost in conversions.

Key metrics:
- Reach: 100K+ users
- Engagement rate: 8.5%
- Conversion rate: 3.2%
- ROI: 150%

Congratulations to everyone involved!

Marketing Team`,timestamp:Date.now()-24*60*60*1e3,read:!0,favorite:!1,tags:["marketing","success"]},{id:4,sender:{name:"IT Support",email:"support@example.com"},subject:"System Maintenance Scheduled",preview:"Please be aware that we have scheduled system maintenance for this weekend...",content:`Dear Users,

Please be aware that we have scheduled system maintenance for this weekend (Saturday, 2:00 AM - 6:00 AM).

During this time:
- Email services may be temporarily unavailable
- File sharing systems will be offline
- Database backups will be performed

We apologize for any inconvenience and appreciate your patience.

IT Support Team`,timestamp:Date.now()-2*24*60*60*1e3,read:!1,favorite:!1,tags:["maintenance","system"]},{id:5,sender:{name:"HR Department",email:"hr@example.com"},subject:"Employee Benefits Update",preview:"We are excited to announce some improvements to our employee benefits package...",content:`Dear Team,

We are excited to announce some improvements to our employee benefits package effective next month:

New Benefits:
- Enhanced health insurance coverage
- Increased vacation days
- Professional development budget
- Flexible working arrangements

Please review the updated benefits handbook and contact HR with any questions.

Best regards,
HR Department`,timestamp:Date.now()-3*24*60*60*1e3,read:!0,favorite:!0,tags:["hr","benefits"]}],r=k(()=>n.value.filter(e=>!e.read).length),f=k(()=>n.value.filter(e=>e.favorite)),b=k(()=>{const e={};return n.value.forEach(t=>{t.tags.forEach(a=>{e[a]||(e[a]=[]),e[a].push(t)})}),e}),i=async()=>{l.value=!0,u.value=null;try{await new Promise(e=>setTimeout(e,1e3)),n.value=[...p].sort((e,t)=>t.timestamp-e.timestamp)}catch(e){u.value="Failed to fetch messages",console.error("Error fetching messages:",e)}finally{l.value=!1}},M=async e=>{l.value=!0,u.value=null;try{await new Promise(a=>setTimeout(a,500));const t={id:n.value.length+1,sender:{name:"You",email:"you@example.com"},subject:e.subject,preview:e.content.substring(0,50)+"...",content:e.content,timestamp:Date.now(),read:!0,favorite:!1,tags:[]};n.value.unshift(t)}catch(t){throw u.value="Failed to send message",t}finally{l.value=!1}},D=e=>{const t=n.value.find(a=>a.id===e);t&&(t.read=!0)},y=e=>{const t=n.value.find(a=>a.id===e);t&&(t.read=!1)},_=e=>{const t=n.value.find(a=>a.id===e);t&&(t.favorite=!t.favorite)},h=e=>{const t=n.value.findIndex(a=>a.id===e);t>-1&&n.value.splice(t,1)},T=(e,t)=>{const a=n.value.find(v=>v.id===e);a&&!a.tags.includes(t)&&a.tags.push(t)},L=(e,t)=>{const a=n.value.find(v=>v.id===e);if(a){const v=a.tags.indexOf(t);v>-1&&a.tags.splice(v,1)}},A=e=>{if(!e)return n.value;const t=e.toLowerCase();return n.value.filter(a=>a.subject.toLowerCase().includes(t)||a.sender.name.toLowerCase().includes(t)||a.content.toLowerCase().includes(t)||a.tags.some(v=>v.toLowerCase().includes(t)))},B=e=>n.value.find(t=>t.id===e),R=()=>{n.value.forEach(e=>{e.read=!0})},C=e=>{n.value=n.value.filter(t=>!e.includes(t.id))},o=k(()=>({total:n.value.length,unread:r.value,favorites:f.value.length,tags:Object.keys(b.value).length}));return{messages:n,loading:l,error:u,unreadCount:r,favoriteMessages:f,messagesByTag:b,getMessageStats:o,fetchMessages:i,sendMessage:M,markAsRead:D,markAsUnread:y,toggleFavorite:_,deleteMessage:h,addTag:T,removeTag:L,searchMessages:A,getMessageById:B,markAllAsRead:R,deleteMultipleMessages:C}}),J={class:"max-w-6xl mx-auto p-6"},Q={class:"bg-white rounded-lg shadow-sm border"},G={class:"p-4 border-b bg-gray-50"},K={class:"flex gap-4"},Y={class:"flex-1"},X={class:"divide-y"},Z={key:0,class:"p-8 text-center text-gray-500"},ee={key:1,class:"p-8 text-center text-gray-500"},te=["onClick"],se={class:"flex items-start gap-4"},ae={class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold"},oe={class:"flex-1 min-w-0"},ne={class:"flex items-center justify-between mb-1"},re={class:"text-sm font-semibold text-gray-900 truncate"},le={class:"text-xs text-gray-500"},ie={class:"text-sm font-medium text-gray-900 mb-1"},de={class:"text-sm text-gray-600 truncate"},ue={key:0,class:"flex gap-1 mt-2"},ce={class:"flex items-center gap-2"},me={key:0,class:"w-2 h-2 bg-blue-600 rounded-full"},ge=["onClick"],ve={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},pe={class:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden"},fe={class:"p-6 border-b"},be={class:"flex items-center justify-between"},ye={class:"text-xl font-bold text-gray-900"},he={class:"mt-2 text-sm text-gray-600"},we={class:"text-sm text-gray-600"},xe={class:"p-6 overflow-y-auto max-h-96"},ke={class:"prose max-w-none"},Me={class:"p-6 border-t bg-gray-50 flex gap-3"},_e={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Ce={class:"bg-white rounded-lg max-w-2xl w-full"},je={class:"space-y-4"},Ue={__name:"Messages",setup(n){const l=O(),u=g(""),p=g("all"),r=g(null),f=g(!1),b=g(!1),i=g({to:"",subject:"",content:""}),M=k(()=>{let o=l.messages;if(u.value){const e=u.value.toLowerCase();o=o.filter(t=>t.subject.toLowerCase().includes(e)||t.sender.name.toLowerCase().includes(e)||t.preview.toLowerCase().includes(e))}return p.value==="read"?o=o.filter(e=>e.read):p.value==="unread"&&(o=o.filter(e=>!e.read)),o}),D=o=>{r.value=o,o.read||l.markAsRead(o.id)},y=()=>{r.value=null},_=()=>{f.value=!0,i.value={to:"",subject:"",content:""}},h=()=>{f.value=!1,i.value={to:"",subject:"",content:""}},T=async()=>{try{await l.sendMessage(i.value),x("Message sent successfully!","success"),h()}catch{x("Failed to send message","error")}},L=()=>{i.value={to:r.value.sender.email,subject:`Re: ${r.value.subject}`,content:""},y(),_()},A=o=>{l.markAsRead(o),x("Message marked as read","success")},B=o=>{confirm("Are you sure you want to delete this message?")&&(l.deleteMessage(o),x("Message deleted","success"),y())},R=o=>{l.toggleFavorite(o)},C=o=>{const e=new Date(o),a=new Date-e;return a<24*60*60*1e3?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):a<7*24*60*60*1e3?e.toLocaleDateString([],{weekday:"short"}):e.toLocaleDateString([],{month:"short",day:"numeric"})};return N(async()=>{b.value=!0;try{await l.fetchMessages()}catch{x("Failed to load messages","error")}finally{b.value=!1}}),V(u,()=>{}),(o,e)=>(d(),H(z,{title:"Messages"},{default:W(()=>[s("div",J,[s("div",{class:"flex justify-between items-center mb-6"},[e[8]||(e[8]=s("h1",{class:"text-3xl font-bold text-gray-900"},"Messages",-1)),s("button",{onClick:_,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors"},e[7]||(e[7]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),$(" New Message ")]))]),s("div",Q,[s("div",G,[s("div",K,[s("div",Y,[w(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),type:"text",placeholder:"Search messages...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[S,u.value]])]),w(s("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>p.value=t),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},e[9]||(e[9]=[s("option",{value:"all"},"All Messages",-1),s("option",{value:"unread"},"Unread",-1),s("option",{value:"read"},"Read",-1)]),512),[[q,p.value]])])]),s("div",X,[b.value?(d(),c("div",Z," Loading messages... ")):M.value.length===0?(d(),c("div",ee," No messages found ")):(d(!0),c(F,{key:2},U(M.value,t=>(d(),c("div",{key:t.id,class:E(["p-4 hover:bg-gray-50 cursor-pointer transition-colors",{"bg-blue-50":!t.read}]),onClick:a=>D(t)},[s("div",se,[s("div",ae,m(t.sender.name.charAt(0).toUpperCase()),1),s("div",oe,[s("div",ne,[s("h3",re,m(t.sender.name),1),s("span",le,m(C(t.timestamp)),1)]),s("p",ie,m(t.subject),1),s("p",de,m(t.preview),1),t.tags.length?(d(),c("div",ue,[(d(!0),c(F,null,U(t.tags,a=>(d(),c("span",{key:a,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},m(a),1))),128))])):j("",!0)]),s("div",ce,[t.read?j("",!0):(d(),c("div",me)),s("button",{onClick:P(a=>R(t.id),["stop"]),class:"text-gray-400 hover:text-yellow-500 transition-colors"},[(d(),c("svg",{class:E(["w-4 h-4",{"text-yellow-500 fill-current":t.favorite}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e[10]||(e[10]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},null,-1)]),2))],8,ge)])])],10,te))),128))])])]),r.value?(d(),c("div",ve,[s("div",pe,[s("div",fe,[s("div",be,[s("h2",ye,m(r.value.subject),1),s("button",{onClick:y,class:"text-gray-400 hover:text-gray-600"},e[11]||(e[11]=[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),s("div",he," From: "+m(r.value.sender.name)+" <"+m(r.value.sender.email)+"> ",1),s("div",we,m(C(r.value.timestamp)),1)]),s("div",xe,[s("div",ke,m(r.value.content),1)]),s("div",Me,[s("button",{onClick:L,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors"}," Reply "),s("button",{onClick:e[2]||(e[2]=t=>A(r.value.id)),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"}," Mark as Read "),s("button",{onClick:e[3]||(e[3]=t=>B(r.value.id)),class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors"}," Delete ")])])])):j("",!0),f.value?(d(),c("div",_e,[s("div",Ce,[s("div",{class:"p-6 border-b"},[s("div",{class:"flex items-center justify-between"},[e[13]||(e[13]=s("h2",{class:"text-xl font-bold text-gray-900"},"New Message",-1)),s("button",{onClick:h,class:"text-gray-400 hover:text-gray-600"},e[12]||(e[12]=[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),s("form",{onSubmit:P(T,["prevent"]),class:"p-6"},[s("div",je,[s("div",null,[e[14]||(e[14]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"To",-1)),w(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>i.value.to=t),type:"email",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"recipient@example.com"},null,512),[[S,i.value.to]])]),s("div",null,[e[15]||(e[15]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Subject",-1)),w(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>i.value.subject=t),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Message subject"},null,512),[[S,i.value.subject]])]),s("div",null,[e[16]||(e[16]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Message",-1)),w(s("textarea",{"onUpdate:modelValue":e[6]||(e[6]=t=>i.value.content=t),rows:"6",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Type your message here..."},null,512),[[S,i.value.content]])])]),s("div",{class:"mt-6 flex gap-3"},[e[17]||(e[17]=s("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors"}," Send Message ",-1)),s("button",{type:"button",onClick:h,class:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-6 py-2 rounded-lg transition-colors"}," Cancel ")])],32)])])):j("",!0)]),_:1}))}};export{Ue as default};
