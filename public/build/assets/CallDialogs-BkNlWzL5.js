import{E as Re,r as i,j as S,i as W,k as He,l as u,d as P,o as V,b as l,w as a,a as c,f as s,y as Ge,e as ze,p as Ie,q as Ue,t as _,F as de,g as ce,c as ve,n as Qe}from"./app-CFUbu3JD.js";import{u as Ke}from"./webrtc-X7Q1rolP.js";import{n as f}from"./toast-gtGkYRMD.js";import{_ as Xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ye=Re("callCenter",()=>{const F=Ke(),Y=i(!1),A=i(null),b=i(null),g=i(null),H=i([]),Q=i(!1),N=i(null),$=i(0),r=i(!1),v=i(!1),j=i(80),h=i(!1),L=i(null),D=i(""),y=i(null),w=i(null),k=i(!1),G=i({name:"",phone:"",email:"",company:""}),Z=i({totalWaiting:0,averageWaitTime:0,agentsAvailable:0,agentsOnCall:0}),te=i("available"),ne=i([]),d=S(()=>F.afClient),E=S(()=>F.incomingCall),me=S(()=>F.incomingCallDialog),fe=S(()=>F.connection_active),pe=S(()=>y.value!==null),_e=S(()=>{const n=Math.floor($.value/60),p=$.value%60;return`${n.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`});function I(n){console.log(`[Call Center]: ${n}`)}function ge(n){F.initializeAfClient(n)}function oe(n){try{if(console.log(`Calling ${n} from System...`),!d.value){console.error("AfricasTalking client is not initialized."),f.error("AfricasTalking client is not initialized.");return}d.value.call(n),console.log("Call initiated successfully."),f.success("Call started."),h.value=!0,g.value={id:Date.now(),phoneNumber:n,direction:"outbound",status:"connecting",startTime:new Date},d.value.on("afClienting",()=>{I("afClient is in progress (calling)...")}),d.value.on("callaccepted",()=>{console.log("callaccepted"),f.success("Call accepted!"),I("Call accepted (bridged between caller and callee)."),Q.value=!0,N.value=Date.now(),le()}),d.value.on("hangup",p=>{I(`Call hung up (${p.code} - ${p.reason}).`),f.error(`Call ended: ${p.reason}`),h.value=!1,q()}),d.value.on("mute",()=>{I("Call muted."),f.info("Call muted."),v.value=!0}),d.value.on("unmute",()=>{I("Call unmuted."),f.info("Call unmuted."),v.value=!1}),d.value.on("hold",()=>{I("Call on hold."),f.info("Call on hold."),r.value=!0}),d.value.on("unhold",()=>{I("Call resumed from hold."),f.info("Call resumed from hold."),r.value=!1})}catch(p){console.error("Call initiation error:",p),f.error("Call failed: "+p.message)}}function T(){E.value&&d.value&&(d.value.answer(),Q.value=!0,N.value=Date.now(),le())}function Ce(n){if(h.value=!0,L.value=n,console.log("Selected agent:",n),D.value=n.phone_number,console.log("Agent phone number:",D.value),!d.value){console.error("AfricasTalking client is not initialized."),f.error("AfricasTalking client is not initialized.");return}try{console.log("Attempting to call agent..."),d.value.call(D.value),console.log("Call initiated successfully."),f.success("Call initiated successfully."),g.value={id:Date.now(),phoneNumber:D.value,direction:"outbound",status:"connecting",startTime:new Date,agent:n}}catch(p){console.error("Error while calling agent:",p),f.error("Failed to call agent: "+p.message)}}function ee(){d.value&&(d.value.hangup(),console.log("call ended"),f.error("Call ended."),F.setIncomingCallDialog(!1),h.value=!1,q())}function se(){h.value&&d.value&&(v.value=!v.value,v.value?d.value.muteAudio():d.value.unmuteAudio(),console.log("Client mute property:",d.value.isAudioMuted),console.log("Our internal state:",v.value))}async function ie(n,p={}){var M,R;try{if(Y.value=!0,b.value=null,A.value=n,d.value)return oe(n),{success:!0,callId:Date.now()};const U=await W.post("/api/v1/call-center/make-call",{phoneNumber:n,...p});return g.value={id:U.data.callId||Date.now(),phoneNumber:n,direction:"outbound",status:"connecting",startTime:new Date},Q.value=!0,N.value=Date.now(),le(),U.data}catch(U){throw b.value=((R=(M=U==null?void 0:U.response)==null?void 0:M.data)==null?void 0:R.message)||"Failed to initiate call",U}finally{Y.value=!1}}async function we(){try{if(d.value&&h.value){ee();return}g.value&&(await W.post(`/api/v1/call-center/end/${g.value.id}`),H.value.unshift({...g.value,endTime:new Date,duration:$.value,status:"completed"})),q()}catch{b.value="Failed to end call",q()}}async function ye(n){try{if(d.value){ee();return}await W.post(`/api/v1/call-center/reject/${n.id}`),F.setIncomingCall(null)}catch{b.value="Failed to reject call"}}async function be(){var n,p,M,R;try{if(d.value&&h.value){r.value?(p=(n=d.value).unhold)==null||p.call(n):(R=(M=d.value).hold)==null||R.call(M);return}r.value=!r.value,await W.post(`/api/v1/call-center/hold/${g.value.id}`,{hold:r.value})}catch{r.value=!r.value,b.value="Failed to toggle hold"}}async function he(){try{if(d.value&&h.value){se();return}v.value=!v.value,await W.post(`/api/v1/call-center/mute/${g.value.id}`,{mute:v.value})}catch{v.value=!v.value,b.value="Failed to toggle mute"}}async function xe(n){try{await W.post(`/api/v1/call-center/transfer/${g.value.id}`,{targetNumber:n}),H.value.unshift({...g.value,endTime:new Date,duration:$.value,status:"transferred",transferredTo:n}),q()}catch(p){throw b.value="Failed to transfer call",p}}function le(){const n=setInterval(()=>{if(!Q.value){clearInterval(n);return}$.value=Math.floor((Date.now()-N.value)/1e3)},1e3)}function q(){g.value=null,Q.value=!1,N.value=null,$.value=0,r.value=!1,v.value=!1,h.value=!1,L.value=null}function K(){y.value="newCall",w.value=null}function Ve(){y.value="callAgent",w.value=null}function De(){y.value="queue",w.value=null}function o(){y.value="transfer"}function e(n=null){y.value="contact",w.value=n,n&&(G.value.phone=n.phoneNumber||n.callerNumber||"")}function m(n=null){y.value="sms",k.value=!0,w.value=n}function z(){y.value=null,k.value=!1,w.value=null,G.value={name:"",phone:"",email:"",company:""}}async function C(n){try{await W.post("/api/v1/call-center/agent/status",{status:n}),te.value=n}catch{b.value="Failed to update status"}}async function O(){try{const n=await W.get("/api/v1/call-center/queue/status");Z.value=n.data}catch(n){console.error("Failed to fetch queue status:",n)}}async function ae(){try{const n=await W.get("/api/v1/call-center/agents");ne.value=n.data}catch(n){console.error("Failed to fetch agent list:",n)}}function X(){const n={id:Date.now(),phoneNumber:"+1234567890",callerName:"John Doe",direction:"inbound",startTime:new Date};F.setIncomingCall(n)}return{makingCall:Y,lastCallNumber:A,callError:b,activeCall:g,callHistory:H,isCallActive:Q,callStartTime:N,callDuration:$,isOnHold:r,isMuted:v,volume:j,isCalling:h,selectedAgent:L,phone_number:D,dialogType:y,callData:w,isSmsDialog:k,contactForm:G,queueStatus:Z,agentStatus:te,agentList:ne,isDialogOpen:pe,formattedCallDuration:_e,afClient:d,incomingCall:E,incomingCallDialog:me,connection_active:fe,initializeAfClient:ge,callClient:oe,makeCall:ie,answerCall:T,endCall:we,rejectCall:ye,holdCall:be,muteCall:he,transferCall:xe,resetCallState:q,handleCall:Ce,hangupCall:ee,handleMute:se,openNewCallDialog:K,openCallAgentDialog:Ve,openQueueDialog:De,openTransferDialog:o,openContactDialog:e,openSmsDialog:m,closeDialog:z,updateAgentStatus:C,fetchQueueStatus:O,fetchAgentList:ae,simulateIncomingCall:X,logEvent:I}}),Ze={class:"mb-6"},el={class:"mb-6"},ll={class:"text-white"},al={key:0,class:"d-flex justify-center mb-6"},tl={class:"pt-4 space-y-4"},nl={key:1,class:"dialpad-container mb-4"},ol={class:"dialpad-grid"},sl={class:"text-center"},il={class:"text-h6 font-weight-bold"},ul={class:"text-caption"},rl={class:"mb-4"},dl={key:1,class:"text-white font-weight-bold"},cl={class:"d-flex align-center"},vl={class:"text-center"},ml={class:"text-h6 font-weight-bold"},fl={class:"text-body-2"},pl={class:"d-flex align-center"},_l={class:"text-white text-caption"},gl={class:"flex-grow-1"},Cl={class:"text-body-2 font-weight-medium"},wl={class:"text-caption text-grey"},yl={key:0,class:"text-right"},bl={class:"text-body-2 font-weight-bold"},hl={class:"text-white"},xl={__name:"CallDialogs",props:{modelValue:String,callData:Object},emits:["update:modelValue","call-made","call-transferred","agent-called"],setup(F,{emit:Y}){const A=Ye(),b=F,g=Y,H=S({get:()=>b.modelValue==="newCall",set:o=>g("update:modelValue",o?"newCall":null)}),Q=S({get:()=>b.modelValue==="callAgent",set:o=>g("update:modelValue",o?"callAgent":null)}),N=S({get:()=>b.modelValue==="queue",set:o=>g("update:modelValue",o?"queue":null)}),$=S({get:()=>b.modelValue==="transfer",set:o=>g("update:modelValue",o?"transfer":null)}),r=i({phone:"",contact:null,callerId:"",recordCall:!0,autoAnswer:!1}),v=i({phone:"",agent:null,queue:null,warmTransfer:!0}),j=i(!1),h=i(!1),L=i(!1),D=i(!1),y=i(""),w=i(null),k=i("number"),G=i(!1),Z=[o=>!!o||"Phone number is required"],te=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],ne=i([{name:"John Doe",phone:"+1234567890",email:"john@example.com"},{name:"Jane Smith",phone:"+1234567891",email:"jane@example.com"},{name:"Mike Johnson",phone:"+1234567892",email:"mike@example.com"}]),d=i(["+1 (555) 000-0001","+1 (555) 000-0002","+1 (555) 000-0003"]),E=i([{id:1,name:"Alice Johnson",extension:"101",status:"available",callsToday:12,avatar:null},{id:2,name:"Bob Smith",extension:"102",status:"busy",callsToday:8,avatar:null},{id:3,name:"Carol Davis",extension:"103",status:"available",callsToday:15,avatar:null},{id:4,name:"David Wilson",extension:"104",status:"away",callsToday:5,avatar:null}]),me=i([{id:1,name:"Sales Queue",waitingCount:3},{id:2,name:"Support Queue",waitingCount:7},{id:3,name:"Billing Queue",waitingCount:2}]),fe=i([{title:"Waiting",value:12,color:"warning",icon:"mdi-clock-outline"},{title:"In Progress",value:8,color:"info",icon:"mdi-phone-in-talk"},{title:"Completed",value:45,color:"success",icon:"mdi-check-circle"},{title:"Avg Wait",value:"2:30",color:"primary",icon:"mdi-timer-outline"}]),pe=[{title:"Caller",value:"caller",sortable:!1},{title:"Phone",value:"phone",sortable:!1},{title:"Wait Time",value:"waitTime",sortable:!0},{title:"Priority",value:"priority",sortable:!0},{title:"Queue",value:"queue",sortable:!1}],_e=i([{caller:"John Doe",phone:"+1234567890",waitTime:45,priority:3,queue:"Sales"},{caller:"Jane Smith",phone:"+1234567891",waitTime:120,priority:5,queue:"Support"},{caller:"Mike Wilson",phone:"+1234567892",waitTime:30,priority:2,queue:"Billing"}]),I=i([{id:1,name:"Alice Johnson",status:"available",currentCall:null},{id:2,name:"Bob Smith",status:"busy",currentCall:!0,callDuration:"05:23"},{id:3,name:"Carol Davis",status:"available",currentCall:null},{id:4,name:"David Wilson",status:"away",currentCall:null}]),ge=S(()=>y.value?E.value.filter(o=>o.name.toLowerCase().includes(y.value.toLowerCase())||o.extension.includes(y.value)):E.value),oe=S(()=>E.value.filter(o=>o.status==="available")),T=()=>{g("update:modelValue",null),Ce()},Ce=()=>{r.value={phone:"",contact:null,callerId:"",recordCall:!0,autoAnswer:!1},v.value={phone:"",agent:null,queue:null,warmTransfer:!0},w.value=null,D.value=!1,k.value="number"},ee=o=>{r.value.phone+=o},se=o=>{o&&(r.value.phone=o)},ie=async()=>{if(r.value.phone){j.value=!0;try{await A.callClient(r.value.phone),f.success(`Calling ${r.value.phone}`),G.value=!0,g("call-made",r.value),f.error("Failed to make call")}finally{j.value=!1}}},we=async()=>{try{await A.handleMute(),f.success("Call muted")}catch{f.error("Failed to mute call")}},ye=async()=>{try{await A.hangup(),f.success("Call ended")}catch{f.error("Failed to end call")}},be=o=>{w.value=o},he=async()=>{if(w.value){j.value=!0;try{await A.makeCall(w.value.extension),f.success(`Calling ${w.value.name}`),g("agent-called",w.value),T()}catch{f.error("Failed to call agent")}finally{j.value=!1}}},xe=async()=>{h.value=!0;try{let o="";if(k.value==="number")o=v.value.phone;else if(k.value==="agent"){const e=E.value.find(m=>m.id===v.value.agent);o=(e==null?void 0:e.extension)||""}else k.value==="queue"&&(o=`queue:${v.value.queue}`);await A.transferCall(o),f.success(`Call transferred to ${o}`),g("call-transferred",{target:o,warmTransfer:v.value.warmTransfer}),T()}catch{f.error("Failed to transfer call")}finally{h.value=!1}},le=async()=>{L.value=!0;try{await A.fetchQueueStatus(),f.success("Queue data refreshed")}catch{f.error("Failed to refresh queue data")}finally{L.value=!1}},q=o=>o.split(" ").map(e=>e[0]).join("").toUpperCase(),K=o=>({available:"success",busy:"error",away:"warning",offline:"grey"})[o]||"grey",Ve=o=>o<30?"success":o<120?"warning":"error",De=o=>{const e=Math.floor(o/60),m=o%60;return`${e}:${m.toString().padStart(2,"0")}`};return He(()=>{A.fetchAgentList(),A.fetchQueueStatus()}),(o,e)=>{const m=u("v-icon"),z=u("v-spacer"),C=u("v-btn"),O=u("v-card-title"),ae=u("v-text-field"),X=u("v-avatar"),n=u("v-list-item-title"),p=u("v-list-item-subtitle"),M=u("v-list-item"),R=u("v-autocomplete"),U=u("v-expansion-panel-title"),ke=u("v-select"),Te=u("v-checkbox"),Ne=u("v-expansion-panel-text"),Me=u("v-expansion-panel"),We=u("v-expansion-panels"),Pe=u("v-form"),B=u("v-card-text"),ue=u("v-card-actions"),J=u("v-card"),re=u("v-dialog"),je=u("v-img"),Se=u("v-chip"),Oe=u("v-list"),Fe=u("v-col"),$e=u("v-row"),Be=u("v-rating"),Je=u("v-data-table"),Ae=u("v-tab"),Le=u("v-tabs"),qe=u("v-window-item"),Ee=u("v-window");return V(),P("div",null,[l(re,{modelValue:H.value,"onUpdate:modelValue":e[6]||(e[6]=t=>H.value=t),"max-width":"500",persistent:"",transition:"dialog-bottom-transition"},{default:a(()=>[l(J,{class:"modern-card"},{default:a(()=>[l(O,{class:"gradient-header"},{default:a(()=>[l(m,{left:"",color:"white",size:"24"},{default:a(()=>e[17]||(e[17]=[s("mdi-phone-plus")])),_:1,__:[17]}),e[19]||(e[19]=c("span",{class:"text-h5 font-weight-bold"},"Make New Call",-1)),l(z),l(C,{icon:"",onClick:T,color:"white"},{default:a(()=>[l(m,null,{default:a(()=>e[18]||(e[18]=[s("mdi-close")])),_:1,__:[18]})]),_:1})]),_:1,__:[19]}),l(B,{class:"pa-6"},{default:a(()=>[l(Pe,{ref:"newCallFormRef",onSubmit:Ge(ie,["prevent"])},{default:a(()=>[c("div",Ze,[l(ae,{modelValue:r.value.phone,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value.phone=t),label:"Phone Number",placeholder:"+1 (555) 123-4567",variant:"outlined","prepend-inner-icon":"mdi-phone",rules:Z,class:"modern-input","hide-details":"auto"},null,8,["modelValue"])]),c("div",el,[l(R,{modelValue:r.value.contact,"onUpdate:modelValue":[e[1]||(e[1]=t=>r.value.contact=t),se],items:ne.value,"item-title":"name","item-value":"phone",label:"Or select from contacts",variant:"outlined","prepend-inner-icon":"mdi-account-search",clearable:"",class:"modern-input"},{item:a(({props:t,item:x})=>[l(M,Ie(Ue(t)),{prepend:a(()=>[l(X,{size:"40",color:"primary"},{default:a(()=>[c("span",ll,_(q(x.raw.name)),1)]),_:2},1024)]),default:a(()=>[l(n,null,{default:a(()=>[s(_(x.raw.name),1)]),_:2},1024),l(p,null,{default:a(()=>[s(_(x.raw.phone),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),G.value?(V(),P("div",al,[l(C,{icon:"",color:"grey",variant:"outlined",class:"mx-2",onClick:we},{default:a(()=>[l(m,null,{default:a(()=>e[20]||(e[20]=[s("mdi-microphone-off")])),_:1,__:[20]})]),_:1}),l(C,{icon:"",color:"red",variant:"outlined",class:"mx-2",onClick:ye},{default:a(()=>[l(m,null,{default:a(()=>e[21]||(e[21]=[s("mdi-phone-hangup")])),_:1,__:[21]})]),_:1})])):ze("",!0),l(We,{class:"mb-4",variant:"accordion"},{default:a(()=>[l(Me,null,{default:a(()=>[l(U,null,{default:a(()=>[l(m,{left:""},{default:a(()=>e[22]||(e[22]=[s("mdi-cog")])),_:1,__:[22]}),e[23]||(e[23]=s(" Advanced Options "))]),_:1,__:[23]}),l(Ne,null,{default:a(()=>[c("div",tl,[l(ke,{modelValue:r.value.callerId,"onUpdate:modelValue":e[2]||(e[2]=t=>r.value.callerId=t),items:d.value,label:"Caller ID",variant:"outlined","prepend-inner-icon":"mdi-card-account-phone"},null,8,["modelValue","items"]),l(Te,{modelValue:r.value.recordCall,"onUpdate:modelValue":e[3]||(e[3]=t=>r.value.recordCall=t),label:"Record this call",color:"primary"},null,8,["modelValue"]),l(Te,{modelValue:r.value.autoAnswer,"onUpdate:modelValue":e[4]||(e[4]=t=>r.value.autoAnswer=t),label:"Auto-answer when connected",color:"primary"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),D.value?(V(),P("div",nl,[c("div",ol,[(V(),P(de,null,ce(te,t=>l(C,{key:t.digit,onClick:x=>ee(t.digit),class:"dialpad-btn",size:"large",variant:"outlined"},{default:a(()=>[c("div",sl,[c("div",il,_(t.digit),1),c("div",ul,_(t.letters),1)])]),_:2},1032,["onClick"])),64))])])):ze("",!0),l(C,{onClick:e[5]||(e[5]=t=>D.value=!D.value),variant:"text",color:"primary",class:"mb-4"},{default:a(()=>[l(m,{left:""},{default:a(()=>[s(_(D.value?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1}),s(" "+_(D.value?"Hide":"Show")+" Dialpad ",1)]),_:1})]),_:1},512)]),_:1}),l(ue,{class:"pa-6 pt-0"},{default:a(()=>[l(C,{color:"grey",variant:"outlined",onClick:T,class:"mr-3"},{default:a(()=>e[24]||(e[24]=[s(" Cancel ")])),_:1,__:[24]}),l(z),l(C,{color:"primary",variant:"elevated",onClick:ie,disabled:!r.value.phone,loading:j.value,size:"large",class:"px-8"},{default:a(()=>[l(m,{left:""},{default:a(()=>e[25]||(e[25]=[s("mdi-phone")])),_:1,__:[25]}),e[26]||(e[26]=s(" Call Now "))]),_:1,__:[26]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(re,{modelValue:Q.value,"onUpdate:modelValue":e[8]||(e[8]=t=>Q.value=t),"max-width":"600",transition:"dialog-bottom-transition"},{default:a(()=>[l(J,{class:"modern-card"},{default:a(()=>[l(O,{class:"gradient-header"},{default:a(()=>[l(m,{left:"",color:"white",size:"24"},{default:a(()=>e[27]||(e[27]=[s("mdi-account-voice")])),_:1,__:[27]}),e[29]||(e[29]=c("span",{class:"text-h5 font-weight-bold"},"Call Agent",-1)),l(z),l(C,{icon:"",onClick:T,color:"white"},{default:a(()=>[l(m,null,{default:a(()=>e[28]||(e[28]=[s("mdi-close")])),_:1,__:[28]})]),_:1})]),_:1,__:[29]}),l(B,{class:"pa-6"},{default:a(()=>[c("div",rl,[l(ae,{modelValue:y.value,"onUpdate:modelValue":e[7]||(e[7]=t=>y.value=t),label:"Search agents...",variant:"outlined","prepend-inner-icon":"mdi-magnify",clearable:"",class:"mb-4"},null,8,["modelValue"])]),l(Oe,{class:"agent-list"},{default:a(()=>[(V(!0),P(de,null,ce(ge.value,t=>{var x;return V(),ve(M,{key:t.id,onClick:Dl=>be(t),class:Qe([{"selected-agent":((x=w.value)==null?void 0:x.id)===t.id},"agent-item mb-2"])},{prepend:a(()=>[l(X,{size:"48",color:K(t.status)},{default:a(()=>[t.avatar?(V(),ve(je,{key:0,src:t.avatar},null,8,["src"])):(V(),P("span",dl,_(q(t.name)),1))]),_:2},1032,["color"])]),append:a(()=>[c("div",vl,[e[30]||(e[30]=c("div",{class:"text-caption"},"Calls Today",-1)),c("div",ml,_(t.callsToday),1)])]),default:a(()=>[l(n,{class:"font-weight-medium"},{default:a(()=>[s(_(t.name),1)]),_:2},1024),l(p,null,{default:a(()=>[c("div",cl,[l(Se,{color:K(t.status),size:"x-small",class:"mr-2"},{default:a(()=>[s(_(t.status),1)]),_:2},1032,["color"]),c("span",null,"Ext: "+_(t.extension),1)])]),_:2},1024)]),_:2},1032,["onClick","class"])}),128))]),_:1})]),_:1}),l(ue,{class:"pa-6 pt-0"},{default:a(()=>[l(C,{color:"grey",variant:"outlined",onClick:T},{default:a(()=>e[31]||(e[31]=[s(" Cancel ")])),_:1,__:[31]}),l(z),l(C,{color:"primary",variant:"elevated",onClick:he,disabled:!w.value,loading:j.value,size:"large",class:"px-8"},{default:a(()=>[l(m,{left:""},{default:a(()=>e[32]||(e[32]=[s("mdi-phone")])),_:1,__:[32]}),e[33]||(e[33]=s(" Call Agent "))]),_:1,__:[33]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(re,{modelValue:N.value,"onUpdate:modelValue":e[9]||(e[9]=t=>N.value=t),"max-width":"800",transition:"dialog-bottom-transition"},{default:a(()=>[l(J,{class:"modern-card"},{default:a(()=>[l(O,{class:"gradient-header"},{default:a(()=>[l(m,{left:"",color:"white",size:"24"},{default:a(()=>e[34]||(e[34]=[s("mdi-account-multiple-check")])),_:1,__:[34]}),e[36]||(e[36]=c("span",{class:"text-h5 font-weight-bold"},"Queue Dashboard",-1)),l(z),l(C,{icon:"",onClick:T,color:"white"},{default:a(()=>[l(m,null,{default:a(()=>e[35]||(e[35]=[s("mdi-close")])),_:1,__:[35]})]),_:1})]),_:1,__:[36]}),l(B,{class:"pa-6"},{default:a(()=>[l($e,{class:"mb-6"},{default:a(()=>[(V(!0),P(de,null,ce(fe.value,t=>(V(),ve(Fe,{cols:"12",md:"3",key:t.title},{default:a(()=>[l(J,{class:"stat-card",color:t.color,variant:"tonal"},{default:a(()=>[l(B,{class:"text-center pa-4"},{default:a(()=>[l(m,{color:t.color,size:"40",class:"mb-2"},{default:a(()=>[s(_(t.icon),1)]),_:2},1032,["color"]),c("div",{class:Qe(["text-h4 font-weight-bold",`${t.color}--text`])},_(t.value),3),c("div",fl,_(t.title),1)]),_:2},1024)]),_:2},1032,["color"])]),_:2},1024))),128))]),_:1}),l(J,{class:"queue-card mb-4",variant:"outlined"},{default:a(()=>[l(O,{class:"d-flex align-center"},{default:a(()=>[l(m,{left:"",color:"primary"},{default:a(()=>e[37]||(e[37]=[s("mdi-clock-outline")])),_:1,__:[37]}),e[40]||(e[40]=s(" Current Queue ")),l(z),l(Se,{color:"primary",size:"small"},{default:a(()=>[e[39]||(e[39]=s(" Live Updates ")),l(m,{right:"",size:"16",class:"ml-1 animate-pulse"},{default:a(()=>e[38]||(e[38]=[s("mdi-circle")])),_:1,__:[38]})]),_:1,__:[39]})]),_:1,__:[40]}),l(B,null,{default:a(()=>[l(Je,{headers:pe,items:_e.value,"items-per-page":5,class:"queue-table",density:"comfortable"},{"item.waitTime":a(({item:t})=>[l(Se,{color:Ve(t.waitTime),size:"small"},{default:a(()=>[s(_(De(t.waitTime)),1)]),_:2},1032,["color"])]),"item.priority":a(({item:t})=>[l(Be,{"model-value":t.priority,color:"orange",size:"small",readonly:"",density:"compact"},null,8,["model-value"])]),_:1},8,["items"])]),_:1})]),_:1}),l(J,{variant:"outlined"},{default:a(()=>[l(O,null,{default:a(()=>[l(m,{left:"",color:"success"},{default:a(()=>e[41]||(e[41]=[s("mdi-account-group")])),_:1,__:[41]}),e[42]||(e[42]=s(" Agent Status "))]),_:1,__:[42]}),l(B,null,{default:a(()=>[l($e,null,{default:a(()=>[(V(!0),P(de,null,ce(I.value,t=>(V(),ve(Fe,{cols:"12",sm:"6",md:"4",key:t.id},{default:a(()=>[l(J,{class:"agent-status-card",variant:"outlined"},{default:a(()=>[l(B,{class:"pa-3"},{default:a(()=>[c("div",pl,[l(X,{size:"32",color:K(t.status),class:"mr-3"},{default:a(()=>[c("span",_l,_(q(t.name)),1)]),_:2},1032,["color"]),c("div",gl,[c("div",Cl,_(t.name),1),c("div",wl,_(t.status),1)]),t.currentCall?(V(),P("div",yl,[e[43]||(e[43]=c("div",{class:"text-caption"},"On Call",-1)),c("div",bl,_(t.callDuration),1)])):ze("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),l(ue,{class:"pa-6 pt-0"},{default:a(()=>[l(C,{color:"primary",variant:"outlined",onClick:le,loading:L.value},{default:a(()=>[l(m,{left:""},{default:a(()=>e[44]||(e[44]=[s("mdi-refresh")])),_:1,__:[44]}),e[45]||(e[45]=s(" Refresh "))]),_:1,__:[45]},8,["loading"]),l(z),l(C,{color:"primary",variant:"elevated",onClick:T},{default:a(()=>e[46]||(e[46]=[s(" Close ")])),_:1,__:[46]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(re,{modelValue:$.value,"onUpdate:modelValue":e[16]||(e[16]=t=>$.value=t),"max-width":"500",transition:"dialog-bottom-transition"},{default:a(()=>[l(J,{class:"modern-card"},{default:a(()=>[l(O,{class:"gradient-header"},{default:a(()=>[l(m,{left:"",color:"white",size:"24"},{default:a(()=>e[47]||(e[47]=[s("mdi-phone-forward")])),_:1,__:[47]}),e[49]||(e[49]=c("span",{class:"text-h5 font-weight-bold"},"Transfer Call",-1)),l(z),l(C,{icon:"",onClick:T,color:"white"},{default:a(()=>[l(m,null,{default:a(()=>e[48]||(e[48]=[s("mdi-close")])),_:1,__:[48]})]),_:1})]),_:1,__:[49]}),l(B,{class:"pa-6"},{default:a(()=>[l(Le,{modelValue:k.value,"onUpdate:modelValue":e[10]||(e[10]=t=>k.value=t),class:"mb-4"},{default:a(()=>[l(Ae,{value:"number"},{default:a(()=>e[50]||(e[50]=[s("Phone Number")])),_:1,__:[50]}),l(Ae,{value:"agent"},{default:a(()=>e[51]||(e[51]=[s("Agent")])),_:1,__:[51]}),l(Ae,{value:"queue"},{default:a(()=>e[52]||(e[52]=[s("Queue")])),_:1,__:[52]})]),_:1},8,["modelValue"]),l(Ee,{modelValue:k.value,"onUpdate:modelValue":e[14]||(e[14]=t=>k.value=t)},{default:a(()=>[l(qe,{value:"number"},{default:a(()=>[l(ae,{modelValue:v.value.phone,"onUpdate:modelValue":e[11]||(e[11]=t=>v.value.phone=t),label:"Transfer to Phone Number",variant:"outlined","prepend-inner-icon":"mdi-phone",rules:Z},null,8,["modelValue"])]),_:1}),l(qe,{value:"agent"},{default:a(()=>[l(ke,{modelValue:v.value.agent,"onUpdate:modelValue":e[12]||(e[12]=t=>v.value.agent=t),items:oe.value,"item-title":"name","item-value":"id",label:"Select Agent",variant:"outlined","prepend-inner-icon":"mdi-account"},{item:a(({props:t,item:x})=>[l(M,Ie(Ue(t)),{prepend:a(()=>[l(X,{size:"32",color:K(x.raw.status)},{default:a(()=>[c("span",hl,_(q(x.raw.name)),1)]),_:2},1032,["color"])]),default:a(()=>[l(n,null,{default:a(()=>[s(_(x.raw.name),1)]),_:2},1024),l(p,null,{default:a(()=>[s(_(x.raw.status)+" - Ext: "+_(x.raw.extension),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1}),l(qe,{value:"queue"},{default:a(()=>[l(ke,{modelValue:v.value.queue,"onUpdate:modelValue":e[13]||(e[13]=t=>v.value.queue=t),items:me.value,"item-title":"name","item-value":"id",label:"Select Queue",variant:"outlined","prepend-inner-icon":"mdi-account-multiple"},null,8,["modelValue","items"])]),_:1})]),_:1},8,["modelValue"]),l(Te,{modelValue:v.value.warmTransfer,"onUpdate:modelValue":e[15]||(e[15]=t=>v.value.warmTransfer=t),label:"Warm transfer (stay on call until connected)",color:"primary",class:"mt-4"},null,8,["modelValue"])]),_:1}),l(ue,{class:"pa-6 pt-0"},{default:a(()=>[l(C,{color:"grey",variant:"outlined",onClick:T},{default:a(()=>e[53]||(e[53]=[s(" Cancel ")])),_:1,__:[53]}),l(z),l(C,{color:"primary",variant:"elevated",onClick:xe,loading:h.value,size:"large",class:"px-8"},{default:a(()=>[l(m,{left:""},{default:a(()=>e[54]||(e[54]=[s("mdi-phone-forward")])),_:1,__:[54]}),e[55]||(e[55]=s(" Transfer "))]),_:1,__:[55]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Vl=Xe(xl,[["__scopeId","data-v-da1f26cf"]]),ql=Object.freeze(Object.defineProperty({__proto__:null,default:Vl},Symbol.toStringTag,{value:"Module"}));export{Vl as C,ql as a,Ye as u};
