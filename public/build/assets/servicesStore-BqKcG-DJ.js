import{E as n,i}from"./app-EpHsFsPD.js";const d=n("services",{state:()=>({services:[],pagination:null,loading:!1,error:null}),actions:{async fetchServices(s=1,r=15){var a,e;this.loading=!0,this.error=null;try{const t=await i.get("/api/v1/services",{params:{page:s,per_page:r}});this.services=t.data.data.data||[],this.pagination={current_page:t.data.data.current_page,last_page:t.data.data.last_page,per_page:t.data.data.per_page,total:t.data.data.total,from:t.data.data.from,to:t.data.data.to}}catch(t){this.error=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to fetch services",console.error("Fetch services error:",t)}finally{this.loading=!1}},async createService(s){var r,a;this.loading=!0,this.error=null;try{const e=await i.post("/api/v1/services",s);return this.services.unshift(e.data.data),this.pagination&&(this.pagination.total+=1),e.data}catch(e){throw this.error=((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create service",console.error("Error creating service:",e),e}finally{this.loading=!1}},async updateService(s,r){var a,e;this.loading=!0,this.error=null;try{const t=await i.put(`/api/v1/services/${s}`,r),o=this.services.findIndex(c=>c.id===s);return o!==-1&&(this.services[o]=t.data.data),t.data}catch(t){throw this.error=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to update service",console.error("Error updating service:",t),t}finally{this.loading=!1}},async deleteService(s){var r,a;this.loading=!0,this.error=null;try{await i.delete(`/api/v1/services/${s}`),this.services=this.services.filter(e=>e.id!==s),this.pagination&&(this.pagination.total-=1)}catch(e){throw this.error=((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete service",console.error("Error deleting service:",e),e}finally{this.loading=!1}},async toggleServiceStatus(s){const r=this.services.find(e=>e.id===s);if(!r)return;const a=r.is_active;r.is_active=!r.is_active;try{await this.updateService(s,{service_name:r.service_name,description:r.description,is_active:r.is_active})}catch(e){throw r.is_active=a,console.error("Error toggling service status:",e),e}},clearError(){this.error=null}}});export{d as u};
