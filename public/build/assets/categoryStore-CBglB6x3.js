import{E as g,i as o}from"./app-DqFy7JPp.js";const l=g("category",{state:()=>({categories:[],loading:!1,error:null}),getters:{getCategoryById:e=>a=>e.categories.find(t=>t.id===a),categoriesCount:e=>e.categories.length,sortedCategories:e=>[...e.categories].sort((a,t)=>a.name.localeCompare(t.name))},actions:{async fetchCategories(){var e,a;this.loading=!0,this.error=null;try{const t=await o.get("/api/v1/categories");this.categories=t.data}catch(t){throw this.error=((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.message)||"Failed to fetch categories",t}finally{this.loading=!1}},async createCategory(e){var a,t;this.loading=!0,this.error=null;try{const r=await o.post("/api/v1/categories",e);return this.categories.push(r.data),r.data}catch(r){throw this.error=((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to create category",r}finally{this.loading=!1}},async fetchCategory(e){var a,t;this.loading=!0,this.error=null;try{const r=await o.get(`/api/v1/categories/${e}`),s=this.categories.findIndex(i=>i.id===e);return s!==-1?this.categories[s]=r.data:this.categories.push(r.data),r.data}catch(r){throw this.error=((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to fetch category",r}finally{this.loading=!1}},async updateCategory(e,a){var t,r;this.loading=!0,this.error=null;try{const s=await o.put(`/api/v1/categories/${e}`,a),i=this.categories.findIndex(n=>n.id===e);return i!==-1&&(this.categories[i]=s.data),s.data}catch(s){throw this.error=((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to update category",s}finally{this.loading=!1}},async deleteCategory(e){var a,t;this.loading=!0,this.error=null;try{await o.delete(`/api/v1/categories/${e}`),this.categories=this.categories.filter(r=>r.id!==e)}catch(r){throw this.error=((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to delete category",r}finally{this.loading=!1}},clearError(){this.error=null},resetStore(){this.categories=[],this.loading=!1,this.error=null},addCategory(e){this.categories.push(e)},removeCategory(e){this.categories=this.categories.filter(a=>a.id!==e)}}});export{l as u};
