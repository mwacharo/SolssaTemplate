import{r as p,j as w,s as ve,k as xe,l as he,c as be,o as i,w as we,a as e,b as m,d,A as f,u as l,B as C,e as k,f as c,t as r,D as P,F as _,g as D,n as O,U as fe}from"./app-CFp7rdpU.js";import{_ as ke}from"./AppLayout-50hZzmud.js";import{u as ye}from"./orderStore-C9vRdCmK.js";import"./africastalking-CnLKfwh4.js";import Ce from"./OrderForm-Bdb3THFS.js";import _e from"./BulkAction-A4Vjnt0u.js";import{C as De}from"./CallDialogs-CS-yVdlc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./webrtc-WmsM7PyQ.js";import"./IncomingCallDialog-ClwF-qSx.js";/* empty css                                                                           */import"./toast-C5_RFEGd.js";import"./contact-B0ijcdLq.js";const Oe={class:"min-h-screen bg-gray-50"},Me={class:"p-6"},Se={class:"mb-6"},Ae={class:"relative"},Ve={class:"bg-white p-4 rounded-lg shadow-sm mb-6"},Be={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4"},Fe={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},Te={class:"flex justify-center gap-4"},je=["disabled"],Re={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Le={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ee={key:0,class:"mt-4 flex items-center gap-2 text-sm text-gray-600"},Ue={class:"flex justify-between items-center mb-4"},ze={class:"flex items-center gap-2"},He={class:"text-sm text-gray-500"},Pe={class:"flex gap-2 flex-wrap"},Ne=["disabled"],$e=["disabled"],Ie=["disabled"],Ge=["disabled"],Ke=["disabled"],We=["disabled"],Ye={key:0,class:"bg-white rounded-lg shadow-sm p-8 text-center"},qe={key:1,class:"bg-white rounded-lg shadow-sm p-8 text-center"},Je={class:"text-gray-600 mb-4"},Qe={key:2,class:"bg-white rounded-lg shadow-sm overflow-hidden"},Xe={class:"overflow-x-auto"},Ze={class:"w-full"},et={class:"bg-blue-600 text-white"},tt={class:"px-4 py-3 text-left"},ot={key:0},st={class:"px-4 py-3"},lt=["value"],nt={class:"px-4 py-3 font-mono text-sm"},rt={class:"px-4 py-3 font-mono text-sm"},at={class:"px-4 py-3 text-sm"},it={class:"px-4 py-3"},dt={class:"px-2 py-1 bg-orange-100 text-orange-800 rounded text-xs"},ut={class:"px-4 py-3"},pt={class:"text-sm"},ct={class:"text-gray-500"},gt={class:"px-4 py-3"},mt={class:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-800 rounded text-xs"},vt={class:"px-4 py-3 text-sm"},xt={class:"text-gray-500 truncate max-w-32"},ht={class:"px-4 py-3 text-sm"},bt={class:"px-4 py-3 font-mono text-sm"},wt={class:"px-4 py-3"},ft={class:"flex flex-col gap-1"},kt={key:0,class:"text-xs text-gray-600 bg-green-100 px-1 py-0.5 rounded"},yt={class:"text-xs text-center"},Ct=["src","alt"],_t={key:1},Dt={class:"px-4 py-3"},Ot={class:"flex gap-1 flex-wrap"},Mt=["onClick"],St=["onClick"],At=["onClick"],Vt=["onClick","disabled"],Bt=["onClick"],Ft=["onClick"],Tt=["onClick"],jt=["onClick"],Rt={class:"flex justify-between items-center px-6 py-4 bg-gray-50"},Lt={class:"text-sm text-gray-700"},Et={class:"flex items-center gap-2"},Ut=["disabled"],zt=["onClick","disabled"],Ht=["disabled"],Pt={class:"fixed bottom-4 right-4 z-50 space-y-2"},Nt={class:"flex justify-between items-center"},$t={class:"text-sm"},It=["onClick"],no={__name:"Index",setup(Gt){const o=ye();p(!1),p(!1);const M=p(""),N=p(!1),x=p(""),S=n=>{M.value=n||"",x.value="newCall"},$=n=>{console.log("Call made:",n),x.value=null},I=n=>{console.log("Call transferred:",n),x.value=null},G=n=>{console.log("Agent called:",n),x.value=null};p({show:!1,type:"",title:""});const a=p([]),v=p(!1);p(""),p(""),w({get:()=>o.bulkActionDialog,set:n=>{n?o.bulkActionDialog=n:o.closeBulkActionDialog()}}),w(()=>o.dialogType),w(()=>o.dialogTitle),w(()=>o.loading.orders),o.bulkActionForm;const K=w(()=>{const n=o.pagination.current_page,t=o.pagination.last_page,u=[],s=Math.max(1,n-2),h=Math.min(t,s+4);for(let b=s;b<=h;b++)u.push(b);return u}),W=n=>{o.openDialog(n)},Y=async()=>{await o.fetchDropdownOptions(),o.openCreateDialog()},q=()=>{a.value.length!==0&&o.printOrders(a.value)},J=()=>{if(console.debug("Assign Delivery Person clicked",{selectedOrders:a.value}),a.value.length===0){console.warn("No orders selected for delivery assignment");return}o.openAssignDeliveryDialog(a.value),console.info("Opened assign delivery dialog for orders:",a.value)},Q=()=>{y()},X=()=>{},Z=async()=>{await o.applyFilters()},A=async()=>{o.clearAllFilters(),await o.applyFilters()},ee=async()=>{await o.applyFilters()},y=async()=>{await o.fetchOrders({page:o.pagination.current_page})},te=()=>{v.value?a.value=o.orders.map(n=>n.id):a.value=[]},oe=n=>{const t={year:"numeric",month:"short",day:"numeric"};return new Date(n).toLocaleDateString(void 0,t)},se=n=>{const t={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(n).toLocaleString(void 0,t)},le=n=>{switch(n){case 1:return"Confirmed";case 0:return"Pending";case 2:return"Cancelled";default:return"Unknown"}},ne=n=>{const t=o.vendorOptions.find(u=>u.id===n);return t?t.name:"Unknown"},re=n=>{o.openViewDialog(n.id)},ae=n=>{o.deleteOrder(n.id)},ie=()=>{o.exportOrders()},de=()=>{o.openBulkStatusDialog(a.value),y()},ue=()=>{o.openDeleteDialog(a.value)},pe=()=>{a.value.length!==0&&o.openAssignCallCentreDialog(a.value)},ce=async()=>{o.pagination.current_page>1&&(await o.fetchOrders({page:o.pagination.current_page-1}),v.value=!1,a.value=[])},ge=async()=>{o.pagination.current_page<o.pagination.last_page&&(await o.fetchOrders({page:o.pagination.current_page+1}),v.value=!1,a.value=[])},me=async n=>{n!==o.pagination.current_page&&(await o.fetchOrders({page:n}),v.value=!1,a.value=[])};return ve(a,n=>{const t=n.length===o.orders.length&&o.orders.length>0;v.value!==t&&(v.value=t)}),xe(async()=>{await o.initialize(),await o.fetchOrders({page:1})}),(n,t)=>{const u=he("v-autocomplete");return i(),be(ke,null,{default:we(()=>[e("div",Oe,[e("div",Me,[e("div",Se,[e("div",Ae,[f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l(o).orderSearch=s),type:"text",placeholder:"Search orders by (id, customer name, phone, address)",class:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:Z},null,544),[[C,l(o).orderSearch]]),t[12]||(t[12]=e("button",{class:"absolute right-2 top-2 p-1 text-gray-500 hover:text-gray-700"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),e("div",Ve,[e("div",Be,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"SELLER",-1)),m(u,{modelValue:l(o).orderFilterVendor,"onUpdate:modelValue":t[1]||(t[1]=s=>l(o).orderFilterVendor=s),items:l(o).vendorOptions,"item-title":"name","item-value":"id",clearable:"",dense:"",outlined:"",placeholder:"Search sellers...",class:"w-full",autocomplete:""},null,8,["modelValue","items"])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"PRODUCT",-1)),m(u,{modelValue:l(o).orderFilterProduct,"onUpdate:modelValue":t[2]||(t[2]=s=>l(o).orderFilterProduct=s),items:l(o).productOptions,"item-title":"product_name","item-value":"id",clearable:"",dense:"",outlined:"",placeholder:"Search products...",class:"w-full",autocomplete:""},null,8,["modelValue","items"])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"CATEGORY",-1)),m(u,{modelValue:l(o).orderFilterCategory,"onUpdate:modelValue":t[3]||(t[3]=s=>l(o).orderFilterCategory=s),items:l(o).categoryOptions,"item-title":"name","item-value":"id",clearable:"",dense:"",outlined:"",placeholder:"Search categories...",class:"w-full",autocomplete:""},null,8,["modelValue","items"])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"CITY",-1)),m(u,{modelValue:l(o).orderFilterCity,"onUpdate:modelValue":t[4]||(t[4]=s=>l(o).orderFilterCity=s),items:l(o).cityOptions,"item-title":"name","item-value":"name",clearable:"",dense:"",outlined:"",placeholder:"Search cities...",class:"w-full",autocomplete:""},null,8,["modelValue","items"])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"CALL AGENT",-1)),m(u,{modelValue:l(o).orderFilterAgent,"onUpdate:modelValue":t[5]||(t[5]=s=>l(o).orderFilterAgent=s),items:l(o).agentOptions,"item-title":"name","item-value":"id",clearable:"",dense:"",outlined:"",placeholder:"Search agents...",class:"w-full",autocomplete:""},null,8,["modelValue","items"])])]),e("div",Fe,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"CONFIRMATION STATUS",-1)),m(u,{modelValue:l(o).orderFilterStatus,"onUpdate:modelValue":t[6]||(t[6]=s=>l(o).orderFilterStatus=s),items:l(o).statusOptions,"item-title":"name","item-value":"id",clearable:"",dense:"",outlined:"",placeholder:"Search statuses...",class:"w-full"},null,8,["modelValue","items"])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"CREATED FROM",-1)),f(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l(o).orderDateRange[0]=s),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"Filter by date"},null,512),[[C,l(o).orderDateRange[0]]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"CREATED TO",-1)),f(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>l(o).orderDateRange[1]=s),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"Filter by date"},null,512),[[C,l(o).orderDateRange[1]]])])]),e("div",Te,[e("button",{onClick:ee,disabled:l(o).loading.orders,class:"px-8 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition-colors flex items-center gap-2 disabled:opacity-50"},[l(o).loading.orders?(i(),d("span",Re)):k("",!0),t[22]||(t[22]=c(" Filter ")),l(o).loading.orders?k("",!0):(i(),d("svg",Le,t[21]||(t[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.121A1 1 0 013 6.414V4z"},null,-1)])))],8,je),e("button",{onClick:A,class:"px-8 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors flex items-center gap-2"},t[23]||(t[23]=[c(" Reset "),e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)]))]),l(o).activeFilterCount>0?(i(),d("div",Ee,[e("span",null,"Active filters: "+r(l(o).activeFilterCount),1),e("button",{onClick:A,class:"text-red-600 hover:text-red-800 underline"},"Clear all")])):k("",!0)]),e("div",Ue,[e("div",ze,[t[24]||(t[24]=e("h1",{class:"text-2xl font-semibold"},"Orders",-1)),e("span",He,r(l(o).pagination.from)+" - "+r(l(o).pagination.to)+"/"+r(l(o).pagination.total),1)]),e("div",Pe,[e("button",{onClick:pe,disabled:a.value.length===0||l(o).loading.orders,class:"px-3 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors flex items-center gap-2 text-sm"},t[25]||(t[25]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),c(" Associate agents ")]),8,Ne),e("button",{onClick:Y,class:"px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center gap-2 text-sm"},t[26]||(t[26]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),c(" New Order ")])),e("button",{onClick:q,disabled:a.value.length===0||l(o).loading.orders,class:"px-3 py-2 bg-gray-800 text-white rounded-md hover:bg-gray-900 transition-colors flex items-center gap-2 text-sm disabled:opacity-50"},[t[27]||(t[27]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2h-2M7 17H5a2 2 0 01-2-2v-4a2 2 0 012-2h2m10 9v1a3 3 0 01-3 3H10a3 3 0 01-3-3v-1m10 0H7m10 0a5 5 0 00-10 0m10 0v-3a5 5 0 00-10 0v3"})],-1)),c(" Print ("+r(a.value.length)+") ",1)],8,$e),e("button",{onClick:ie,disabled:l(o).loading.orders,class:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm disabled:opacity-50"},t[28]||(t[28]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),c(" Export Orders ")]),8,Ie),e("button",{onClick:de,disabled:a.value.length===0||l(o).loading.orders,class:"px-3 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition-colors flex items-center gap-2 text-sm disabled:opacity-50"},[t[29]||(t[29]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),c(" Change Status ("+r(a.value.length)+") ",1)],8,Ge),e("button",{onClick:J,disabled:a.value.length===0||l(o).loading.orders,class:"px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center gap-2 text-sm disabled:opacity-50"},[t[30]||(t[30]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h1l1 2h13l1-2h1m-1 0V6a2 2 0 00-2-2H5a2 2 0 00-2 2v4m16 0v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6m16 0h-3.586a1 1 0 00-.707.293l-1.414 1.414a1 1 0 01-.707.293H8a1 1 0 01-1-1v-3a1 1 0 011-1h8a1 1 0 011 1v3z"})],-1)),c(" Assign Delivery ("+r(a.value.length)+") ",1)],8,Ke),e("button",{onClick:ue,disabled:a.value.length===0||l(o).loading.orders,class:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors flex items-center gap-2 text-sm disabled:opacity-50"},[t[31]||(t[31]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),c(" Bulk Delete ("+r(a.value.length)+") ",1)],8,We)])]),l(o).loading.orders&&l(o).orders.length===0?(i(),d("div",Ye,t[32]||(t[32]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),e("p",{class:"text-gray-600"},"Loading orders...",-1)]))):l(o).error&&l(o).orders.length===0?(i(),d("div",qe,[t[33]||(t[33]=e("div",{class:"text-red-600 mb-4"},[e("svg",{class:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L4.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("p",Je,r(l(o).error),1),e("button",{onClick:y,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," Retry ")])):(i(),d("div",Qe,[e("div",Xe,[e("table",Ze,[e("thead",et,[e("tr",null,[e("th",tt,[f(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=s=>v.value=s),onChange:te,class:"rounded","aria-label":"Select all orders"},null,544),[[P,v.value]])]),t[34]||(t[34]=e("th",{class:"px-4 py-3 text-left font-medium"},"ORDER MERCHANT ID",-1)),t[35]||(t[35]=e("th",{class:"px-4 py-3 text-left font-medium"},"ORDER NO",-1)),t[36]||(t[36]=e("th",{class:"px-4 py-3 text-left font-medium"},"SELLER",-1)),t[37]||(t[37]=e("th",{class:"px-4 py-3 text-left font-medium"},"Delivery Date",-1)),t[38]||(t[38]=e("th",{class:"px-4 py-3 text-left font-medium"},"CUSTOMER",-1)),t[39]||(t[39]=e("th",{class:"px-4 py-3 text-left font-medium"},"DETAILS",-1)),t[40]||(t[40]=e("th",{class:"px-4 py-3 text-left font-medium"},"ADDRESS",-1)),t[41]||(t[41]=e("th",{class:"px-4 py-3 text-left font-medium"},"DATE",-1)),t[42]||(t[42]=e("th",{class:"px-4 py-3 text-left font-medium"},"TOTAL PRICE",-1)),t[43]||(t[43]=e("th",{class:"px-4 py-3 text-left font-medium"},"STATUS",-1)),t[44]||(t[44]=e("th",{class:"px-4 py-3 text-left font-medium"},"ACTIONS",-1))])]),e("tbody",null,[l(o).orders.length===0?(i(),d("tr",ot,t[45]||(t[45]=[e("td",{colspan:"12",class:"px-4 py-8 text-center text-gray-500"}," No orders found ",-1)]))):k("",!0),(i(!0),d(_,null,D(l(o).orders,s=>{var h,b,V,B,F,T,j,R,L,E,U,z;return i(),d("tr",{key:s.id,class:O(["border-b hover:bg-gray-50",s.status===1?"bg-green-50":s.status===0?"bg-yellow-50":s.status===2?"bg-red-50":"bg-white"])},[e("td",st,[f(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=g=>a.value=g),value:s.id,class:"rounded"},null,8,lt),[[P,a.value]])]),e("td",nt,r(s.reference||"-"),1),e("td",rt,r(s.order_no||"-"),1),e("td",at,r(ne(s.vendor_id)),1),e("td",it,[e("span",dt,r(s.delivery_date||"Unknown"),1)]),e("td",ut,[e("div",pt,[e("div",null,r(((h=s.shipping_address)==null?void 0:h.full_name)||"-"),1),e("div",ct,r(((b=s.shipping_address)==null?void 0:b.phone)||"-"),1)])]),e("td",gt,[e("span",mt,[t[46]||(t[46]=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1)),c(" "+r(((V=s.order_items)==null?void 0:V.length)||0)+" product"+r(((B=s.order_items)==null?void 0:B.length)!==1?"s":""),1)])]),e("td",vt,[e("div",null,r(((F=s.shipping_address)==null?void 0:F.city)||"-"),1),e("div",xt,r(((T=s.shipping_address)==null?void 0:T.address)||"-"),1)]),e("td",ht,[e("div",null,r(oe(s.created_at)),1)]),e("td",bt,"KSH"+r(s.total_price||"0.00"),1),e("td",wt,[e("div",ft,[e("span",{class:"px-2 py-1 text-xs rounded",style:fe((R=(j=s.latest_status)==null?void 0:j.status)!=null&&R.color?{backgroundColor:s.latest_status.status.color,color:"white"}:{})},r(((E=(L=s.latest_status)==null?void 0:L.status)==null?void 0:E.name)||le(s.status)),5),(U=s.latest_status)!=null&&U.created_at?(i(),d("div",kt," Status at "+r(se(s.latest_status.created_at)),1)):k("",!0),e("div",yt,[s.agent&&s.agent.avatar?(i(),d("img",{key:0,src:s.agent.avatar,alt:s.agent.name,class:"w-6 h-6 rounded-full mx-auto"},null,8,Ct)):(i(),d("span",_t,"-"))])])]),e("td",Dt,[e("div",Ot,[e("button",{onClick:g=>W(s.id),class:"p-1 text-orange-600 hover:bg-orange-100 rounded",title:"Edit Order"},t[47]||(t[47]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Mt),e("button",{onClick:g=>re(s),class:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"View Order"},t[48]||(t[48]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,St),e("button",{onClick:g=>n.viewRecordings(s),class:"p-1 text-purple-600 hover:bg-purple-100 rounded",title:"View Call Recordings"},t[49]||(t[49]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 2a3 3 0 00-3 3v6a3 3 0 006 0V5a3 3 0 00-3-3z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 10v2a7 7 0 01-14 0v-2m7 9v3m-4 0h8"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 9a9 9 0 000 6M19 9a9 9 0 010 6"})],-1)]),8,At),e("button",{onClick:g=>{var H;return S((H=s.shipping_address)==null?void 0:H.phone)},disabled:!((z=s.shipping_address)!=null&&z.phone),class:"p-1 text-indigo-600 hover:bg-indigo-100 rounded disabled:opacity-50",title:"Call Customer"},t[50]||(t[50]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 5a2 2 0 012-2h1.5a1 1 0 01.95.68l.7 2.1a1 1 0 01-.27 1L6.6 8.9a12 12 0 005 5l1.1-.58a1 1 0 011 .27l2.1.7A1 1 0 0119 16.5V18a2 2 0 01-2 2C9.163 20 4 14.837 4 6a2 2 0 00-.999-.999z"})],-1)]),8,Vt),e("button",{onClick:g=>n.sendWhatsAppMessage(s),class:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Send WhatsApp Message"},t[51]||(t[51]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M20.52 3.48A11.36 11.36 0 0012.03.5C6.18.5 1.4 5.28 1.4 11.13c0 1.96.51 3.87 1.48 5.54L.5 23l6.43-2.06a11.6 11.6 0 005.1 1.17h.01c5.85 0 10.63-4.78 10.63-10.63 0-2.83-1.1-5.49-3.05-7.46zM12.03 20.9h-.01a9.42 9.42 0 01-4.8-1.3l-.34-.2-3.8 1.22 1.28-3.7-.22-.36a9.15 9.15 0 01-1.4-4.74c0-5.04 4.1-9.14 9.14-9.14 2.44 0 4.73.95 6.45 2.67a9.07 9.07 0 012.67 6.47c0 5.04-4.1 9.14-9.14 9.14zm5-6.41c-.27-.14-1.6-.79-1.85-.88-.25-.09-.43-.14-.61.14-.18.27-.7.88-.86 1.06-.16.18-.32.2-.59.07-.27-.14-1.13-.42-2.15-1.32-.8-.71-1.34-1.58-1.5-1.85-.16-.27-.02-.42.12-.56l.1-.1c.09-.09.27-.23.41-.35.14-.12.18-.2.27-.33.09-.14.05-.27.02-.38-.05-.11-.61-1.47-.84-2.01-.22-.53-.45-.46-.61-.47-.16-.01-.34-.01-.52-.01a1 1 0 00-.73.31c-.25.25-.97.95-.97 2.31 0 1.36.99 2.68 1.13 2.87.14.18 1.94 2.97 4.74 4.05.66.23 1.18.37 1.58.48.66.17 1.26.15 1.73.09.53-.07 1.6-.65 1.83-1.28.23-.63.23-1.17.16-1.28-.07-.11-.25-.18-.52-.32z"})],-1)]),8,Bt),e("button",{onClick:g=>n.sendSms(s),class:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Send SMS"},t[52]||(t[52]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)]),8,Ft),e("button",{onClick:g=>n.stkPush(s),class:"p-1 text-yellow-600 hover:bg-yellow-100 rounded",title:"Initiate STK Push (M-Pesa)"},t[53]||(t[53]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]),8,Tt),e("button",{onClick:g=>ae(s),class:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete Order"},t[54]||(t[54]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,jt)])])],2)}),128))])])]),e("div",Rt,[e("div",Lt," Showing "+r(l(o).pagination.from)+" to "+r(l(o).pagination.to)+" of "+r(l(o).pagination.total)+" results ",1),e("div",Et,[e("button",{onClick:ce,disabled:l(o).pagination.current_page===1||l(o).loading.orders,class:"px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed text-sm"}," Previous ",8,Ut),(i(!0),d(_,null,D(K.value,s=>(i(),d("button",{key:s,onClick:h=>me(s),disabled:l(o).loading.orders,class:O(["px-3 py-1 border rounded-md text-sm",s===l(o).pagination.current_page?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100 disabled:opacity-50"])},r(s),11,zt))),128)),e("button",{onClick:ge,disabled:l(o).pagination.current_page===l(o).pagination.last_page||l(o).loading.orders,class:"px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed text-sm"}," Next ",8,Ht)])])])),e("div",Pt,[(i(!0),d(_,null,D(l(o).notifications,s=>(i(),d("div",{key:s.id,class:O(["px-6 py-4 rounded-lg shadow-lg text-white max-w-sm",s.type==="success"?"bg-green-600":"bg-red-600"])},[e("div",Nt,[e("p",$t,r(s.message),1),e("button",{onClick:h=>l(o).removeNotification(s.id),class:"ml-4 text-white hover:text-gray-200"},t[55]||(t[55]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,It)])],2))),128))])])]),m(De,{modelValue:x.value,"onUpdate:modelValue":t[11]||(t[11]=s=>x.value=s),"call-data":{phone:M.value},onCallMade:$,onCallTransferred:I,onAgentCalled:G},null,8,["modelValue","call-data"]),m(Ce,{"is-create":N.value,onOrderSaved:Q,onDialogClosed:X,onOpenCallDialog:S},null,8,["is-create"]),m(_e)]),_:1})}}};export{no as default};
