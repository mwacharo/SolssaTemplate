import{u as v}from"./whatsappStore--ofsLSqi.js";import{j as x,r as p,s as U,l as o,c as I,o as R,w as a,b as t,f as r,a as j,t as A}from"./app-Cngp4Ga2.js";const q={class:"text-h6"},W={__name:"AssignDialog",props:{modelValue:Boolean,mode:{type:String,required:!0},selectedOrders:{type:Array,default:()=>[]}},emits:["update:modelValue","confirmed"],setup(f,{emit:y}){v();const l=f,g=y,d=x({get:()=>l.modelValue,set:s=>g("update:modelValue",s)}),n=p(null),c=p([]),i=p(!1),V=x(()=>l.mode==="rider"?"Rider":l.mode==="agent"?"Agent":"Status"),u=()=>{d.value=!1,n.value=null},w=()=>{const s=l.selectedOrders.filter(e=>Number.isInteger(e));console.log("Assigning",{mode:l.mode,selected:n.value,orders:s}),g("confirmed",{mode:l.mode,selected:n.value,orders:s}),u()};return U(d,async s=>{if(s){if(i.value=!0,l.mode==="rider"){const e=v();await e.loadRiders(),c.value=e.riders}else if(l.mode==="agent"){const e=v();await e.loadAgents(),c.value=e.agents}i.value=!1}}),(s,e)=>{const b=o("v-spacer"),C=o("v-icon"),m=o("v-btn"),O=o("v-card-title"),k=o("v-select"),S=o("v-card-text"),B=o("v-card-actions"),N=o("v-card"),D=o("v-dialog");return R(),I(D,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=_=>d.value=_),"max-width":"500"},{default:a(()=>[t(N,null,{default:a(()=>[t(O,null,{default:a(()=>[j("span",q,"Assign "+A(V.value),1),t(b),t(m,{icon:"",onClick:u},{default:a(()=>[t(C,null,{default:a(()=>e[2]||(e[2]=[r("mdi-close")])),_:1,__:[2]})]),_:1})]),_:1}),t(S,null,{default:a(()=>[t(k,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=_=>n.value=_),items:c.value,label:`Select ${V.value}`,"item-title":"name","item-value":"id",loading:i.value,clearable:""},null,8,["modelValue","items","label","loading"])]),_:1}),t(B,null,{default:a(()=>[t(b),t(m,{disabled:!n.value||l.selectedOrders.length===0,color:"primary",onClick:w},{default:a(()=>e[3]||(e[3]=[r("Update")])),_:1,__:[3]},8,["disabled"]),t(m,{color:"secondary",onClick:u},{default:a(()=>e[4]||(e[4]=[r("Cancel")])),_:1,__:[4]})]),_:1})]),_:1}),r(" "+A(f.selectedOrders),1)]),_:1},8,["modelValue"])}}};export{W as default};
