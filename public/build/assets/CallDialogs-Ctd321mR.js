import{E as Ge,r as s,j as q,i as j,k as Ke,l as r,d as O,o as D,b as l,w as a,a as c,f as i,y as Xe,e as ze,p as Ie,q as Ue,t as f,F as ce,g as ve,c as me,n as Qe}from"./app-CQIF2L9t.js";import{u as Ne}from"./webrtc-CWHKv-0c.js";import{n as p}from"./toast-D24xg3Vw.js";import{_ as Ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ze=Ge("callCenter",()=>{const z=Ne(),X=s(!1),Y=s(null),g=s(null),C=s(null),k=s([]),Q=s(!1),N=s(null),$=s(0),h=s(!1),u=s(!1),y=s(80),w=s(!1),R=s(null),M=s(""),b=s(null),x=s(null),S=s(!1),T=s({name:"",phone:"",email:"",company:""}),Z=s({totalWaiting:0,averageWaitTime:0,agentsAvailable:0,agentsOnCall:0}),ee=s("available"),ne=s([]),d=q(()=>z.afClient),oe=q(()=>z.incomingCall),H=q(()=>z.incomingCallDialog),fe=q(()=>z.connection_active),pe=q(()=>b.value!==null),_e=q(()=>{const n=Math.floor($.value/60),m=$.value%60;return`${n.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`});function I(n){console.log(`[Call Center]: ${n}`)}function ge(n){z.initializeAfClient(n)}function ie(n){try{if(console.log(`Calling ${n} from System...`),!d.value){console.error("AfricasTalking client is not initialized."),p.error("AfricasTalking client is not initialized.");return}d.value.call(n),console.log("Call initiated successfully."),p.success("Call started."),w.value=!0,C.value={id:Date.now(),phoneNumber:n,direction:"outbound",status:"connecting",startTime:new Date},d.value.on("afClienting",()=>{I("afClient is in progress (calling)...")}),d.value.on("callaccepted",()=>{console.log("callaccepted"),p.success("Call accepted!"),I("Call accepted (bridged between caller and callee)."),Q.value=!0,N.value=Date.now(),ae()}),d.value.on("hangup",m=>{I(`Call hung up (${m.code} - ${m.reason}).`),p.error(`Call ended: ${m.reason}`),w.value=!1,B()}),d.value.on("mute",()=>{I("Call muted."),p.info("Call muted."),u.value=!0}),d.value.on("unmute",()=>{I("Call unmuted."),p.info("Call unmuted."),u.value=!1}),d.value.on("hold",()=>{I("Call on hold."),p.info("Call on hold."),h.value=!0}),d.value.on("unhold",()=>{I("Call resumed from hold."),p.info("Call resumed from hold."),h.value=!1})}catch(m){console.error("Call initiation error:",m),p.error("Call failed: "+m.message)}}function Ce(){oe.value&&d.value&&(d.value.answer(),Q.value=!0,N.value=Date.now(),ae())}function A(n){if(w.value=!0,R.value=n,console.log("Selected agent:",n),M.value=n.phone_number,console.log("Agent phone number:",M.value),!d.value){console.error("AfricasTalking client is not initialized."),p.error("AfricasTalking client is not initialized.");return}try{console.log("Attempting to call agent..."),d.value.call(M.value),console.log("Call initiated successfully."),p.success("Call initiated successfully."),C.value={id:Date.now(),phoneNumber:M.value,direction:"outbound",status:"connecting",startTime:new Date,agent:n}}catch(m){console.error("Error while calling agent:",m),p.error("Failed to call agent: "+m.message)}}function le(){d.value&&(z.hangupCall(),console.log("call ended"),p.error("Call ended."),z.setIncomingCallDialog(!1),w.value=!1,B())}function se(){w.value&&d.value&&(u.value=!u.value,u.value?d.value.muteAudio():d.value.unmuteAudio(),console.log("Client mute property:",d.value.isAudioMuted),console.log("Our internal state:",u.value))}async function we(n,m={}){var W,P;try{if(X.value=!0,g.value=null,Y.value=n,d.value)return ie(n),{success:!0,callId:Date.now()};const U=await j.post("/api/v1/call-center/make-call",{phoneNumber:n,...m});return C.value={id:U.data.callId||Date.now(),phoneNumber:n,direction:"outbound",status:"connecting",startTime:new Date},Q.value=!0,N.value=Date.now(),ae(),U.data}catch(U){throw g.value=((P=(W=U==null?void 0:U.response)==null?void 0:W.data)==null?void 0:P.message)||"Failed to initiate call",U}finally{X.value=!1}}async function ue(){try{if(d.value&&w.value){le();return}C.value&&(await j.post(`/api/v1/call-center/end/${C.value.id}`),k.value.unshift({...C.value,endTime:new Date,duration:$.value,status:"completed"})),B()}catch{g.value="Failed to end call",B()}}async function be(n){try{if(d.value){le();return}await j.post(`/api/v1/call-center/reject/${n.id}`),z.setIncomingCall(null)}catch{g.value="Failed to reject call"}}async function ye(){var n,m,W,P;try{if(d.value&&w.value){h.value?(m=(n=d.value).unhold)==null||m.call(n):(P=(W=d.value).hold)==null||P.call(W);return}h.value=!h.value,await j.post(`/api/v1/call-center/hold/${C.value.id}`,{hold:h.value})}catch{h.value=!h.value,g.value="Failed to toggle hold"}}async function he(){try{if(d.value&&w.value){se();return}u.value=!u.value,await j.post(`/api/v1/call-center/mute/${C.value.id}`,{mute:u.value})}catch{u.value=!u.value,g.value="Failed to toggle mute"}}async function xe(n){try{await j.post(`/api/v1/call-center/transfer/${C.value.id}`,{targetNumber:n}),k.value.unshift({...C.value,endTime:new Date,duration:$.value,status:"transferred",transferredTo:n}),B()}catch(m){throw g.value="Failed to transfer call",m}}function ae(){const n=setInterval(()=>{if(!Q.value){clearInterval(n);return}$.value=Math.floor((Date.now()-N.value)/1e3)},1e3)}function B(){C.value=null,Q.value=!1,N.value=null,$.value=0,h.value=!1,u.value=!1,w.value=!1,R.value=null}function G(){b.value="newCall",x.value=null}function K(){b.value="callAgent",x.value=null}function Ve(){b.value="queue",x.value=null}function De(){b.value="transfer"}function o(n=null){b.value="contact",x.value=n,n&&(T.value.phone=n.phoneNumber||n.callerNumber||"")}function e(n=null){b.value="sms",S.value=!0,x.value=n}function v(){b.value=null,S.value=!1,x.value=null,T.value={name:"",phone:"",email:"",company:""}}async function F(n){try{await j.post("/api/v1/call-center/agent/status",{status:n}),ee.value=n}catch{g.value="Failed to update status"}}async function _(){try{const n=await j.get("/api/v1/call-center/queue/status");Z.value=n.data}catch(n){console.error("Failed to fetch queue status:",n)}}async function J(){try{const n=await j.get("/api/v1/call-center/agents");ne.value=n.data}catch(n){console.error("Failed to fetch agent list:",n)}}function te(){const n={id:Date.now(),phoneNumber:"+1234567890",callerName:"John Doe",direction:"inbound",startTime:new Date};z.setIncomingCall(n)}return{makingCall:X,lastCallNumber:Y,callError:g,activeCall:C,callHistory:k,isCallActive:Q,callStartTime:N,callDuration:$,isOnHold:h,isMuted:u,volume:y,isCalling:w,selectedAgent:R,phone_number:M,dialogType:b,callData:x,isSmsDialog:S,contactForm:T,queueStatus:Z,agentStatus:ee,agentList:ne,isDialogOpen:pe,formattedCallDuration:_e,afClient:d,incomingCall:oe,incomingCallDialog:H,connection_active:fe,initializeAfClient:ge,callClient:ie,makeCall:we,answerCall:Ce,endCall:ue,rejectCall:be,holdCall:ye,muteCall:he,transferCall:xe,resetCallState:B,handleCall:A,hangupCall:le,handleMute:se,openNewCallDialog:G,openCallAgentDialog:K,openQueueDialog:Ve,openTransferDialog:De,openContactDialog:o,openSmsDialog:e,closeDialog:v,updateAgentStatus:F,fetchQueueStatus:_,fetchAgentList:J,simulateIncomingCall:te,logEvent:I}}),el={class:"mb-6"},ll={class:"mb-6"},al={class:"text-white"},tl={key:0,class:"d-flex justify-center mb-6"},nl={class:"pt-4 space-y-4"},ol={key:1,class:"dialpad-container mb-4"},il={class:"dialpad-grid"},sl={class:"text-center"},ul={class:"text-h6 font-weight-bold"},rl={class:"text-caption"},dl={class:"mb-4"},cl={key:1,class:"text-white font-weight-bold"},vl={class:"d-flex align-center"},ml={class:"text-center"},fl={class:"text-h6 font-weight-bold"},pl={class:"text-body-2"},_l={class:"d-flex align-center"},gl={class:"text-white text-caption"},Cl={class:"flex-grow-1"},wl={class:"text-body-2 font-weight-medium"},bl={class:"text-caption text-grey"},yl={key:0,class:"text-right"},hl={class:"text-body-2 font-weight-bold"},xl={class:"text-white"},Vl={__name:"CallDialogs",props:{modelValue:String,callData:Object},emits:["update:modelValue","call-made","call-transferred","agent-called"],setup(z,{emit:X}){const Y=Ne(),g=Ze(),C=z,k=X,Q=q({get:()=>C.modelValue==="newCall",set:o=>k("update:modelValue",o?"newCall":null)}),N=q({get:()=>C.modelValue==="callAgent",set:o=>k("update:modelValue",o?"callAgent":null)}),$=q({get:()=>C.modelValue==="queue",set:o=>k("update:modelValue",o?"queue":null)}),h=q({get:()=>C.modelValue==="transfer",set:o=>k("update:modelValue",o?"transfer":null)}),u=s({phone:"",contact:null,callerId:"",recordCall:!0,autoAnswer:!1}),y=s({phone:"",agent:null,queue:null,warmTransfer:!0}),w=s(!1),R=s(!1),M=s(!1),b=s(!1),x=s(""),S=s(null),T=s("number"),Z=s(!1),ee=[o=>!!o||"Phone number is required"],ne=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],d=s([{name:"John Doe",phone:"+1234567890",email:"john@example.com"},{name:"Jane Smith",phone:"+1234567891",email:"jane@example.com"},{name:"Mike Johnson",phone:"+1234567892",email:"mike@example.com"}]),oe=s(["+1 (555) 000-0001","+1 (555) 000-0002","+1 (555) 000-0003"]),H=s([{id:1,name:"Alice Johnson",extension:"101",status:"available",callsToday:12,avatar:null},{id:2,name:"Bob Smith",extension:"102",status:"busy",callsToday:8,avatar:null},{id:3,name:"Carol Davis",extension:"103",status:"available",callsToday:15,avatar:null},{id:4,name:"David Wilson",extension:"104",status:"away",callsToday:5,avatar:null}]),fe=s([{id:1,name:"Sales Queue",waitingCount:3},{id:2,name:"Support Queue",waitingCount:7},{id:3,name:"Billing Queue",waitingCount:2}]),pe=s([{title:"Waiting",value:12,color:"warning",icon:"mdi-clock-outline"},{title:"In Progress",value:8,color:"info",icon:"mdi-phone-in-talk"},{title:"Completed",value:45,color:"success",icon:"mdi-check-circle"},{title:"Avg Wait",value:"2:30",color:"primary",icon:"mdi-timer-outline"}]),_e=[{title:"Caller",value:"caller",sortable:!1},{title:"Phone",value:"phone",sortable:!1},{title:"Wait Time",value:"waitTime",sortable:!0},{title:"Priority",value:"priority",sortable:!0},{title:"Queue",value:"queue",sortable:!1}],I=s([{caller:"John Doe",phone:"+1234567890",waitTime:45,priority:3,queue:"Sales"},{caller:"Jane Smith",phone:"+1234567891",waitTime:120,priority:5,queue:"Support"},{caller:"Mike Wilson",phone:"+1234567892",waitTime:30,priority:2,queue:"Billing"}]),ge=s([{id:1,name:"Alice Johnson",status:"available",currentCall:null},{id:2,name:"Bob Smith",status:"busy",currentCall:!0,callDuration:"05:23"},{id:3,name:"Carol Davis",status:"available",currentCall:null},{id:4,name:"David Wilson",status:"away",currentCall:null}]),ie=q(()=>x.value?H.value.filter(o=>o.name.toLowerCase().includes(x.value.toLowerCase())||o.extension.includes(x.value)):H.value),Ce=q(()=>H.value.filter(o=>o.status==="available")),A=()=>{k("update:modelValue",null),le()},le=()=>{u.value={phone:"",contact:null,callerId:"",recordCall:!0,autoAnswer:!1},y.value={phone:"",agent:null,queue:null,warmTransfer:!0},S.value=null,b.value=!1,T.value="number"},se=o=>{u.value.phone+=o},we=o=>{o&&(u.value.phone=o)},ue=async()=>{if(u.value.phone){w.value=!0;try{await g.callClient(u.value.phone),p.success(`Calling ${u.value.phone}`),Z.value=!0,k("call-made",u.value)}finally{w.value=!1}}},be=async()=>{try{await g.handleMute(),p.success("Call muted")}catch{p.error("Failed to mute call")}},ye=async()=>{try{Y.afClient&&await Y.afClient.hangup()}catch(o){console.error("Failed to hangup call:",o)}},he=o=>{S.value=o},xe=async()=>{if(S.value){w.value=!0;try{await g.makeCall(S.value.extension),p.success(`Calling ${S.value.name}`),k("agent-called",S.value),A()}catch{p.error("Failed to call agent")}finally{w.value=!1}}},ae=async()=>{R.value=!0;try{let o="";if(T.value==="number")o=y.value.phone;else if(T.value==="agent"){const e=H.value.find(v=>v.id===y.value.agent);o=(e==null?void 0:e.extension)||""}else T.value==="queue"&&(o=`queue:${y.value.queue}`);await g.transferCall(o),p.success(`Call transferred to ${o}`),k("call-transferred",{target:o,warmTransfer:y.value.warmTransfer}),A()}catch{p.error("Failed to transfer call")}finally{R.value=!1}},B=async()=>{M.value=!0;try{await g.fetchQueueStatus(),p.success("Queue data refreshed")}catch{p.error("Failed to refresh queue data")}finally{M.value=!1}},G=o=>o.split(" ").map(e=>e[0]).join("").toUpperCase(),K=o=>({available:"success",busy:"error",away:"warning",offline:"grey"})[o]||"grey",Ve=o=>o<30?"success":o<120?"warning":"error",De=o=>{const e=Math.floor(o/60),v=o%60;return`${e}:${v.toString().padStart(2,"0")}`};return Ke(()=>{g.fetchAgentList(),g.fetchQueueStatus()}),(o,e)=>{const v=r("v-icon"),F=r("v-spacer"),_=r("v-btn"),J=r("v-card-title"),te=r("v-text-field"),n=r("v-avatar"),m=r("v-list-item-title"),W=r("v-list-item-subtitle"),P=r("v-list-item"),U=r("v-autocomplete"),Me=r("v-expansion-panel-title"),ke=r("v-select"),Se=r("v-checkbox"),We=r("v-expansion-panel-text"),Pe=r("v-expansion-panel"),je=r("v-expansion-panels"),Oe=r("v-form"),L=r("v-card-text"),re=r("v-card-actions"),E=r("v-card"),de=r("v-dialog"),Be=r("v-img"),Te=r("v-chip"),Je=r("v-list"),Fe=r("v-col"),$e=r("v-row"),Le=r("v-rating"),Ee=r("v-data-table"),Ae=r("v-tab"),Re=r("v-tabs"),qe=r("v-window-item"),He=r("v-window");return D(),O("div",null,[l(de,{modelValue:Q.value,"onUpdate:modelValue":e[6]||(e[6]=t=>Q.value=t),"max-width":"500",persistent:"",transition:"dialog-bottom-transition"},{default:a(()=>[l(E,{class:"modern-card"},{default:a(()=>[l(J,{class:"gradient-header"},{default:a(()=>[l(v,{left:"",color:"white",size:"24"},{default:a(()=>e[17]||(e[17]=[i("mdi-phone-plus")])),_:1,__:[17]}),e[19]||(e[19]=c("span",{class:"text-h5 font-weight-bold"},"Make New Call",-1)),l(F),l(_,{icon:"",onClick:A,color:"white"},{default:a(()=>[l(v,null,{default:a(()=>e[18]||(e[18]=[i("mdi-close")])),_:1,__:[18]})]),_:1})]),_:1,__:[19]}),l(L,{class:"pa-6"},{default:a(()=>[l(Oe,{ref:"newCallFormRef",onSubmit:Xe(ue,["prevent"])},{default:a(()=>[c("div",el,[l(te,{modelValue:u.value.phone,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value.phone=t),label:"Phone Number",placeholder:"+1 (555) 123-4567",variant:"outlined","prepend-inner-icon":"mdi-phone",rules:ee,class:"modern-input","hide-details":"auto"},null,8,["modelValue"])]),c("div",ll,[l(U,{modelValue:u.value.contact,"onUpdate:modelValue":[e[1]||(e[1]=t=>u.value.contact=t),we],items:d.value,"item-title":"name","item-value":"phone",label:"Or select from contacts",variant:"outlined","prepend-inner-icon":"mdi-account-search",clearable:"",class:"modern-input"},{item:a(({props:t,item:V})=>[l(P,Ie(Ue(t)),{prepend:a(()=>[l(n,{size:"40",color:"primary"},{default:a(()=>[c("span",al,f(G(V.raw.name)),1)]),_:2},1024)]),default:a(()=>[l(m,null,{default:a(()=>[i(f(V.raw.name),1)]),_:2},1024),l(W,null,{default:a(()=>[i(f(V.raw.phone),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),Z.value?(D(),O("div",tl,[l(_,{icon:"",color:"grey",variant:"outlined",class:"mx-2",onClick:be},{default:a(()=>[l(v,null,{default:a(()=>e[20]||(e[20]=[i("mdi-microphone-off")])),_:1,__:[20]})]),_:1}),l(_,{icon:"",color:"red",variant:"outlined",class:"mx-2",onClick:ye},{default:a(()=>[l(v,null,{default:a(()=>e[21]||(e[21]=[i("mdi-phone-hangup")])),_:1,__:[21]})]),_:1})])):ze("",!0),l(je,{class:"mb-4",variant:"accordion"},{default:a(()=>[l(Pe,null,{default:a(()=>[l(Me,null,{default:a(()=>[l(v,{left:""},{default:a(()=>e[22]||(e[22]=[i("mdi-cog")])),_:1,__:[22]}),e[23]||(e[23]=i(" Advanced Options "))]),_:1,__:[23]}),l(We,null,{default:a(()=>[c("div",nl,[l(ke,{modelValue:u.value.callerId,"onUpdate:modelValue":e[2]||(e[2]=t=>u.value.callerId=t),items:oe.value,label:"Caller ID",variant:"outlined","prepend-inner-icon":"mdi-card-account-phone"},null,8,["modelValue","items"]),l(Se,{modelValue:u.value.recordCall,"onUpdate:modelValue":e[3]||(e[3]=t=>u.value.recordCall=t),label:"Record this call",color:"primary"},null,8,["modelValue"]),l(Se,{modelValue:u.value.autoAnswer,"onUpdate:modelValue":e[4]||(e[4]=t=>u.value.autoAnswer=t),label:"Auto-answer when connected",color:"primary"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),b.value?(D(),O("div",ol,[c("div",il,[(D(),O(ce,null,ve(ne,t=>l(_,{key:t.digit,onClick:V=>se(t.digit),class:"dialpad-btn",size:"large",variant:"outlined"},{default:a(()=>[c("div",sl,[c("div",ul,f(t.digit),1),c("div",rl,f(t.letters),1)])]),_:2},1032,["onClick"])),64))])])):ze("",!0),l(_,{onClick:e[5]||(e[5]=t=>b.value=!b.value),variant:"text",color:"primary",class:"mb-4"},{default:a(()=>[l(v,{left:""},{default:a(()=>[i(f(b.value?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1}),i(" "+f(b.value?"Hide":"Show")+" Dialpad ",1)]),_:1})]),_:1},512)]),_:1}),l(re,{class:"pa-6 pt-0"},{default:a(()=>[l(_,{color:"grey",variant:"outlined",onClick:A,class:"mr-3"},{default:a(()=>e[24]||(e[24]=[i(" Cancel ")])),_:1,__:[24]}),l(F),l(_,{color:"primary",variant:"elevated",onClick:ue,disabled:!u.value.phone,loading:w.value,size:"large",class:"px-8"},{default:a(()=>[l(v,{left:""},{default:a(()=>e[25]||(e[25]=[i("mdi-phone")])),_:1,__:[25]}),e[26]||(e[26]=i(" Call Now "))]),_:1,__:[26]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(de,{modelValue:N.value,"onUpdate:modelValue":e[8]||(e[8]=t=>N.value=t),"max-width":"600",transition:"dialog-bottom-transition"},{default:a(()=>[l(E,{class:"modern-card"},{default:a(()=>[l(J,{class:"gradient-header"},{default:a(()=>[l(v,{left:"",color:"white",size:"24"},{default:a(()=>e[27]||(e[27]=[i("mdi-account-voice")])),_:1,__:[27]}),e[29]||(e[29]=c("span",{class:"text-h5 font-weight-bold"},"Call Agent",-1)),l(F),l(_,{icon:"",onClick:A,color:"white"},{default:a(()=>[l(v,null,{default:a(()=>e[28]||(e[28]=[i("mdi-close")])),_:1,__:[28]})]),_:1})]),_:1,__:[29]}),l(L,{class:"pa-6"},{default:a(()=>[c("div",dl,[l(te,{modelValue:x.value,"onUpdate:modelValue":e[7]||(e[7]=t=>x.value=t),label:"Search agents...",variant:"outlined","prepend-inner-icon":"mdi-magnify",clearable:"",class:"mb-4"},null,8,["modelValue"])]),l(Je,{class:"agent-list"},{default:a(()=>[(D(!0),O(ce,null,ve(ie.value,t=>{var V;return D(),me(P,{key:t.id,onClick:kl=>he(t),class:Qe([{"selected-agent":((V=S.value)==null?void 0:V.id)===t.id},"agent-item mb-2"])},{prepend:a(()=>[l(n,{size:"48",color:K(t.status)},{default:a(()=>[t.avatar?(D(),me(Be,{key:0,src:t.avatar},null,8,["src"])):(D(),O("span",cl,f(G(t.name)),1))]),_:2},1032,["color"])]),append:a(()=>[c("div",ml,[e[30]||(e[30]=c("div",{class:"text-caption"},"Calls Today",-1)),c("div",fl,f(t.callsToday),1)])]),default:a(()=>[l(m,{class:"font-weight-medium"},{default:a(()=>[i(f(t.name),1)]),_:2},1024),l(W,null,{default:a(()=>[c("div",vl,[l(Te,{color:K(t.status),size:"x-small",class:"mr-2"},{default:a(()=>[i(f(t.status),1)]),_:2},1032,["color"]),c("span",null,"Ext: "+f(t.extension),1)])]),_:2},1024)]),_:2},1032,["onClick","class"])}),128))]),_:1})]),_:1}),l(re,{class:"pa-6 pt-0"},{default:a(()=>[l(_,{color:"grey",variant:"outlined",onClick:A},{default:a(()=>e[31]||(e[31]=[i(" Cancel ")])),_:1,__:[31]}),l(F),l(_,{color:"primary",variant:"elevated",onClick:xe,disabled:!S.value,loading:w.value,size:"large",class:"px-8"},{default:a(()=>[l(v,{left:""},{default:a(()=>e[32]||(e[32]=[i("mdi-phone")])),_:1,__:[32]}),e[33]||(e[33]=i(" Call Agent "))]),_:1,__:[33]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(de,{modelValue:$.value,"onUpdate:modelValue":e[9]||(e[9]=t=>$.value=t),"max-width":"800",transition:"dialog-bottom-transition"},{default:a(()=>[l(E,{class:"modern-card"},{default:a(()=>[l(J,{class:"gradient-header"},{default:a(()=>[l(v,{left:"",color:"white",size:"24"},{default:a(()=>e[34]||(e[34]=[i("mdi-account-multiple-check")])),_:1,__:[34]}),e[36]||(e[36]=c("span",{class:"text-h5 font-weight-bold"},"Queue Dashboard",-1)),l(F),l(_,{icon:"",onClick:A,color:"white"},{default:a(()=>[l(v,null,{default:a(()=>e[35]||(e[35]=[i("mdi-close")])),_:1,__:[35]})]),_:1})]),_:1,__:[36]}),l(L,{class:"pa-6"},{default:a(()=>[l($e,{class:"mb-6"},{default:a(()=>[(D(!0),O(ce,null,ve(pe.value,t=>(D(),me(Fe,{cols:"12",md:"3",key:t.title},{default:a(()=>[l(E,{class:"stat-card",color:t.color,variant:"tonal"},{default:a(()=>[l(L,{class:"text-center pa-4"},{default:a(()=>[l(v,{color:t.color,size:"40",class:"mb-2"},{default:a(()=>[i(f(t.icon),1)]),_:2},1032,["color"]),c("div",{class:Qe(["text-h4 font-weight-bold",`${t.color}--text`])},f(t.value),3),c("div",pl,f(t.title),1)]),_:2},1024)]),_:2},1032,["color"])]),_:2},1024))),128))]),_:1}),l(E,{class:"queue-card mb-4",variant:"outlined"},{default:a(()=>[l(J,{class:"d-flex align-center"},{default:a(()=>[l(v,{left:"",color:"primary"},{default:a(()=>e[37]||(e[37]=[i("mdi-clock-outline")])),_:1,__:[37]}),e[40]||(e[40]=i(" Current Queue ")),l(F),l(Te,{color:"primary",size:"small"},{default:a(()=>[e[39]||(e[39]=i(" Live Updates ")),l(v,{right:"",size:"16",class:"ml-1 animate-pulse"},{default:a(()=>e[38]||(e[38]=[i("mdi-circle")])),_:1,__:[38]})]),_:1,__:[39]})]),_:1,__:[40]}),l(L,null,{default:a(()=>[l(Ee,{headers:_e,items:I.value,"items-per-page":5,class:"queue-table",density:"comfortable"},{"item.waitTime":a(({item:t})=>[l(Te,{color:Ve(t.waitTime),size:"small"},{default:a(()=>[i(f(De(t.waitTime)),1)]),_:2},1032,["color"])]),"item.priority":a(({item:t})=>[l(Le,{"model-value":t.priority,color:"orange",size:"small",readonly:"",density:"compact"},null,8,["model-value"])]),_:1},8,["items"])]),_:1})]),_:1}),l(E,{variant:"outlined"},{default:a(()=>[l(J,null,{default:a(()=>[l(v,{left:"",color:"success"},{default:a(()=>e[41]||(e[41]=[i("mdi-account-group")])),_:1,__:[41]}),e[42]||(e[42]=i(" Agent Status "))]),_:1,__:[42]}),l(L,null,{default:a(()=>[l($e,null,{default:a(()=>[(D(!0),O(ce,null,ve(ge.value,t=>(D(),me(Fe,{cols:"12",sm:"6",md:"4",key:t.id},{default:a(()=>[l(E,{class:"agent-status-card",variant:"outlined"},{default:a(()=>[l(L,{class:"pa-3"},{default:a(()=>[c("div",_l,[l(n,{size:"32",color:K(t.status),class:"mr-3"},{default:a(()=>[c("span",gl,f(G(t.name)),1)]),_:2},1032,["color"]),c("div",Cl,[c("div",wl,f(t.name),1),c("div",bl,f(t.status),1)]),t.currentCall?(D(),O("div",yl,[e[43]||(e[43]=c("div",{class:"text-caption"},"On Call",-1)),c("div",hl,f(t.callDuration),1)])):ze("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),l(re,{class:"pa-6 pt-0"},{default:a(()=>[l(_,{color:"primary",variant:"outlined",onClick:B,loading:M.value},{default:a(()=>[l(v,{left:""},{default:a(()=>e[44]||(e[44]=[i("mdi-refresh")])),_:1,__:[44]}),e[45]||(e[45]=i(" Refresh "))]),_:1,__:[45]},8,["loading"]),l(F),l(_,{color:"primary",variant:"elevated",onClick:A},{default:a(()=>e[46]||(e[46]=[i(" Close ")])),_:1,__:[46]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(de,{modelValue:h.value,"onUpdate:modelValue":e[16]||(e[16]=t=>h.value=t),"max-width":"500",transition:"dialog-bottom-transition"},{default:a(()=>[l(E,{class:"modern-card"},{default:a(()=>[l(J,{class:"gradient-header"},{default:a(()=>[l(v,{left:"",color:"white",size:"24"},{default:a(()=>e[47]||(e[47]=[i("mdi-phone-forward")])),_:1,__:[47]}),e[49]||(e[49]=c("span",{class:"text-h5 font-weight-bold"},"Transfer Call",-1)),l(F),l(_,{icon:"",onClick:A,color:"white"},{default:a(()=>[l(v,null,{default:a(()=>e[48]||(e[48]=[i("mdi-close")])),_:1,__:[48]})]),_:1})]),_:1,__:[49]}),l(L,{class:"pa-6"},{default:a(()=>[l(Re,{modelValue:T.value,"onUpdate:modelValue":e[10]||(e[10]=t=>T.value=t),class:"mb-4"},{default:a(()=>[l(Ae,{value:"number"},{default:a(()=>e[50]||(e[50]=[i("Phone Number")])),_:1,__:[50]}),l(Ae,{value:"agent"},{default:a(()=>e[51]||(e[51]=[i("Agent")])),_:1,__:[51]}),l(Ae,{value:"queue"},{default:a(()=>e[52]||(e[52]=[i("Queue")])),_:1,__:[52]})]),_:1},8,["modelValue"]),l(He,{modelValue:T.value,"onUpdate:modelValue":e[14]||(e[14]=t=>T.value=t)},{default:a(()=>[l(qe,{value:"number"},{default:a(()=>[l(te,{modelValue:y.value.phone,"onUpdate:modelValue":e[11]||(e[11]=t=>y.value.phone=t),label:"Transfer to Phone Number",variant:"outlined","prepend-inner-icon":"mdi-phone",rules:ee},null,8,["modelValue"])]),_:1}),l(qe,{value:"agent"},{default:a(()=>[l(ke,{modelValue:y.value.agent,"onUpdate:modelValue":e[12]||(e[12]=t=>y.value.agent=t),items:Ce.value,"item-title":"name","item-value":"id",label:"Select Agent",variant:"outlined","prepend-inner-icon":"mdi-account"},{item:a(({props:t,item:V})=>[l(P,Ie(Ue(t)),{prepend:a(()=>[l(n,{size:"32",color:K(V.raw.status)},{default:a(()=>[c("span",xl,f(G(V.raw.name)),1)]),_:2},1032,["color"])]),default:a(()=>[l(m,null,{default:a(()=>[i(f(V.raw.name),1)]),_:2},1024),l(W,null,{default:a(()=>[i(f(V.raw.status)+" - Ext: "+f(V.raw.extension),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1}),l(qe,{value:"queue"},{default:a(()=>[l(ke,{modelValue:y.value.queue,"onUpdate:modelValue":e[13]||(e[13]=t=>y.value.queue=t),items:fe.value,"item-title":"name","item-value":"id",label:"Select Queue",variant:"outlined","prepend-inner-icon":"mdi-account-multiple"},null,8,["modelValue","items"])]),_:1})]),_:1},8,["modelValue"]),l(Se,{modelValue:y.value.warmTransfer,"onUpdate:modelValue":e[15]||(e[15]=t=>y.value.warmTransfer=t),label:"Warm transfer (stay on call until connected)",color:"primary",class:"mt-4"},null,8,["modelValue"])]),_:1}),l(re,{class:"pa-6 pt-0"},{default:a(()=>[l(_,{color:"grey",variant:"outlined",onClick:A},{default:a(()=>e[53]||(e[53]=[i(" Cancel ")])),_:1,__:[53]}),l(F),l(_,{color:"primary",variant:"elevated",onClick:ae,loading:R.value,size:"large",class:"px-8"},{default:a(()=>[l(v,{left:""},{default:a(()=>e[54]||(e[54]=[i("mdi-phone-forward")])),_:1,__:[54]}),e[55]||(e[55]=i(" Transfer "))]),_:1,__:[55]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Dl=Ye(Vl,[["__scopeId","data-v-ef182918"]]),zl=Object.freeze(Object.defineProperty({__proto__:null,default:Dl},Symbol.toStringTag,{value:"Module"}));export{Dl as C,zl as a,Ze as u};
