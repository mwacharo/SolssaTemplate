import{i as L,r as p,j as Ee,k as Pe,c as je,o as n,w as Me,a as e,b as Ve,d,e as C,f as S,A as m,B as x,F as b,g as h,t as a,C as B,n as Ue,y as te}from"./app-CDoCnddS.js";import{_ as Ae}from"./AppLayout-DtzidWyy.js";import{u as Te}from"./categoryStore-XMlc1y1y.js";import{u as Ne}from"./clientStore-DmT38KH1.js";import qe from"./StockEditDialog-BzrcJyma.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./webrtc-Bp3zZNrP.js";import"./africastalking-CqPnPOLN.js";import"./IncomingCallDialog-D1k8CdeK.js";/* empty css                                                                           */const De={class:"container mx-auto p-6 bg-gray-50 min-h-screen"},Le={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},Be={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-6"},Oe={class:"lg:col-span-1"},Re=["value"],Ie=["value"],Fe={class:"bg-white rounded-lg shadow-sm overflow-hidden"},$e={class:"p-4 border-b border-gray-200"},He={class:"flex justify-between items-center"},ze={class:"text-sm text-gray-600"},Ke={class:"overflow-x-auto"},Qe={class:"w-full"},Xe={class:"bg-white divide-y divide-gray-200"},Ye={class:"px-4 py-4"},Ge={class:"flex flex-col"},We={class:"bg-red-500 text-white px-2 py-1 rounded text-xs font-medium mb-1 inline-block w-fit"},Je={class:"text-sm text-gray-600"},Ze={class:"px-4 py-4 text-sm text-gray-900"},et={class:"px-4 py-4"},tt={class:"flex items-center gap-3"},st=["src","alt"],ot={class:"font-medium text-gray-900"},lt={class:"text-sm text-gray-500"},rt={class:"px-4 py-4"},at={class:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm"},nt={class:"px-4 py-4 text-sm text-gray-900"},it={class:"px-4 py-4 text-center"},dt={class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm font-medium"},ut={class:"text-xs text-gray-500 mt-1 flex items-center justify-center gap-1"},ct={class:"px-4 py-4 text-center"},pt={class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm font-medium"},mt={class:"text-xs text-gray-500 mt-1 flex items-center justify-center gap-1"},gt={class:"px-4 py-4 text-center"},vt={class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm font-medium"},xt={class:"text-xs text-gray-500 mt-1 flex items-center justify-center gap-1"},ft={class:"px-4 py-4 text-center text-sm font-medium"},yt={class:"px-4 py-4 text-sm font-medium"},bt={class:"px-4 py-4"},ht={class:"flex items-center gap-2"},kt=["onClick"],_t=["onClick"],wt=["onClick"],Ct=["onClick"],St=["onClick"],Et={key:0},Pt={class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},jt={class:"flex-1 flex justify-between sm:hidden"},Mt=["disabled"],Vt=["disabled"],Ut={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},At={class:"text-sm text-gray-700"},Tt={class:"font-medium"},Nt={class:"font-medium"},qt={class:"font-medium"},Dt={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Lt=["disabled"],Bt=["onClick"],Ot=["disabled"],Rt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},It={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white"},Ft={class:"mt-3"},$t={class:"flex justify-between items-center mb-4"},Ht={class:"text-lg font-medium text-gray-900"},zt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Kt=["value"],Qt=["value"],Xt={class:"md:col-span-2"},Yt={class:"md:col-span-2"},Gt={class:"md:col-span-2"},Wt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Jt={class:"flex flex-wrap gap-2 mt-2"},Zt=["src"],es={key:0,class:"text-red-600 text-xs mt-1"},ts={class:"flex flex-wrap gap-2 mt-2"},ss=["src"],os={key:0,class:"text-red-600 text-xs mt-1"},ls={class:"mt-4"},rs={class:"grid grid-cols-1 md:grid-cols-3 gap-2"},as=["onUpdate:modelValue"],ns={key:0,class:"text-red-600 text-xs mt-1"},is=["onUpdate:modelValue"],ds={key:0,class:"text-red-600 text-xs mt-1"},us=["onUpdate:modelValue"],cs=["onClick"],ps={key:0,class:"mt-4"},ms={class:"min-w-full divide-y divide-gray-200 border rounded"},gs={class:"bg-white divide-y divide-gray-200"},vs={class:"px-4 py-2 text-sm text-gray-900"},xs={class:"px-4 py-2 text-sm text-gray-900"},fs={class:"px-4 py-2 text-sm text-gray-900"},ys={class:"flex justify-end space-x-3 mt-6"},bs=["disabled"],hs={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},ks={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-md shadow-lg rounded-md bg-white"},_s={class:"mt-3"},ws={class:"text-sm text-gray-900"},Cs={class:"text-sm text-gray-900"},Ss={class:"flex justify-end space-x-3 mt-6"},Es=["disabled"],Os={__name:"Index",setup(Ps,{expose:se}){L.defaults.withCredentials=!0,L.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const K=window.location.origin,_=L.create({baseURL:`${K}/api/v1`,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});_.interceptors.request.use(o=>{var l;const t=(l=document.head.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content");return t&&(o.headers["X-CSRF-TOKEN"]=t),o}),_.interceptors.response.use(o=>o,o=>{var t;return((t=o.response)==null?void 0:t.status)===419&&window.location.reload(),Promise.reject(o)});const j=p([]),N=p([]),M=p([]),V=p(""),U=p(!1),O=p(!1),R=p(!1),Q=p(null),E=Te(),P=Ne(),q=p(!1),X=p(!1),w=p(!1),I=p(null),D=p(!1),k=p({}),oe=p([]),le=o=>{var t,l,s,r;k.value={id:o.id,name:o.product_name,warehouse_id:((l=(t=o.stocks)==null?void 0:t[0])==null?void 0:l.warehouse_id)||null,current_stock:T(o),committed_stock:F(o),defected_stock:$(o),historical_stock:((r=(s=o.stocks)==null?void 0:s[0])==null?void 0:r.historical_stock)||[]},D.value=!0},v=p({date:"",vendor:"",category:""}),i=p({current_page:1,per_page:15,total:0,last_page:1,from:1,to:15,prev_page_url:null,next_page_url:null}),u=p({sku:"",product_name:"",description:"",category_id:"",vendor_id:"",initial_quantity:0,stock_threshold:0,base_price:0}),g=p({}),y=p({product:null,quantity:0,reason:""}),A=p({}),re=Ee(()=>{const o=i.value.current_page,t=i.value.last_page,l=[];for(let s=Math.max(1,o-2);s<=Math.min(t,o+2);s++)l.push(s);return l}),ae=o=>{var l,s;const t=((l=o.media)==null?void 0:l.find(r=>r.media_type==="image"&&r.is_primary))||((s=o.media)==null?void 0:s.find(r=>r.media_type==="image"));return(t==null?void 0:t.url)||"/api/placeholder/50/50"},ne=o=>{const t=M.value.find(l=>l.id===o);return(t==null?void 0:t.name)||"Uncategorized"},T=o=>{var t,l;return((l=(t=o.stocks)==null?void 0:t[0])==null?void 0:l.current_stock)||0},F=o=>{var t,l;return((l=(t=o.stocks)==null?void 0:t[0])==null?void 0:l.committed_stock)||0},$=o=>{var t,l;return((l=(t=o.stocks)==null?void 0:t[0])==null?void 0:l.defected_stock)||0},Y=o=>{var t,l;return((l=(t=o.stocks)==null?void 0:t[0])==null?void 0:l.stock_threshold)||0},G=o=>{if(o.prices&&o.prices.length>0){const t=o.prices.find(l=>l.is_active);return Number(((t==null?void 0:t.base_price)??o.prices[0].base_price)||0)}return Number(o.base_price||0)};let W=null;const ie=()=>{clearTimeout(W),W=setTimeout(()=>{f(1)},500)},de=()=>{D.value=!1,k.value={}},ue=o=>{D.value=!1,f(i.value.current_page)},f=async(o=1)=>{var t;try{U.value=!0;const l={page:o,per_page:i.value.per_page};V.value&&(l.search=V.value),v.value.vendor&&(l.vendor_id=v.value.vendor),v.value.category&&(l.category_id=v.value.category),v.value.date&&(l.created_date=v.value.date);const r=(await _.get("/products",{params:l})).data;r.data&&Array.isArray(r.data)?(j.value=r.data,i.value={current_page:r.current_page||1,per_page:r.per_page||15,total:r.total||r.data.length,last_page:r.last_page||1,from:r.from||1,to:r.to||r.data.length,prev_page_url:r.prev_page_url,next_page_url:r.next_page_url}):Array.isArray(r)&&(j.value=r,i.value={current_page:1,per_page:r.length,total:r.length,last_page:1,from:1,to:r.length,prev_page_url:null,next_page_url:null})}catch(l){if(console.error("Error fetching products:",l),l.response){const s=l.response.status,r=((t=l.response.data)==null?void 0:t.message)||"Failed to load products";s===401?alert("Please log in to continue"):s===403?alert("You do not have permission to view products"):s>=500?alert("Server error. Please try again later."):alert(r)}else l.request?alert("Network error. Please check your connection and try again."):alert("An unexpected error occurred")}finally{U.value=!1}},ce=async()=>{var o;try{(!P.vendors||P.vendors.length===0)&&await((o=P.fetchVendors)==null?void 0:o.call(P)),N.value=P.vendors||[]}catch(t){console.error("Error fetching vendors:",t);try{const l=await _.get("/vendors");N.value=l.data.data||l.data||[]}catch(l){console.error("Error fetching vendors from API:",l)}}},pe=async()=>{var o;try{(!E.categories||E.categories.length===0)&&await((o=E.fetchCategories)==null?void 0:o.call(E)),M.value=E.categories||[]}catch(t){console.error("Error fetching categories:",t);try{const l=await _.get("/categories");M.value=l.data.data||l.data||[]}catch(l){console.error("Error fetching categories from API:",l)}}},me=()=>{f(1)},J=()=>{v.value={date:"",vendor:"",category:""},V.value="",f(1)},ge=()=>{w.value=!1,g.value={},u.value={sku:"",product_name:"",description:"",category_id:"",vendor_id:"",initial_quantity:0,stock_threshold:0,base_price:0},q.value=!0},ve=o=>{var t;w.value=!0,I.value=o,g.value={},u.value={sku:o.sku,product_name:o.product_name,description:o.description,category_id:o.category_id,vendor_id:o.vendor_id||((t=o.vendor)==null?void 0:t.id),initial_quantity:T(o),stock_threshold:Y(o),base_price:G(o)},q.value=!0},xe=o=>{console.log("Viewing product:",o)},H=()=>{q.value=!1,w.value=!1,I.value=null,g.value={},u.value={sku:"",product_name:"",description:"",category_id:"",vendor_id:"",initial_quantity:0,stock_threshold:0,base_price:0}},fe=async()=>{var o,t,l,s;try{O.value=!0,g.value={};const r=w.value?`/products/${I.value.id}`:"/products",c=w.value?"put":"post",js=await _[c](r,u.value),Se=w.value?"Product updated successfully":"Product created successfully";alert(Se),H(),f(i.value.current_page)}catch(r){if(console.error("Error saving product:",r),((o=r.response)==null?void 0:o.status)===422){g.value=r.response.data.errors||{};const c=(t=Object.values(g.value)[0])==null?void 0:t[0];c&&alert("Validation error: "+c)}else{const c=((s=(l=r.response)==null?void 0:l.data)==null?void 0:s.message)||"Error saving product";alert(c)}}finally{O.value=!1}},ye=async o=>{var t,l;if(confirm(`Are you sure you want to delete "${o.product_name}"?`))try{Q.value=o.id,await _.delete(`/products/${o.id}`),alert("Product deleted successfully"),f(i.value.current_page)}catch(s){console.error("Error deleting product:",s);const r=((l=(t=s.response)==null?void 0:t.data)==null?void 0:l.message)||"Error deleting product";alert(r)}finally{Q.value=null}},be=o=>{console.log("Move stock for product:",o),alert("Stock movement feature will be implemented here")},z=()=>{X.value=!1,A.value={},y.value={product:null,quantity:0,reason:""}},he=async()=>{var o,t,l,s;try{R.value=!0,A.value={},await _.put(`/products/${y.value.product.id}`,{current_stock:y.value.quantity,reason:y.value.reason,warehouse_id:1}),alert("Stock adjusted successfully"),z(),f(i.value.current_page)}catch(r){if(console.error("Error adjusting stock:",r),((o=r.response)==null?void 0:o.status)===422){A.value=r.response.data.errors||{};const c=(t=Object.values(A.value)[0])==null?void 0:t[0];c&&alert("Validation error: "+c)}else{const c=((s=(l=r.response)==null?void 0:l.data)==null?void 0:s.message)||"Error adjusting stock";alert(c)}}finally{R.value=!1}},Z=()=>{i.value.prev_page_url&&i.value.current_page>1&&f(i.value.current_page-1)},ee=()=>{i.value.next_page_url&&i.value.current_page<i.value.last_page&&f(i.value.current_page+1)},ke=o=>{o!==i.value.current_page&&f(o)},_e=o=>o?new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",we=o=>new Intl.NumberFormat("en-KE",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o||0),Ce=async()=>{try{await L.get(`${K}/sanctum/csrf-cookie`)}catch(o){console.warn("Could not initialize CSRF token:",o)}};return Pe(async()=>{await Ce(),await Promise.all([pe(),ce(),f()])}),se({fetchProducts:f,resetFilters:J,formErrors:g,stockFormErrors:A,isLoading:U,isModalLoading:O,isStockLoading:R}),(o,t)=>(n(),je(Ae,null,{default:Me(()=>{var l;return[e("div",De,[e("div",Le,[e("div",{class:"flex justify-between items-center mb-6"},[t[18]||(t[18]=e("h1",{class:"text-2xl font-bold text-gray-800"},"Products Management",-1)),e("button",{onClick:ge,class:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors flex items-center gap-2"},t[17]||(t[17]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),S(" Add a product ")]))]),e("div",Be,[e("div",Oe,[m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>V.value=s),type:"text",placeholder:"Search for a product (id, name, sku)",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:ie},null,544),[[x,V.value]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"DATE",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>v.value.date=s),type:"date",placeholder:"Filter by date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[x,v.value.date]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"SELLER",-1)),m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>v.value.vendor=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[20]||(t[20]=e("option",{value:""},"Filter by seller",-1)),(n(!0),d(b,null,h(N.value,s=>(n(),d("option",{key:s.id,value:s.id},a(s.name),9,Re))),128))],512),[[B,v.value.vendor]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"CATEGORY",-1)),m(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>v.value.category=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[22]||(t[22]=e("option",{value:""},"Category",-1)),(n(!0),d(b,null,h(M.value,s=>(n(),d("option",{key:s.id,value:s.id},a(s.name),9,Ie))),128))],512),[[B,v.value.category]])])]),e("div",{class:"flex gap-4"},[e("button",{onClick:J,class:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center gap-2"},t[24]||(t[24]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),S(" Reset ")])),e("button",{onClick:me,class:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors flex items-center gap-2"},t[25]||(t[25]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})],-1),S(" Filter ")]))])]),e("div",Fe,[e("div",$e,[e("div",He,[t[26]||(t[26]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Products",-1)),e("span",ze,a(i.value.from)+"-"+a(i.value.to)+" / "+a(i.value.total),1)])]),e("div",Ke,[e("table",Qe,[t[41]||(t[41]=e("thead",{class:"bg-blue-600 text-white"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"ID/SKU"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"SELLER"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"PRODUCT"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"CATEGORY"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"DATE"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"CURRENT QUANTITY"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"COMMITTED STOCK"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"DEFECTED QUANTITY"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"STOCK THRESHOLD"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"PRICE"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"PRODUCT PAGE"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"ACTIONS")])],-1)),e("tbody",Xe,[(n(!0),d(b,null,h(j.value,s=>{var r;return n(),d("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Ye,[e("div",Ge,[e("span",We," pdt-"+a(s.id),1),e("span",Je,a(s.sku),1)])]),e("td",Ze,a(((r=s.vendor)==null?void 0:r.name)||"N/A"),1),e("td",et,[e("div",tt,[e("img",{src:ae(s),alt:s.product_name,class:"w-12 h-12 rounded-lg object-cover"},null,8,st),e("div",null,[e("div",ot,a(s.product_name),1),e("div",lt,a(s.description),1)])])]),e("td",rt,[e("span",at,a(ne(s.category_id)),1)]),e("td",nt,a(_e(s.created_at)),1),e("td",it,[e("span",dt," Total "+a(T(s)),1),e("div",ut,[t[27]||(t[27]=e("img",{src:"/api/placeholder/16/16",alt:"Flag",class:"w-4 h-4"},null,-1)),e("span",null,a(T(s)),1),t[28]||(t[28]=e("span",{class:"bg-red-500 text-white px-1 rounded text-xs"},"Nairobi",-1))])]),e("td",ct,[e("span",pt," Total "+a(F(s)),1),e("div",mt,[t[29]||(t[29]=e("img",{src:"/api/placeholder/16/16",alt:"Flag",class:"w-4 h-4"},null,-1)),e("span",null,a(F(s)),1),t[30]||(t[30]=e("span",{class:"bg-red-500 text-white px-1 rounded text-xs"},"Nairobi",-1))])]),e("td",gt,[e("span",vt," Total "+a($(s)),1),e("div",xt,[t[31]||(t[31]=e("img",{src:"/api/placeholder/16/16",alt:"Flag",class:"w-4 h-4"},null,-1)),e("span",null,a($(s)),1),t[32]||(t[32]=e("span",{class:"bg-red-500 text-white px-1 rounded text-xs"},"Nairobi",-1))])]),e("td",ft,a(Y(s)),1),e("td",yt,[S(a(we(G(s)))+" ",1),t[33]||(t[33]=e("span",{class:"text-xs text-gray-500"},"KES",-1))]),t[39]||(t[39]=e("td",{class:"px-4 py-4"},[e("button",{class:"text-blue-600 hover:text-blue-800"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})])])],-1)),e("td",bt,[e("div",ht,[e("button",{onClick:c=>ve(s),class:"text-blue-600 hover:text-blue-800 p-1",title:"Edit"},t[34]||(t[34]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,kt),e("button",{onClick:c=>xe(s),class:"text-gray-600 hover:text-gray-800 p-1",title:"View"},t[35]||(t[35]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,_t),e("button",{onClick:c=>ye(s),class:"text-red-600 hover:text-red-800 p-1",title:"Delete"},t[36]||(t[36]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,wt),e("button",{onClick:c=>le(s),class:"text-indigo-600 hover:text-indigo-800 p-1",title:"Edit Stock"},t[37]||(t[37]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v8m4-4H8"})],-1)]),8,Ct),e("button",{onClick:c=>be(s),class:"text-yellow-600 hover:text-yellow-800 p-1",title:"Move Stock"},t[38]||(t[38]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)]),8,St)])])])}),128)),!j.value||j.value.length===0?(n(),d("tr",Et,t[40]||(t[40]=[e("td",{colspan:"12",class:"px-4 py-8 text-center text-gray-500"},[e("div",{class:"flex flex-col items-center gap-2"},[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2 2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-4.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 009.586 13H7"})]),e("span",null,"No products found")])],-1)]))):C("",!0)])])]),e("div",Pt,[e("div",jt,[e("button",{onClick:Z,disabled:!i.value.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Mt),e("button",{onClick:ee,disabled:!i.value.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Vt)]),e("div",Ut,[e("div",null,[e("p",At,[t[42]||(t[42]=S(" Showing ")),e("span",Tt,a(i.value.from),1),t[43]||(t[43]=S(" to ")),e("span",Nt,a(i.value.to),1),t[44]||(t[44]=S(" of ")),e("span",qt,a(i.value.total),1),t[45]||(t[45]=S(" results "))])]),e("div",null,[e("nav",Dt,[e("button",{onClick:Z,disabled:!i.value.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[46]||(t[46]=[e("span",{class:"sr-only"},"Previous",-1),e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]),8,Lt),(n(!0),d(b,null,h(re.value,s=>(n(),d("button",{key:s,onClick:r=>ke(s),class:Ue(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s===i.value.current_page?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},a(s),11,Bt))),128)),e("button",{onClick:ee,disabled:!i.value.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[47]||(t[47]=[e("span",{class:"sr-only"},"Next",-1),e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]),8,Ot)])])])])]),q.value?(n(),d("div",Rt,[e("div",It,[e("div",Ft,[e("div",$t,[e("h3",Ht,a(w.value?"Edit Product":"Create New Product"),1),e("button",{onClick:H,class:"text-gray-400 hover:text-gray-600"},t[48]||(t[48]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:te(fe,["prevent"]),class:"space-y-4"},[e("div",zt,[e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"SKU *",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>u.value.sku=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",placeholder:"Enter SKU"},null,512),[[x,u.value.sku]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Name *",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>u.value.product_name=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",placeholder:"Enter product name"},null,512),[[x,u.value.product_name]])]),e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category *",-1)),m(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>u.value.category_id=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},[t[51]||(t[51]=e("option",{value:""},"Select Category",-1)),(n(!0),d(b,null,h(M.value,s=>(n(),d("option",{key:s.id,value:s.id},a(s.name),9,Kt))),128))],512),[[B,u.value.category_id]])]),e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Vendor *",-1)),m(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>u.value.vendor_id=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},[t[53]||(t[53]=e("option",{value:""},"Select Vendor",-1)),(n(!0),d(b,null,h(N.value,s=>(n(),d("option",{key:s.id,value:s.id},a(s.name),9,Qt))),128))],512),[[B,u.value.vendor_id]])]),e("div",Xt,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Initial Stock Quantity",-1)),m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>u.value.initial_quantity=s),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter initial stock quantity"},null,512),[[x,u.value.initial_quantity]])]),e("div",Yt,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Stock Threshold",-1)),m(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>u.value.stock_threshold=s),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter minimum stock threshold"},null,512),[[x,u.value.stock_threshold]])]),e("div",Gt,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price (KES)",-1)),m(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>u.value.base_price=s),type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter product price"},null,512),[[x,u.value.base_price]])])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=s=>u.value.description=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter product description (optional)"},null,512),[[x,u.value.description]])]),e("div",Wt,[e("div",null,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Images",-1)),e("input",{type:"file",accept:"image/*",multiple:"",onChange:t[12]||(t[12]=(...s)=>o.handleImageUpload&&o.handleImageUpload(...s)),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,32),e("div",Jt,[(n(!0),d(b,null,h(u.value.images,(s,r)=>(n(),d("img",{key:r,src:s.preview,class:"w-16 h-16 object-cover rounded"},null,8,Zt))),128))]),g.value.images?(n(),d("div",es,a(g.value.images[0]),1)):C("",!0)]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Videos",-1)),e("input",{type:"file",accept:"video/*",multiple:"",onChange:t[13]||(t[13]=(...s)=>o.handleVideoUpload&&o.handleVideoUpload(...s)),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,32),e("div",ts,[(n(!0),d(b,null,h(u.value.videos,(s,r)=>(n(),d("video",{key:r,src:s.preview,controls:"",class:"w-24 h-16 rounded"},null,8,ss))),128))]),g.value.videos?(n(),d("div",os,a(g.value.videos[0]),1)):C("",!0)])]),e("div",ls,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price Offers",-1)),(n(!0),d(b,null,h(u.value.price_offers,(s,r)=>(n(),d("div",{key:r,class:"border rounded p-3 mb-2"},[e("div",rs,[e("div",null,[m(e("input",{"onUpdate:modelValue":c=>s.amount=c,type:"number",min:"0",step:"0.01",placeholder:"Amount",class:"w-full px-2 py-1 border rounded"},null,8,as),[[x,s.amount]]),g.value[`price_offers.${r}.amount`]?(n(),d("div",ns,a(g.value[`price_offers.${r}.amount`][0]),1)):C("",!0)]),e("div",null,[m(e("input",{"onUpdate:modelValue":c=>s.currency=c,type:"text",placeholder:"Currency (e.g. KES)",class:"w-full px-2 py-1 border rounded"},null,8,is),[[x,s.currency]]),g.value[`price_offers.${r}.currency`]?(n(),d("div",ds,a(g.value[`price_offers.${r}.currency`][0]),1)):C("",!0)]),e("div",null,[m(e("input",{"onUpdate:modelValue":c=>s.label=c,type:"text",placeholder:"Offer Label (e.g. Discount, Promo)",class:"w-full px-2 py-1 border rounded"},null,8,us),[[x,s.label]])])]),e("button",{type:"button",onClick:c=>o.removePriceOffer(r),class:"text-red-600 text-xs mt-2"},"Remove Offer",8,cs)]))),128)),e("button",{type:"button",onClick:t[14]||(t[14]=(...s)=>o.addPriceOffer&&o.addPriceOffer(...s)),class:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs mt-2"}," Add Price Offer "),u.value.price_offers&&u.value.price_offers.length?(n(),d("div",ps,[e("table",ms,[t[61]||(t[61]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Amount"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Currency"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Label")])],-1)),e("tbody",gs,[(n(!0),d(b,null,h(u.value.price_offers,(s,r)=>(n(),d("tr",{key:r},[e("td",vs,a(s.amount),1),e("td",xs,a(s.currency),1),e("td",fs,a(s.label),1)]))),128))])])])):C("",!0)]),e("div",ys,[e("button",{type:"button",onClick:H,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:U.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"},a(w.value?"Update":"Create"),9,bs)])],32)])])])):C("",!0),X.value?(n(),d("div",hs,[e("div",ks,[e("div",_s,[e("div",{class:"flex justify-between items-center mb-4"},[t[64]||(t[64]=e("h3",{class:"text-lg font-medium text-gray-900"},"Adjust Stock",-1)),e("button",{onClick:z,class:"text-gray-400 hover:text-gray-600"},t[63]||(t[63]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:te(he,["prevent"]),class:"space-y-4"},[e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product",-1)),e("p",ws,a((l=y.value.product)==null?void 0:l.product_name),1)]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Current Stock",-1)),e("p",Cs,a(T(y.value.product)),1)]),e("div",null,[t[67]||(t[67]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Adjustment Quantity *",-1)),m(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>y.value.quantity=s),type:"number",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",placeholder:"Enter quantity (positive to add, negative to subtract)"},null,512),[[x,y.value.quantity]])]),e("div",null,[t[68]||(t[68]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reason",-1)),m(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=s=>y.value.reason=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter reason for stock adjustment (optional)"},null,512),[[x,y.value.reason]])]),e("div",Ss,[e("button",{type:"button",onClick:z,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:U.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"}," Adjust Stock ",8,Es)])],32)])])])):C("",!0)]),Ve(qe,{isOpen:D.value,productId:k.value.id,productName:k.value.name,warehouseId:k.value.warehouse_id,currentStock:k.value.current_stock,committedStock:k.value.committed_stock,defectedStock:k.value.defected_stock,historicalStock:k.value.historical_stock,warehouses:oe.value,onClose:de,onSave:ue},null,8,["isOpen","productId","productName","warehouseId","currentStock","committedStock","defectedStock","historicalStock","warehouses"])]}),_:1}))}};export{Os as default};
