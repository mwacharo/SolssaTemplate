import{r as h,Q as fe,j as g,s as A,l as m,c as J,o as z,w as a,b as l,a as n,u as b,f as p,t as O,y as be,d as P,e as X,F as ye,g as Ve,R as ge}from"./app-B4TPmpLH.js";import{u as ke}from"./orderStore-CRdE868b.js";import{n as Y}from"./toast-DJ-J4my4.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ze={class:"text-h6"},Ue={class:"mb-6"},Ce={class:"text-subtitle-1 font-weight-medium mb-3 text-primary"},he={class:"mb-6"},Oe={class:"text-subtitle-1 font-weight-medium mb-3 text-primary"},qe={class:"mb-6"},xe={class:"text-subtitle-1 font-weight-medium mb-3 text-primary"},Ne={key:0},Fe={key:1},Se={class:"mb-6"},Ae={class:"text-subtitle-1 font-weight-medium mb-3 text-primary"},Pe={class:"mt-4"},Te={__name:"OrderForm",emits:["order-saved","dialog-closed","open-call-dialog"],setup(Ee,{emit:D}){const T=D,ee=()=>{T("open-call-dialog",o.value.customer_address.phone)},v=ke(),$=h(null),E=h(!1),{dialog:q,isCreateMode:c,selectedOrder:I}=fe(v),x=h(!1),y=h("customer"),r={required:t=>!!t||"This field is required",phone:t=>t?/^[\d\s\-\+\(\)]+$/.test(t)||"Invalid phone number format":!0},le=[{title:"API",value:"api"},{title:"Web",value:"web"},{title:"Mobile App",value:"mobile"},{title:"WhatsApp",value:"whatsapp"},{title:"Facebook",value:"facebook"},{title:"Instagram",value:"instagram"},{title:"Tiktok",value:"tiktok"}],de=[{title:"Vendor API",value:"vendor_api"},{title:"Customer Web",value:"customer_web"},{title:"Customer Mobile",value:"customer_mobile"},{title:"Agent",value:"agent"},{title:"Call Center",value:"call_center"}],oe=g(()=>v.vendorOptions);g(()=>v.categoryOptions);const R=g(()=>v.cityOptions),M=g(()=>v.zoneOptions),te=g(()=>v.warehouseOptions),B=g(()=>v.statusOptions),H=g(()=>v.selectedOrder),o=h({id:null,order_no:"",reference:"",customer_id:null,vendor_id:null,warehouse_id:null,country_id:null,source:"vendor_api",platform:"api",currency:"KSH",sub_total:"0.00",total_price:"",shipping_charges:"0.00",amount_paid:"0.00",weight:"",paid:!1,tracking_no:null,waybill_no:null,distance:"",geocoded:0,archived_at:null,delivery_date:"",status_id:"",customer_notes:"",order_items:[],customer_address:{full_name:"",phone:"",city_id:"",zone_id:null,address:"",region:"",zipcode:"",email:""},pickup_address:{full_name:"",phone:"",city_id:"",zone_id:null,address:"",region:"",zipcode:"",email:""},dropoff_address:{full_name:"",phone:"",city_id:"",zone_id:null,address:"",region:"",zipcode:"",email:""}}),K=t=>{var k,U;if(!t)return;let e=t.pickup_address||((k=t.addresses)==null?void 0:k.find(s=>s.type==="pickup"))||{},i=t.dropoff_address||((U=t.addresses)==null?void 0:U.find(s=>s.type==="shipping"))||{},_=t.customer||t.customer_address||t.shipping_address||{};e.full_name||i.full_name?y.value="pickup_dropoff":y.value="customer";let V="";t.latest_status&&t.latest_status.status_id?V=t.latest_status.status_id:t.status_id&&(V=t.status_id),o.value={id:t.id??null,order_no:t.order_no??"",reference:t.reference??"",customer_id:t.customer_id??null,vendor_id:t.vendor_id??null,warehouse_id:t.warehouse_id??null,country_id:t.country_id??null,source:t.source??"vendor_api",platform:t.platform??"api",currency:t.currency??"KSH",sub_total:t.sub_total??"0.00",total_price:t.total_price??"0.00",shipping_charges:t.shipping_charges??"0.00",amount_paid:t.amount_paid??"0.00",weight:t.weight??"",paid:t.paid??!1,tracking_no:t.tracking_no??null,waybill_no:t.waybill_no??null,distance:t.distance??"",geocoded:t.geocoded??0,archived_at:t.archived_at??null,delivery_date:t.delivery_date??"",status_id:V,customer_notes:t.customer_notes??"",order_items:(t.order_items||[]).map(s=>({...s,quantity:Number(s.quantity)||1,unit_price:Number(s.unit_price)||0,editable:!0})),customer_address:{full_name:_.full_name??"",phone:_.phone??"",city_id:_.city_id??"",zone_id:_.zone_id??null,address:_.address??"",region:_.region??"",zipcode:_.zipcode??"",email:_.email??""},pickup_address:{full_name:e.full_name??"",phone:e.phone??"",city_id:e.city_id??"",zone_id:e.zone_id??null,address:e.address??"",region:e.region??"",zipcode:e.zipcode??"",email:e.email??""},dropoff_address:{full_name:i.full_name??"",phone:i.phone??"",city_id:i.city_id??"",zone_id:i.zone_id??null,address:i.address??"",region:i.region??"",zipcode:i.zipcode??"",email:i.email??""}}},Q=()=>{o.value={order_no:"",total_price:"",sub_total:"0.00",shipping_charges:"0.00",amount_paid:"0.00",reference:"",platform:"api",source:"vendor_api",vendor_id:null,warehouse_id:null,delivery_date:"",status_id:"",customer_notes:"",order_items:[],customer_address:{full_name:"",phone:"",city_id:"",zone_id:null,address:"",region:"",zipcode:"",email:""},pickup_address:{full_name:"",phone:"",city_id:"",zone_id:null,address:"",region:"",zipcode:"",email:""},dropoff_address:{full_name:"",phone:"",city_id:"",zone_id:null,address:"",region:"",zipcode:"",email:""}},y.value="customer"},ae=t=>{t&&v.fetchDropdownOptions(t)},ie=t=>{t==="customer"?(o.value.from_warehouse_id=null,o.value.to_warehouse_id=null,o.value.from_address={city:""},o.value.to_address={city:""}):o.value.customer_address={full_name:"",phone:"",city_id:"",zone_id:null,address:""}},W=()=>{v.closeDialog(),T("dialog-closed")},j=async()=>{var t,e;if(await((t=$.value)==null?void 0:t.validate())){x.value=!0;try{let i={...o.value};if(y.value==="customer"?(i.customer={...i.customer_address},delete i.customer_address,delete i.pickup_address,delete i.dropoff_address):y.value==="pickup_dropoff"&&(i.pickup_address={...i.pickup_address},i.dropoff_address={...i.dropoff_address},i.addresses=[{type:"pickup",...i.pickup_address},{type:"shipping",...i.dropoff_address}],delete i.customer_address),Array.isArray(i.order_items)&&(i.order_items=i.order_items.map(_=>({..._,quantity:Number(_.quantity)||1,unit_price:Number(_.unit_price)||0}))),c.value)await v.createOrder(i);else if((e=H.value)!=null&&e.id)await v.updateOrder(H.value.id,i);else throw new Error("No order selected for editing.");Y.success(c.value?"Order created successfully":"Order updated successfully"),T("order-saved"),W()}catch(i){Y.error(c.value?"Failed to create order":"Failed to update order"),console.error("Error saving order:",i)}finally{x.value=!1}}},N=()=>!o.value.order_items||o.value.order_items.length===0?"0.00":o.value.order_items.reduce((e,i)=>e+Number(i.quantity)*Number(i.unit_price),0).toFixed(2),F=()=>{o.value.total_price=N(),o.value.sub_total=N()},se=()=>{o.value.order_items.push({sku:"",quantity:1,unit_price:0,editable:!0}),F()},ne=t=>{o.value.order_items.splice(t,1),F()};return A(()=>o.value.order_items,t=>{t&&t.length>0&&F()},{deep:!0}),A(()=>I.value,t=>{t&&!c.value&&(console.log("Selected order changed:",t),K(t))},{immediate:!0,deep:!0}),A(()=>c.value,t=>{t&&(console.log("Switching to create mode"),Q())},{immediate:!0}),A(()=>q.value,t=>{t&&(c.value?Q():I.value&&K(I.value))}),(t,e)=>{const i=m("v-icon"),_=m("v-spacer"),V=m("v-btn"),k=m("v-card-title"),U=m("v-divider"),s=m("v-text-field"),u=m("v-col"),f=m("v-select"),C=m("v-row"),S=m("v-textarea"),G=m("v-radio"),re=m("v-radio-group"),Z=m("v-card"),ue=m("v-autocomplete"),me=m("v-table"),pe=m("v-form"),ce=m("v-card-text"),_e=m("v-card-actions"),ve=m("v-dialog");return z(),J(ve,{modelValue:b(q),"onUpdate:modelValue":e[36]||(e[36]=d=>ge(q)?q.value=d:null),"max-width":"800",persistent:""},{default:a(()=>[l(Z,null,{default:a(()=>[l(k,{class:"d-flex align-center"},{default:a(()=>[l(i,{class:"mr-2",color:b(c)?"success":"primary"},{default:a(()=>[p(O(b(c)?"mdi-plus-circle":"mdi-pencil"),1)]),_:1},8,["color"]),n("span",ze,O(b(c)?"Create New Order":"Edit Order"),1),l(_),l(V,{icon:"mdi-close",variant:"text",onClick:W})]),_:1}),l(U),l(ce,{class:"pa-6"},{default:a(()=>[l(pe,{ref_key:"formRef",ref:$,modelValue:E.value,"onUpdate:modelValue":e[35]||(e[35]=d=>E.value=d),onSubmit:be(j,["prevent"])},{default:a(()=>[n("div",Ue,[n("h3",Ce,[l(i,{class:"mr-1",size:"small"},{default:a(()=>e[37]||(e[37]=[p("mdi-information")])),_:1,__:[37]}),e[38]||(e[38]=p(" Basic Information "))]),l(C,null,{default:a(()=>[l(u,{cols:"12",md:"6"},{default:a(()=>[l(s,{modelValue:o.value.order_no,"onUpdate:modelValue":e[0]||(e[0]=d=>o.value.order_no=d),label:"Order Number",placeholder:"Enter order number"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"6"},{default:a(()=>[l(f,{modelValue:o.value.status_id,"onUpdate:modelValue":e[1]||(e[1]=d=>o.value.status_id=d),items:B.value,"item-title":"name","item-value":"id",label:"Status","prepend-inner-icon":"mdi-flag",variant:"outlined",density:"comfortable",rules:[r.required],clearable:"",placeholder:"Select status"},null,8,["modelValue","items","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:a(()=>[l(f,{modelValue:o.value.status_id,"onUpdate:modelValue":e[2]||(e[2]=d=>o.value.status_id=d),items:B.value,"item-title":"name","item-value":"id",label:"Status Category","prepend-inner-icon":"mdi-flag",variant:"outlined",density:"comfortable",rules:[r.required],clearable:"",placeholder:"Select status"},null,8,["modelValue","items","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:a(()=>[l(f,{modelValue:o.value.status_id,"onUpdate:modelValue":e[3]||(e[3]=d=>o.value.status_id=d),items:B.value,"item-title":"name","item-value":"id",label:"Status Notes","prepend-inner-icon":"mdi-flag",variant:"outlined",density:"comfortable",rules:[r.required],clearable:"",placeholder:"Select status"},null,8,["modelValue","items","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:a(()=>[l(f,{modelValue:o.value.platform,"onUpdate:modelValue":e[4]||(e[4]=d=>o.value.platform=d),items:le,label:"Platform","prepend-inner-icon":"mdi-devices",variant:"outlined",density:"comfortable",rules:[r.required]},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:a(()=>[l(f,{modelValue:o.value.source,"onUpdate:modelValue":e[5]||(e[5]=d=>o.value.source=d),items:de,label:"Order Source","prepend-inner-icon":"mdi-source-branch",variant:"outlined",density:"comfortable",rules:[r.required]},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:a(()=>[l(s,{modelValue:o.value.delivery_date,"onUpdate:modelValue":e[6]||(e[6]=d=>o.value.delivery_date=d),label:"Delivery Date",type:"datetime-local","prepend-inner-icon":"mdi-calendar-clock",variant:"outlined",density:"comfortable"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{cols:"12"},{default:a(()=>[l(S,{modelValue:o.value.customer_notes,"onUpdate:modelValue":e[7]||(e[7]=d=>o.value.customer_notes=d),label:"Customer Notes",placeholder:"Enter any special instructions or notes",rows:"4",variant:"outlined",density:"comfortable"},null,8,["modelValue"])]),_:1})]),n("div",he,[n("h3",Oe,[l(i,{class:"mr-1",size:"small"},{default:a(()=>e[39]||(e[39]=[p("mdi-store")])),_:1,__:[39]}),e[40]||(e[40]=p(" Vendor & Warehouse "))]),l(C,null,{default:a(()=>[l(u,{cols:"12",md:"6"},{default:a(()=>[l(f,{modelValue:o.value.vendor_id,"onUpdate:modelValue":[e[8]||(e[8]=d=>o.value.vendor_id=d),ae],items:oe.value,"item-title":"name","item-value":"id",label:"Vendor","prepend-inner-icon":"mdi-domain",variant:"outlined",density:"comfortable",rules:[r.required]},null,8,["modelValue","items","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:a(()=>[l(f,{modelValue:o.value.warehouse_id,"onUpdate:modelValue":e[9]||(e[9]=d=>o.value.warehouse_id=d),items:te.value,"item-title":"name","item-value":"id",label:"Warehouse","prepend-inner-icon":"mdi-warehouse",variant:"outlined",density:"comfortable",rules:[r.required]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),n("div",qe,[n("h3",xe,[l(i,{class:"mr-1",size:"small"},{default:a(()=>e[41]||(e[41]=[p("mdi-map-marker")])),_:1,__:[41]}),e[42]||(e[42]=p(" Address Information "))]),l(re,{modelValue:y.value,"onUpdate:modelValue":[e[10]||(e[10]=d=>y.value=d),ie],inline:"",class:"mb-4"},{default:a(()=>[l(G,{label:"Pickup & Drop-off",value:"pickup_dropoff",color:"primary"}),l(G,{label:"Customer Delivery",value:"customer",color:"primary"})]),_:1},8,["modelValue"]),y.value==="pickup_dropoff"?(z(),P("div",Ne,[l(C,null,{default:a(()=>[l(u,{cols:"12",md:"6"},{default:a(()=>[l(Z,{variant:"outlined",class:"pa-4"},{default:a(()=>[l(k,{class:"text-subtitle-2 pa-0 mb-3"},{default:a(()=>[l(i,{class:"mr-1",color:"orange"},{default:a(()=>e[43]||(e[43]=[p("mdi-map-marker-up")])),_:1,__:[43]}),e[44]||(e[44]=p(" Pickup Address "))]),_:1,__:[44]}),l(s,{modelValue:o.value.pickup_address.full_name,"onUpdate:modelValue":e[11]||(e[11]=d=>o.value.pickup_address.full_name=d),label:"Full Name","prepend-inner-icon":"mdi-account",variant:"outlined",density:"comfortable",rules:[r.required],class:"mb-3"},null,8,["modelValue","rules"]),l(s,{modelValue:o.value.pickup_address.phone,"onUpdate:modelValue":e[12]||(e[12]=d=>o.value.pickup_address.phone=d),label:"Phone Number","prepend-inner-icon":"mdi-phone",variant:"outlined",density:"comfortable",rules:[r.required,r.phone],class:"mb-3"},null,8,["modelValue","rules"]),l(s,{modelValue:o.value.pickup_address.email,"onUpdate:modelValue":e[13]||(e[13]=d=>o.value.pickup_address.email=d),label:"Email","prepend-inner-icon":"mdi-email",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),l(f,{modelValue:o.value.pickup_address.city_id,"onUpdate:modelValue":e[14]||(e[14]=d=>o.value.pickup_address.city_id=d),items:R.value,"item-title":"name","item-value":"id",label:"City","prepend-inner-icon":"mdi-city",variant:"outlined",density:"comfortable",rules:[r.required],class:"mb-3"},null,8,["modelValue","items","rules"]),l(f,{modelValue:o.value.pickup_address.zone_id,"onUpdate:modelValue":e[15]||(e[15]=d=>o.value.pickup_address.zone_id=d),items:M.value,"item-title":"name","item-value":"id",label:"Zone","prepend-inner-icon":"mdi-map-marker-radius",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue","items"]),l(s,{modelValue:o.value.pickup_address.region,"onUpdate:modelValue":e[16]||(e[16]=d=>o.value.pickup_address.region=d),label:"Region","prepend-inner-icon":"mdi-map",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),l(s,{modelValue:o.value.pickup_address.zipcode,"onUpdate:modelValue":e[17]||(e[17]=d=>o.value.pickup_address.zipcode=d),label:"Zip Code","prepend-inner-icon":"mdi-numeric",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),l(S,{modelValue:o.value.pickup_address.address,"onUpdate:modelValue":e[18]||(e[18]=d=>o.value.pickup_address.address=d),label:"Full Address","prepend-inner-icon":"mdi-home",variant:"outlined",density:"comfortable",rows:"2",rules:[r.required]},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(u,{cols:"12",md:"6"},{default:a(()=>[l(Z,{variant:"outlined",class:"pa-4"},{default:a(()=>[l(k,{class:"text-subtitle-2 pa-0 mb-3"},{default:a(()=>[l(i,{class:"mr-1",color:"green"},{default:a(()=>e[45]||(e[45]=[p("mdi-map-marker-down")])),_:1,__:[45]}),e[46]||(e[46]=p(" Drop-off Address "))]),_:1,__:[46]}),l(s,{modelValue:o.value.dropoff_address.full_name,"onUpdate:modelValue":e[19]||(e[19]=d=>o.value.dropoff_address.full_name=d),label:"Full Name","prepend-inner-icon":"mdi-account",variant:"outlined",density:"comfortable",rules:[r.required],class:"mb-3"},null,8,["modelValue","rules"]),l(s,{modelValue:o.value.dropoff_address.phone,"onUpdate:modelValue":e[20]||(e[20]=d=>o.value.dropoff_address.phone=d),label:"Phone Number","prepend-inner-icon":"mdi-phone",variant:"outlined",density:"comfortable",rules:[r.required,r.phone],class:"mb-3"},null,8,["modelValue","rules"]),l(s,{modelValue:o.value.dropoff_address.email,"onUpdate:modelValue":e[21]||(e[21]=d=>o.value.dropoff_address.email=d),label:"Email","prepend-inner-icon":"mdi-email",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),l(f,{modelValue:o.value.dropoff_address.city_id,"onUpdate:modelValue":e[22]||(e[22]=d=>o.value.dropoff_address.city_id=d),items:R.value,"item-title":"name","item-value":"id",label:"City","prepend-inner-icon":"mdi-city",variant:"outlined",density:"comfortable",rules:[r.required],class:"mb-3"},null,8,["modelValue","items","rules"]),l(f,{modelValue:o.value.dropoff_address.zone_id,"onUpdate:modelValue":e[23]||(e[23]=d=>o.value.dropoff_address.zone_id=d),items:M.value,"item-title":"name","item-value":"id",label:"Zone","prepend-inner-icon":"mdi-map-marker-radius",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue","items"]),l(s,{modelValue:o.value.dropoff_address.region,"onUpdate:modelValue":e[24]||(e[24]=d=>o.value.dropoff_address.region=d),label:"Region","prepend-inner-icon":"mdi-map",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),l(s,{modelValue:o.value.dropoff_address.zipcode,"onUpdate:modelValue":e[25]||(e[25]=d=>o.value.dropoff_address.zipcode=d),label:"Zip Code","prepend-inner-icon":"mdi-numeric",variant:"outlined",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),l(S,{modelValue:o.value.dropoff_address.address,"onUpdate:modelValue":e[26]||(e[26]=d=>o.value.dropoff_address.address=d),label:"Full Address","prepend-inner-icon":"mdi-home",variant:"outlined",density:"comfortable",rows:"2",rules:[r.required]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})])):y.value==="customer"?(z(),P("div",Fe,[l(C,null,{default:a(()=>[l(u,{cols:"12",md:"6"},{default:a(()=>[l(s,{modelValue:o.value.customer_address.full_name,"onUpdate:modelValue":e[27]||(e[27]=d=>o.value.customer_address.full_name=d),label:"Customer Name","prepend-inner-icon":"mdi-account",variant:"outlined",density:"comfortable",rules:[r.required]},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:a(()=>[l(s,{modelValue:o.value.customer_address.phone,"onUpdate:modelValue":e[28]||(e[28]=d=>o.value.customer_address.phone=d),label:"Phone Number","prepend-inner-icon":"mdi-phone",variant:"outlined",density:"comfortable",rules:[r.required,r.phone],"onClick:prependInner":ee,"readonly-on-click":""},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:a(()=>[l(f,{modelValue:o.value.customer_address.city_id,"onUpdate:modelValue":e[29]||(e[29]=d=>o.value.customer_address.city_id=d),items:R.value,"item-title":"name","item-value":"id",label:"City","prepend-inner-icon":"mdi-city",variant:"outlined",density:"comfortable",rules:[r.required]},null,8,["modelValue","items","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:a(()=>[l(f,{modelValue:o.value.customer_address.zone_id,"onUpdate:modelValue":e[30]||(e[30]=d=>o.value.customer_address.zone_id=d),items:M.value,"item-title":"name","item-value":"id",label:"Zone","prepend-inner-icon":"mdi-map-marker-radius",variant:"outlined",density:"comfortable"},null,8,["modelValue","items"])]),_:1}),l(u,{cols:"12"},{default:a(()=>[l(S,{modelValue:o.value.customer_address.address,"onUpdate:modelValue":e[31]||(e[31]=d=>o.value.customer_address.address=d),label:"Full Address","prepend-inner-icon":"mdi-home",variant:"outlined",density:"comfortable",rows:"2",rules:[r.required]},null,8,["modelValue","rules"])]),_:1})]),_:1})])):X("",!0)]),n("div",Se,[n("h3",Ae,[l(i,{class:"mr-1",size:"small"},{default:a(()=>e[47]||(e[47]=[p("mdi-package-variant")])),_:1,__:[47]}),e[48]||(e[48]=p(" Order Items "))]),l(me,{density:"comfortable",class:"mb-2"},{default:a(()=>[e[49]||(e[49]=n("thead",null,[n("tr",null,[n("th",{style:{width:"30%"}},"Product"),n("th",{style:{width:"15%"}},"Quantity"),n("th",{style:{width:"15%"}},"Unit Price"),n("th",{style:{width:"15%"}},"Total"),n("th",{style:{width:"10%"}})])],-1)),n("tbody",null,[(z(!0),P(ye,null,Ve(o.value.order_items||[],(d,L)=>(z(),P("tr",{key:d.id||L},[n("td",null,[l(ue,{modelValue:d.sku,"onUpdate:modelValue":w=>d.sku=w,items:b(v).productOptions,"item-title":"product_name","item-value":"sku",placeholder:"Product name",density:"compact","hide-details":"",variant:"outlined",readonly:!b(c)&&!d.editable},null,8,["modelValue","onUpdate:modelValue","items","readonly"])]),n("td",null,[l(s,{modelValue:d.quantity,"onUpdate:modelValue":w=>d.quantity=w,modelModifiers:{number:!0},type:"number",min:"1",density:"compact","hide-details":"",variant:"outlined",readonly:!b(c)&&!d.editable},null,8,["modelValue","onUpdate:modelValue","readonly"])]),n("td",null,[l(s,{modelValue:d.unit_price,"onUpdate:modelValue":w=>d.unit_price=w,modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",density:"compact","hide-details":"",variant:"outlined",readonly:!b(c)&&!d.editable},null,8,["modelValue","onUpdate:modelValue","readonly"])]),n("td",null,O((d.quantity*d.unit_price).toFixed(2)),1),n("td",null,[b(c)||d.editable!==!1?(z(),J(V,{key:0,icon:"mdi-delete",size:"small",color:"error",variant:"text",onClick:w=>ne(L)},null,8,["onClick"])):X("",!0)])]))),128))])]),_:1,__:[49]}),l(V,{color:"primary",variant:"text","prepend-icon":"mdi-plus",onClick:se,class:"mt-2"},{default:a(()=>e[50]||(e[50]=[p(" Add Item ")])),_:1,__:[50]})]),n("div",Pe,[l(C,null,{default:a(()=>[l(u,{cols:"12",md:"4"},{default:a(()=>[l(s,{"model-value":N(),"onUpdate:modelValue":e[32]||(e[32]=d=>o.value.total_price=d),label:"Total",variant:"outlined",density:"comfortable",readonly:""},null,8,["model-value"])]),_:1}),l(u,{cols:"12",md:"4"},{default:a(()=>[l(s,{modelValue:o.value.shipping_charges,"onUpdate:modelValue":[e[33]||(e[33]=d=>o.value.shipping_charges=d),e[34]||(e[34]=d=>F())],label:"Shipping Charges",type:"number",min:"0",step:"0.01",variant:"outlined",density:"comfortable"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:a(()=>[l(s,{"model-value":(parseFloat(N())+parseFloat(o.value.shipping_charges||0)).toFixed(2),label:"Grand Total",variant:"outlined",density:"comfortable",readonly:""},null,8,["model-value"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),_:1}),l(U),l(_e,{class:"pa-4"},{default:a(()=>[l(_),l(V,{variant:"outlined",onClick:W,disabled:x.value},{default:a(()=>e[51]||(e[51]=[p(" Cancel ")])),_:1,__:[51]},8,["disabled"]),l(V,{color:b(c)?"success":"primary",variant:"flat",onClick:j,loading:x.value,disabled:!E.value},{default:a(()=>[l(i,{class:"mr-1"},{default:a(()=>[p(O(b(c)?"mdi-plus":"mdi-content-save"),1)]),_:1}),p(" "+O(b(c)?"Create Order":"Save Changes"),1)]),_:1},8,["color","loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},We=we(Te,[["__scopeId","data-v-ab4baff8"]]);export{We as default};
