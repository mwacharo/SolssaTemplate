import{_ as It}from"./AppLayout-Dv-z_2Yb.js";import{E as Rt,i as Tt,G as Vt,j as tt,r as S,s as Lt,k as Mt,l as d,c as Et,o as P,w as e,a as o,d as E,e as Q,b as l,f as s,t as i,u as k,m as H}from"./app-CAGelR5H.js";import{u as Qt,C as Ot}from"./CallDialogs-BH18mETJ.js";import{n as g}from"./toast-jhrTpa2Y.js";import{u as Ft}from"./webrtc-a6dBOnr9.js";import{_ as Gt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IncomingCallDialog-SeFjZYvO.js";/* empty css                                                                           */import"./africastalking-IDrlOjRd.js";const Kt=Rt("agent",{state:()=>({callHistory:[],loading:!1,error:null}),actions:{async fetchCallHistory(C={}){var z,A,I,B,w,R,b;this.loading=!0,this.error=null;try{const u={page:C.page||1,per_page:C.itemsPerPage||15,sort:(z=C.sortBy)!=null&&z.length?C.sortBy.map(p=>(p.desc?"-":"")+p.key).join(","):void 0,search:C.search||void 0};Object.keys(u).forEach(p=>u[p]===void 0&&delete u[p]);const m=await Tt.get("/api/v1/call-history",{params:u}),v=((B=(I=(A=m.data)==null?void 0:A.data)==null?void 0:I.data)==null?void 0:B.data)||[],f=((b=(R=(w=m.data)==null?void 0:w.data)==null?void 0:R.data)==null?void 0:b.total)||0;return this.callHistory=v,{total:f,data:v}}catch(u){throw this.error=u,this.callHistory=[],u}finally{this.loading=!1}},clearCallHistory(){this.callHistory=[]}}}),Wt={class:"p-4"},qt={class:"d-flex align-center"},Jt={class:"white--text text-h5"},Xt={class:"flex-grow-1"},Yt={class:"d-flex align-center"},Zt={class:"text-h6 mb-0"},te={class:"text-body-2 mb-0 grey--text"},ee={class:"d-flex align-center"},le={class:"ml-2"},oe={class:"text-h6"},ne={class:"d-flex align-center"},se={class:"ml-2"},ae={class:"text-h6"},re={class:"d-flex align-center"},ie={class:"ml-2"},de={class:"text-h6"},ue={class:"d-flex align-center"},ce={class:"ml-2"},me={class:"text-h6"},_e={key:0},pe={class:"text-right"},ge={class:"text-right"},ve={class:"text-right"},fe={class:"call-history-container"},ye={class:"table-controls mb-4"},Ce={class:"controls-left"},we={class:"controls-right"},be={class:"date-cell"},he={class:"date-primary"},xe={class:"date-secondary"},Se={class:"phone-cell"},ke={class:"phone-number"},De={class:"phone-cell"},Ne={class:"phone-number"},$e={class:"service-cell"},je={class:"action-buttons"},Be={class:"no-data-container"},Ue={class:"loading-container"},Pe={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},He={class:"bg-white w-full max-w-2xl rounded-lg shadow-lg overflow-hidden"},ze={class:"p-4 space-y-3"},Ae={key:0},Ie=["src"],Re={key:1},Te={class:"mt-2 p-2 border rounded bg-gray-50"},Ve={__name:"CallCentre",props:{search:{type:String,default:""}},emits:["refresh"],setup(C,{emit:z}){const A=Vt(),I=tt(()=>{var t,r;return(r=(t=A.props.auth)==null?void 0:t.user)==null?void 0:r.id}),B=Ft(),w=C,R=z,b=Kt(),u=Qt(),m=S({summary_call_missed:0,summary_call_completed:0,summary_outbound_call_completed:0,summary_inbound_call_completed:0,summary_rejected_incoming_calls:0,summary_rejected_outgoing_calls:0,summary_user_busy_outgoing_calls:0}),v=S(1),f=S(15),p=S([]),O=S(0),et=[10,15,25,50,100],F=S(!1),c=S({}),lt=()=>{axios.get(`/api/v1/agent-stats/${I.value}`).then(n=>{m.value=n.data,console.log("Agent stats:",m.value)}).catch(n=>{console.error("Error fetching agent stats:",n)})},ot=[{title:"Call Start",value:"callStartTime",width:"140px"},{title:"Caller",value:"callerNumber",width:"130px"},{title:"Caller Carrier",value:"callerCarrierName",width:"120px"},{title:"Caller Country",value:"callerCountryCode",width:"100px"},{title:"Client Dialed",value:"clientDialedNumber",width:"130px"},{title:"Duration",value:"durationInSeconds",width:"100px"},{title:"Currency",value:"currencyCode",width:"80px"},{title:"Amount",value:"amount",width:"90px"},{title:"Status",value:"status",width:"100px"},{title:"Bridge Hangup",value:"lastBridgeHangupCause",width:"120px"},{title:"Actions",value:"actions",sortable:!1,width:"200px"}],T=async n=>{try{const t=await b.fetchCallHistory(n);O.value=t.total}catch(t){console.error("Error loading call history:",t),g.error("Failed to load call history","error")}},nt=()=>{T({page:v.value,itemsPerPage:f.value,sortBy:p.value,search:w.search}),R("refresh")},st=n=>new Date(n).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}),at=n=>new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),G=n=>n?n.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"):"N/A",rt=n=>{if(!n||n===0)return"0s";const t=Math.floor(n/3600),r=Math.floor(n%3600/60),y=n%60;return t>0?`${t}h ${r}m ${y}s`:r>0?`${r}m ${y}s`:`${y}s`},it=n=>!n||n===0?"error":n<30?"warning":n<300?"success":"primary",dt=n=>({completed:"success",answered:"success",failed:"error",busy:"warning","no-answer":"warning",cancelled:"error"})[n==null?void 0:n.toLowerCase()]||"grey",ut=n=>({completed:"mdi-check-circle",answered:"mdi-phone-check",failed:"mdi-phone-cancel",busy:"mdi-phone-busy","no-answer":"mdi-phone-missed",cancelled:"mdi-phone-hangup"})[n==null?void 0:n.toLowerCase()]||"mdi-help-circle",ct=n=>({voice:"primary",sms:"success",data:"info"})[n==null?void 0:n.toLowerCase()]||"grey",mt=n=>({voice:"mdi-phone",sms:"mdi-message",data:"mdi-database"})[n==null?void 0:n.toLowerCase()]||"mdi-cog",_t=n=>({normal_clearing:"success",user_busy:"warning",no_answer:"warning",call_rejected:"error",network_out_of_order:"error"})[n==null?void 0:n.toLowerCase()]||"grey",pt=n=>({normal_clearing:"Call ended normally",user_busy:"User was busy",no_answer:"No answer from user",call_rejected:"Call was rejected",network_out_of_order:"Network error"})[n==null?void 0:n.toLowerCase()]||"Unknown cause",gt=n=>({active:"success",inactive:"grey",terminated:"error"})[n==null?void 0:n.toLowerCase()]||"grey",vt=n=>{n.recordingUrl?window.open(n.recordingUrl,"_blank"):g.error("Recording not available")},ft=n=>{if(n.recordingUrl){const t=document.createElement("a");t.href=n.recordingUrl,t.download=`call-recording-${n.id}.mp3`,t.click()}else g.error("Recording not available")},yt=n=>{const t=n.callerNumber||n.destinationNumber;t?(callCenterStore.makeCall(t),g.info(`Calling back ${t}`)):g.error("Phone number not available")},Ct=n=>{console.log("View details for:",n),c.value=n,F.value=!0},K=()=>{F.value=!1},wt=n=>{console.log("Add to contacts:",n),g.success("Added to contacts")},bt=n=>{console.log("Send SMS to:",n),g.info("SMS composer opened")},ht=()=>{console.debug("you clicked me"),typeof u.openNewCallDialog=="function"?u.openNewCallDialog():g.error("New Call dialog function not implemented in callStore")},xt=()=>{typeof u.openCallAgentDialog=="function"?u.openCallAgentDialog():g.error("Call Agent dialog function not implemented in callStore")},St=()=>{typeof u.openQueueDialog=="function"?u.openQueueDialog():g.error("Queue dialog function not implemented in callStore")},kt=tt(()=>{var t,r,y;return(typeof $page<"u"&&((y=(r=(t=$page.props)==null?void 0:t.auth)==null?void 0:r.user)==null?void 0:y.name)||"").split(" ").map(D=>D[0]).join("").toUpperCase()});return Lt(()=>w.search,()=>{v.value=1,T({page:v.value,itemsPerPage:f.value,sortBy:p.value,search:w.search})}),Mt(()=>{T({page:v.value,itemsPerPage:f.value,sortBy:p.value,search:w.search}),lt()}),(n,t)=>{const r=d("v-icon"),y=d("v-card-title"),D=d("v-list-item-icon"),h=d("v-list-item-title"),V=d("v-list-item-content"),L=d("v-list-item-action"),x=d("v-list-item"),W=d("v-list"),q=d("v-card-text"),N=d("v-card"),$=d("v-col"),Dt=d("v-avatar"),Nt=d("v-spacer"),U=d("v-chip"),J=d("v-divider"),X=d("v-row"),j=d("v-btn"),$t=d("v-simple-table"),jt=d("v-expand-transition"),Bt=d("v-container"),Ut=d("v-select"),M=d("v-tooltip"),Pt=d("v-badge"),Ht=d("v-menu"),zt=d("v-progress-circular"),At=d("v-data-table-server");return P(),Et(It,{title:"Dashboard"},{default:e(()=>{var Y;return[o("div",Wt,[l(Bt,{fluid:"",class:"pa-2"},{default:e(()=>[l(X,null,{default:e(()=>[l($,{cols:"12",md:"6"},{default:e(()=>[l(N,{elevation:"2",class:"rounded-lg"},{default:e(()=>[l(y,{class:"primary white--text d-flex align-center py-3"},{default:e(()=>[l(r,{left:"",color:"white"},{default:e(()=>t[6]||(t[6]=[s("mdi-lightning-bolt")])),_:1,__:[6]}),t[7]||(t[7]=s(" Quick Actions "))]),_:1,__:[7]}),l(q,{class:"py-4"},{default:e(()=>[l(W,{nav:"",dense:""},{default:e(()=>[l(x,{onClick:ht,class:"rounded-lg mb-2 hover-elevation-2"},{default:e(()=>[l(D,null,{default:e(()=>[l(r,{color:"success"},{default:e(()=>t[8]||(t[8]=[s("mdi-phone-plus")])),_:1,__:[8]})]),_:1}),l(V,null,{default:e(()=>[l(h,null,{default:e(()=>t[9]||(t[9]=[s("Make a new Call")])),_:1,__:[9]})]),_:1}),l(L,null,{default:e(()=>[l(r,null,{default:e(()=>t[10]||(t[10]=[s("mdi-chevron-right")])),_:1,__:[10]})]),_:1})]),_:1}),l(x,{onClick:xt,class:"rounded-lg mb-2 hover-elevation-2"},{default:e(()=>[l(D,null,{default:e(()=>[l(r,{color:"info"},{default:e(()=>t[11]||(t[11]=[s("mdi-account-voice")])),_:1,__:[11]})]),_:1}),l(V,null,{default:e(()=>[l(h,null,{default:e(()=>t[12]||(t[12]=[s("Call an agent")])),_:1,__:[12]})]),_:1}),l(L,null,{default:e(()=>[l(r,null,{default:e(()=>t[13]||(t[13]=[s("mdi-chevron-right")])),_:1,__:[13]})]),_:1})]),_:1}),l(x,{class:"rounded-lg mb-2 hover-elevation-2"},{default:e(()=>[l(D,null,{default:e(()=>[l(r,{color:"error"},{default:e(()=>t[14]||(t[14]=[s("mdi-phone-missed")])),_:1,__:[14]})]),_:1}),l(V,null,{default:e(()=>[l(h,null,{default:e(()=>[s("Missed "+i(m.value.summary_call_missed),1)]),_:1})]),_:1}),l(L)]),_:1}),l(x,{onClick:St,class:"rounded-lg hover-elevation-2"},{default:e(()=>[l(D,null,{default:e(()=>[l(r,{color:"warning"},{default:e(()=>t[15]||(t[15]=[s("mdi-account-multiple-check")])),_:1,__:[15]})]),_:1}),l(V,null,{default:e(()=>[l(h,null,{default:e(()=>t[16]||(t[16]=[s("Check Queue")])),_:1,__:[16]})]),_:1}),l(L,null,{default:e(()=>[l(r,null,{default:e(()=>t[17]||(t[17]=[s("mdi-chevron-right")])),_:1,__:[17]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l($,{cols:"12",md:"6"},{default:e(()=>[l(N,{elevation:"2",class:"rounded-lg"},{default:e(()=>[l(y,{class:"primary white--text d-flex align-center py-3"},{default:e(()=>[l(r,{left:"",color:"white"},{default:e(()=>t[18]||(t[18]=[s("mdi-account-details")])),_:1,__:[18]}),t[19]||(t[19]=s(" Agent Dashboard "))]),_:1,__:[19]}),l(q,{class:"py-4"},{default:e(()=>[o("div",qt,[l(Dt,{size:"60",color:"primary",class:"mr-4"},{default:e(()=>[o("span",Jt,i(kt.value),1)]),_:1}),o("div",Xt,[o("div",Yt,[o("div",null,[o("p",Zt,i(n.$page.props.auth.user.name),1),o("p",te,[l(r,{small:"",class:"mr-1"},{default:e(()=>t[20]||(t[20]=[s("mdi-email")])),_:1,__:[20]}),s(" "+i(n.$page.props.auth.user.email),1)])]),l(Nt),l(U,{color:k(B).connectionStatusColor,small:"",class:"white--text px-2"},{default:e(()=>[l(r,{left:"",small:""},{default:e(()=>t[21]||(t[21]=[s("mdi-circle")])),_:1,__:[21]}),s(" "+i(k(B).connectionStatusText),1)]),_:1},8,["color"])])])]),l(J,{class:"my-4"}),l(X,{class:"mt-2"},{default:e(()=>[l($,{cols:"12",sm:"6"},{default:e(()=>[l(N,{class:"rounded-lg pa-3 mb-3",outlined:""},{default:e(()=>[o("div",ee,[l(r,{color:"success",left:""},{default:e(()=>t[22]||(t[22]=[s("mdi-phone-check")])),_:1,__:[22]}),o("div",le,[t[23]||(t[23]=o("div",{class:"text-caption grey--text"},"Connected",-1)),o("div",oe,i(m.value.summary_call_completed),1)])])]),_:1})]),_:1}),l($,{cols:"12",sm:"6"},{default:e(()=>[l(N,{class:"rounded-lg pa-3 mb-3",outlined:""},{default:e(()=>[o("div",ne,[l(r,{color:"primary",left:""},{default:e(()=>t[24]||(t[24]=[s("mdi-phone-outgoing")])),_:1,__:[24]}),o("div",se,[t[25]||(t[25]=o("div",{class:"text-caption grey--text"},"Outbound",-1)),o("div",ae,i(m.value.summary_outbound_call_completed),1)])])]),_:1})]),_:1}),l($,{cols:"12",sm:"6"},{default:e(()=>[l(N,{class:"rounded-lg pa-3 mb-3",outlined:""},{default:e(()=>[o("div",re,[l(r,{color:"info",left:""},{default:e(()=>t[26]||(t[26]=[s("mdi-phone-incoming")])),_:1,__:[26]}),o("div",ie,[t[27]||(t[27]=o("div",{class:"text-caption grey--text"},"Incoming",-1)),o("div",de,i(m.value.summary_inbound_call_completed),1)])])]),_:1})]),_:1}),l($,{cols:"12",sm:"6"},{default:e(()=>[l(N,{class:"rounded-lg pa-3",outlined:""},{default:e(()=>[o("div",ue,[l(r,{color:"error",left:""},{default:e(()=>t[28]||(t[28]=[s("mdi-phone-cancel")])),_:1,__:[28]}),o("div",ce,[t[29]||(t[29]=o("div",{class:"text-caption grey--text"},"Rejected",-1)),o("div",me,i(m.value.summary_rejected_incoming_calls+m.value.summary_rejected_outgoing_calls),1)])])]),_:1})]),_:1})]),_:1}),l(j,{color:"primary",text:"",class:"mt-2",onClick:t[0]||(t[0]=a=>n.showCallDetails=!n.showCallDetails)},{default:e(()=>[s(i(n.showCallDetails?"Hide":"Show")+" detailed stats ",1),l(r,{right:""},{default:e(()=>[s(i(n.showCallDetails?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1})]),_:1}),l(jt,null,{default:e(()=>[n.showCallDetails?(P(),E("div",_e,[l(J,{class:"my-3"}),l($t,{dense:""},{default:e(()=>[o("tbody",null,[o("tr",null,[t[30]||(t[30]=o("td",null,"Incoming Rejected",-1)),o("td",pe,i(m.value.summary_rejected_incoming_calls),1)]),o("tr",null,[t[31]||(t[31]=o("td",null,"Outgoing Rejected",-1)),o("td",ge,i(m.value.summary_rejected_outgoing_calls),1)]),o("tr",null,[t[32]||(t[32]=o("td",null,"Outgoing User Busy",-1)),o("td",ve,i(m.value.summary_user_busy_outgoing_calls),1)])])]),_:1})])):Q("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o("div",fe,[o("div",ye,[o("div",Ce,[l(j,{color:"primary",variant:"outlined",onClick:nt,loading:k(b).loading,size:"small"},{default:e(()=>[l(r,{start:""},{default:e(()=>t[33]||(t[33]=[s("mdi-refresh")])),_:1,__:[33]}),t[34]||(t[34]=s(" Refresh "))]),_:1,__:[34]},8,["loading"]),l(Ut,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=a=>f.value=a),items:et,label:"Rows per page",variant:"outlined",density:"compact",style:{"max-width":"120px"},class:"ml-3"},null,8,["modelValue"])]),o("div",we,[l(U,{color:"info",variant:"outlined",size:"small"},{default:e(()=>[s(" Total: "+i(O.value),1)]),_:1})])]),l(At,{"items-per-page":f.value,"onUpdate:itemsPerPage":t[2]||(t[2]=a=>f.value=a),page:v.value,"onUpdate:page":t[3]||(t[3]=a=>v.value=a),"sort-by":p.value,"onUpdate:sortBy":t[4]||(t[4]=a=>p.value=a),headers:ot,items:k(b).callHistory,"items-length":O.value,loading:k(b).loading,search:C.search,class:"call-history-table",density:"comfortable","onUpdate:options":T},{"item.created_at":e(({item:a})=>[o("div",be,[o("div",he,i(st(a.created_at)),1),o("div",xe,i(at(a.created_at)),1)])]),"item.callerNumber":e(({item:a})=>[o("div",Se,[l(r,{size:"16",color:"primary",class:"mr-2"},{default:e(()=>t[35]||(t[35]=[s("mdi-phone-outgoing")])),_:1,__:[35]}),o("span",ke,i(G(a.callerNumber)),1)])]),"item.destinationNumber":e(({item:a})=>[o("div",De,[l(r,{size:"16",color:"success",class:"mr-2"},{default:e(()=>t[36]||(t[36]=[s("mdi-phone-incoming")])),_:1,__:[36]}),o("span",Ne,i(G(a.destinationNumber)),1)])]),"item.durationInSeconds":e(({item:a})=>[l(U,{color:it(Number(a.durationInSeconds)),size:"small",variant:"tonal"},{default:e(()=>[s(i(rt(Number(a.durationInSeconds))),1)]),_:2},1032,["color"])]),"item.status":e(({item:a})=>[l(U,{color:dt(a.status),size:"small",variant:"flat"},{default:e(()=>[l(r,{start:"",size:"12"},{default:e(()=>[s(i(ut(a.status)),1)]),_:2},1024),s(" "+i(a.status),1)]),_:2},1032,["color"])]),"item.description":e(({item:a})=>[o("div",$e,[l(r,{color:ct(a.description),size:"16",class:"mr-2"},{default:e(()=>[s(i(mt(a.description)),1)]),_:2},1032,["color"]),o("span",null,i(a.description),1)])]),"item.lastBridgeHangupCause":e(({item:a})=>[l(M,{text:pt(a.lastBridgeHangupCause)},{activator:e(({props:_})=>[l(U,H(_,{color:_t(a.lastBridgeHangupCause),size:"small",variant:"outlined"}),{default:e(()=>[s(i(a.lastBridgeHangupCause),1)]),_:2},1040,["color"])]),_:2},1032,["text"])]),"item.callSessionState":e(({item:a})=>[l(Pt,{color:gt(a.callSessionState),dot:"",inline:""},{default:e(()=>[o("span",null,i(a.callSessionState),1)]),_:2},1032,["color"])]),"item.actions":e(({item:a})=>[o("div",je,[l(M,{text:"Play Recording"},{activator:e(({props:_})=>[l(j,H(_,{icon:"",size:"small",color:"primary",variant:"outlined",onClick:Z=>vt(a),disabled:!a.recordingUrl}),{default:e(()=>[l(r,null,{default:e(()=>t[37]||(t[37]=[s("mdi-play")])),_:1,__:[37]})]),_:2},1040,["onClick","disabled"])]),_:2},1024),l(M,{text:"Download Recording"},{activator:e(({props:_})=>[l(j,H(_,{icon:"",size:"small",color:"success",variant:"outlined",onClick:Z=>ft(a),disabled:!a.recordingUrl,class:"ml-2"}),{default:e(()=>[l(r,null,{default:e(()=>t[38]||(t[38]=[s("mdi-download")])),_:1,__:[38]})]),_:2},1040,["onClick","disabled"])]),_:2},1024),l(M,{text:"Call Back"},{activator:e(({props:_})=>[l(j,H(_,{icon:"",size:"small",color:"warning",variant:"outlined",onClick:Z=>yt(a),class:"ml-2"}),{default:e(()=>[l(r,null,{default:e(()=>t[39]||(t[39]=[s("mdi-phone-return")])),_:1,__:[39]})]),_:2},1040,["onClick"])]),_:2},1024),l(Ht,null,{activator:e(({props:_})=>[l(j,H(_,{icon:"",size:"small",variant:"text",class:"ml-2"}),{default:e(()=>[l(r,null,{default:e(()=>t[40]||(t[40]=[s("mdi-dots-vertical")])),_:1,__:[40]})]),_:2},1040)]),default:e(()=>[l(W,{density:"compact"},{default:e(()=>[l(x,{onClick:_=>Ct(a)},{prepend:e(()=>[l(r,null,{default:e(()=>t[41]||(t[41]=[s("mdi-eye")])),_:1,__:[41]})]),default:e(()=>[l(h,null,{default:e(()=>t[42]||(t[42]=[s("View Details")])),_:1,__:[42]})]),_:2},1032,["onClick"]),l(x,{onClick:_=>wt(a)},{prepend:e(()=>[l(r,null,{default:e(()=>t[43]||(t[43]=[s("mdi-account-plus")])),_:1,__:[43]})]),default:e(()=>[l(h,null,{default:e(()=>t[44]||(t[44]=[s("Add to Contacts")])),_:1,__:[44]})]),_:2},1032,["onClick"]),l(x,{onClick:_=>bt(a)},{prepend:e(()=>[l(r,null,{default:e(()=>t[45]||(t[45]=[s("mdi-message")])),_:1,__:[45]})]),default:e(()=>[l(h,null,{default:e(()=>t[46]||(t[46]=[s("Send SMS")])),_:1,__:[46]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]),"no-data":e(()=>[o("div",Be,[l(r,{size:"64",color:"grey-lighten-1"},{default:e(()=>t[47]||(t[47]=[s("mdi-phone-off")])),_:1,__:[47]}),t[48]||(t[48]=o("h3",null,"No call history found",-1)),t[49]||(t[49]=o("p",null,"Call history will appear here once you start making calls.",-1))])]),loading:e(()=>[o("div",Ue,[l(zt,{indeterminate:"",color:"primary",size:"48"}),t[50]||(t[50]=o("p",{class:"mt-4"},"Loading call history...",-1))])]),_:1},8,["items-per-page","page","sort-by","items","items-length","loading","search"])])]),F.value?(P(),E("div",Pe,[o("div",He,[o("div",{class:"flex justify-between items-center bg-gray-100 px-4 py-2"},[t[51]||(t[51]=o("h2",{class:"text-lg font-semibold"},"Call Statistics",-1)),o("button",{onClick:K,class:"text-gray-500 hover:text-black"},"âœ–")]),o("div",ze,[o("p",null,[t[52]||(t[52]=o("strong",null,"Direction:",-1)),s(" "+i(c.value.direction),1)]),o("p",null,[t[53]||(t[53]=o("strong",null,"Caller:",-1)),s(" "+i(c.value.callerNumber),1)]),o("p",null,[t[54]||(t[54]=o("strong",null,"Destination:",-1)),s(" "+i(c.value.destinationNumber),1)]),o("p",null,[t[55]||(t[55]=o("strong",null,"Duration:",-1)),s(" "+i(c.value.durationInSeconds)+" seconds",1)]),o("p",null,[t[56]||(t[56]=o("strong",null,"Status:",-1)),s(" "+i(c.value.status),1)]),o("p",null,[t[57]||(t[57]=o("strong",null,"Start Time:",-1)),s(" "+i(c.value.callStartTime),1)]),c.value.recordingUrl?(P(),E("div",Ae,[t[58]||(t[58]=o("p",{class:"font-semibold"},"Recording:",-1)),o("audio",{controls:"",src:c.value.recordingUrl,class:"w-full"},null,8,Ie)])):Q("",!0),(Y=c.value.calltranscripts)!=null&&Y.length?(P(),E("div",Re,[t[64]||(t[64]=o("h3",{class:"font-semibold mt-4"},"Transcript",-1)),o("p",null,i(c.value.calltranscripts[0].transcript),1),o("div",Te,[o("p",null,[t[59]||(t[59]=o("strong",null,"Sentiment:",-1)),s(" "+i(c.value.calltranscripts[0].sentiment),1)]),o("p",null,[t[60]||(t[60]=o("strong",null,"Fulfillment Score:",-1)),s(" "+i(c.value.calltranscripts[0].fulfillment_score)+"%",1)]),o("p",null,[t[61]||(t[61]=o("strong",null,"Customer Service Rating:",-1)),s(" "+i(c.value.calltranscripts[0].cs_rating)+"/5",1)]),o("p",null,[t[62]||(t[62]=o("strong",null,"Intent:",-1)),s(" "+i(c.value.calltranscripts[0].analysis.intent),1)]),o("p",null,[t[63]||(t[63]=o("strong",null,"Keywords:",-1)),s(" "+i(c.value.calltranscripts[0].analysis.keywords.join(", ")),1)])])])):Q("",!0)]),o("div",{class:"flex justify-end bg-gray-100 px-4 py-2"},[o("button",{onClick:K,class:"bg-blue-600 text-white px-3 py-1 rounded"}," Close ")])])])):Q("",!0),l(Ot,{modelValue:k(u).dialogType,"onUpdate:modelValue":t[5]||(t[5]=a=>k(u).dialogType=a)},null,8,["modelValue"])]}),_:1})}}},qe=Gt(Ve,[["__scopeId","data-v-39417ff2"]]);export{qe as default};
