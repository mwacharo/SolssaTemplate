import{E as n,i as r}from"./app-CBv0IuCw.js";const o=n("contacts",{state:()=>({contacts:[],loading:!1,saving:!1,deleting:!1,searchQuery:"",filterType:null,filterStatus:null,totalContacts:0,currentPage:1,lastPage:1,perPage:10}),getters:{filteredContacts:t=>{let e=[...Array.isArray(t.contacts)?t.contacts:[]];return t.filterType&&t.filterType!=="All"&&(e=e.filter(s=>s.type===t.filterType)),t.filterStatus!==null&&t.filterStatus!=="All"&&(e=e.filter(s=>s.status===Number(t.filterStatus))),e},contactTypes:t=>{const a=Array.isArray(t.contacts)?t.contacts:[];return["All",...[...new Set(a.map(s=>s.type).filter(Boolean))]]}},actions:{async fetchContacts(t={}){this.loading=!0;try{const e=(await r.get("/api/v1/contacts",{params:t})).data.data||{};this.contacts=Array.isArray(e.data)?e.data:[],this.totalContacts=e.total||this.contacts.length,this.currentPage=e.current_page||1,this.lastPage=e.last_page||1,this.perPage=e.per_page||10}catch(a){throw console.error("Failed to fetch contacts:",a),a}finally{this.loading=!1}},async createContact(t){this.saving=!0;try{const a=await r.post("/api/v1/contacts",t);return this.contacts.unshift(a.data.data||a.data),a.data}catch(a){throw console.error("Failed to create contact:",a),a}finally{this.saving=!1}},async updateContact(t,a){this.saving=!0;try{const e=await r.put(`/api/v1/contacts/${t}`,a),s=this.contacts.findIndex(c=>c.id===t);return s!==-1&&(this.contacts[s]=e.data.data||e.data),e.data}catch(e){throw console.error("Failed to update contact:",e),e}finally{this.saving=!1}},async deleteContact(t){this.deleting=!0;try{await r.delete(`/api/v1/contacts/${t}`),this.contacts=this.contacts.filter(a=>a.id!==t)}catch(a){throw console.error("Failed to delete contact:",a),a}finally{this.deleting=!1}},async searchContacts(t){this.searchQuery=t,await this.fetchContacts({search:t})},setFilter(t,a){t==="type"?this.filterType=a:t==="status"&&(this.filterStatus=a)},resetFilters(){this.searchQuery="",this.filterType=null,this.filterStatus=null,this.fetchContacts()}}});export{o as u};
