import{_ as O}from"./AppLayout-BQSmYCeZ.js";import{u as Q}from"./callCenterSettings-kXSm7F2n.js";import R from"./CallCenterModal-DJNIvJoa.js";import W from"./CallCenterViewModal-CZ66Tj_n.js";import{d as r,e as u,o,a as e,t as i,f as $,r as d,k as X,c as w,w as V,u as n,F as Z,g as ee,n as te}from"./app-B9uaqZTF.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./webrtc-B3ZJXdl5.js";import"./africastalking-72waKPcG.js";import"./IncomingCallDialog-qa9B6Jw1.js";/* empty css                                                                           */const oe={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},le={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},ae={class:"mt-3"},ne={class:"mt-5 text-center"},re={class:"text-lg font-medium text-gray-900"},ie={class:"mt-2 px-7 py-3"},de={class:"text-sm text-gray-500"},ce={class:"flex justify-center space-x-4 px-4 py-3"},ue=["disabled"],pe=["disabled"],me={key:0,class:"flex items-center"},ge={key:1},xe={__name:"DeleteConfirmModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},loading:{type:Boolean,default:!1}},emits:["confirm","cancel"],setup(c){return(f,a)=>c.show?(o(),r("div",oe,[e("div",le,[e("div",ae,[a[3]||(a[3]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",ne,[e("h3",re,i(c.title||"Confirm Delete"),1),e("div",ie,[e("p",de,i(c.message||"Are you sure you want to delete this item? This action cannot be undone."),1)]),e("div",ce,[e("button",{onClick:a[0]||(a[0]=_=>f.$emit("cancel")),disabled:c.loading,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,ue),e("button",{onClick:a[1]||(a[1]=_=>f.$emit("confirm")),disabled:c.loading,class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},[c.loading?(o(),r("span",me,a[2]||(a[2]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),$(" Deleting... ")]))):(o(),r("span",ge,"Delete"))],8,pe)])])])])])):u("",!0)}},fe={class:"py-12"},ve={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},he={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4"},ye={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},be={key:2,class:"bg-white shadow-sm sm:rounded-lg p-6"},we={key:3,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},_e={class:"p-6"},Ce={key:0,class:"text-center py-8"},ke={key:1,class:"overflow-x-auto"},Se={class:"min-w-full divide-y divide-gray-200"},$e={class:"bg-white divide-y divide-gray-200"},Me={class:"px-6 py-4 whitespace-nowrap font-medium text-gray-900"},De={class:"px-6 py-4 whitespace-nowrap text-gray-500"},Be={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"px-6 py-4 whitespace-nowrap text-gray-500 capitalize"},Ee={class:"px-6 py-4 whitespace-nowrap text-gray-500 text-sm"},ze={class:"px-6 py-4 whitespace-nowrap text-sm space-x-2"},Ne=["onClick"],je=["onClick"],Ae=["onClick"],Te={__name:"CallSettings",setup(c,{expose:f}){const{isLoading:a,hasError:_,errorMessage:E,settings:z,hasSettings:N,createSetting:j,updateSetting:A,deleteSetting:T,fetchSettings:F,clearError:L,formatPhoneNumber:P,getEnvironmentBadgeClass:H,getEnvironmentText:I,formatDate:U}=Q(),p=d(""),m=d(!1),v=d(!1),g=d(!1),h=d("create"),x=d(null),M=d(null),y=d(null);X(()=>{D()});const D=async()=>{try{await F()}catch(s){console.error("Failed to load settings:",s)}},C=s=>{p.value=s,setTimeout(()=>{p.value=""},5e3)},k=()=>{h.value="create",x.value=null,m.value=!0},Y=s=>{M.value=s,v.value=!0},q=s=>{h.value="edit",x.value=s,m.value=!0},G=s=>{y.value=s,g.value=!0},S=()=>{m.value=!1,x.value=null},J=async s=>{let t;try{h.value==="create"?(t=await j(s),t.success&&(C("Setting created successfully!"),S())):(t=await A(x.value.id,s),t.success&&(C("Setting updated successfully!"),S()))}catch(b){console.error("Submit error:",b)}},K=async()=>{try{(await T(y.value.id)).success&&(C("Setting deleted successfully!"),g.value=!1,y.value=null)}catch(s){console.error("Delete error:",s)}};return f({refreshData:()=>{D()},openCreateModal:k}),(s,t)=>(o(),w(O,null,{header:V(()=>[e("div",{class:"flex justify-between items-center"},[t[4]||(t[4]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Call Center Settings ",-1)),e("button",{onClick:k,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Add New Setting ")])]),default:V(()=>{var b;return[e("div",fe,[e("div",ve,[p.value?(o(),r("div",he,[$(i(p.value)+" ",1),e("button",{onClick:t[0]||(t[0]=l=>p.value=""),class:"float-right"},"×")])):u("",!0),n(_)?(o(),r("div",ye,[$(i(n(E))+" ",1),e("button",{onClick:t[1]||(t[1]=l=>n(L)()),class:"float-right"},"×")])):u("",!0),n(a)?(o(),r("div",be,t[5]||(t[5]=[e("div",{class:"flex justify-center"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-2 border-blue-500 border-t-transparent"})],-1)]))):(o(),r("div",we,[e("div",_e,[n(N)?(o(),r("div",ke,[e("table",Se,[t[7]||(t[7]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Username"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Phone"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Environment"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Voice"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Created"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",$e,[(o(!0),r(Z,null,ee(n(z),l=>(o(),r("tr",{key:l.id,class:"hover:bg-gray-50"},[e("td",Me,i(l.username),1),e("td",De,i(n(P)(l.phone)),1),e("td",Be,[e("span",{class:te([n(H)(l.sandbox),"px-2 py-1 text-xs font-semibold rounded-full"])},i(n(I)(l.sandbox)),3)]),e("td",Ve,i(l.default_voice),1),e("td",Ee,i(n(U)(l.created_at)),1),e("td",ze,[e("button",{onClick:B=>Y(l),class:"text-blue-600 hover:text-blue-900"}," View ",8,Ne),e("button",{onClick:B=>q(l),class:"text-indigo-600 hover:text-indigo-900"}," Edit ",8,je),e("button",{onClick:B=>G(l),class:"text-red-600 hover:text-red-900"}," Delete ",8,Ae)])]))),128))])])])):(o(),r("div",Ce,[t[6]||(t[6]=e("p",{class:"text-gray-500 text-lg mb-4"},"No call center settings found.",-1)),e("button",{onClick:k,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Create Your First Setting ")]))])]))])]),m.value?(o(),w(R,{key:0,show:m.value,mode:h.value,setting:x.value,onClose:S,onSubmit:J},null,8,["show","mode","setting"])):u("",!0),v.value?(o(),w(W,{key:1,show:v.value,setting:M.value,onClose:t[2]||(t[2]=l=>v.value=!1)},null,8,["show","setting"])):u("",!0),g.value?(o(),w(xe,{key:2,show:g.value,title:`Delete ${(b=y.value)==null?void 0:b.username} Setting`,message:"This action cannot be undone. All associated data will be permanently removed.",loading:n(a),onConfirm:K,onCancel:t[3]||(t[3]=l=>g.value=!1)},null,8,["show","title","loading"])):u("",!0)]}),_:1}))}},Oe=se(Te,[["__scopeId","data-v-f847f566"]]);export{Oe as default};
