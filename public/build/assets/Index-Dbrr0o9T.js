import{i as N,r as p,j as Ue,k as Te,c as De,o as i,w as qe,a as e,b as Le,d as u,e as C,f as S,A as m,B as x,F as b,g as _,t as n,C as R,n as Ne,y as oe}from"./app-B5CAD7zS.js";import{_ as Re}from"./AppLayout-Bjr_CMGC.js";import{u as Fe}from"./categoryStore-DbyHPdQk.js";import{u as Be}from"./clientStore-BtyNh5Jw.js";import Oe from"./StockEditDialog-Bp8sh9eP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./webrtc-CnrAZg5a.js";import"./africastalking-B--zBnDt.js";import"./IncomingCallDialog-Be-mZT1N.js";/* empty css                                                                           */const Ie={class:"container mx-auto p-6 bg-gray-50 min-h-screen"},$e={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},He={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-6"},ze={class:"lg:col-span-1"},Ke=["value"],Qe=["value"],Xe={class:"bg-white rounded-lg shadow-sm overflow-hidden"},Ye={class:"p-4 border-b border-gray-200"},Ge={class:"flex justify-between items-center"},We={class:"text-sm text-gray-600"},Je={class:"overflow-x-auto"},Ze={class:"w-full"},et={class:"bg-white divide-y divide-gray-200"},tt={class:"px-4 py-4"},st={class:"flex flex-col"},ot={class:"bg-red-500 text-white px-2 py-1 rounded text-xs font-medium mb-1 inline-block w-fit"},rt={class:"text-sm text-gray-600"},lt={class:"px-4 py-4 text-sm text-gray-900"},at={class:"px-4 py-4"},nt={class:"flex items-center gap-3"},it=["src","alt"],dt={class:"font-medium text-gray-900"},ut={class:"text-sm text-gray-500"},ct={class:"px-4 py-4"},pt={class:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm"},mt={class:"px-4 py-4 text-sm text-gray-900"},vt={class:"px-4 py-4 text-center"},gt={class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm font-medium"},xt={class:"text-xs text-gray-500 mt-1 flex items-center justify-center gap-1"},ft={class:"px-4 py-4 text-center"},yt={class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm font-medium"},bt={class:"text-xs text-gray-500 mt-1 flex items-center justify-center gap-1"},_t={class:"px-4 py-4 text-center"},ht={class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm font-medium"},kt={class:"text-xs text-gray-500 mt-1 flex items-center justify-center gap-1"},wt={class:"px-4 py-4 text-center text-sm font-medium"},Ct={class:"px-4 py-4 text-sm font-medium"},St={class:"px-4 py-4"},Et=["onClick"],Pt={class:"px-4 py-4"},jt={class:"flex items-center gap-2"},Mt=["onClick"],Vt=["onClick"],At=["onClick"],Ut=["onClick"],Tt=["onClick"],Dt={key:0},qt={class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Lt={class:"flex-1 flex justify-between sm:hidden"},Nt=["disabled"],Rt=["disabled"],Ft={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Bt={class:"text-sm text-gray-700"},Ot={class:"font-medium"},It={class:"font-medium"},$t={class:"font-medium"},Ht={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},zt=["disabled"],Kt=["onClick"],Qt=["disabled"],Xt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Yt={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white"},Gt={class:"mt-3"},Wt={class:"flex justify-between items-center mb-4"},Jt={class:"text-lg font-medium text-gray-900"},Zt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},es=["value"],ts=["value"],ss={class:"md:col-span-2"},os={class:"md:col-span-2"},rs={class:"md:col-span-2"},ls={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},as={class:"flex flex-wrap gap-2 mt-2"},ns=["src"],is={key:0,class:"text-red-600 text-xs mt-1"},ds={class:"flex flex-wrap gap-2 mt-2"},us=["src"],cs={key:0,class:"text-red-600 text-xs mt-1"},ps={class:"mt-4"},ms={class:"grid grid-cols-1 md:grid-cols-3 gap-2"},vs=["onUpdate:modelValue"],gs={key:0,class:"text-red-600 text-xs mt-1"},xs=["onUpdate:modelValue"],fs={key:0,class:"text-red-600 text-xs mt-1"},ys=["onUpdate:modelValue"],bs=["onClick"],_s={key:0,class:"mt-4"},hs={class:"min-w-full divide-y divide-gray-200 border rounded"},ks={class:"bg-white divide-y divide-gray-200"},ws={class:"px-4 py-2 text-sm text-gray-900"},Cs={class:"px-4 py-2 text-sm text-gray-900"},Ss={class:"px-4 py-2 text-sm text-gray-900"},Es={class:"flex justify-end space-x-3 mt-6"},Ps=["disabled"],js={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Ms={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-md shadow-lg rounded-md bg-white"},Vs={class:"mt-3"},As={class:"text-sm text-gray-900"},Us={class:"text-sm text-gray-900"},Ts={class:"flex justify-end space-x-3 mt-6"},Ds=["disabled"],Ks={__name:"Index",setup(qs,{expose:re}){N.defaults.withCredentials=!0,N.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const X=window.location.origin,w=N.create({baseURL:`${X}/api/v1`,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});w.interceptors.request.use(o=>{var l;const t=(l=document.head.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content");return t&&(o.headers["X-CSRF-TOKEN"]=t),o}),w.interceptors.response.use(o=>o,o=>{var t;return((t=o.response)==null?void 0:t.status)===419&&window.location.reload(),Promise.reject(o)});const j=p([]),D=p([]),M=p([]),V=p(""),A=p(!1),F=p(!1),B=p(!1),Y=p(null),E=Fe(),P=Be(),q=p(!1),G=p(!1),h=p(!1),O=p(null),L=p(!1),k=p({}),le=p([]),ae=o=>{var t,l,s,r;k.value={id:o.id,name:o.product_name,warehouse_id:((l=(t=o.stocks)==null?void 0:t[0])==null?void 0:l.warehouse_id)||null,current_stock:T(o),committed_stock:I(o),defected_stock:$(o),historical_stock:((r=(s=o.stocks)==null?void 0:s[0])==null?void 0:r.historical_stock)||[]},L.value=!0},g=p({date:"",vendor:"",category:""}),ne=o=>{const t=o.target.files;a.value.images=[];for(let l of t){const s=new FileReader;s.onload=r=>{a.value.images.push({file:l,preview:r.target.result})},s.readAsDataURL(l)}},ie=o=>{const t=o.target.files;a.value.videos=[];for(let l of t){const s=new FileReader;s.onload=r=>{a.value.videos.push({file:l,preview:r.target.result})},s.readAsDataURL(l)}},d=p({current_page:1,per_page:15,total:0,last_page:1,from:1,to:15,prev_page_url:null,next_page_url:null}),a=p({sku:"",product_name:"",description:"",category_id:"",vendor_id:"",initial_quantity:0,stock_threshold:0,base_price:0}),v=p({}),y=p({product:null,quantity:0,reason:""}),U=p({}),de=Ue(()=>{const o=d.value.current_page,t=d.value.last_page,l=[];for(let s=Math.max(1,o-2);s<=Math.min(t,o+2);s++)l.push(s);return l}),ue=o=>{var l,s;const t=((l=o.media)==null?void 0:l.find(r=>r.media_type==="image"&&r.is_primary))||((s=o.media)==null?void 0:s.find(r=>r.media_type==="image"));return(t==null?void 0:t.url)||"/api/placeholder/50/50"},ce=o=>{const t=M.value.find(l=>l.id===o);return(t==null?void 0:t.name)||"Uncategorized"},T=o=>{var t,l;return((l=(t=o.stocks)==null?void 0:t[0])==null?void 0:l.current_stock)||0},I=o=>{var t,l;return((l=(t=o.stocks)==null?void 0:t[0])==null?void 0:l.committed_stock)||0},$=o=>{var t,l;return((l=(t=o.stocks)==null?void 0:t[0])==null?void 0:l.defected_stock)||0},W=o=>{var t,l;return((l=(t=o.stocks)==null?void 0:t[0])==null?void 0:l.stock_threshold)||0},J=o=>{if(o.prices&&o.prices.length>0){const t=o.prices.find(l=>l.is_active);return Number(((t==null?void 0:t.base_price)??o.prices[0].base_price)||0)}return Number(o.base_price||0)};let Z=null;const pe=()=>{clearTimeout(Z),Z=setTimeout(()=>{f(1)},500)},me=()=>{L.value=!1,k.value={}},ve=o=>{L.value=!1,f(d.value.current_page)},f=async(o=1)=>{var t;try{A.value=!0;const l={page:o,per_page:d.value.per_page};V.value&&(l.search=V.value),g.value.vendor&&(l.vendor_id=g.value.vendor),g.value.category&&(l.category_id=g.value.category),g.value.date&&(l.created_date=g.value.date);const r=(await w.get("/products",{params:l})).data;r.data&&Array.isArray(r.data)?(j.value=r.data,d.value={current_page:r.current_page||1,per_page:r.per_page||15,total:r.total||r.data.length,last_page:r.last_page||1,from:r.from||1,to:r.to||r.data.length,prev_page_url:r.prev_page_url,next_page_url:r.next_page_url}):Array.isArray(r)&&(j.value=r,d.value={current_page:1,per_page:r.length,total:r.length,last_page:1,from:1,to:r.length,prev_page_url:null,next_page_url:null})}catch(l){if(console.error("Error fetching products:",l),l.response){const s=l.response.status,r=((t=l.response.data)==null?void 0:t.message)||"Failed to load products";s===401?alert("Please log in to continue"):s===403?alert("You do not have permission to view products"):s>=500?alert("Server error. Please try again later."):alert(r)}else l.request?alert("Network error. Please check your connection and try again."):alert("An unexpected error occurred")}finally{A.value=!1}},ge=async()=>{var o;try{(!P.vendors||P.vendors.length===0)&&await((o=P.fetchVendors)==null?void 0:o.call(P)),D.value=P.vendors||[]}catch(t){console.error("Error fetching vendors:",t);try{const l=await w.get("/vendors");D.value=l.data.data||l.data||[]}catch(l){console.error("Error fetching vendors from API:",l)}}},xe=async()=>{var o;try{(!E.categories||E.categories.length===0)&&await((o=E.fetchCategories)==null?void 0:o.call(E)),M.value=E.categories||[]}catch(t){console.error("Error fetching categories:",t);try{const l=await w.get("/categories");M.value=l.data.data||l.data||[]}catch(l){console.error("Error fetching categories from API:",l)}}},fe=()=>{f(1)},ee=()=>{g.value={date:"",vendor:"",category:""},V.value="",f(1)},ye=()=>{h.value=!1,v.value={},a.value={sku:"",product_name:"",description:"",category_id:"",vendor_id:"",initial_quantity:0,stock_threshold:0,base_price:0},q.value=!0},be=o=>{var t;h.value=!0,O.value=o,v.value={},a.value={sku:o.sku,product_name:o.product_name,description:o.description,category_id:o.category_id,vendor_id:o.vendor_id||((t=o.vendor)==null?void 0:t.id),initial_quantity:T(o),stock_threshold:W(o),base_price:J(o)},q.value=!0},_e=o=>{console.log("Viewing product:",o)},H=()=>{q.value=!1,h.value=!1,O.value=null,v.value={},a.value={sku:"",product_name:"",description:"",category_id:"",vendor_id:"",initial_quantity:0,stock_threshold:0,base_price:0,images:[]}},he=async()=>{var o,t,l,s;try{F.value=!0,v.value={};const r=new FormData;r.append("sku",a.value.sku),r.append("product_name",a.value.product_name),r.append("description",a.value.description),r.append("category_id",a.value.category_id),r.append("vendor_id",a.value.vendor_id),r.append("initial_quantity",a.value.initial_quantity),r.append("stock_threshold",a.value.stock_threshold),r.append("base_price",a.value.base_price),a.value.images.forEach((Ve,Ae)=>{r.append(`images[${Ae}]`,Ve.file)});const c=h.value?`/products/${O.value.id}`:"/products",K=(h.value,"post");h.value&&r.append("_method","PUT");const Q=await w.post(c,r,{headers:{"Content-Type":"multipart/form-data"}});alert(h.value?"Product updated successfully":"Product created successfully"),H(),f(d.value.current_page)}catch(r){if(console.error("Error saving product:",r),((o=r.response)==null?void 0:o.status)===422){v.value=r.response.data.errors||{};const c=(t=Object.values(v.value)[0])==null?void 0:t[0];c&&alert("Validation error: "+c)}else{const c=((s=(l=r.response)==null?void 0:l.data)==null?void 0:s.message)||"Error saving product";alert(c)}}finally{F.value=!1}},ke=async o=>{var t,l;if(confirm(`Are you sure you want to delete "${o.product_name}"?`))try{Y.value=o.id,await w.delete(`/products/${o.id}`),alert("Product deleted successfully"),f(d.value.current_page)}catch(s){console.error("Error deleting product:",s);const r=((l=(t=s.response)==null?void 0:t.data)==null?void 0:l.message)||"Error deleting product";alert(r)}finally{Y.value=null}},we=o=>{console.log("Move stock for product:",o),alert("Stock movement feature will be implemented here")},z=()=>{G.value=!1,U.value={},y.value={product:null,quantity:0,reason:""}},Ce=async()=>{var o,t,l,s;try{B.value=!0,U.value={},await w.put(`/products/${y.value.product.id}`,{current_stock:y.value.quantity,reason:y.value.reason,warehouse_id:1}),alert("Stock adjusted successfully"),z(),f(d.value.current_page)}catch(r){if(console.error("Error adjusting stock:",r),((o=r.response)==null?void 0:o.status)===422){U.value=r.response.data.errors||{};const c=(t=Object.values(U.value)[0])==null?void 0:t[0];c&&alert("Validation error: "+c)}else{const c=((s=(l=r.response)==null?void 0:l.data)==null?void 0:s.message)||"Error adjusting stock";alert(c)}}finally{B.value=!1}},te=()=>{d.value.prev_page_url&&d.value.current_page>1&&f(d.value.current_page-1)},se=()=>{d.value.next_page_url&&d.value.current_page<d.value.last_page&&f(d.value.current_page+1)},Se=o=>{o!==d.value.current_page&&f(o)},Ee=o=>{window.open(o,"_blank")},Pe=o=>o?new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",je=o=>new Intl.NumberFormat("en-KE",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o||0),Me=async()=>{try{await N.get(`${X}/sanctum/csrf-cookie`)}catch(o){console.warn("Could not initialize CSRF token:",o)}};return Te(async()=>{await Me(),await Promise.all([xe(),ge(),f()])}),re({fetchProducts:f,resetFilters:ee,formErrors:v,stockFormErrors:U,isLoading:A,isModalLoading:F,isStockLoading:B}),(o,t)=>(i(),De(Re,null,{default:qe(()=>{var l;return[e("div",Ie,[e("div",$e,[e("div",{class:"flex justify-between items-center mb-6"},[t[16]||(t[16]=e("h1",{class:"text-2xl font-bold text-gray-800"},"Products Management",-1)),e("button",{onClick:ye,class:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors flex items-center gap-2"},t[15]||(t[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),S(" Add a product ")]))]),e("div",He,[e("div",ze,[m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>V.value=s),type:"text",placeholder:"Search for a product (id, name, sku)",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:pe},null,544),[[x,V.value]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"DATE",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>g.value.date=s),type:"date",placeholder:"Filter by date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[x,g.value.date]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"SELLER",-1)),m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>g.value.vendor=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[18]||(t[18]=e("option",{value:""},"Filter by seller",-1)),(i(!0),u(b,null,_(D.value,s=>(i(),u("option",{key:s.id,value:s.id},n(s.name),9,Ke))),128))],512),[[R,g.value.vendor]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-red-600 mb-1"},"CATEGORY",-1)),m(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>g.value.category=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[20]||(t[20]=e("option",{value:""},"Category",-1)),(i(!0),u(b,null,_(M.value,s=>(i(),u("option",{key:s.id,value:s.id},n(s.name),9,Qe))),128))],512),[[R,g.value.category]])])]),e("div",{class:"flex gap-4"},[e("button",{onClick:ee,class:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center gap-2"},t[22]||(t[22]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),S(" Reset ")])),e("button",{onClick:fe,class:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors flex items-center gap-2"},t[23]||(t[23]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})],-1),S(" Filter ")]))])]),e("div",Xe,[e("div",Ye,[e("div",Ge,[t[24]||(t[24]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Products",-1)),e("span",We,n(d.value.from)+"-"+n(d.value.to)+" / "+n(d.value.total),1)])]),e("div",Je,[e("table",Ze,[t[39]||(t[39]=e("thead",{class:"bg-blue-600 text-white"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"ID/SKU"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"SELLER"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"PRODUCT"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"CATEGORY"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"DATE"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"CURRENT QUANTITY"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"COMMITTED STOCK"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"DEFECTED QUANTITY"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"STOCK THRESHOLD"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"PRICE"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"PRODUCT PAGE"),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"ACTIONS")])],-1)),e("tbody",et,[(i(!0),u(b,null,_(j.value,s=>{var r;return i(),u("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",tt,[e("div",st,[e("span",ot," pdt-"+n(s.id),1),e("span",rt,n(s.sku),1)])]),e("td",lt,n(((r=s.vendor)==null?void 0:r.name)||"N/A"),1),e("td",at,[e("div",nt,[e("img",{src:ue(s),alt:s.product_name,class:"w-12 h-12 rounded-lg object-cover"},null,8,it),e("div",null,[e("div",dt,n(s.product_name),1),e("div",ut,n(s.description),1)])])]),e("td",ct,[e("span",pt,n(ce(s.category_id)),1)]),e("td",mt,n(Pe(s.created_at)),1),e("td",vt,[e("span",gt," Total "+n(T(s)),1),e("div",xt,[t[25]||(t[25]=e("img",{src:"/api/placeholder/16/16",alt:"Flag",class:"w-4 h-4"},null,-1)),e("span",null,n(T(s)),1),t[26]||(t[26]=e("span",{class:"bg-red-500 text-white px-1 rounded text-xs"},"Nairobi",-1))])]),e("td",ft,[e("span",yt," Total "+n(I(s)),1),e("div",bt,[t[27]||(t[27]=e("img",{src:"/api/placeholder/16/16",alt:"Flag",class:"w-4 h-4"},null,-1)),e("span",null,n(I(s)),1),t[28]||(t[28]=e("span",{class:"bg-red-500 text-white px-1 rounded text-xs"},"Nairobi",-1))])]),e("td",_t,[e("span",ht," Total "+n($(s)),1),e("div",kt,[t[29]||(t[29]=e("img",{src:"/api/placeholder/16/16",alt:"Flag",class:"w-4 h-4"},null,-1)),e("span",null,n($(s)),1),t[30]||(t[30]=e("span",{class:"bg-red-500 text-white px-1 rounded text-xs"},"Nairobi",-1))])]),e("td",wt,n(W(s)),1),e("td",Ct,[S(n(je(J(s)))+" ",1),t[31]||(t[31]=e("span",{class:"text-xs text-gray-500"},"KES",-1))]),e("td",St,[e("button",{onClick:c=>{var K,Q;return Ee(((Q=(K=s.images)==null?void 0:K[0])==null?void 0:Q.image_path)||"/storage/products/default.png")},class:"text-blue-600 hover:text-blue-800"},t[32]||(t[32]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)]),8,Et)]),e("td",Pt,[e("div",jt,[e("button",{onClick:c=>be(s),class:"text-blue-600 hover:text-blue-800 p-1",title:"Edit"},t[33]||(t[33]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Mt),e("button",{onClick:c=>_e(s),class:"text-gray-600 hover:text-gray-800 p-1",title:"View"},t[34]||(t[34]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,Vt),e("button",{onClick:c=>ke(s),class:"text-red-600 hover:text-red-800 p-1",title:"Delete"},t[35]||(t[35]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,At),e("button",{onClick:c=>ae(s),class:"text-indigo-600 hover:text-indigo-800 p-1",title:"Edit Stock"},t[36]||(t[36]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v8m4-4H8"})],-1)]),8,Ut),e("button",{onClick:c=>we(s),class:"text-yellow-600 hover:text-yellow-800 p-1",title:"Move Stock"},t[37]||(t[37]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)]),8,Tt)])])])}),128)),!j.value||j.value.length===0?(i(),u("tr",Dt,t[38]||(t[38]=[e("td",{colspan:"12",class:"px-4 py-8 text-center text-gray-500"},[e("div",{class:"flex flex-col items-center gap-2"},[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2 2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-4.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 009.586 13H7"})]),e("span",null,"No products found")])],-1)]))):C("",!0)])])]),e("div",qt,[e("div",Lt,[e("button",{onClick:te,disabled:!d.value.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Nt),e("button",{onClick:se,disabled:!d.value.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Rt)]),e("div",Ft,[e("div",null,[e("p",Bt,[t[40]||(t[40]=S(" Showing ")),e("span",Ot,n(d.value.from),1),t[41]||(t[41]=S(" to ")),e("span",It,n(d.value.to),1),t[42]||(t[42]=S(" of ")),e("span",$t,n(d.value.total),1),t[43]||(t[43]=S(" results "))])]),e("div",null,[e("nav",Ht,[e("button",{onClick:te,disabled:!d.value.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[44]||(t[44]=[e("span",{class:"sr-only"},"Previous",-1),e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]),8,zt),(i(!0),u(b,null,_(de.value,s=>(i(),u("button",{key:s,onClick:r=>Se(s),class:Ne(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s===d.value.current_page?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},n(s),11,Kt))),128)),e("button",{onClick:se,disabled:!d.value.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[45]||(t[45]=[e("span",{class:"sr-only"},"Next",-1),e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]),8,Qt)])])])])]),q.value?(i(),u("div",Xt,[e("div",Yt,[e("div",Gt,[e("div",Wt,[e("h3",Jt,n(h.value?"Edit Product":"Create New Product"),1),e("button",{onClick:H,class:"text-gray-400 hover:text-gray-600"},t[46]||(t[46]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:oe(he,["prevent"]),class:"space-y-4"},[e("div",Zt,[e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"SKU *",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.sku=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",placeholder:"Enter SKU"},null,512),[[x,a.value.sku]])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Name *",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.product_name=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",placeholder:"Enter product name"},null,512),[[x,a.value.product_name]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category *",-1)),m(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>a.value.category_id=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},[t[49]||(t[49]=e("option",{value:""},"Select Category",-1)),(i(!0),u(b,null,_(M.value,s=>(i(),u("option",{key:s.id,value:s.id},n(s.name),9,es))),128))],512),[[R,a.value.category_id]])]),e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Vendor *",-1)),m(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>a.value.vendor_id=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},[t[51]||(t[51]=e("option",{value:""},"Select Vendor",-1)),(i(!0),u(b,null,_(D.value,s=>(i(),u("option",{key:s.id,value:s.id},n(s.name),9,ts))),128))],512),[[R,a.value.vendor_id]])]),e("div",ss,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Initial Stock Quantity",-1)),m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>a.value.initial_quantity=s),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter initial stock quantity"},null,512),[[x,a.value.initial_quantity]])]),e("div",os,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Stock Threshold",-1)),m(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>a.value.stock_threshold=s),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter minimum stock threshold"},null,512),[[x,a.value.stock_threshold]])]),e("div",rs,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price (KES)",-1)),m(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>a.value.base_price=s),type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter product price"},null,512),[[x,a.value.base_price]])])]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=s=>a.value.description=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter product description (optional)"},null,512),[[x,a.value.description]])]),e("div",ls,[e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Images",-1)),e("input",{type:"file",accept:"image/*",multiple:"",onChange:ne,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,32),e("div",as,[(i(!0),u(b,null,_(a.value.images,(s,r)=>(i(),u("img",{key:r,src:s.preview,class:"w-16 h-16 object-cover rounded"},null,8,ns))),128))]),v.value.images?(i(),u("div",is,n(v.value.images[0]),1)):C("",!0)]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Videos",-1)),e("input",{type:"file",accept:"video/*",multiple:"",onChange:ie,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,32),e("div",ds,[(i(!0),u(b,null,_(a.value.videos,(s,r)=>(i(),u("video",{key:r,src:s.preview,controls:"",class:"w-24 h-16 rounded"},null,8,us))),128))]),v.value.videos?(i(),u("div",cs,n(v.value.videos[0]),1)):C("",!0)])]),e("div",ps,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price Offers",-1)),(i(!0),u(b,null,_(a.value.price_offers,(s,r)=>(i(),u("div",{key:r,class:"border rounded p-3 mb-2"},[e("div",ms,[e("div",null,[m(e("input",{"onUpdate:modelValue":c=>s.amount=c,type:"number",min:"0",step:"0.01",placeholder:"Amount",class:"w-full px-2 py-1 border rounded"},null,8,vs),[[x,s.amount]]),v.value[`price_offers.${r}.amount`]?(i(),u("div",gs,n(v.value[`price_offers.${r}.amount`][0]),1)):C("",!0)]),e("div",null,[m(e("input",{"onUpdate:modelValue":c=>s.currency=c,type:"text",placeholder:"Currency (e.g. KES)",class:"w-full px-2 py-1 border rounded"},null,8,xs),[[x,s.currency]]),v.value[`price_offers.${r}.currency`]?(i(),u("div",fs,n(v.value[`price_offers.${r}.currency`][0]),1)):C("",!0)]),e("div",null,[m(e("input",{"onUpdate:modelValue":c=>s.label=c,type:"text",placeholder:"Offer Label (e.g. Discount, Promo)",class:"w-full px-2 py-1 border rounded"},null,8,ys),[[x,s.label]])])]),e("button",{type:"button",onClick:c=>o.removePriceOffer(r),class:"text-red-600 text-xs mt-2"},"Remove Offer",8,bs)]))),128)),e("button",{type:"button",onClick:t[12]||(t[12]=(...s)=>o.addPriceOffer&&o.addPriceOffer(...s)),class:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs mt-2"}," Add Price Offer "),a.value.price_offers&&a.value.price_offers.length?(i(),u("div",_s,[e("table",hs,[t[59]||(t[59]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Amount"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Currency"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Label")])],-1)),e("tbody",ks,[(i(!0),u(b,null,_(a.value.price_offers,(s,r)=>(i(),u("tr",{key:r},[e("td",ws,n(s.amount),1),e("td",Cs,n(s.currency),1),e("td",Ss,n(s.label),1)]))),128))])])])):C("",!0)]),e("div",Es,[e("button",{type:"button",onClick:H,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:A.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"},n(h.value?"Update":"Create"),9,Ps)])],32)])])])):C("",!0),G.value?(i(),u("div",js,[e("div",Ms,[e("div",Vs,[e("div",{class:"flex justify-between items-center mb-4"},[t[62]||(t[62]=e("h3",{class:"text-lg font-medium text-gray-900"},"Adjust Stock",-1)),e("button",{onClick:z,class:"text-gray-400 hover:text-gray-600"},t[61]||(t[61]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:oe(Ce,["prevent"]),class:"space-y-4"},[e("div",null,[t[63]||(t[63]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product",-1)),e("p",As,n((l=y.value.product)==null?void 0:l.product_name),1)]),e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Current Stock",-1)),e("p",Us,n(T(y.value.product)),1)]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Adjustment Quantity *",-1)),m(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>y.value.quantity=s),type:"number",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",placeholder:"Enter quantity (positive to add, negative to subtract)"},null,512),[[x,y.value.quantity]])]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reason",-1)),m(e("textarea",{"onUpdate:modelValue":t[14]||(t[14]=s=>y.value.reason=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter reason for stock adjustment (optional)"},null,512),[[x,y.value.reason]])]),e("div",Ts,[e("button",{type:"button",onClick:z,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:A.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"}," Adjust Stock ",8,Ds)])],32)])])])):C("",!0)]),Le(Oe,{isOpen:L.value,productId:k.value.id,productName:k.value.name,warehouseId:k.value.warehouse_id,currentStock:k.value.current_stock,committedStock:k.value.committed_stock,defectedStock:k.value.defected_stock,historicalStock:k.value.historical_stock,warehouses:le.value,onClose:me,onSave:ve},null,8,["isOpen","productId","productName","warehouseId","currentStock","committedStock","defectedStock","historicalStock","warehouses"])]}),_:1}))}};export{Ks as default};
