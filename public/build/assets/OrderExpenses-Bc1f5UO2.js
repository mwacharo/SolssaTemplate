import{r as A,j as T,l as a,c as k,o as r,w as l,b as n,a as o,t as d,f as i,d as u,e as x,F,g as K}from"./app-CAy57pox.js";const O={class:"text-h6"},D={class:"font-weight-bold"},L={key:0},U={key:1,class:"text-grey"},I={key:0,class:"d-flex align-center"};const M={key:0},P={class:"text-subtitle-1"},q={__name:"OrderExpenses",props:{modelValue:Boolean,order:Object,expenses:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(m,{expose:b}){const C=m,c=A(!1),E=s=>{c.value=!0},V=T(()=>C.expenses.reduce((s,e)=>s+Number(e.amount),0)),v=s=>Number(s).toLocaleString("en-KE",{minimumFractionDigits:2}),w=s=>s.replaceAll("_"," ").toUpperCase(),B=s=>s==="paid"?"green":s==="invoiced"?"blue":s==="pending"?"orange":"grey";return b({open:E}),(s,e)=>{const p=a("v-icon"),_=a("v-btn"),N=a("v-card-title"),f=a("v-divider"),y=a("v-chip"),$=a("v-table"),h=a("v-card-text"),z=a("v-card-actions"),S=a("v-card"),j=a("v-dialog");return r(),k(j,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t),"max-width":"900"},{default:l(()=>[n(S,{rounded:"xl"},{default:l(()=>[n(N,{class:"d-flex justify-space-between align-center"},{default:l(()=>{var t;return[o("span",O," Order Expenses — #"+d((t=m.order)==null?void 0:t.order_no),1),n(_,{icon:"",onClick:e[0]||(e[0]=g=>c.value=!1)},{default:l(()=>[n(p,null,{default:l(()=>e[3]||(e[3]=[i("mdi-close")])),_:1,__:[3]})]),_:1})]}),_:1}),n(f),n(h,null,{default:l(()=>[n($,{density:"comfortable"},{default:l(()=>[e[8]||(e[8]=o("thead",null,[o("tr",null,[o("th",null,"Expense Type"),o("th",null,"Party"),o("th",null,"Amount"),o("th",null,"Status"),o("th",null,"Invoice"),o("th",null,"Actions")])],-1)),o("tbody",null,[(r(!0),u(F,null,K(m.expenses,t=>(r(),u("tr",{key:t.id},[o("td",null,[n(y,{size:"small",variant:"tonal"},{default:l(()=>[i(d(w(t.expense_type)),1)]),_:2},1024)]),o("td",null,d(t.party_name||t.party_type),1),o("td",D," KES "+d(v(t.amount)),1),o("td",null,[n(y,{size:"small",color:B(t.status),variant:"flat"},{default:l(()=>[i(d(t.status),1)]),_:2},1032,["color"])]),o("td",null,[t.invoice_no?(r(),u("span",L,d(t.invoice_no),1)):(r(),u("span",U," — "))]),o("td",null,[(r(),u("div",I,[t.invoice_url?(r(),k(_,{key:0,href:t.invoice_url,target:"_blank",icon:"",size:"small",color:"primary"},{default:l(()=>[n(p,null,{default:l(()=>e[4]||(e[4]=[i("mdi-file-download-outline")])),_:1,__:[4]})]),_:2},1032,["href"])):x("",!0),n(_,{icon:"",size:"small",color:"primary",onClick:g=>s.$emit("edit-expense",t),title:"Edit expense"},{default:l(()=>[n(p,null,{default:l(()=>e[5]||(e[5]=[i("mdi-pencil")])),_:1,__:[5]})]),_:2},1032,["onClick"]),n(_,{icon:"",size:"small",color:"error",onClick:g=>s.$emit("remove-expense",t),title:"Remove expense"},{default:l(()=>[n(p,null,{default:l(()=>e[6]||(e[6]=[i("mdi-delete")])),_:1,__:[6]})]),_:2},1032,["onClick"])]))])]))),128)),m.expenses.length?x("",!0):(r(),u("tr",M,e[7]||(e[7]=[o("td",{colspan:"5",class:"text-center text-grey py-6"}," No expenses recorded for this order ",-1)])))])]),_:1,__:[8]})]),_:1}),n(f),n(z,{class:"justify-space-between px-6 py-4"},{default:l(()=>[o("div",P,[e[9]||(e[9]=i(" Total Expenses: ")),o("strong",null,"KES "+d(v(V.value)),1)]),n(_,{color:"primary",variant:"flat",onClick:e[1]||(e[1]=t=>c.value=!1)},{default:l(()=>e[10]||(e[10]=[i(" Close ")])),_:1,__:[10]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};export{q as default};
