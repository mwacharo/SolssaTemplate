import{r as j,j as T,l as a,c as A,o as d,w as s,b as n,a as e,t as r,f as i,d as c,e as F,F as K,g as O}from"./app-CZ1rtljo.js";const z={class:"text-h6"},D={class:"font-weight-bold"},L={key:0},U={key:1,class:"text-grey"},$={key:0},I={class:"text-subtitle-1"},q={__name:"OrderExpenses",props:{modelValue:Boolean,order:Object,expenses:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(_,{expose:y}){const x=_,u=j(!1),g=l=>{u.value=!0},b=T(()=>x.expenses.reduce((l,t)=>l+Number(t.amount),0)),p=l=>Number(l).toLocaleString("en-KE",{minimumFractionDigits:2}),k=l=>l.replaceAll("_"," ").toUpperCase(),E=l=>l==="paid"?"green":l==="invoiced"?"blue":l==="pending"?"orange":"grey";return y({open:g}),(l,t)=>{const V=a("v-icon"),m=a("v-btn"),C=a("v-card-title"),v=a("v-divider"),f=a("v-chip"),N=a("v-table"),w=a("v-card-text"),h=a("v-card-actions"),B=a("v-card"),S=a("v-dialog");return d(),A(S,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=o=>u.value=o),"max-width":"900"},{default:s(()=>[n(B,{rounded:"xl"},{default:s(()=>[n(C,{class:"d-flex justify-space-between align-center"},{default:s(()=>{var o;return[e("span",z," Order Expenses — #"+r((o=_.order)==null?void 0:o.order_no),1),n(m,{icon:"",onClick:t[0]||(t[0]=M=>u.value=!1)},{default:s(()=>[n(V,null,{default:s(()=>t[3]||(t[3]=[i("mdi-close")])),_:1,__:[3]})]),_:1})]}),_:1}),n(v),n(w,null,{default:s(()=>[n(N,{density:"comfortable"},{default:s(()=>[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",null,"Expense Type"),e("th",null,"Party"),e("th",null,"Amount"),e("th",null,"Status"),e("th",null,"Invoice")])],-1)),e("tbody",null,[(d(!0),c(K,null,O(_.expenses,o=>(d(),c("tr",{key:o.id},[e("td",null,[n(f,{size:"small",variant:"tonal"},{default:s(()=>[i(r(k(o.expense_type)),1)]),_:2},1024)]),e("td",null,r(o.party_name||o.party_type),1),e("td",D," KES "+r(p(o.amount)),1),e("td",null,[n(f,{size:"small",color:E(o.status),variant:"flat"},{default:s(()=>[i(r(o.status),1)]),_:2},1032,["color"])]),e("td",null,[o.invoice_no?(d(),c("span",L,r(o.invoice_no),1)):(d(),c("span",U," — "))])]))),128)),_.expenses.length?F("",!0):(d(),c("tr",$,t[4]||(t[4]=[e("td",{colspan:"5",class:"text-center text-grey py-6"}," No expenses recorded for this order ",-1)])))])]),_:1,__:[5]})]),_:1}),n(v),n(h,{class:"justify-space-between px-6 py-4"},{default:s(()=>[e("div",I,[t[6]||(t[6]=i(" Total Expenses: ")),e("strong",null,"KES "+r(p(b.value)),1)]),n(m,{color:"primary",variant:"flat",onClick:t[1]||(t[1]=o=>u.value=!1)},{default:s(()=>t[7]||(t[7]=[i(" Close ")])),_:1,__:[7]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};export{q as default};
