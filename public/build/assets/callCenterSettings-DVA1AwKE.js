import{E as _,j as l,i as g}from"./app-HNqFX-iS.js";const y=_("callCenterSettings",{state:()=>({settings:[],currentSetting:null,loading:!1,error:null}),getters:{getSettingById:e=>n=>e.settings.find(s=>s.id===n),hasSettings:e=>e.settings&&e.settings.length>0,allSettings:e=>e.settings,isLoading:e=>e.loading,hasError:e=>!!e.error,errorMessage:e=>e.error},actions:{async fetchSettings(){var e,n;this.loading=!0,this.error=null;try{const s=await g.get("/api/v1/call-center-settings");return this.settings=s.data.data||s.data||[],{success:!0,data:this.settings}}catch(s){return this.error=((n=(e=s.response)==null?void 0:e.data)==null?void 0:n.message)||"Failed to fetch settings",console.error("Fetch settings error:",s),{success:!1,error:this.error}}finally{this.loading=!1}},async fetchSetting(e){var n,s;this.loading=!0,this.error=null;try{const r=await g.get(`/api/v1/call-center-settings/${e}`);return this.currentSetting=r.data.data||r.data,this.currentSetting}catch(r){throw this.error=((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to fetch setting",console.error("Fetch setting error:",r),r}finally{this.loading=!1}},async createSetting(e){var n,s;this.loading=!0,this.error=null;try{const r=await g.post("/api/v1/call-center-settings",e),a=r.data.data||r.data;return this.settings.push(a),{success:!0,data:a}}catch(r){return this.error=((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to create setting",console.error("Create setting error:",r),{success:!1,error:this.error}}finally{this.loading=!1}},async updateSetting(e,n){var s,r;this.loading=!0,this.error=null;try{const a=await g.put(`/api/v1/call-center-settings/${e}`,n),c=a.data.data||a.data,u=this.settings.findIndex(d=>d.id===e);return u!==-1&&(this.settings[u]=c),this.currentSetting&&this.currentSetting.id===e&&(this.currentSetting=c),{success:!0,data:c}}catch(a){return this.error=((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to update setting",console.error("Update setting error:",a),{success:!1,error:this.error}}finally{this.loading=!1}},async deleteSetting(e){var n,s;this.loading=!0,this.error=null;try{return await g.delete(`/api/v1/call-center-settings/${e}`),this.settings=this.settings.filter(r=>r.id!==e),this.currentSetting&&this.currentSetting.id===e&&(this.currentSetting=null),{success:!0}}catch(r){return this.error=((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to delete setting",console.error("Delete setting error:",r),{success:!1,error:this.error}}finally{this.loading=!1}},clearError(){this.error=null},clearCurrentSetting(){this.currentSetting=null},resetStore(){this.settings=[],this.currentSetting=null,this.loading=!1,this.error=null}}});function w(){const e=y(),n=[{value:"woman",label:"woman"},{value:"man",label:"man"}],s=[{value:"debug",label:"Debug"},{value:"info",label:"Info"},{value:"warning",label:"Warning"},{value:"error",label:"Error"}],r=()=>({country_id:null,username:"",api_key:"",phone:"",sandbox:!0,default_voice:"alloy",timeout:30,recording_enabled:!1,welcome_message:"",no_input_message:"",invalid_option_message:"",connecting_agent_message:"",agents_busy_message:"",voicemail_prompt:"",callback_url:"",event_callback_url:"",ringback_tone:"",voicemail_callback:"",fallback_number:"",default_forward_number:"",debug_mode:!1,log_level:"info"}),a=t=>{var f,S,m;const i={};return(f=t.username)!=null&&f.trim()||(i.username="Username is required"),(S=t.api_key)!=null&&S.trim()||(i.api_key="API Key is required"),(m=t.phone)!=null&&m.trim()?/^\+\d{10,15}$/.test(t.phone.trim())||(i.phone="Please enter a valid phone number with country code (e.g., +254700000000)"):i.phone="Phone number is required",(!t.country_id||t.country_id<1)&&(i.country_id="Country ID is required and must be a positive number"),t.timeout&&(t.timeout<1||t.timeout>300)&&(i.timeout="Timeout must be between 1 and 300 seconds"),["callback_url","event_callback_url","ringback_tone","voicemail_callback"].forEach(h=>{t[h]&&!c(t[h])&&(i[h]="Please enter a valid URL")}),{isValid:Object.keys(i).length===0,errors:i}},c=t=>{try{return new URL(t),!0}catch{return!1}},u=t=>{if(!t)return"N/A";const i=t.replace(/\D/g,"");if(i.length>=10){const o=i.match(/^(\d{3})(\d{3})(\d{3})(\d+)$/);if(o)return`+${o[1]} ${o[2]} ${o[3]} ${o[4]}`}return t},d=t=>t?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",p=t=>t?"Sandbox":"Production",b=t=>t?new Date(t).toLocaleString():"N/A";return{store:e,isLoading:l(()=>e.isLoading),hasError:l(()=>e.hasError),errorMessage:l(()=>e.errorMessage),settings:l(()=>e.settings),hasSettings:l(()=>e.hasSettings),currentSetting:l(()=>e.currentSetting),fetchSettings:e.fetchSettings,fetchSetting:e.fetchSetting,createSetting:e.createSetting,updateSetting:e.updateSetting,deleteSetting:e.deleteSetting,clearError:e.clearError,clearCurrentSetting:e.clearCurrentSetting,resetStore:e.resetStore,voiceOptions:n,logLevelOptions:s,getDefaultFormData:r,validateForm:a,formatPhoneNumber:u,getEnvironmentBadgeClass:d,getEnvironmentText:p,formatDate:b}}export{w as u};
