import{r as i,j as D,k as H,c as z,o as r,w as I,a as e,d as a,e as b,f as F,A as d,B as p,F as B,g as U,t as u,C as E,n as P,y as T,D as q,i as w}from"./app-BG1kvza6.js";import{_ as G}from"./AppLayout-kL5ZXRkH.js";import{n as g}from"./toast-DlwS1Gwa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./webrtc-BM3hOec0.js";import"./africastalking-0vYzts4n.js";import"./IncomingCallDialog-Cethhd7d.js";/* empty css                                                                           */const O={class:"py-12"},J={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},K={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Q={class:"p-6 bg-gray-50 border-b border-gray-200"},R={class:"flex flex-col sm:flex-row gap-4"},W={class:"flex-1"},X={class:"flex gap-2"},Y=["value"],Z={class:"overflow-x-auto"},ee={class:"min-w-full divide-y divide-gray-200"},te={class:"bg-white divide-y divide-gray-200"},oe={class:"px-6 py-4 whitespace-nowrap"},se={class:"text-sm font-medium text-gray-900"},ne={class:"px-6 py-4 whitespace-nowrap"},le={class:"text-sm text-gray-900"},ie={class:"px-6 py-4 whitespace-nowrap"},re={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ae={class:"flex space-x-2"},de=["onClick"],ue=["onClick"],ce=["onClick"],pe={key:0,class:"text-center py-12"},ge={key:1,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},ve={class:"flex items-center justify-between"},me={class:"text-sm text-gray-700"},fe={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},xe={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-1/2 lg:w-1/3 shadow-lg rounded-md bg-white"},ye={class:"mt-3"},be={class:"flex justify-between items-center mb-4"},we={class:"text-lg font-medium text-gray-900"},he=["readonly"],ke={class:"grid grid-cols-2 gap-4"},Ce=["readonly"],_e=["readonly"],Me=["readonly"],Ve={class:"flex items-center"},je=["disabled"],Be={key:0,class:"flex justify-end space-x-2 pt-4"},Ue=["disabled"],Ie={__name:"City",setup(Ee){const h=i([]),c=i(!1),l=i("create"),v=i(!1),m=i(""),_=i(""),f=i(""),n=i({name:"",latitude:null,longitude:null,population:null,inbound:!1}),x=i(null),y=D(()=>{let o=h.value;return m.value&&(o=o.filter(t=>t.name.toLowerCase().includes(m.value.toLowerCase()))),f.value!==""&&(o=o.filter(t=>t.inbound===(f.value==="true"))),o}),k=async()=>{try{const o=await w.get("/api/v1/cities");h.value=o.data.data}catch(o){console.error("Error fetching cities:",o),g.error("Error loading cities. Please try again.")}},A=()=>{l.value="create",M(),c.value=!0},L=o=>{l.value="edit",x.value=o.id,n.value={name:o.name,latitude:o.latitude,longitude:o.longitude,population:o.population,inbound:o.inbound},c.value=!0},S=o=>{l.value="view",x.value=o.id,n.value={name:o.name,latitude:o.latitude,longitude:o.longitude,population:o.population,inbound:o.inbound},c.value=!0},$=async()=>{v.value=!0;try{const o={...n.value,latitude:n.value.latitude||null,longitude:n.value.longitude||null,population:n.value.population||null};l.value==="create"?await w.post("/api/v1/cities",o):await w.put(`/api/v1/cities/${x.value}`,o),await k(),C(),g.success(`City ${l.value==="create"?"created":"updated"} successfully!`)}catch(o){console.error("Error saving city:",o),g.error("Error saving city. Please try again.")}finally{v.value=!1}},N=async o=>{if(confirm(`Are you sure you want to delete "${o.name}"?`))try{await w.delete(`/api/v1/cities/${o.id}`),await k(),g.success("City deleted successfully!")}catch(t){console.error("Error deleting city:",t),g.error("Error deleting city. Please try again.")}},C=()=>{c.value=!1,M(),x.value=null},M=()=>{n.value={name:"",latitude:null,longitude:null,population:null,inbound:!1}};return H(()=>{k()}),(o,t)=>(r(),z(G,null,{default:I(()=>[e("div",O,[e("div",J,[e("div",K,[e("div",{class:"p-6 bg-white border-b border-gray-200"},[e("div",{class:"flex justify-between items-center"},[t[9]||(t[9]=e("div",null,[e("h2",{class:"text-2xl font-semibold text-gray-900"},"Cities Management"),e("p",{class:"mt-1 text-sm text-gray-600"}," Manage cities and their information ")],-1)),e("button",{onClick:A,class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-600 transition ease-in-out duration-150"},t[8]||(t[8]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),F(" Add City ")]))])]),e("div",Q,[e("div",R,[e("div",W,[d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),type:"text",placeholder:"Search cities...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[p,m.value]])]),e("div",X,[d(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>_.value=s),class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[t[10]||(t[10]=e("option",{value:""},"All Countries",-1)),(r(!0),a(B,null,U(o.countries,s=>(r(),a("option",{key:s.id,value:s.id},u(s.name),9,Y))),128))],512),[[E,_.value]]),d(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s),class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},t[11]||(t[11]=[e("option",{value:""},"All Cities",-1),e("option",{value:"true"},"Inbound Only",-1),e("option",{value:"false"},"Not Inbound",-1)]),512),[[E,f.value]])])])]),e("div",Z,[e("table",ee,[t[15]||(t[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," City "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Country "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",te,[(r(!0),a(B,null,U(y.value,s=>{var V;return r(),a("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",oe,[e("div",se,u(s.name),1)]),e("td",ne,[e("div",le,u(((V=s.country)==null?void 0:V.name)||"Unknown"),1)]),e("td",ie,[e("span",{class:P(s.inbound?"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800":"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800")},u(s.inbound?"Inbound":"Standard"),3)]),e("td",re,[e("div",ae,[e("button",{onClick:j=>S(s),class:"text-indigo-600 hover:text-indigo-900",title:"View"},t[12]||(t[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,de),e("button",{onClick:j=>L(s),class:"text-yellow-600 hover:text-yellow-900",title:"Edit"},t[13]||(t[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,ue),e("button",{onClick:j=>N(s),class:"text-red-600 hover:text-red-900",title:"Delete"},t[14]||(t[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,ce)])])])}),128))])])]),y.value.length===0?(r(),a("div",pe,t[16]||(t[16]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No cities found",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new city.",-1)]))):b("",!0),y.value.length>0?(r(),a("div",ge,[e("div",ve,[e("div",me," Showing "+u(y.value.length)+" of "+u(h.value.length)+" cities ",1)])])):b("",!0)])])]),c.value?(r(),a("div",fe,[e("div",xe,[e("div",ye,[e("div",be,[e("h3",we,u(l.value==="create"?"Add New City":l.value==="edit"?"Edit City":"City Details"),1),e("button",{onClick:C,class:"text-gray-400 hover:text-gray-600"},t[17]||(t[17]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:T($,["prevent"]),class:"space-y-4"},[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"City Name",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.value.name=s),type:"text",readonly:l.value==="view",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,8,he),[[p,n.value.name]])]),e("div",ke,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Latitude",-1)),d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>n.value.latitude=s),type:"number",step:"0.0000001",readonly:l.value==="view",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,8,Ce),[[p,n.value.latitude]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"Longitude",-1)),d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>n.value.longitude=s),type:"number",step:"0.0000001",readonly:l.value==="view",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,8,_e),[[p,n.value.longitude]])])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Population",-1)),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>n.value.population=s),type:"number",readonly:l.value==="view",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},null,8,Me),[[p,n.value.population]])]),e("div",null,[e("label",Ve,[d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>n.value.inbound=s),type:"checkbox",disabled:l.value==="view",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,je),[[q,n.value.inbound]]),t[22]||(t[22]=e("span",{class:"ml-2 text-sm text-gray-700"},"Inbound City",-1))])]),l.value!=="view"?(r(),a("div",Be,[e("button",{type:"button",onClick:C,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Cancel "),e("button",{type:"submit",disabled:v.value,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"},u(v.value?"Saving...":l.value==="create"?"Create City":"Update City"),9,Ue)])):b("",!0)],32)])])])):b("",!0)]),_:1}))}};export{Ie as default};
