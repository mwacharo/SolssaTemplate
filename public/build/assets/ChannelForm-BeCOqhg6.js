import{r as y,s as I,l as i,c as P,o as s,w as t,b as a,d as f,e as p,F as _,f as U,y as q}from"./app-D2Cc_UEz.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={name:"ChannelForm",props:{channel:{type:String,required:!0},credential:{type:Object,default:()=>({})},providers:{type:Array,default:()=>[]}},emits:["save","reset"],setup(r,{emit:l}){const m=y(!1),e=y({}),b={required:u=>!!u||"This field is required",email:u=>!u||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)||"Please enter a valid email address",url:u=>{try{return u&&new URL(u),!0}catch{return"Please enter a valid URL"}}},v=()=>{e.value={channel:r.channel,provider:r.credential.provider||r.providers[0]||"",status:r.credential.status||"inactive",api_key:r.credential.api_key||"",api_secret:r.credential.api_secret||"",access_token:r.credential.access_token||"",access_token_secret:r.credential.access_token_secret||"",auth_token:r.credential.auth_token||"",user_name:r.credential.user_name||"",password:r.credential.password||"",account_sid:r.credential.account_sid||"",account_id:r.credential.account_id||"",app_id:r.credential.app_id||"",app_secret:r.credential.app_secret||"",page_access_token:r.credential.page_access_token||"",page_id:r.credential.page_id||"",phone_number:r.credential.phone_number||"",webhook:r.credential.webhook||"",instance_id:r.credential.instance_id||"",api_url:r.credential.api_url||"https://api.green-api.com",api_token:r.credential.api_token||"",from_name:r.credential.from_name||"",from_address:r.credential.from_address||"",smtp_host:r.credential.smtp_host||"",smtp_port:r.credential.smtp_port||587,encryption:r.credential.encryption||"tls",mail_mailer:r.credential.mail_mailer||"smtp",description:r.credential.description||"",value:r.credential.value||"",meta:r.credential.meta||{}}},D=async()=>{m.value=!0;try{const u=Object.entries(e.value).reduce((d,[c,V])=>(V!==""&&V!==null&&V!==void 0&&(d[c]=V),d),{});l("save",u)}finally{m.value=!1}},n=()=>{v(),l("reset",r.channel)};return I(()=>r.credential,v,{immediate:!0,deep:!0}),{formData:e,loading:m,rules:b,handleSave:D,handleReset:n}}};function x(r,l,m,e,b,v){const D=i("v-select"),n=i("v-col"),u=i("v-switch"),d=i("v-text-field"),c=i("v-textarea"),V=i("v-row"),w=i("v-spacer"),k=i("v-btn"),g=i("v-card-actions"),A=i("v-form");return s(),P(A,{onSubmit:q(e.handleSave,["prevent"])},{default:t(()=>[a(V,null,{default:t(()=>[a(n,{cols:"12",md:"6"},{default:t(()=>[a(D,{modelValue:e.formData.provider,"onUpdate:modelValue":l[0]||(l[0]=o=>e.formData.provider=o),items:m.providers,label:"Provider",variant:"outlined",rules:[e.rules.required]},null,8,["modelValue","items","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(u,{modelValue:e.formData.status,"onUpdate:modelValue":l[1]||(l[1]=o=>e.formData.status=o),label:e.formData.status==="active"?"Active":"Inactive","true-value":"active","false-value":"inactive",color:"primary"},null,8,["modelValue","label"])]),_:1}),m.channel==="voice"?(s(),f(_,{key:0},[a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.account_sid,"onUpdate:modelValue":l[2]||(l[2]=o=>e.formData.account_sid=o),label:"Account SID",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.auth_token,"onUpdate:modelValue":l[3]||(l[3]=o=>e.formData.auth_token=o),label:"Auth Token",type:"password",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.phone_number,"onUpdate:modelValue":l[4]||(l[4]=o=>e.formData.phone_number=o),label:"Phone Number",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.api_key,"onUpdate:modelValue":l[5]||(l[5]=o=>e.formData.api_key=o),label:"API Key",variant:"outlined"},null,8,["modelValue"])]),_:1})],64)):m.channel==="email"?(s(),f(_,{key:1},[a(n,{cols:"12",md:"6"},{default:t(()=>[a(D,{modelValue:e.formData.mail_mailer,"onUpdate:modelValue":l[6]||(l[6]=o=>e.formData.mail_mailer=o),items:["smtp","sendmail","mailgun","ses","postmark"],label:"Mail Mailer",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.from_name,"onUpdate:modelValue":l[7]||(l[7]=o=>e.formData.from_name=o),label:"From Name",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.from_address,"onUpdate:modelValue":l[8]||(l[8]=o=>e.formData.from_address=o),label:"From Email",type:"email",variant:"outlined",rules:[e.rules.email]},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.smtp_host,"onUpdate:modelValue":l[9]||(l[9]=o=>e.formData.smtp_host=o),label:"SMTP Host",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.smtp_port,"onUpdate:modelValue":l[10]||(l[10]=o=>e.formData.smtp_port=o),label:"SMTP Port",type:"number",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(D,{modelValue:e.formData.encryption,"onUpdate:modelValue":l[11]||(l[11]=o=>e.formData.encryption=o),items:["tls","ssl"],label:"Encryption",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.user_name,"onUpdate:modelValue":l[12]||(l[12]=o=>e.formData.user_name=o),label:"Username",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.password,"onUpdate:modelValue":l[13]||(l[13]=o=>e.formData.password=o),label:"Password",type:"password",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.api_key,"onUpdate:modelValue":l[14]||(l[14]=o=>e.formData.api_key=o),label:"API Key (for API providers)",variant:"outlined"},null,8,["modelValue"])]),_:1})],64)):m.channel==="sms"?(s(),f(_,{key:2},[a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.account_sid,"onUpdate:modelValue":l[15]||(l[15]=o=>e.formData.account_sid=o),label:"Account SID",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.auth_token,"onUpdate:modelValue":l[16]||(l[16]=o=>e.formData.auth_token=o),label:"Auth Token",type:"password",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.phone_number,"onUpdate:modelValue":l[17]||(l[17]=o=>e.formData.phone_number=o),label:"From Number",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.api_key,"onUpdate:modelValue":l[18]||(l[18]=o=>e.formData.api_key=o),label:"API Key",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.api_url,"onUpdate:modelValue":l[19]||(l[19]=o=>e.formData.api_url=o),label:"API URL",variant:"outlined",rules:[e.rules.url]},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.instance_id,"onUpdate:modelValue":l[20]||(l[20]=o=>e.formData.instance_id=o),label:"Instance ID",variant:"outlined"},null,8,["modelValue"])]),_:1})],64)):m.channel==="whatsapp"?(s(),f(_,{key:3},[a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.api_key,"onUpdate:modelValue":l[21]||(l[21]=o=>e.formData.api_key=o),label:"Business API Key",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.phone_number,"onUpdate:modelValue":l[22]||(l[22]=o=>e.formData.phone_number=o),label:"Business Phone Number",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.account_id,"onUpdate:modelValue":l[23]||(l[23]=o=>e.formData.account_id=o),label:"Business Account ID",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.webhook,"onUpdate:modelValue":l[24]||(l[24]=o=>e.formData.webhook=o),label:"Webhook URL",variant:"outlined",rules:[e.rules.url]},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.instance_id,"onUpdate:modelValue":l[25]||(l[25]=o=>e.formData.instance_id=o),label:"Instance ID",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.api_url,"onUpdate:modelValue":l[26]||(l[26]=o=>e.formData.api_url=o),label:"API URL",variant:"outlined",rules:[e.rules.url]},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.api_token,"onUpdate:modelValue":l[27]||(l[27]=o=>e.formData.api_token=o),label:"API Token",variant:"outlined"},null,8,["modelValue"])]),_:1})],64)):m.channel==="telegram"?(s(),f(_,{key:4},[a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.access_token,"onUpdate:modelValue":l[28]||(l[28]=o=>e.formData.access_token=o),label:"Bot Token",variant:"outlined",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.user_name,"onUpdate:modelValue":l[29]||(l[29]=o=>e.formData.user_name=o),label:"Bot Username",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12"},{default:t(()=>[a(d,{modelValue:e.formData.webhook,"onUpdate:modelValue":l[30]||(l[30]=o=>e.formData.webhook=o),label:"Webhook URL",variant:"outlined",rules:[e.rules.url]},null,8,["modelValue","rules"])]),_:1})],64)):m.channel==="twitter"?(s(),f(_,{key:5},[a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.api_key,"onUpdate:modelValue":l[31]||(l[31]=o=>e.formData.api_key=o),label:"API Key",variant:"outlined",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.api_secret,"onUpdate:modelValue":l[32]||(l[32]=o=>e.formData.api_secret=o),label:"API Secret",type:"password",variant:"outlined",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.access_token,"onUpdate:modelValue":l[33]||(l[33]=o=>e.formData.access_token=o),label:"Access Token",variant:"outlined",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.access_token_secret,"onUpdate:modelValue":l[34]||(l[34]=o=>e.formData.access_token_secret=o),label:"Access Token Secret",type:"password",variant:"outlined",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1})],64)):m.channel==="facebook"?(s(),f(_,{key:6},[a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.app_id,"onUpdate:modelValue":l[35]||(l[35]=o=>e.formData.app_id=o),label:"App ID",variant:"outlined",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.app_secret,"onUpdate:modelValue":l[36]||(l[36]=o=>e.formData.app_secret=o),label:"App Secret",type:"password",variant:"outlined",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.page_access_token,"onUpdate:modelValue":l[37]||(l[37]=o=>e.formData.page_access_token=o),label:"Page Access Token",variant:"outlined",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:t(()=>[a(d,{modelValue:e.formData.page_id,"onUpdate:modelValue":l[38]||(l[38]=o=>e.formData.page_id=o),label:"Page ID",variant:"outlined",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1})],64)):p("",!0),a(n,{cols:"12"},{default:t(()=>[a(c,{modelValue:e.formData.description,"onUpdate:modelValue":l[39]||(l[39]=o=>e.formData.description=o),label:"Description (optional)",variant:"outlined",rows:"2"},null,8,["modelValue"])]),_:1})]),_:1}),a(g,{class:"px-0"},{default:t(()=>[a(w),a(k,{color:"grey",variant:"outlined",onClick:e.handleReset,disabled:e.loading},{default:t(()=>l[40]||(l[40]=[U(" Reset ")])),_:1,__:[40]},8,["onClick","disabled"]),a(k,{color:"primary",type:"submit",loading:e.loading},{default:t(()=>l[41]||(l[41]=[U(" Save Configuration ")])),_:1,__:[41]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])}const C=S(T,[["render",x],["__scopeId","data-v-45a6e4c7"]]);export{C as default};
