import{E as ve,i as xe,r as h,j as w,k as me,l as G,c as H,o as m,w as ye,a as t,d as _,e as V,t as d,b,f as P,u as x,A as M,B as J,C as K,F as re,g as ie,n as I,a4 as de,y as ge}from"./app-CAy57pox.js";import{n as W}from"./toast-D74Ymlbb.js";import{_ as fe}from"./AppLayout-CNU76EUQ.js";import{u as _e}from"./orderStore-D9ulQxF3.js";import{u as be}from"./expenseTypeStore-D5kMNamX.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as we,E as Ee,S as ke,T as Se,a as Ce,C as ue}from"./trash-2-GQs_OfKo.js";import{S as Ie,F as Ae}from"./search-rBIizraq.js";import{c as X}from"./createLucideIcon-JMuVTUKl.js";import"./webrtc-CRIGlu2V.js";import"./africastalking-C314blFq.js";import"./IncomingCallDialog-CgCDkGRJ.js";/* empty css                                                                           *//**
 * @license lucide-vue-next v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=X("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=X("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=X("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-vue-next v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=X("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),S=xe.create({baseURL:"/api/v1",headers:{Accept:"application/json","Content-Type":"application/json"}}),Ue=ve("vendorExpenses",()=>{const u=h([]),i=h(!1),p=h(null),k=h({currentPage:1,perPage:10,total:0,lastPage:1}),R=w(()=>l=>u.value.find(o=>o.id===l)),$=w(()=>l=>u.value.filter(o=>o.vendor_id===l)),q=w(()=>l=>u.value.filter(o=>o.status===l)),T=w(()=>l=>u.value.filter(o=>o.expense_type===l)),g=w(()=>l=>u.value.filter(o=>o.country_id===l)),z=w(()=>u.value.length),A=w(()=>u.value.reduce((l,o)=>{const r=parseFloat(o.amount)||0;return o.expense_type==="expense"?l-r:l+r},0)),f=w(()=>u.value.reduce((l,o)=>(l[o.status]=(l[o.status]||0)+1,l),{}));return{expenses:u,loading:i,error:p,pagination:k,getExpenseById:R,getExpensesBySeller:$,getExpensesByStatus:q,getExpensesByType:T,getExpensesByCountry:g,totalExpenses:z,totalAmount:A,expensesByStatus:f,fetchExpenses:async(l={})=>{var o,r;i.value=!0,p.value=null;try{const{data:n}=await S.get("/seller-expenses",{params:l});console.log("Raw API Response:",n),n.success&&n.expenses&&n.expenses.data&&Array.isArray(n.expenses.data)?(u.value=n.expenses.data,k.value={currentPage:n.expenses.current_page||1,perPage:n.expenses.per_page||20,total:n.expenses.total||n.expenses.data.length,lastPage:n.expenses.last_page||1},console.log("Parsed expenses:",u.value),console.log("Pagination:",k.value)):n.data&&Array.isArray(n.data)?(u.value=n.data,n.meta&&(k.value={currentPage:n.meta.current_page,perPage:n.meta.per_page,total:n.meta.total,lastPage:n.meta.last_page})):(u.value=Array.isArray(n)?n:[],console.warn("Unexpected API response structure")),console.log("Final expenses count:",u.value.length)}catch(n){p.value=((r=(o=n.response)==null?void 0:o.data)==null?void 0:r.message)||n.message,console.error("Error fetching expenses:",n),u.value=[]}finally{i.value=!1}},fetchExpenseById:async l=>{var o,r;i.value=!0,p.value=null;try{const{data:n}=await S.get(`/seller-expenses/${l}`);return n.data||n}catch(n){throw p.value=((r=(o=n.response)==null?void 0:o.data)==null?void 0:r.message)||n.message,console.error("Error fetching expense:",n),n}finally{i.value=!1}},createExpense:async l=>{var o,r,n;i.value=!0,p.value=null;try{if(!((o=l.description)!=null&&o.trim()))throw new Error("Description is required");if(!l.amount||parseFloat(l.amount)<=0)throw new Error("Valid amount is required");if(!l.vendor_id)throw new Error("Seller is required");const s={description:l.description.trim(),amount:parseFloat(l.amount),expense_type:l.expense_type||"expense",vendor_id:parseInt(l.vendor_id),country_id:parseInt(l.country_id),status:l.status||"not_applied",incurred_on:l.incurred_on||null,source_country_id:l.source_country_id?parseInt(l.source_country_id):null,destination_country_id:l.destination_country_id?parseInt(l.destination_country_id):null,expense_type_id:l.expense_type_id?parseInt(l.expense_type_id):null},{data:e}=await S.post("/seller-expenses",s),v=e.data||e;return u.value.unshift(v),W.success("Expense created successfully."),v}catch(s){throw p.value=((n=(r=s.response)==null?void 0:r.data)==null?void 0:n.message)||s.message,console.error("Error creating expense:",s),s}finally{i.value=!1}},updateExpense:async(l,o)=>{var r,n,s;i.value=!0,p.value=null;try{if(!((r=o.description)!=null&&r.trim()))throw new Error("Description is required");if(!o.amount||parseFloat(o.amount)<=0)throw new Error("Valid amount is required");if(!o.vendor_id)throw new Error("Seller is required");if(!o.country_id)throw new Error("Country is required");const e={description:o.description.trim(),amount:parseFloat(o.amount),expense_type:o.expense_type||"expense",vendor_id:parseInt(o.vendor_id),country_id:parseInt(o.country_id),status:o.status||"not_applied",incurred_on:o.incurred_on||null,expense_type_id:o.expense_type_id,source_country_id:o.source_country_id?parseInt(o.source_country_id):null,destination_country_id:o.destination_country_id?parseInt(o.destination_country_id):null},{data:v}=await S.put(`/seller-expenses/${l}`,e),E=v.data||v,C=u.value.findIndex(j=>j.id===l);return C!==-1&&(u.value[C]=E),W.success("Expense updated successfully."),E}catch(e){throw p.value=((s=(n=e.response)==null?void 0:n.data)==null?void 0:s.message)||e.message,console.error("Error updating expense:",e),e}finally{i.value=!1}},deleteExpense:async l=>{var o,r;i.value=!0,p.value=null;try{await S.delete(`/seller-expenses/${l}`);const n=u.value.findIndex(s=>s.id===l);n!==-1&&u.value.splice(n,1),W.success("Expense deleted successfully.")}catch(n){throw p.value=((r=(o=n.response)==null?void 0:o.data)==null?void 0:r.message)||n.message,console.error("Error deleting expense:",n),n}finally{i.value=!1}},updateExpenseStatus:async(l,o)=>{var r,n;i.value=!0,p.value=null;try{if(!R.value(l))throw new Error("Expense not found");const{data:e}=await S.patch(`/seller-expenses/${l}/status`,{status:o}),v=e.data||e,E=u.value.findIndex(C=>C.id===l);return E!==-1&&(u.value[E]=v),v}catch(s){throw p.value=((n=(r=s.response)==null?void 0:r.data)==null?void 0:n.message)||s.message,console.error("Error updating expense status:",s),s}finally{i.value=!1}},bulkUpdateStatus:async(l,o)=>{var r,n;i.value=!0,p.value=null;try{const{data:s}=await S.post("/seller-expenses/bulk-status",{ids:l,status:o});return l.forEach(e=>{const v=u.value.findIndex(E=>E.id===e);v!==-1&&(u.value[v].status=o,u.value[v].updated_at=new Date().toISOString())}),s}catch(s){throw p.value=((n=(r=s.response)==null?void 0:r.data)==null?void 0:n.message)||s.message,console.error("Error bulk updating expense status:",s),s}finally{i.value=!1}},fetchExpensesByDateRange:async(l,o)=>{var r,n;i.value=!0,p.value=null;try{const{data:s}=await S.get("/seller-expenses/date-range",{params:{start_date:l,end_date:o}});return s.data||s}catch(s){throw p.value=((n=(r=s.response)==null?void 0:r.data)==null?void 0:n.message)||s.message,console.error("Error fetching expenses by date range:",s),s}finally{i.value=!1}},getExpenseStatistics:async(l={})=>{var o,r;i.value=!0,p.value=null;try{const{data:n}=await S.get("/seller-expenses/statistics",{params:l});return n.data||n}catch(n){throw p.value=((r=(o=n.response)==null?void 0:o.data)==null?void 0:r.message)||n.message,console.error("Error fetching expense statistics:",n),n}finally{i.value=!1}},exportExpenses:async(l="csv",o={})=>{var r,n;i.value=!0,p.value=null;try{const{data:s}=await S.get("/seller-expenses/export",{params:{format:l,...o},responseType:"blob"}),e=window.URL.createObjectURL(new Blob([s])),v=document.createElement("a");v.href=e,v.setAttribute("download",`expenses_${Date.now()}.${l}`),document.body.appendChild(v),v.click(),v.remove(),window.URL.revokeObjectURL(e)}catch(s){throw p.value=((n=(r=s.response)==null?void 0:r.data)==null?void 0:n.message)||s.message,console.error("Error exporting expenses:",s),s}finally{i.value=!1}},searchExpenses:async(l,o={})=>{var r,n;i.value=!0,p.value=null;try{const{data:s}=await S.get("/seller-expenses/search",{params:{q:l,...o}});return u.value=s.data||s,s}catch(s){throw p.value=((n=(r=s.response)==null?void 0:r.data)==null?void 0:n.message)||s.message,console.error("Error searching expenses:",s),s}finally{i.value=!1}},resetStore:()=>{u.value=[],i.value=!1,p.value=null,k.value={currentPage:1,perPage:10,total:0,lastPage:1}}}}),je={class:"min-h-screen bg-gray-50 p-6"},Me={class:"max-w-7xl mx-auto"},$e={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},qe={class:"flex justify-between items-center mb-6"},Te={class:"text-gray-600 mt-1"},ze={class:"flex flex-col md:flex-row gap-4"},Fe={class:"flex-1 relative"},Be={class:"flex items-center gap-2"},Le={class:"bg-white rounded-lg shadow-sm overflow-hidden"},Ne={key:0,class:"flex items-center justify-center py-12"},Re={key:1,class:"p-6 text-center"},Oe={class:"text-red-600 mb-2"},He={class:"text-gray-600 mb-4"},Ke={key:2,class:"overflow-x-auto"},Xe={class:"w-full"},Qe={key:0},Ze={class:"px-4 py-3 font-medium"},Ge={class:"px-4 py-3 text-left font-medium"},Je={class:"px-4 py-3"},We={class:"flex items-start gap-2"},Ye={class:"line-clamp-2"},De={class:"px-4 py-3"},et={class:"px-4 py-3"},tt={class:"px-4 py-3"},st={class:"flex items-center gap-2"},nt={class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm"},ot={class:"text-sm font-medium"},lt={class:"px-4 py-3"},at={class:"px-4 py-3 text-sm text-gray-600"},rt={class:"px-4 py-3 text-sm text-gray-600"},it={class:"px-4 py-3"},dt={class:"flex gap-2"},ut=["onClick"],pt=["onClick"],ct=["onClick"],vt={key:3,class:"border-t p-4 flex justify-between items-center"},xt={class:"text-sm text-gray-600"},mt={class:"flex gap-2"},yt=["disabled"],gt=["onClick"],ft=["disabled"],_t={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},bt={class:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto"},ht={class:"sticky top-0 bg-white border-b p-6 flex justify-between items-center"},wt={class:"text-2xl font-bold"},Et={class:"p-6"},kt={key:0,class:"space-y-6"},St={class:"grid grid-cols-2 gap-4"},Ct={class:"font-semibold"},It={class:"mt-1"},At={class:"col-span-2"},Vt={class:"font-semibold"},Pt={class:"font-semibold text-lg"},Ut={class:"mt-1"},jt={class:"col-span-2"},Mt={class:"bg-gray-50 rounded-lg p-4"},$t={class:"font-medium"},qt={class:"font-semibold"},Tt={class:"font-semibold"},zt={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm"},Ft={key:0,class:"text-red-500 text-sm mt-1"},Bt={class:"grid grid-cols-2 gap-4"},Lt={key:0,class:"text-red-500 text-sm mt-1"},Nt={key:0,class:"text-red-500 text-sm mt-1"},Rt={class:"flex gap-3 justify-end pt-4 border-t"},Ot=["disabled"],Ht=["disabled"],N=10,Kt={__name:"Index",setup(u){const i=Ue(),p=_e(),k=be(),R=w(()=>p.vendorOptions),$=h(""),q=h("all"),T=h("all"),g=h(1),z=h(!1),A=h("create"),f=h(null),c=h({description:"",amount:"",expense_type:"expense",expense_type_id:"",vendor_id:"",country_id:"",status:"not_applied",incurred_on:""}),y=h({});me(async()=>{await i.fetchExpenses(),await p.fetchDropdownOptions(),await k.fetchExpenseTypes()});const U=w(()=>{let s=i.expenses;if($.value){const e=$.value.toLowerCase();s=s.filter(v=>{var E,C,j,a,L;return((E=v.description)==null?void 0:E.toLowerCase().includes(e))||((j=(C=v.vendor)==null?void 0:C.username)==null?void 0:j.toLowerCase().includes(e))||((L=(a=v.vendor)==null?void 0:a.email)==null?void 0:L.toLowerCase().includes(e))})}return q.value!=="all"&&(s=s.filter(e=>e.status===q.value)),T.value!=="all"&&(s=s.filter(e=>e.expense_type===T.value)),s}),F=w(()=>Math.ceil(U.value.length/N)),Q=w(()=>{const s=(g.value-1)*N,e=g.value*N;return U.value.slice(s,e)}),Y=w(()=>U.value.reduce((s,e)=>s+parseFloat(e.amount),0)),Z=()=>{var e;const s={};return c.value.expense_type_id||(s.expense_type_id="Expense selection is required"),(e=c.value.description)!=null&&e.trim()||(s.description="Description is required"),(!c.value.amount||parseFloat(c.value.amount)<=0)&&(s.amount="Valid amount is required"),c.value.vendor_id||(s.vendor_id="vendor is required"),c.value.expense_type_id||(s.expense_type_id="Expense type is required"),y.value=s,Object.keys(s).length===0},D=async()=>{if(Z())try{await i.createExpense(c.value),B()}catch(s){y.value={submit:s.message||"Failed to create expense"}}},ee=async()=>{if(Z())try{await i.updateExpense(f.value.id,c.value),B()}catch(s){y.value={submit:s.message||"Failed to update expense"}}},te=async s=>{if(window.confirm("Are you sure you want to delete this expense?"))try{await i.deleteExpense(s)}catch(e){alert(e.message||"Failed to delete expense")}},O=(s,e=null)=>{A.value=s,f.value=e,s==="create"?c.value={description:"",amount:"",expense_type:"expense",vendor_id:"",country_id:"",status:"not_applied",incurred_on:"",expense_type_id:""}:e&&(c.value={description:e.description,amount:e.amount.toString(),expense_type:e.expense_type,vendor_id:e.vendor_id.toString(),country_id:e.country_id.toString(),status:e.status,incurred_on:e.incurred_on?e.incurred_on:"",expense_type_id:e.expense_type_id?e.expense_type_id:""}),y.value={},z.value=!0},B=()=>{z.value=!1,f.value=null,y.value={}},l=s=>{y.value[s]&&delete y.value[s]},o=s=>{const e={not_applied:{bg:"bg-gray-500",icon:pe,text:"Not Applied"},applied:{bg:"bg-blue-500",icon:ue,text:"Applied"},approved:{bg:"bg-green-500",icon:ue,text:"Approved"},rejected:{bg:"bg-red-500",icon:Ce,text:"Rejected"}};return e[s]||e.not_applied},r=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),n=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"KES"}).format(s);return(s,e)=>{const v=G("v-autocomplete"),E=G("v-select"),C=G("v-text-field");return m(),H(fe,null,{default:ye(()=>{var j;return[t("div",je,[t("div",Me,[t("div",$e,[t("div",qe,[t("div",null,[e[20]||(e[20]=t("h1",{class:"text-3xl font-bold text-gray-800"}," Vendor Expenses ",-1)),t("p",Te,d(U.value.length)+" total expenses â€¢ "+d(n(Y.value))+" total amount ",1)]),t("button",{onClick:e[0]||(e[0]=a=>O("create")),expenseTypesStore:"",class:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"},[b(x(we),{size:20}),e[21]||(e[21]=P(" Add Expense "))])]),t("div",ze,[t("div",Fe,[b(x(Ie),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),M(t("input",{type:"text",placeholder:"Search by description, vendor, or email...",class:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":e[1]||(e[1]=a=>$.value=a),onInput:e[2]||(e[2]=a=>g.value=1)},null,544),[[J,$.value]])]),t("div",Be,[b(x(Ae),{size:20,class:"text-gray-400"}),M(t("select",{class:"border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":e[3]||(e[3]=a=>q.value=a),onChange:e[4]||(e[4]=a=>g.value=1)},e[22]||(e[22]=[t("option",{value:"all"},"All Status",-1),t("option",{value:"not_applied"},"Not Applied",-1),t("option",{value:"applied"},"Applied",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"rejected"},"Rejected",-1)]),544),[[K,q.value]]),M(t("select",{class:"border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":e[5]||(e[5]=a=>T.value=a),onChange:e[6]||(e[6]=a=>g.value=1)},e[23]||(e[23]=[t("option",{value:"all"},"All Types",-1),t("option",{value:"expense"},"Expense",-1),t("option",{value:"income"},"Income",-1)]),544),[[K,T.value]])])])]),t("div",Le,[x(i).loading?(m(),_("div",Ne,[b(x(ce),{class:"animate-spin text-blue-600 mr-2",size:24}),e[24]||(e[24]=t("span",{class:"text-gray-600"},"Loading expenses...",-1))])):x(i).error?(m(),_("div",Re,[t("div",Oe,[b(x(pe),{class:"inline-block mr-2",size:20}),e[25]||(e[25]=P(" Error loading expenses "))]),t("p",He,d(x(i).error),1),t("button",{onClick:e[7]||(e[7]=a=>x(i).fetchExpenses()),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"}," Retry ")])):(m(),_("div",Ke,[t("table",Xe,[e[27]||(e[27]=t("thead",{class:"bg-blue-600 text-white"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left"},"ID"),t("th",{class:"px-4 py-3 text-left"},"Expense"),t("th",{class:"px-4 py-3 text-left"}," Description "),t("th",{class:"px-4 py-3 text-left"},"Amount"),t("th",{class:"px-4 py-3 text-left"},"Type"),t("th",{class:"px-4 py-3 text-left"},"Vendor"),t("th",{class:"px-4 py-3 text-left"},"Status"),t("th",{class:"px-4 py-3 text-left"}," Incurred On "),t("th",{class:"px-4 py-3 text-left"}," Created Date "),t("th",{class:"px-4 py-3 text-left"},"Actions")])],-1)),t("tbody",null,[Q.value.length===0?(m(),_("tr",Qe,e[26]||(e[26]=[t("td",{colspan:"10",class:"px-4 py-8 text-center text-gray-500"}," No expenses found ",-1)]))):V("",!0),(m(!0),_(re,null,ie(Q.value,(a,L)=>{var se,ne,oe,le;return m(),_("tr",{key:a.id,class:I(L%2===0?"bg-amber-50":"bg-white")},[t("td",Ze," #"+d(a.id),1),t("td",Ge,d(((se=a.expense_type)==null?void 0:se.display_name)||"N/A"),1),t("td",Je,[t("div",We,[b(x(Ve),{size:16,class:"text-gray-400 mt-1 flex-shrink-0"}),t("span",Ye,d(a.description),1)])]),t("td",De,[t("span",{class:I(["font-semibold",a.expense_type==="expense"?"text-red-600":"text-green-600"])},d(a.expense_type==="expense"?"-":"+")+d(n(a.amount)),3)]),t("td",et,[t("span",{class:I(["px-2 py-1 rounded text-xs font-medium",a.expense_type==="expense"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},d(a.expense_type==="expense"?"Expense":"Income"),3)]),t("td",tt,[t("div",st,[t("div",nt,d(((oe=(ne=a.vendor)==null?void 0:ne.first_name)==null?void 0:oe[0])||"U"),1),t("div",null,[t("p",ot,d(((le=a.vendor)==null?void 0:le.username)||"N/A"),1)])])]),t("td",lt,[t("span",{class:I(["inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs text-white",o(a.status).bg])},[(m(),H(de(o(a.status).icon),{size:12})),P(" "+d(o(a.status).text),1)],2)]),t("td",at,d(r(a.incurred_on)),1),t("td",rt,d(r(a.created_at)),1),t("td",it,[t("div",dt,[t("button",{onClick:ae=>O("view",a),class:"p-2 hover:bg-gray-100 rounded-lg transition",title:"View Details"},[b(x(Ee),{size:18,class:"text-gray-600"})],8,ut),t("button",{onClick:ae=>O("edit",a),class:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Edit"},[b(x(ke),{size:18,class:"text-blue-600"})],8,pt),t("button",{onClick:ae=>te(a.id),class:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Delete"},[b(x(Se),{size:18,class:"text-red-600"})],8,ct)])])],2)}),128))])])])),F.value>1?(m(),_("div",vt,[t("div",xt," Showing "+d((g.value-1)*N+1)+" to "+d(Math.min(g.value*N,U.value.length))+" of "+d(U.value.length)+" expenses ",1),t("div",mt,[t("button",{onClick:e[8]||(e[8]=a=>g.value=Math.max(1,g.value-1)),disabled:g.value===1,class:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition"}," Previous ",8,yt),(m(!0),_(re,null,ie(F.value,a=>(m(),_("button",{key:a,onClick:L=>g.value=a,class:I(["px-4 py-2 rounded-lg transition",g.value===a?"bg-blue-600 text-white":"border hover:bg-gray-50"])},d(a),11,gt))),128)),t("button",{onClick:e[9]||(e[9]=a=>g.value=Math.min(F.value,g.value+1)),disabled:g.value===F.value,class:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition"}," Next ",8,ft)])])):V("",!0)])]),z.value?(m(),_("div",_t,[t("div",bt,[t("div",ht,[t("h2",wt,d(A.value==="create"?"Add New Expense":A.value==="edit"?"Edit Expense":"Expense Details"),1),t("button",{onClick:B,class:"text-gray-500 hover:text-gray-700 transition"},[b(x(Pe),{size:24})])]),t("div",Et,[A.value==="view"?(m(),_("div",kt,[t("div",St,[t("div",null,[e[28]||(e[28]=t("p",{class:"text-sm text-gray-600"}," Expense ID ",-1)),t("p",Ct," #"+d(f.value.id),1)]),t("div",null,[e[29]||(e[29]=t("p",{class:"text-sm text-gray-600"},"Status",-1)),t("div",It,[t("span",{class:I(["inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs text-white",o(f.value.status).bg])},[(m(),H(de(o(f.value.status).icon),{size:12})),P(" "+d(o(f.value.status).text),1)],2)])]),t("div",At,[e[30]||(e[30]=t("p",{class:"text-sm text-gray-600"}," Description ",-1)),t("p",Vt,d(f.value.description),1)]),t("div",null,[e[31]||(e[31]=t("p",{class:"text-sm text-gray-600"},"Amount",-1)),t("p",Pt,d(n(f.value.amount)),1)]),t("div",null,[e[32]||(e[32]=t("p",{class:"text-sm text-gray-600"},"Type",-1)),t("div",Ut,[t("span",{class:I(["px-2 py-1 rounded text-xs font-medium",f.value.expense_type==="expense"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},d(f.value.expense_type==="expense"?"Expense":"Income"),3)])]),t("div",jt,[e[33]||(e[33]=t("p",{class:"text-sm text-gray-600 mb-2"}," Vendor Information ",-1)),t("div",Mt,[t("p",$t,d(((j=f.value.vendor)==null?void 0:j.name)||"N/A"),1)])]),t("div",null,[e[34]||(e[34]=t("p",{class:"text-sm text-gray-600"}," Created Date ",-1)),t("p",qt,d(r(f.value.created_at)),1)]),t("div",null,[e[35]||(e[35]=t("p",{class:"text-sm text-gray-600"}," Last Updated ",-1)),t("p",Tt,d(r(f.value.updated_at)),1)])])])):(m(),_("form",{key:1,onSubmit:e[19]||(e[19]=ge(a=>A.value==="create"?D():ee(),["prevent"])),class:"space-y-4"},[y.value.submit?(m(),_("div",zt,d(y.value.submit),1)):V("",!0),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-red-600 mb-1"},"Expense",-1)),b(v,{modelValue:c.value.expense_type_id,"onUpdate:modelValue":e[10]||(e[10]=a=>c.value.expense_type_id=a),items:x(k).types&&x(k).types.data?x(k).types.data:x(k).types,"item-title":"display_name","item-value":"id",clearable:"",dense:"",outlined:"",placeholder:"Search expenses...",class:"w-full",autocomplete:""},null,8,["modelValue","items"])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium mb-2"},[P(" Description "),t("span",{class:"text-red-500"},"*")],-1)),M(t("textarea",{class:I(["w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",y.value.description?"border-red-500":""]),rows:"3",formData:"","onUpdate:modelValue":e[11]||(e[11]=a=>c.value.description=a),onInput:e[12]||(e[12]=a=>l("description")),placeholder:"Enter expense description"},null,34),[[J,c.value.description]]),y.value.description?(m(),_("p",Ft,d(y.value.description),1)):V("",!0)]),t("div",Bt,[t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium mb-2"},[P(" Amount (KES) "),t("span",{class:"text-red-500"},"*")],-1)),M(t("input",{type:"number",step:"0.01",min:"0",class:I(["w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",y.value.amount?"border-red-500":""]),"onUpdate:modelValue":e[13]||(e[13]=a=>c.value.amount=a),onInput:e[14]||(e[14]=a=>l("amount")),placeholder:"0.00"},null,34),[[J,c.value.amount]]),y.value.amount?(m(),_("p",Lt,d(y.value.amount),1)):V("",!0)]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium mb-2"},[P(" Type "),t("span",{class:"text-red-500"},"*")],-1)),M(t("select",{class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":e[15]||(e[15]=a=>c.value.expense_type=a)},e[39]||(e[39]=[t("option",{value:"expense"},"Expense",-1),t("option",{value:"income"},"Income",-1)]),512),[[K,c.value.expense_type]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium mb-2"},"Vendor ",-1)),b(E,{modelValue:c.value.vendor_id,"onUpdate:modelValue":e[16]||(e[16]=a=>c.value.vendor_id=a),items:R.value,"item-title":"name","item-value":"id",label:"Vendor","prepend-inner-icon":"mdi-domain",variant:"outlined",density:"comfortable"},null,8,["modelValue","items"])]),t("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium mb-2"},"Status",-1)),M(t("select",{class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none","onUpdate:modelValue":e[17]||(e[17]=a=>c.value.status=a)},e[42]||(e[42]=[t("option",{value:"not_applied"}," Not Applied ",-1),t("option",{value:"applied"},"Applied",-1),t("option",{value:"approved"}," Approved ",-1),t("option",{value:"rejected"}," Rejected ",-1)]),512),[[K,c.value.status]])]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium mb-2"}," Incurred On (Optional) ",-1)),b(C,{modelValue:c.value.incurred_on,"onUpdate:modelValue":e[18]||(e[18]=a=>c.value.incurred_on=a),label:"Incurred On",type:"date","prepend-inner-icon":"mdi-calendar-clock",variant:"outlined",density:"comfortable"},null,8,["modelValue"]),y.value.incurred_on?(m(),_("p",Nt,d(y.value.incurred_on),1)):V("",!0)])]),t("div",Rt,[t("button",{type:"button",onClick:B,disabled:x(i).loading,class:"px-4 py-2 border rounded-lg hover:bg-gray-50 transition disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,Ot),t("button",{type:"submit",disabled:x(i).loading,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[x(i).loading?(m(),H(x(ce),{key:0,class:"animate-spin",size:16})):V("",!0),P(" "+d(A.value==="create"?"Create Expense":"Update Expense"),1)],8,Ht)])],32))])])])):V("",!0)])]}),_:1})}}},ls=he(Kt,[["__scopeId","data-v-4c0dad1f"]]);export{ls as default};
