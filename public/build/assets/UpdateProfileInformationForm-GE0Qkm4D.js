import{x as F,r as f,k as j,c as V,o as m,w as n,b as s,u as t,f as i,n as z,d as p,e as h,a as r,A as v,K as k,V as A,y as b,S as D,F as L,g as M,t as R,C as q,W as T}from"./app-CAy57pox.js";import{_ as W}from"./ActionMessage-TEb2CRN_.js";import{_ as K}from"./FormSection-CU7keOxT.js";import{a as _,_ as C}from"./TextInput-C0QQ3xI3.js";import{_ as g}from"./InputLabel-SIoYX1LT.js";import{_ as O}from"./PrimaryButton-Cz4dnCJ9.js";import{_ as x}from"./SecondaryButton-YPb97zv1.js";import"./SectionTitle-ClcvH6m4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={key:0,class:"col-span-6 sm:col-span-4"},G={class:"mt-2"},H=["src","alt"],J={class:"mt-2"},Q={class:"col-span-6 sm:col-span-4"},X={class:"col-span-6 sm:col-span-4"},Z={key:0},ee={class:"text-sm mt-2"},oe={class:"mt-2 font-medium text-sm text-green-600"},se={class:"col-span-6 sm:col-span-4"},te=["value"],fe={__name:"UpdateProfileInformationForm",props:{user:Object},setup(d){const y=d,o=F({_method:"PUT",name:y.user.name,email:y.user.email,country_id:y.user.country_id,photo:null}),S=f(null),c=f(null),u=f(null),$=()=>{u.value&&(o.photo=u.value.files[0]),o.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>w()})},I=()=>{S.value=!0},N=()=>{u.value.click()},U=()=>{const a=u.value.files[0];if(!a)return;const e=new FileReader;e.onload=l=>{c.value=l.target.result},e.readAsDataURL(a)},B=()=>{T.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{c.value=null,w()}})},w=()=>{var a;(a=u.value)!=null&&a.value&&(u.value.value=null)},P=f([]),E=async()=>{try{const a=await axios.get("/api/v1/countries");P.value=a.data.data}catch(a){console.error("Error fetching countries:",a)}};return j(()=>{E()}),(a,e)=>(m(),V(K,{onSubmitted:$},{title:n(()=>e[3]||(e[3]=[i(" Profile Information ")])),description:n(()=>e[4]||(e[4]=[i(" Update your account's profile information and email address. ")])),form:n(()=>[a.$page.props.jetstream.managesProfilePhotos?(m(),p("div",Y,[r("input",{id:"photo",ref_key:"photoInput",ref:u,type:"file",class:"hidden",onChange:U},null,544),s(g,{for:"photo",value:"Photo"}),v(r("div",G,[r("img",{src:d.user.profile_photo_url,alt:d.user.name,class:"rounded-full size-20 object-cover"},null,8,H)],512),[[k,!c.value]]),v(r("div",J,[r("span",{class:"block rounded-full size-20 bg-cover bg-no-repeat bg-center",style:A("background-image: url('"+c.value+"');")},null,4)],512),[[k,c.value]]),s(x,{class:"mt-2 me-2",type:"button",onClick:b(N,["prevent"])},{default:n(()=>e[5]||(e[5]=[i(" Select A New Photo ")])),_:1,__:[5]}),d.user.profile_photo_path?(m(),V(x,{key:0,type:"button",class:"mt-2",onClick:b(B,["prevent"])},{default:n(()=>e[6]||(e[6]=[i(" Remove Photo ")])),_:1,__:[6]})):h("",!0),s(_,{message:t(o).errors.photo,class:"mt-2"},null,8,["message"])])):h("",!0),r("div",Q,[s(g,{for:"name",value:"Name"}),s(C,{id:"name",modelValue:t(o).name,"onUpdate:modelValue":e[0]||(e[0]=l=>t(o).name=l),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"name"},null,8,["modelValue"]),s(_,{message:t(o).errors.name,class:"mt-2"},null,8,["message"])]),r("div",X,[s(g,{for:"email",value:"Email"}),s(C,{id:"email",modelValue:t(o).email,"onUpdate:modelValue":e[1]||(e[1]=l=>t(o).email=l),type:"email",class:"mt-1 block w-full",required:"",autocomplete:"username"},null,8,["modelValue"]),s(_,{message:t(o).errors.email,class:"mt-2"},null,8,["message"]),a.$page.props.jetstream.hasEmailVerification&&d.user.email_verified_at===null?(m(),p("div",Z,[r("p",ee,[e[8]||(e[8]=i(" Your email address is unverified. ")),s(t(D),{href:a.route("verification.send"),method:"post",as:"button",class:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:b(I,["prevent"])},{default:n(()=>e[7]||(e[7]=[i(" Click here to re-send the verification email. ")])),_:1,__:[7]},8,["href"])]),v(r("div",oe," A new verification link has been sent to your email address. ",512),[[k,S.value]])])):h("",!0)]),r("div",se,[s(g,{for:"country_id",value:"Country"}),v(r("select",{id:"country_id","onUpdate:modelValue":e[2]||(e[2]=l=>t(o).country_id=l),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[9]||(e[9]=r("option",{value:""},"Select a country",-1)),(m(!0),p(L,null,M(P.value,l=>(m(),p("option",{key:l.id,value:l.id},R(l.name),9,te))),128))],512),[[q,t(o).country_id]]),s(_,{message:t(o).errors.country_id,class:"mt-2"},null,8,["message"])])]),actions:n(()=>[s(W,{on:t(o).recentlySuccessful,class:"me-3"},{default:n(()=>e[10]||(e[10]=[i(" Saved. ")])),_:1,__:[10]},8,["on"]),s(O,{class:z({"opacity-25":t(o).processing}),disabled:t(o).processing},{default:n(()=>e[11]||(e[11]=[i(" Save ")])),_:1,__:[11]},8,["class","disabled"])]),_:1}))}};export{fe as default};
